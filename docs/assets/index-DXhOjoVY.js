var ym=Object.defineProperty;var _m=(t,e,n)=>e in t?ym(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>_m(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wd={exports:{}},Is={},Sd={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),wm=Symbol.for("react.portal"),Sm=Symbol.for("react.fragment"),Tm=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Pm=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Om=Symbol.for("react.lazy"),Sc=Symbol.iterator;function Nm(t){return t===null||typeof t!="object"?null:(t=Sc&&t[Sc]||t["@@iterator"],typeof t=="function"?t:null)}var Td={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Id=Object.assign,xd={};function Ur(t,e,n){this.props=t,this.context=e,this.refs=xd,this.updater=n||Td}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ur.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cd(){}Cd.prototype=Ur.prototype;function Qa(t,e,n){this.props=t,this.context=e,this.refs=xd,this.updater=n||Td}var Ka=Qa.prototype=new Cd;Ka.constructor=Qa;Id(Ka,Ur.prototype);Ka.isPureReactComponent=!0;var Tc=Array.isArray,Pd=Object.prototype.hasOwnProperty,Ya={current:null},Ld={key:!0,ref:!0,__self:!0,__source:!0};function Ad(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Pd.call(e,r)&&!Ld.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Hi,type:t,key:o,ref:s,props:i,_owner:Ya.current}}function Rm(t,e){return{$$typeof:Hi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qa(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hi}function km(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ic=/\/+/g;function Xs(t,e){return typeof t=="object"&&t!==null&&t.key!=null?km(""+t.key):e.toString(36)}function Lo(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hi:case wm:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Xs(s,0):r,Tc(i)?(n="",t!=null&&(n=t.replace(Ic,"$&/")+"/"),Lo(i,e,n,"",function(c){return c})):i!=null&&(qa(i)&&(i=Rm(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ic,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Tc(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Xs(o,l);s+=Lo(o,e,n,u,i)}else if(u=Nm(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Xs(o,l++),s+=Lo(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function so(t,e,n){if(t==null)return t;var r=[],i=0;return Lo(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Mm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ke={current:null},Ao={transition:null},Dm={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:Ao,ReactCurrentOwner:Ya};function Od(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:so,forEach:function(t,e,n){so(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return so(t,function(){e++}),e},toArray:function(t){return so(t,function(e){return e})||[]},only:function(t){if(!qa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=Ur;V.Fragment=Sm;V.Profiler=Im;V.PureComponent=Qa;V.StrictMode=Tm;V.Suspense=Lm;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dm;V.act=Od;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Id({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ya.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Pd.call(e,u)&&!Ld.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Hi,type:t.type,key:i,ref:o,props:r,_owner:s}};V.createContext=function(t){return t={$$typeof:Cm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xm,_context:t},t.Consumer=t};V.createElement=Ad;V.createFactory=function(t){var e=Ad.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Pm,render:t}};V.isValidElement=qa;V.lazy=function(t){return{$$typeof:Om,_payload:{_status:-1,_result:t},_init:Mm}};V.memo=function(t,e){return{$$typeof:Am,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Ao.transition;Ao.transition={};try{t()}finally{Ao.transition=e}};V.unstable_act=Od;V.useCallback=function(t,e){return ke.current.useCallback(t,e)};V.useContext=function(t){return ke.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return ke.current.useDeferredValue(t)};V.useEffect=function(t,e){return ke.current.useEffect(t,e)};V.useId=function(){return ke.current.useId()};V.useImperativeHandle=function(t,e,n){return ke.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return ke.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return ke.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return ke.current.useMemo(t,e)};V.useReducer=function(t,e,n){return ke.current.useReducer(t,e,n)};V.useRef=function(t){return ke.current.useRef(t)};V.useState=function(t){return ke.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return ke.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return ke.current.useTransition()};V.version="18.3.1";Sd.exports=V;var R=Sd.exports;const zm=Em(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=R,Um=Symbol.for("react.element"),Wm=Symbol.for("react.fragment"),Bm=Object.prototype.hasOwnProperty,Vm=Fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jm={key:!0,ref:!0,__self:!0,__source:!0};function Nd(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Bm.call(e,r)&&!jm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Um,type:t,key:o,ref:s,props:i,_owner:Vm.current}}Is.Fragment=Wm;Is.jsx=Nd;Is.jsxs=Nd;wd.exports=Is;var M=wd.exports,Ol={},Rd={exports:{}},be={},kd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,F){var W=A.length;A.push(F);e:for(;0<W;){var oe=W-1>>>1,ce=A[oe];if(0<i(ce,F))A[oe]=F,A[W]=ce,W=oe;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var F=A[0],W=A.pop();if(W!==F){A[0]=W;e:for(var oe=0,ce=A.length,io=ce>>>1;oe<io;){var wn=2*(oe+1)-1,qs=A[wn],Sn=wn+1,oo=A[Sn];if(0>i(qs,W))Sn<ce&&0>i(oo,qs)?(A[oe]=oo,A[Sn]=W,oe=Sn):(A[oe]=qs,A[wn]=W,oe=wn);else if(Sn<ce&&0>i(oo,W))A[oe]=oo,A[Sn]=W,oe=Sn;else break e}}return F}function i(A,F){var W=A.sortIndex-F.sortIndex;return W!==0?W:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,v=!1,_=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=A)r(c),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(c)}}function E(A){if(y=!1,m(A),!_)if(n(u)!==null)_=!0,Ks(I);else{var F=n(c);F!==null&&Ys(E,F.startTime-A)}}function I(A,F){_=!1,y&&(y=!1,g(N),N=-1),v=!0;var W=h;try{for(m(F),d=n(u);d!==null&&(!(d.expirationTime>F)||A&&!Be());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var ce=oe(d.expirationTime<=F);F=t.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(u)&&r(u),m(F)}else r(u);d=n(u)}if(d!==null)var io=!0;else{var wn=n(c);wn!==null&&Ys(E,wn.startTime-F),io=!1}return io}finally{d=null,h=W,v=!1}}var C=!1,L=null,N=-1,G=5,k=-1;function Be(){return!(t.unstable_now()-k<G)}function Hr(){if(L!==null){var A=t.unstable_now();k=A;var F=!0;try{F=L(!0,A)}finally{F?br():(C=!1,L=null)}}else C=!1}var br;if(typeof p=="function")br=function(){p(Hr)};else if(typeof MessageChannel<"u"){var wc=new MessageChannel,vm=wc.port2;wc.port1.onmessage=Hr,br=function(){vm.postMessage(null)}}else br=function(){T(Hr,0)};function Ks(A){L=A,C||(C=!0,br())}function Ys(A,F){N=T(function(){A(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,Ks(I))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var W=h;h=F;try{return A()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=h;h=A;try{return F()}finally{h=W}},t.unstable_scheduleCallback=function(A,F,W){var oe=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?oe+W:oe):W=oe,A){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=W+ce,A={id:f++,callback:F,priorityLevel:A,startTime:W,expirationTime:ce,sortIndex:-1},W>oe?(A.sortIndex=W,e(c,A),n(u)===null&&A===n(c)&&(y?(g(N),N=-1):y=!0,Ys(E,W-oe))):(A.sortIndex=ce,e(u,A),_||v||(_=!0,Ks(I))),A},t.unstable_shouldYield=Be,t.unstable_wrapCallback=function(A){var F=h;return function(){var W=h;h=F;try{return A.apply(this,arguments)}finally{h=W}}}})(Md);kd.exports=Md;var $m=kd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm=R,Ge=$m;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dd=new Set,wi={};function Vn(t,e){Er(t,e),Er(t+"Capture",e)}function Er(t,e){for(wi[t]=e,t=0;t<e.length;t++)Dd.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nl=Object.prototype.hasOwnProperty,Hm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xc={},Cc={};function bm(t){return Nl.call(Cc,t)?!0:Nl.call(xc,t)?!1:Hm.test(t)?Cc[t]=!0:(xc[t]=!0,!1)}function Qm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Km(t,e,n,r){if(e===null||typeof e>"u"||Qm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Me(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Me(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Me(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Me(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Me(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Me(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Me(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Me(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Me(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Me(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xa=/[\-:]([a-z])/g;function Ja(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xa,Ja);Se[e]=new Me(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xa,Ja);Se[e]=new Me(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xa,Ja);Se[e]=new Me(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Me(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Me(t,1,!1,t.toLowerCase(),null,!0,!0)});function Za(t,e,n,r){var i=Se.hasOwnProperty(e)?Se[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Km(e,n,i,r)&&(n=null),r||i===null?bm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bt=Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lo=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),zd=Symbol.for("react.provider"),Fd=Symbol.for("react.context"),tu=Symbol.for("react.forward_ref"),kl=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),nu=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Ud=Symbol.for("react.offscreen"),Pc=Symbol.iterator;function Kr(t){return t===null||typeof t!="object"?null:(t=Pc&&t[Pc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,Js;function ii(t){if(Js===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Js=e&&e[1]||""}return`
`+Js+t}var Zs=!1;function el(t,e){if(!t||Zs)return"";Zs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{Zs=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ii(t):""}function Ym(t){switch(t.tag){case 5:return ii(t.type);case 16:return ii("Lazy");case 13:return ii("Suspense");case 19:return ii("SuspenseList");case 0:case 2:case 15:return t=el(t.type,!1),t;case 11:return t=el(t.type.render,!1),t;case 1:return t=el(t.type,!0),t;default:return""}}function Dl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Jn:return"Portal";case Rl:return"Profiler";case eu:return"StrictMode";case kl:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fd:return(t.displayName||"Context")+".Consumer";case zd:return(t._context.displayName||"Context")+".Provider";case tu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nu:return e=t.displayName||null,e!==null?e:Dl(t.type)||"Memo";case Kt:e=t._payload,t=t._init;try{return Dl(t(e))}catch{}}return null}function qm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dl(e);case 8:return e===eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xm(t){var e=Wd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ao(t){t._valueTracker||(t._valueTracker=Xm(t))}function Bd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Go(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zl(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vd(t,e){e=e.checked,e!=null&&Za(t,"checked",e,!1)}function Fl(t,e){Vd(t,e);var n=fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ul(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ul(t,e.type,fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ac(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ul(t,e,n){(e!=="number"||Go(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oi=Array.isArray;function hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Oc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(oi(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fn(n)}}function jd(t,e){var n=fn(e.value),r=fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $d(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$d(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uo,Gd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Si(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jm=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){Jm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ui[e]=ui[t]})});function Hd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ui.hasOwnProperty(t)&&ui[t]?(""+e).trim():e+"px"}function bd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Zm=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(t,e){if(e){if(Zm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function jl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $l=null;function ru(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gl=null,pr=null,gr=null;function Rc(t){if(t=Ki(t)){if(typeof Gl!="function")throw Error(S(280));var e=t.stateNode;e&&(e=As(e),Gl(t.stateNode,t.type,e))}}function Qd(t){pr?gr?gr.push(t):gr=[t]:pr=t}function Kd(){if(pr){var t=pr,e=gr;if(gr=pr=null,Rc(t),e)for(t=0;t<e.length;t++)Rc(e[t])}}function Yd(t,e){return t(e)}function qd(){}var tl=!1;function Xd(t,e,n){if(tl)return t(e,n);tl=!0;try{return Yd(t,e,n)}finally{tl=!1,(pr!==null||gr!==null)&&(qd(),Kd())}}function Ti(t,e){var n=t.stateNode;if(n===null)return null;var r=As(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Hl=!1;if(Ft)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Hl=!1}function e0(t,e,n,r,i,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ci=!1,Ho=null,bo=!1,bl=null,t0={onError:function(t){ci=!0,Ho=t}};function n0(t,e,n,r,i,o,s,l,u){ci=!1,Ho=null,e0.apply(t0,arguments)}function r0(t,e,n,r,i,o,s,l,u){if(n0.apply(this,arguments),ci){if(ci){var c=Ho;ci=!1,Ho=null}else throw Error(S(198));bo||(bo=!0,bl=c)}}function jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kc(t){if(jn(t)!==t)throw Error(S(188))}function i0(t){var e=t.alternate;if(!e){if(e=jn(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return kc(i),t;if(o===r)return kc(i),e;o=o.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function Zd(t){return t=i0(t),t!==null?eh(t):null}function eh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eh(t);if(e!==null)return e;t=t.sibling}return null}var th=Ge.unstable_scheduleCallback,Mc=Ge.unstable_cancelCallback,o0=Ge.unstable_shouldYield,s0=Ge.unstable_requestPaint,se=Ge.unstable_now,l0=Ge.unstable_getCurrentPriorityLevel,iu=Ge.unstable_ImmediatePriority,nh=Ge.unstable_UserBlockingPriority,Qo=Ge.unstable_NormalPriority,a0=Ge.unstable_LowPriority,rh=Ge.unstable_IdlePriority,xs=null,Tt=null;function u0(t){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(xs,t,void 0,(t.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:d0,c0=Math.log,f0=Math.LN2;function d0(t){return t>>>=0,t===0?32:31-(c0(t)/f0|0)|0}var co=64,fo=4194304;function si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ko(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=si(l):(o&=s,o!==0&&(r=si(o)))}else s=n&~i,s!==0?r=si(s):o!==0&&(r=si(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ut(e),i=1<<n,r|=t[n],e&=~i;return r}function h0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ut(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=h0(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Ql(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ih(){var t=co;return co<<=1,!(co&4194240)&&(co=64),t}function nl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ut(e),t[e]=n}function g0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ut(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ou(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Q=0;function oh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sh,su,lh,ah,uh,Kl=!1,ho=[],nn=null,rn=null,on=null,Ii=new Map,xi=new Map,Xt=[],m0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dc(t,e){switch(t){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(e.pointerId)}}function qr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ki(e),e!==null&&su(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function v0(t,e,n,r,i){switch(e){case"focusin":return nn=qr(nn,t,e,n,r,i),!0;case"dragenter":return rn=qr(rn,t,e,n,r,i),!0;case"mouseover":return on=qr(on,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ii.set(o,qr(Ii.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xi.set(o,qr(xi.get(o)||null,t,e,n,r,i)),!0}return!1}function ch(t){var e=Pn(t.target);if(e!==null){var n=jn(e);if(n!==null){if(e=n.tag,e===13){if(e=Jd(n),e!==null){t.blockedOn=e,uh(t.priority,function(){lh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$l=r,n.target.dispatchEvent(r),$l=null}else return e=Ki(n),e!==null&&su(e),t.blockedOn=n,!1;e.shift()}return!0}function zc(t,e,n){Oo(t)&&n.delete(e)}function y0(){Kl=!1,nn!==null&&Oo(nn)&&(nn=null),rn!==null&&Oo(rn)&&(rn=null),on!==null&&Oo(on)&&(on=null),Ii.forEach(zc),xi.forEach(zc)}function Xr(t,e){t.blockedOn===e&&(t.blockedOn=null,Kl||(Kl=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,y0)))}function Ci(t){function e(i){return Xr(i,t)}if(0<ho.length){Xr(ho[0],t);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nn!==null&&Xr(nn,t),rn!==null&&Xr(rn,t),on!==null&&Xr(on,t),Ii.forEach(e),xi.forEach(e),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)ch(n),n.blockedOn===null&&Xt.shift()}var mr=bt.ReactCurrentBatchConfig,Yo=!0;function _0(t,e,n,r){var i=Q,o=mr.transition;mr.transition=null;try{Q=1,lu(t,e,n,r)}finally{Q=i,mr.transition=o}}function E0(t,e,n,r){var i=Q,o=mr.transition;mr.transition=null;try{Q=4,lu(t,e,n,r)}finally{Q=i,mr.transition=o}}function lu(t,e,n,r){if(Yo){var i=Yl(t,e,n,r);if(i===null)dl(t,e,r,qo,n),Dc(t,r);else if(v0(i,t,e,n,r))r.stopPropagation();else if(Dc(t,r),e&4&&-1<m0.indexOf(t)){for(;i!==null;){var o=Ki(i);if(o!==null&&sh(o),o=Yl(t,e,n,r),o===null&&dl(t,e,r,qo,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else dl(t,e,r,null,n)}}var qo=null;function Yl(t,e,n,r){if(qo=null,t=ru(r),t=Pn(t),t!==null)if(e=jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qo=t,null}function fh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l0()){case iu:return 1;case nh:return 4;case Qo:case a0:return 16;case rh:return 536870912;default:return 16}default:return 16}}var Zt=null,au=null,No=null;function dh(){if(No)return No;var t,e=au,n=e.length,r,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return No=i.slice(t,1<r?1-r:void 0)}function Ro(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function po(){return!0}function Fc(){return!1}function Qe(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?po:Fc,this.isPropagationStopped=Fc,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),e}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=Qe(Wr),Qi=re({},Wr,{view:0,detail:0}),w0=Qe(Qi),rl,il,Jr,Cs=re({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jr&&(Jr&&t.type==="mousemove"?(rl=t.screenX-Jr.screenX,il=t.screenY-Jr.screenY):il=rl=0,Jr=t),rl)},movementY:function(t){return"movementY"in t?t.movementY:il}}),Uc=Qe(Cs),S0=re({},Cs,{dataTransfer:0}),T0=Qe(S0),I0=re({},Qi,{relatedTarget:0}),ol=Qe(I0),x0=re({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),C0=Qe(x0),P0=re({},Wr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),L0=Qe(P0),A0=re({},Wr,{data:0}),Wc=Qe(A0),O0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R0[t])?!!e[t]:!1}function cu(){return k0}var M0=re({},Qi,{key:function(t){if(t.key){var e=O0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ro(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(t){return t.type==="keypress"?Ro(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ro(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D0=Qe(M0),z0=re({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=Qe(z0),F0=re({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),U0=Qe(F0),W0=re({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=Qe(W0),V0=re({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=Qe(V0),$0=[9,13,27,32],fu=Ft&&"CompositionEvent"in window,fi=null;Ft&&"documentMode"in document&&(fi=document.documentMode);var G0=Ft&&"TextEvent"in window&&!fi,hh=Ft&&(!fu||fi&&8<fi&&11>=fi),Vc=" ",jc=!1;function ph(t,e){switch(t){case"keyup":return $0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function H0(t,e){switch(t){case"compositionend":return gh(e);case"keypress":return e.which!==32?null:(jc=!0,Vc);case"textInput":return t=e.data,t===Vc&&jc?null:t;default:return null}}function b0(t,e){if(er)return t==="compositionend"||!fu&&ph(t,e)?(t=dh(),No=au=Zt=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hh&&e.locale!=="ko"?null:e.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q0[t.type]:e==="textarea"}function mh(t,e,n,r){Qd(r),e=Xo(e,"onChange"),0<e.length&&(n=new uu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var di=null,Pi=null;function K0(t){Ph(t,0)}function Ps(t){var e=rr(t);if(Bd(e))return t}function Y0(t,e){if(t==="change")return e}var vh=!1;if(Ft){var sl;if(Ft){var ll="oninput"in document;if(!ll){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),ll=typeof Gc.oninput=="function"}sl=ll}else sl=!1;vh=sl&&(!document.documentMode||9<document.documentMode)}function Hc(){di&&(di.detachEvent("onpropertychange",yh),Pi=di=null)}function yh(t){if(t.propertyName==="value"&&Ps(Pi)){var e=[];mh(e,Pi,t,ru(t)),Xd(K0,e)}}function q0(t,e,n){t==="focusin"?(Hc(),di=e,Pi=n,di.attachEvent("onpropertychange",yh)):t==="focusout"&&Hc()}function X0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ps(Pi)}function J0(t,e){if(t==="click")return Ps(e)}function Z0(t,e){if(t==="input"||t==="change")return Ps(e)}function ev(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:ev;function Li(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nl.call(e,i)||!ht(t[i],e[i]))return!1}return!0}function bc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qc(t,e){var n=bc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bc(n)}}function _h(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_h(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Eh(){for(var t=window,e=Go();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Go(t.document)}return e}function du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tv(t){var e=Eh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_h(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Qc(n,o);var s=Qc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nv=Ft&&"documentMode"in document&&11>=document.documentMode,tr=null,ql=null,hi=null,Xl=!1;function Kc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xl||tr==null||tr!==Go(r)||(r=tr,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hi&&Li(hi,r)||(hi=r,r=Xo(ql,"onSelect"),0<r.length&&(e=new uu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tr)))}function go(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nr={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionend:go("Transition","TransitionEnd")},al={},wh={};Ft&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function Ls(t){if(al[t])return al[t];if(!nr[t])return t;var e=nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wh)return al[t]=e[n];return t}var Sh=Ls("animationend"),Th=Ls("animationiteration"),Ih=Ls("animationstart"),xh=Ls("transitionend"),Ch=new Map,Yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(t,e){Ch.set(t,e),Vn(e,[t])}for(var ul=0;ul<Yc.length;ul++){var cl=Yc[ul],rv=cl.toLowerCase(),iv=cl[0].toUpperCase()+cl.slice(1);vn(rv,"on"+iv)}vn(Sh,"onAnimationEnd");vn(Th,"onAnimationIteration");vn(Ih,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(xh,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ov=new Set("cancel close invalid load scroll toggle".split(" ").concat(li));function qc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,r0(r,e,void 0,t),t.currentTarget=null}function Ph(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;qc(i,l,c),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;qc(i,l,c),o=u}}}if(bo)throw t=bl,bo=!1,bl=null,t}function X(t,e){var n=e[na];n===void 0&&(n=e[na]=new Set);var r=t+"__bubble";n.has(r)||(Lh(e,t,2,!1),n.add(r))}function fl(t,e,n){var r=0;e&&(r|=4),Lh(n,t,r,e)}var mo="_reactListening"+Math.random().toString(36).slice(2);function Ai(t){if(!t[mo]){t[mo]=!0,Dd.forEach(function(n){n!=="selectionchange"&&(ov.has(n)||fl(n,!1,t),fl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mo]||(e[mo]=!0,fl("selectionchange",!1,e))}}function Lh(t,e,n,r){switch(fh(e)){case 1:var i=_0;break;case 4:i=E0;break;default:i=lu}n=i.bind(null,e,n,t),i=void 0,!Hl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function dl(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Pn(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Xd(function(){var c=o,f=ru(n),d=[];e:{var h=Ch.get(t);if(h!==void 0){var v=uu,_=t;switch(t){case"keypress":if(Ro(n)===0)break e;case"keydown":case"keyup":v=D0;break;case"focusin":_="focus",v=ol;break;case"focusout":_="blur",v=ol;break;case"beforeblur":case"afterblur":v=ol;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=T0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=U0;break;case Sh:case Th:case Ih:v=C0;break;case xh:v=B0;break;case"scroll":v=w0;break;case"wheel":v=j0;break;case"copy":case"cut":case"paste":v=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Bc}var y=(e&4)!==0,T=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=c,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Ti(p,g),E!=null&&y.push(Oi(p,E,m)))),T)break;p=p.return}0<y.length&&(h=new v(h,_,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==$l&&(_=n.relatedTarget||n.fromElement)&&(Pn(_)||_[Ut]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?Pn(_):null,_!==null&&(T=jn(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(y=Uc,E="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Bc,E="onPointerLeave",g="onPointerEnter",p="pointer"),T=v==null?h:rr(v),m=_==null?h:rr(_),h=new y(E,p+"leave",v,n,f),h.target=T,h.relatedTarget=m,E=null,Pn(f)===c&&(y=new y(g,p+"enter",_,n,f),y.target=m,y.relatedTarget=T,E=y),T=E,v&&_)t:{for(y=v,g=_,p=0,m=y;m;m=Qn(m))p++;for(m=0,E=g;E;E=Qn(E))m++;for(;0<p-m;)y=Qn(y),p--;for(;0<m-p;)g=Qn(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Qn(y),g=Qn(g)}y=null}else y=null;v!==null&&Xc(d,h,v,y,!1),_!==null&&T!==null&&Xc(d,T,_,y,!0)}}e:{if(h=c?rr(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var I=Y0;else if($c(h))if(vh)I=Z0;else{I=X0;var C=q0}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=J0);if(I&&(I=I(t,c))){mh(d,I,n,f);break e}C&&C(t,h,c),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Ul(h,"number",h.value)}switch(C=c?rr(c):window,t){case"focusin":($c(C)||C.contentEditable==="true")&&(tr=C,ql=c,hi=null);break;case"focusout":hi=ql=tr=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,Kc(d,n,f);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":Kc(d,n,f)}var L;if(fu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else er?ph(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(hh&&n.locale!=="ko"&&(er||N!=="onCompositionStart"?N==="onCompositionEnd"&&er&&(L=dh()):(Zt=f,au="value"in Zt?Zt.value:Zt.textContent,er=!0)),C=Xo(c,N),0<C.length&&(N=new Wc(N,t,null,n,f),d.push({event:N,listeners:C}),L?N.data=L:(L=gh(n),L!==null&&(N.data=L)))),(L=G0?H0(t,n):b0(t,n))&&(c=Xo(c,"onBeforeInput"),0<c.length&&(f=new Wc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=L))}Ph(d,e)})}function Oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ti(t,n),o!=null&&r.unshift(Oi(t,o,i)),o=Ti(t,e),o!=null&&r.push(Oi(t,o,i))),t=t.return}return r}function Qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xc(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ti(n,o),u!=null&&s.unshift(Oi(n,u,l))):i||(u=Ti(n,o),u!=null&&s.push(Oi(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var sv=/\r\n?/g,lv=/\u0000|\uFFFD/g;function Jc(t){return(typeof t=="string"?t:""+t).replace(sv,`
`).replace(lv,"")}function vo(t,e,n){if(e=Jc(e),Jc(t)!==e&&n)throw Error(S(425))}function Jo(){}var Jl=null,Zl=null;function ea(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ta=typeof setTimeout=="function"?setTimeout:void 0,av=typeof clearTimeout=="function"?clearTimeout:void 0,Zc=typeof Promise=="function"?Promise:void 0,uv=typeof queueMicrotask=="function"?queueMicrotask:typeof Zc<"u"?function(t){return Zc.resolve(null).then(t).catch(cv)}:ta;function cv(t){setTimeout(function(){throw t})}function hl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ci(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ef(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Br=Math.random().toString(36).slice(2),_t="__reactFiber$"+Br,Ni="__reactProps$"+Br,Ut="__reactContainer$"+Br,na="__reactEvents$"+Br,fv="__reactListeners$"+Br,dv="__reactHandles$"+Br;function Pn(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ef(t);t!==null;){if(n=t[_t])return n;t=ef(t)}return e}t=n,n=t.parentNode}return null}function Ki(t){return t=t[_t]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function As(t){return t[Ni]||null}var ra=[],ir=-1;function yn(t){return{current:t}}function Z(t){0>ir||(t.current=ra[ir],ra[ir]=null,ir--)}function Y(t,e){ir++,ra[ir]=t.current,t.current=e}var dn={},Ce=yn(dn),Fe=yn(!1),kn=dn;function wr(t,e){var n=t.type.contextTypes;if(!n)return dn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(t){return t=t.childContextTypes,t!=null}function Zo(){Z(Fe),Z(Ce)}function tf(t,e,n){if(Ce.current!==dn)throw Error(S(168));Y(Ce,e),Y(Fe,n)}function Ah(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,qm(t)||"Unknown",i));return re({},n,r)}function es(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,kn=Ce.current,Y(Ce,t),Y(Fe,Fe.current),!0}function nf(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=Ah(t,e,kn),r.__reactInternalMemoizedMergedChildContext=t,Z(Fe),Z(Ce),Y(Ce,t)):Z(Fe),Y(Fe,n)}var Nt=null,Os=!1,pl=!1;function Oh(t){Nt===null?Nt=[t]:Nt.push(t)}function hv(t){Os=!0,Oh(t)}function _n(){if(!pl&&Nt!==null){pl=!0;var t=0,e=Q;try{var n=Nt;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nt=null,Os=!1}catch(i){throw Nt!==null&&(Nt=Nt.slice(t+1)),th(iu,_n),i}finally{Q=e,pl=!1}}return null}var or=[],sr=0,ts=null,ns=0,Ke=[],Ye=0,Mn=null,Rt=1,kt="";function In(t,e){or[sr++]=ns,or[sr++]=ts,ts=t,ns=e}function Nh(t,e,n){Ke[Ye++]=Rt,Ke[Ye++]=kt,Ke[Ye++]=Mn,Mn=t;var r=Rt;t=kt;var i=32-ut(r)-1;r&=~(1<<i),n+=1;var o=32-ut(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Rt=1<<32-ut(e)+i|n<<i|r,kt=o+t}else Rt=1<<o|n<<i|r,kt=t}function hu(t){t.return!==null&&(In(t,1),Nh(t,1,0))}function pu(t){for(;t===ts;)ts=or[--sr],or[sr]=null,ns=or[--sr],or[sr]=null;for(;t===Mn;)Mn=Ke[--Ye],Ke[Ye]=null,kt=Ke[--Ye],Ke[Ye]=null,Rt=Ke[--Ye],Ke[Ye]=null}var $e=null,je=null,ee=!1,st=null;function Rh(t,e){var n=Xe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$e=t,je=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$e=t,je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mn!==null?{id:Rt,overflow:kt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$e=t,je=null,!0):!1;default:return!1}}function ia(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oa(t){if(ee){var e=je;if(e){var n=e;if(!rf(t,e)){if(ia(t))throw Error(S(418));e=sn(n.nextSibling);var r=$e;e&&rf(t,e)?Rh(r,n):(t.flags=t.flags&-4097|2,ee=!1,$e=t)}}else{if(ia(t))throw Error(S(418));t.flags=t.flags&-4097|2,ee=!1,$e=t}}}function of(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$e=t}function yo(t){if(t!==$e)return!1;if(!ee)return of(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ea(t.type,t.memoizedProps)),e&&(e=je)){if(ia(t))throw kh(),Error(S(418));for(;e;)Rh(t,e),e=sn(e.nextSibling)}if(of(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){je=sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}je=null}}else je=$e?sn(t.stateNode.nextSibling):null;return!0}function kh(){for(var t=je;t;)t=sn(t.nextSibling)}function Sr(){je=$e=null,ee=!1}function gu(t){st===null?st=[t]:st.push(t)}var pv=bt.ReactCurrentBatchConfig;function Zr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function _o(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sf(t){var e=t._init;return e(t._payload)}function Mh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=cn(g,p),g.index=0,g.sibling=null,g}function o(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,E){return p===null||p.tag!==6?(p=wl(m,g.mode,E),p.return=g,p):(p=i(p,m),p.return=g,p)}function u(g,p,m,E){var I=m.type;return I===Zn?f(g,p,m.props.children,E,m.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Kt&&sf(I)===p.type)?(E=i(p,m.props),E.ref=Zr(g,p,m),E.return=g,E):(E=Wo(m.type,m.key,m.props,null,g.mode,E),E.ref=Zr(g,p,m),E.return=g,E)}function c(g,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Sl(m,g.mode,E),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,E,I){return p===null||p.tag!==7?(p=Rn(m,g.mode,E,I),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=wl(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case lo:return m=Wo(p.type,p.key,p.props,null,g.mode,m),m.ref=Zr(g,null,p),m.return=g,m;case Jn:return p=Sl(p,g.mode,m),p.return=g,p;case Kt:var E=p._init;return d(g,E(p._payload),m)}if(oi(p)||Kr(p))return p=Rn(p,g.mode,m,null),p.return=g,p;_o(g,p)}return null}function h(g,p,m,E){var I=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return I!==null?null:l(g,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case lo:return m.key===I?u(g,p,m,E):null;case Jn:return m.key===I?c(g,p,m,E):null;case Kt:return I=m._init,h(g,p,I(m._payload),E)}if(oi(m)||Kr(m))return I!==null?null:f(g,p,m,E,null);_o(g,m)}return null}function v(g,p,m,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,l(p,g,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lo:return g=g.get(E.key===null?m:E.key)||null,u(p,g,E,I);case Jn:return g=g.get(E.key===null?m:E.key)||null,c(p,g,E,I);case Kt:var C=E._init;return v(g,p,m,C(E._payload),I)}if(oi(E)||Kr(E))return g=g.get(m)||null,f(p,g,E,I,null);_o(p,E)}return null}function _(g,p,m,E){for(var I=null,C=null,L=p,N=p=0,G=null;L!==null&&N<m.length;N++){L.index>N?(G=L,L=null):G=L.sibling;var k=h(g,L,m[N],E);if(k===null){L===null&&(L=G);break}t&&L&&k.alternate===null&&e(g,L),p=o(k,p,N),C===null?I=k:C.sibling=k,C=k,L=G}if(N===m.length)return n(g,L),ee&&In(g,N),I;if(L===null){for(;N<m.length;N++)L=d(g,m[N],E),L!==null&&(p=o(L,p,N),C===null?I=L:C.sibling=L,C=L);return ee&&In(g,N),I}for(L=r(g,L);N<m.length;N++)G=v(L,g,N,m[N],E),G!==null&&(t&&G.alternate!==null&&L.delete(G.key===null?N:G.key),p=o(G,p,N),C===null?I=G:C.sibling=G,C=G);return t&&L.forEach(function(Be){return e(g,Be)}),ee&&In(g,N),I}function y(g,p,m,E){var I=Kr(m);if(typeof I!="function")throw Error(S(150));if(m=I.call(m),m==null)throw Error(S(151));for(var C=I=null,L=p,N=p=0,G=null,k=m.next();L!==null&&!k.done;N++,k=m.next()){L.index>N?(G=L,L=null):G=L.sibling;var Be=h(g,L,k.value,E);if(Be===null){L===null&&(L=G);break}t&&L&&Be.alternate===null&&e(g,L),p=o(Be,p,N),C===null?I=Be:C.sibling=Be,C=Be,L=G}if(k.done)return n(g,L),ee&&In(g,N),I;if(L===null){for(;!k.done;N++,k=m.next())k=d(g,k.value,E),k!==null&&(p=o(k,p,N),C===null?I=k:C.sibling=k,C=k);return ee&&In(g,N),I}for(L=r(g,L);!k.done;N++,k=m.next())k=v(L,g,N,k.value,E),k!==null&&(t&&k.alternate!==null&&L.delete(k.key===null?N:k.key),p=o(k,p,N),C===null?I=k:C.sibling=k,C=k);return t&&L.forEach(function(Hr){return e(g,Hr)}),ee&&In(g,N),I}function T(g,p,m,E){if(typeof m=="object"&&m!==null&&m.type===Zn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case lo:e:{for(var I=m.key,C=p;C!==null;){if(C.key===I){if(I=m.type,I===Zn){if(C.tag===7){n(g,C.sibling),p=i(C,m.props.children),p.return=g,g=p;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Kt&&sf(I)===C.type){n(g,C.sibling),p=i(C,m.props),p.ref=Zr(g,C,m),p.return=g,g=p;break e}n(g,C);break}else e(g,C);C=C.sibling}m.type===Zn?(p=Rn(m.props.children,g.mode,E,m.key),p.return=g,g=p):(E=Wo(m.type,m.key,m.props,null,g.mode,E),E.ref=Zr(g,p,m),E.return=g,g=E)}return s(g);case Jn:e:{for(C=m.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Sl(m,g.mode,E),p.return=g,g=p}return s(g);case Kt:return C=m._init,T(g,p,C(m._payload),E)}if(oi(m))return _(g,p,m,E);if(Kr(m))return y(g,p,m,E);_o(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=wl(m,g.mode,E),p.return=g,g=p),s(g)):n(g,p)}return T}var Tr=Mh(!0),Dh=Mh(!1),rs=yn(null),is=null,lr=null,mu=null;function vu(){mu=lr=is=null}function yu(t){var e=rs.current;Z(rs),t._currentValue=e}function sa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vr(t,e){is=t,mu=lr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ze=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(mu!==t)if(t={context:t,memoizedValue:e,next:null},lr===null){if(is===null)throw Error(S(308));lr=t,is.dependencies={lanes:0,firstContext:t}}else lr=lr.next=t;return e}var Ln=null;function _u(t){Ln===null?Ln=[t]:Ln.push(t)}function zh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_u(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wt(t,r)}function Wt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yt=!1;function Eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wt(t,n)}return i=r.interleaved,i===null?(e.next=e,_u(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wt(t,n)}function ko(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}function lf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function os(t,e,n,r){var i=t.updateQueue;Yt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var d=i.baseState;s=0,f=c=u=null,l=o;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(v,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(v,d,h):_,h==null)break e;d=re({},d,h);break e;case 2:Yt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,u=d):f=f.next=v,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);zn|=s,t.lanes=s,t.memoizedState=d}}function af(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var Yi={},It=yn(Yi),Ri=yn(Yi),ki=yn(Yi);function An(t){if(t===Yi)throw Error(S(174));return t}function wu(t,e){switch(Y(ki,e),Y(Ri,t),Y(It,Yi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bl(e,t)}Z(It),Y(It,e)}function Ir(){Z(It),Z(Ri),Z(ki)}function Uh(t){An(ki.current);var e=An(It.current),n=Bl(e,t.type);e!==n&&(Y(Ri,t),Y(It,n))}function Su(t){Ri.current===t&&(Z(It),Z(Ri))}var te=yn(0);function ss(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gl=[];function Tu(){for(var t=0;t<gl.length;t++)gl[t]._workInProgressVersionPrimary=null;gl.length=0}var Mo=bt.ReactCurrentDispatcher,ml=bt.ReactCurrentBatchConfig,Dn=0,ne=null,ae=null,de=null,ls=!1,pi=!1,Mi=0,gv=0;function Te(){throw Error(S(321))}function Iu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function xu(t,e,n,r,i,o){if(Dn=o,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mo.current=t===null||t.memoizedState===null?_v:Ev,t=n(r,i),pi){o=0;do{if(pi=!1,Mi=0,25<=o)throw Error(S(301));o+=1,de=ae=null,e.updateQueue=null,Mo.current=wv,t=n(r,i)}while(pi)}if(Mo.current=as,e=ae!==null&&ae.next!==null,Dn=0,de=ae=ne=null,ls=!1,e)throw Error(S(300));return t}function Cu(){var t=Mi!==0;return Mi=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ne.memoizedState=de=t:de=de.next=t,de}function et(){if(ae===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=de===null?ne.memoizedState:de.next;if(e!==null)de=e,ae=t;else{if(t===null)throw Error(S(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},de===null?ne.memoizedState=de=t:de=de.next=t}return de}function Di(t,e){return typeof e=="function"?e(t):e}function vl(t){var e=et(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=ae,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((Dn&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,s=r):u=u.next=d,ne.lanes|=f,zn|=f}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=l,ht(r,e.memoizedState)||(ze=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ne.lanes|=o,zn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yl(t){var e=et(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);ht(o,e.memoizedState)||(ze=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Wh(){}function Bh(t,e){var n=ne,r=et(),i=e(),o=!ht(r.memoizedState,i);if(o&&(r.memoizedState=i,ze=!0),r=r.queue,Pu($h.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,zi(9,jh.bind(null,n,r,i,e),void 0,null),he===null)throw Error(S(349));Dn&30||Vh(n,e,i)}return i}function Vh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jh(t,e,n,r){e.value=n,e.getSnapshot=r,Gh(e)&&Hh(t)}function $h(t,e,n){return n(function(){Gh(e)&&Hh(t)})}function Gh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function Hh(t){var e=Wt(t,1);e!==null&&ct(e,t,1,-1)}function uf(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:t},e.queue=t,t=t.dispatch=yv.bind(null,ne,t),[e.memoizedState,t]}function zi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bh(){return et().memoizedState}function Do(t,e,n,r){var i=mt();ne.flags|=t,i.memoizedState=zi(1|e,n,void 0,r===void 0?null:r)}function Ns(t,e,n,r){var i=et();r=r===void 0?null:r;var o=void 0;if(ae!==null){var s=ae.memoizedState;if(o=s.destroy,r!==null&&Iu(r,s.deps)){i.memoizedState=zi(e,n,o,r);return}}ne.flags|=t,i.memoizedState=zi(1|e,n,o,r)}function cf(t,e){return Do(8390656,8,t,e)}function Pu(t,e){return Ns(2048,8,t,e)}function Qh(t,e){return Ns(4,2,t,e)}function Kh(t,e){return Ns(4,4,t,e)}function Yh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qh(t,e,n){return n=n!=null?n.concat([t]):null,Ns(4,4,Yh.bind(null,e,t),n)}function Lu(){}function Xh(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Jh(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zh(t,e,n){return Dn&21?(ht(n,e)||(n=ih(),ne.lanes|=n,zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ze=!0),t.memoizedState=n)}function mv(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=ml.transition;ml.transition={};try{t(!1),e()}finally{Q=n,ml.transition=r}}function ep(){return et().memoizedState}function vv(t,e,n){var r=un(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tp(t))np(e,n);else if(n=zh(t,e,n,r),n!==null){var i=Ne();ct(n,t,r,i),rp(n,e,r)}}function yv(t,e,n){var r=un(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tp(t))np(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,ht(l,s)){var u=e.interleaved;u===null?(i.next=i,_u(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=zh(t,e,i,r),n!==null&&(i=Ne(),ct(n,t,r,i),rp(n,e,r))}}function tp(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function np(t,e){pi=ls=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}var as={readContext:Ze,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},_v={readContext:Ze,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:cf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Do(4194308,4,Yh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){return Do(4,2,t,e)},useMemo:function(t,e){var n=mt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vv.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:uf,useDebugValue:Lu,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=uf(!1),e=t[0];return t=mv.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=mt();if(ee){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),he===null)throw Error(S(349));Dn&30||Vh(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,cf($h.bind(null,r,o,t),[t]),r.flags|=2048,zi(9,jh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=mt(),e=he.identifierPrefix;if(ee){var n=kt,r=Rt;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ev={readContext:Ze,useCallback:Xh,useContext:Ze,useEffect:Pu,useImperativeHandle:qh,useInsertionEffect:Qh,useLayoutEffect:Kh,useMemo:Jh,useReducer:vl,useRef:bh,useState:function(){return vl(Di)},useDebugValue:Lu,useDeferredValue:function(t){var e=et();return Zh(e,ae.memoizedState,t)},useTransition:function(){var t=vl(Di)[0],e=et().memoizedState;return[t,e]},useMutableSource:Wh,useSyncExternalStore:Bh,useId:ep,unstable_isNewReconciler:!1},wv={readContext:Ze,useCallback:Xh,useContext:Ze,useEffect:Pu,useImperativeHandle:qh,useInsertionEffect:Qh,useLayoutEffect:Kh,useMemo:Jh,useReducer:yl,useRef:bh,useState:function(){return yl(Di)},useDebugValue:Lu,useDeferredValue:function(t){var e=et();return ae===null?e.memoizedState=t:Zh(e,ae.memoizedState,t)},useTransition:function(){var t=yl(Di)[0],e=et().memoizedState;return[t,e]},useMutableSource:Wh,useSyncExternalStore:Bh,useId:ep,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function la(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rs={isMounted:function(t){return(t=t._reactInternals)?jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=un(t),o=Mt(r,i);o.payload=e,n!=null&&(o.callback=n),e=ln(t,o,i),e!==null&&(ct(e,t,i,r),ko(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=un(t),o=Mt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ln(t,o,i),e!==null&&(ct(e,t,i,r),ko(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=un(t),i=Mt(n,r);i.tag=2,e!=null&&(i.callback=e),e=ln(t,i,r),e!==null&&(ct(e,t,r,n),ko(e,t,r))}};function ff(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Li(n,r)||!Li(i,o):!0}function ip(t,e,n){var r=!1,i=dn,o=e.contextType;return typeof o=="object"&&o!==null?o=Ze(o):(i=Ue(e)?kn:Ce.current,r=e.contextTypes,o=(r=r!=null)?wr(t,i):dn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function df(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rs.enqueueReplaceState(e,e.state,null)}function aa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Eu(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ze(o):(o=Ue(e)?kn:Ce.current,i.context=wr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(la(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rs.enqueueReplaceState(i,i.state,null),os(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xr(t,e){try{var n="",r=e;do n+=Ym(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function _l(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ua(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sv=typeof WeakMap=="function"?WeakMap:Map;function op(t,e,n){n=Mt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cs||(cs=!0,_a=r),ua(t,e)},n}function sp(t,e,n){n=Mt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ua(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ua(t,e),typeof r!="function"&&(an===null?an=new Set([this]):an.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function hf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zv.bind(null,t,e,n),e.then(t,t))}function pf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mt(-1,1),e.tag=2,ln(n,e,1))),n.lanes|=1),t)}var Tv=bt.ReactCurrentOwner,ze=!1;function Le(t,e,n,r){e.child=t===null?Dh(e,null,n,r):Tr(e,t.child,n,r)}function mf(t,e,n,r,i){n=n.render;var o=e.ref;return vr(e,i),r=xu(t,e,n,r,o,i),n=Cu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ee&&n&&hu(e),e.flags|=1,Le(t,e,r,i),e.child)}function vf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,lp(t,e,o,r,i)):(t=Wo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(s,r)&&t.ref===e.ref)return Bt(t,e,i)}return e.flags|=1,t=cn(o,r),t.ref=e.ref,t.return=e,e.child=t}function lp(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Li(o,r)&&t.ref===e.ref)if(ze=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ze=!0);else return e.lanes=t.lanes,Bt(t,e,i)}return ca(t,e,n,r,i)}function ap(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(ur,Ve),Ve|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(ur,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Y(ur,Ve),Ve|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Y(ur,Ve),Ve|=r;return Le(t,e,i,n),e.child}function up(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ca(t,e,n,r,i){var o=Ue(n)?kn:Ce.current;return o=wr(e,o),vr(e,i),n=xu(t,e,n,r,o,i),r=Cu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ee&&r&&hu(e),e.flags|=1,Le(t,e,n,i),e.child)}function yf(t,e,n,r,i){if(Ue(n)){var o=!0;es(e)}else o=!1;if(vr(e,i),e.stateNode===null)zo(t,e),ip(e,n,r),aa(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ze(c):(c=Ue(n)?kn:Ce.current,c=wr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==c)&&df(e,s,r,c),Yt=!1;var h=e.memoizedState;s.state=h,os(e,r,s,i),u=e.memoizedState,l!==r||h!==u||Fe.current||Yt?(typeof f=="function"&&(la(e,n,f,r),u=e.memoizedState),(l=Yt||ff(e,n,l,r,h,u,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Fh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:rt(e.type,l),s.props=c,d=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ze(u):(u=Ue(n)?kn:Ce.current,u=wr(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==u)&&df(e,s,r,u),Yt=!1,h=e.memoizedState,s.state=h,os(e,r,s,i);var _=e.memoizedState;l!==d||h!==_||Fe.current||Yt?(typeof v=="function"&&(la(e,n,v,r),_=e.memoizedState),(c=Yt||ff(e,n,c,r,h,_,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return fa(t,e,n,r,o,i)}function fa(t,e,n,r,i,o){up(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&nf(e,n,!1),Bt(t,e,o);r=e.stateNode,Tv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Tr(e,t.child,null,o),e.child=Tr(e,null,l,o)):Le(t,e,l,o),e.memoizedState=r.state,i&&nf(e,n,!0),e.child}function cp(t){var e=t.stateNode;e.pendingContext?tf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tf(t,e.context,!1),wu(t,e.containerInfo)}function _f(t,e,n,r,i){return Sr(),gu(i),e.flags|=256,Le(t,e,n,r),e.child}var da={dehydrated:null,treeContext:null,retryLane:0};function ha(t){return{baseLanes:t,cachePool:null,transitions:null}}function fp(t,e,n){var r=e.pendingProps,i=te.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(te,i&1),t===null)return oa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ds(s,r,0,null),t=Rn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ha(n),e.memoizedState=da,t):Au(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Iv(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=cn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=cn(l,o):(o=Rn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ha(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=da,r}return o=t.child,t=o.sibling,r=cn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Au(t,e){return e=Ds({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eo(t,e,n,r){return r!==null&&gu(r),Tr(e,t.child,null,n),t=Au(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Iv(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=_l(Error(S(422))),Eo(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ds({mode:"visible",children:r.children},i,0,null),o=Rn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Tr(e,t.child,null,s),e.child.memoizedState=ha(s),e.memoizedState=da,o);if(!(e.mode&1))return Eo(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(S(419)),r=_l(o,r,void 0),Eo(t,e,s,r)}if(l=(s&t.childLanes)!==0,ze||l){if(r=he,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Wt(t,i),ct(r,t,i,-1))}return Du(),r=_l(Error(S(421))),Eo(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Fv.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,je=sn(i.nextSibling),$e=e,ee=!0,st=null,t!==null&&(Ke[Ye++]=Rt,Ke[Ye++]=kt,Ke[Ye++]=Mn,Rt=t.id,kt=t.overflow,Mn=e),e=Au(e,r.children),e.flags|=4096,e)}function Ef(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sa(t.return,e,n)}function El(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function dp(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Le(t,e,r.children,n),r=te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ef(t,n,e);else if(t.tag===19)Ef(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ss(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),El(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ss(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}El(e,!0,n,null,o);break;case"together":El(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=cn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xv(t,e,n){switch(e.tag){case 3:cp(e),Sr();break;case 5:Uh(e);break;case 1:Ue(e.type)&&es(e);break;case 4:wu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Y(rs,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?fp(t,e,n):(Y(te,te.current&1),t=Bt(t,e,n),t!==null?t.sibling:null);Y(te,te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(te,te.current),r)break;return null;case 22:case 23:return e.lanes=0,ap(t,e,n)}return Bt(t,e,n)}var hp,pa,pp,gp;hp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pa=function(){};pp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,An(It.current);var o=null;switch(n){case"input":i=zl(t,i),r=zl(t,r),o=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),o=[];break;case"textarea":i=Wl(t,i),r=Wl(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jo)}Vl(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wi.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wi.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&X("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};gp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ei(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Cv(t,e,n){var r=e.pendingProps;switch(pu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Ue(e.type)&&Zo(),Ie(e),null;case 3:return r=e.stateNode,Ir(),Z(Fe),Z(Ce),Tu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(Sa(st),st=null))),pa(t,e),Ie(e),null;case 5:Su(e);var i=An(ki.current);if(n=e.type,t!==null&&e.stateNode!=null)pp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return Ie(e),null}if(t=An(It.current),yo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_t]=e,r[Ni]=o,t=(e.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(i=0;i<li.length;i++)X(li[i],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":Lc(r,o),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},X("invalid",r);break;case"textarea":Oc(r,o),X("invalid",r)}Vl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&vo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&vo(r.textContent,l,t),i=["children",""+l]):wi.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&X("scroll",r)}switch(n){case"input":ao(r),Ac(r,o,!0);break;case"textarea":ao(r),Nc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Jo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$d(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[_t]=e,t[Ni]=r,hp(t,e,!1,!1),e.stateNode=t;e:{switch(s=jl(n,r),n){case"dialog":X("cancel",t),X("close",t),i=r;break;case"iframe":case"object":case"embed":X("load",t),i=r;break;case"video":case"audio":for(i=0;i<li.length;i++)X(li[i],t);i=r;break;case"source":X("error",t),i=r;break;case"img":case"image":case"link":X("error",t),X("load",t),i=r;break;case"details":X("toggle",t),i=r;break;case"input":Lc(t,r),i=zl(t,r),X("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),X("invalid",t);break;case"textarea":Oc(t,r),i=Wl(t,r),X("invalid",t);break;default:i=r}Vl(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?bd(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gd(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Si(t,u):typeof u=="number"&&Si(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wi.hasOwnProperty(o)?u!=null&&o==="onScroll"&&X("scroll",t):u!=null&&Za(t,o,u,s))}switch(n){case"input":ao(t),Ac(t,r,!1);break;case"textarea":ao(t),Nc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?hr(t,!!r.multiple,o,!1):r.defaultValue!=null&&hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Jo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)gp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=An(ki.current),An(It.current),yo(e)){if(r=e.stateNode,n=e.memoizedProps,r[_t]=e,(o=r.nodeValue!==n)&&(t=$e,t!==null))switch(t.tag){case 3:vo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Ie(e),null;case 13:if(Z(te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&je!==null&&e.mode&1&&!(e.flags&128))kh(),Sr(),e.flags|=98560,o=!1;else if(o=yo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(S(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(S(317));o[_t]=e}else Sr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),o=!1}else st!==null&&(Sa(st),st=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?ue===0&&(ue=3):Du())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Ir(),pa(t,e),t===null&&Ai(e.stateNode.containerInfo),Ie(e),null;case 10:return yu(e.type._context),Ie(e),null;case 17:return Ue(e.type)&&Zo(),Ie(e),null;case 19:if(Z(te),o=e.memoizedState,o===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ei(o,!1);else{if(ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ss(t),s!==null){for(e.flags|=128,ei(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(te,te.current&1|2),e.child}t=t.sibling}o.tail!==null&&se()>Cr&&(e.flags|=128,r=!0,ei(o,!1),e.lanes=4194304)}else{if(!r)if(t=ss(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ei(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ee)return Ie(e),null}else 2*se()-o.renderingStartTime>Cr&&n!==1073741824&&(e.flags|=128,r=!0,ei(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=se(),e.sibling=null,n=te.current,Y(te,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return Mu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ve&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function Pv(t,e){switch(pu(e),e.tag){case 1:return Ue(e.type)&&Zo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ir(),Z(Fe),Z(Ce),Tu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Su(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));Sr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return Ir(),null;case 10:return yu(e.type._context),null;case 22:case 23:return Mu(),null;case 24:return null;default:return null}}var wo=!1,xe=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,P=null;function ar(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(t,e,r)}else n.current=null}function ga(t,e,n){try{n()}catch(r){ie(t,e,r)}}var wf=!1;function Av(t,e){if(Jl=Yo,t=Eh(),du(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(u=s),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zl={focusedElem:t,selectionRange:n},Yo=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,T=_.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:rt(e.type,y),T);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(E){ie(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return _=wf,wf=!1,_}function gi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&ga(e,n,o)}i=i.next}while(i!==r)}}function ks(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ma(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mp(t){var e=t.alternate;e!==null&&(t.alternate=null,mp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_t],delete e[Ni],delete e[na],delete e[fv],delete e[dv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vp(t){return t.tag===5||t.tag===3||t.tag===4}function Sf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function va(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jo));else if(r!==4&&(t=t.child,t!==null))for(va(t,e,n),t=t.sibling;t!==null;)va(t,e,n),t=t.sibling}function ya(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ya(t,e,n),t=t.sibling;t!==null;)ya(t,e,n),t=t.sibling}var ve=null,it=!1;function Qt(t,e,n){for(n=n.child;n!==null;)yp(t,e,n),n=n.sibling}function yp(t,e,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(xs,n)}catch{}switch(n.tag){case 5:xe||ar(n,e);case 6:var r=ve,i=it;ve=null,Qt(t,e,n),ve=r,it=i,ve!==null&&(it?(t=ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ve.removeChild(n.stateNode));break;case 18:ve!==null&&(it?(t=ve,n=n.stateNode,t.nodeType===8?hl(t.parentNode,n):t.nodeType===1&&hl(t,n),Ci(t)):hl(ve,n.stateNode));break;case 4:r=ve,i=it,ve=n.stateNode.containerInfo,it=!0,Qt(t,e,n),ve=r,it=i;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ga(n,e,s),i=i.next}while(i!==r)}Qt(t,e,n);break;case 1:if(!xe&&(ar(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ie(n,e,l)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,Qt(t,e,n),xe=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function Tf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Lv),e.forEach(function(r){var i=Uv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,it=!1;break e;case 3:ve=l.stateNode.containerInfo,it=!0;break e;case 4:ve=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(ve===null)throw Error(S(160));yp(o,s,i),ve=null,it=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ie(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_p(e,t),e=e.sibling}function _p(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),gt(t),r&4){try{gi(3,t,t.return),ks(3,t)}catch(y){ie(t,t.return,y)}try{gi(5,t,t.return)}catch(y){ie(t,t.return,y)}}break;case 1:nt(e,t),gt(t),r&512&&n!==null&&ar(n,n.return);break;case 5:if(nt(e,t),gt(t),r&512&&n!==null&&ar(n,n.return),t.flags&32){var i=t.stateNode;try{Si(i,"")}catch(y){ie(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Vd(i,o),jl(l,s);var c=jl(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];f==="style"?bd(i,d):f==="dangerouslySetInnerHTML"?Gd(i,d):f==="children"?Si(i,d):Za(i,f,d,c)}switch(l){case"input":Fl(i,o);break;case"textarea":jd(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?hr(i,!!o.multiple,v,!1):h!==!!o.multiple&&(o.defaultValue!=null?hr(i,!!o.multiple,o.defaultValue,!0):hr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ni]=o}catch(y){ie(t,t.return,y)}}break;case 6:if(nt(e,t),gt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){ie(t,t.return,y)}}break;case 3:if(nt(e,t),gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(e.containerInfo)}catch(y){ie(t,t.return,y)}break;case 4:nt(e,t),gt(t);break;case 13:nt(e,t),gt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ru=se())),r&4&&Tf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(xe=(c=xe)||f,nt(e,t),xe=c):nt(e,t),gt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(P=t,f=t.child;f!==null;){for(d=P=f;P!==null;){switch(h=P,v=h.child,h.tag){case 0:case 11:case 14:case 15:gi(4,h,h.return);break;case 1:ar(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){ie(r,n,y)}}break;case 5:ar(h,h.return);break;case 22:if(h.memoizedState!==null){xf(d);continue}}v!==null?(v.return=h,P=v):xf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Hd("display",s))}catch(y){ie(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){ie(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nt(e,t),gt(t),r&4&&Tf(t);break;case 21:break;default:nt(e,t),gt(t)}}function gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vp(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Si(i,""),r.flags&=-33);var o=Sf(t);ya(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Sf(t);va(t,l,s);break;default:throw Error(S(161))}}catch(u){ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ov(t,e,n){P=t,Ep(t)}function Ep(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var i=P,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||wo;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||xe;l=wo;var c=xe;if(wo=s,(xe=u)&&!c)for(P=i;P!==null;)s=P,u=s.child,s.tag===22&&s.memoizedState!==null?Cf(i):u!==null?(u.return=s,P=u):Cf(i);for(;o!==null;)P=o,Ep(o),o=o.sibling;P=i,wo=l,xe=c}If(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,P=o):If(t)}}function If(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xe||ks(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&af(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}af(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ci(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}xe||e.flags&512&&ma(e)}catch(h){ie(e,e.return,h)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function xf(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function Cf(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ks(4,e)}catch(u){ie(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ie(e,i,u)}}var o=e.return;try{ma(e)}catch(u){ie(e,o,u)}break;case 5:var s=e.return;try{ma(e)}catch(u){ie(e,s,u)}}}catch(u){ie(e,e.return,u)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var Nv=Math.ceil,us=bt.ReactCurrentDispatcher,Ou=bt.ReactCurrentOwner,Je=bt.ReactCurrentBatchConfig,$=0,he=null,le=null,_e=0,Ve=0,ur=yn(0),ue=0,Fi=null,zn=0,Ms=0,Nu=0,mi=null,De=null,Ru=0,Cr=1/0,At=null,cs=!1,_a=null,an=null,So=!1,en=null,fs=0,vi=0,Ea=null,Fo=-1,Uo=0;function Ne(){return $&6?se():Fo!==-1?Fo:Fo=se()}function un(t){return t.mode&1?$&2&&_e!==0?_e&-_e:pv.transition!==null?(Uo===0&&(Uo=ih()),Uo):(t=Q,t!==0||(t=window.event,t=t===void 0?16:fh(t.type)),t):1}function ct(t,e,n,r){if(50<vi)throw vi=0,Ea=null,Error(S(185));bi(t,n,r),(!($&2)||t!==he)&&(t===he&&(!($&2)&&(Ms|=n),ue===4&&Jt(t,_e)),We(t,r),n===1&&$===0&&!(e.mode&1)&&(Cr=se()+500,Os&&_n()))}function We(t,e){var n=t.callbackNode;p0(t,e);var r=Ko(t,t===he?_e:0);if(r===0)n!==null&&Mc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mc(n),e===1)t.tag===0?hv(Pf.bind(null,t)):Oh(Pf.bind(null,t)),uv(function(){!($&6)&&_n()}),n=null;else{switch(oh(r)){case 1:n=iu;break;case 4:n=nh;break;case 16:n=Qo;break;case 536870912:n=rh;break;default:n=Qo}n=Lp(n,wp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wp(t,e){if(Fo=-1,Uo=0,$&6)throw Error(S(327));var n=t.callbackNode;if(yr()&&t.callbackNode!==n)return null;var r=Ko(t,t===he?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ds(t,r);else{e=r;var i=$;$|=2;var o=Tp();(he!==t||_e!==e)&&(At=null,Cr=se()+500,Nn(t,e));do try{Mv();break}catch(l){Sp(t,l)}while(!0);vu(),us.current=o,$=i,le!==null?e=0:(he=null,_e=0,e=ue)}if(e!==0){if(e===2&&(i=Ql(t),i!==0&&(r=i,e=wa(t,i))),e===1)throw n=Fi,Nn(t,0),Jt(t,r),We(t,se()),n;if(e===6)Jt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Rv(i)&&(e=ds(t,r),e===2&&(o=Ql(t),o!==0&&(r=o,e=wa(t,o))),e===1))throw n=Fi,Nn(t,0),Jt(t,r),We(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:xn(t,De,At);break;case 3:if(Jt(t,r),(r&130023424)===r&&(e=Ru+500-se(),10<e)){if(Ko(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ta(xn.bind(null,t,De,At),e);break}xn(t,De,At);break;case 4:if(Jt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ut(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nv(r/1960))-r,10<r){t.timeoutHandle=ta(xn.bind(null,t,De,At),r);break}xn(t,De,At);break;case 5:xn(t,De,At);break;default:throw Error(S(329))}}}return We(t,se()),t.callbackNode===n?wp.bind(null,t):null}function wa(t,e){var n=mi;return t.current.memoizedState.isDehydrated&&(Nn(t,e).flags|=256),t=ds(t,e),t!==2&&(e=De,De=n,e!==null&&Sa(e)),t}function Sa(t){De===null?De=t:De.push.apply(De,t)}function Rv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ht(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jt(t,e){for(e&=~Nu,e&=~Ms,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ut(e),r=1<<n;t[n]=-1,e&=~r}}function Pf(t){if($&6)throw Error(S(327));yr();var e=Ko(t,0);if(!(e&1))return We(t,se()),null;var n=ds(t,e);if(t.tag!==0&&n===2){var r=Ql(t);r!==0&&(e=r,n=wa(t,r))}if(n===1)throw n=Fi,Nn(t,0),Jt(t,e),We(t,se()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xn(t,De,At),We(t,se()),null}function ku(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(Cr=se()+500,Os&&_n())}}function Fn(t){en!==null&&en.tag===0&&!($&6)&&yr();var e=$;$|=1;var n=Je.transition,r=Q;try{if(Je.transition=null,Q=1,t)return t()}finally{Q=r,Je.transition=n,$=e,!($&6)&&_n()}}function Mu(){Ve=ur.current,Z(ur)}function Nn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,av(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zo();break;case 3:Ir(),Z(Fe),Z(Ce),Tu();break;case 5:Su(r);break;case 4:Ir();break;case 13:Z(te);break;case 19:Z(te);break;case 10:yu(r.type._context);break;case 22:case 23:Mu()}n=n.return}if(he=t,le=t=cn(t.current,null),_e=Ve=e,ue=0,Fi=null,Nu=Ms=zn=0,De=mi=null,Ln!==null){for(e=0;e<Ln.length;e++)if(n=Ln[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ln=null}return t}function Sp(t,e){do{var n=le;try{if(vu(),Mo.current=as,ls){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ls=!1}if(Dn=0,de=ae=ne=null,pi=!1,Mi=0,Ou.current=null,n===null||n.return===null){ue=1,Fi=e,le=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=_e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=pf(s);if(v!==null){v.flags&=-257,gf(v,s,l,o,e),v.mode&1&&hf(o,c,e),e=v,u=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(u),e.updateQueue=y}else _.add(u);break e}else{if(!(e&1)){hf(o,c,e),Du();break e}u=Error(S(426))}}else if(ee&&l.mode&1){var T=pf(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),gf(T,s,l,o,e),gu(xr(u,l));break e}}o=u=xr(u,l),ue!==4&&(ue=2),mi===null?mi=[o]:mi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=op(o,u,e);lf(o,g);break e;case 1:l=u;var p=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(an===null||!an.has(m)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=sp(o,l,e);lf(o,E);break e}}o=o.return}while(o!==null)}xp(n)}catch(I){e=I,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function Tp(){var t=us.current;return us.current=as,t===null?as:t}function Du(){(ue===0||ue===3||ue===2)&&(ue=4),he===null||!(zn&268435455)&&!(Ms&268435455)||Jt(he,_e)}function ds(t,e){var n=$;$|=2;var r=Tp();(he!==t||_e!==e)&&(At=null,Nn(t,e));do try{kv();break}catch(i){Sp(t,i)}while(!0);if(vu(),$=n,us.current=r,le!==null)throw Error(S(261));return he=null,_e=0,ue}function kv(){for(;le!==null;)Ip(le)}function Mv(){for(;le!==null&&!o0();)Ip(le)}function Ip(t){var e=Pp(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?xp(t):le=e,Ou.current=null}function xp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Pv(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ue=6,le=null;return}}else if(n=Cv(n,e,Ve),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);ue===0&&(ue=5)}function xn(t,e,n){var r=Q,i=Je.transition;try{Je.transition=null,Q=1,Dv(t,e,n,r)}finally{Je.transition=i,Q=r}return null}function Dv(t,e,n,r){do yr();while(en!==null);if($&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(g0(t,o),t===he&&(le=he=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||So||(So=!0,Lp(Qo,function(){return yr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Je.transition,Je.transition=null;var s=Q;Q=1;var l=$;$|=4,Ou.current=null,Av(t,n),_p(n,t),tv(Zl),Yo=!!Jl,Zl=Jl=null,t.current=n,Ov(n),s0(),$=l,Q=s,Je.transition=o}else t.current=n;if(So&&(So=!1,en=t,fs=i),o=t.pendingLanes,o===0&&(an=null),u0(n.stateNode),We(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cs)throw cs=!1,t=_a,_a=null,t;return fs&1&&t.tag!==0&&yr(),o=t.pendingLanes,o&1?t===Ea?vi++:(vi=0,Ea=t):vi=0,_n(),null}function yr(){if(en!==null){var t=oh(fs),e=Je.transition,n=Q;try{if(Je.transition=null,Q=16>t?16:t,en===null)var r=!1;else{if(t=en,en=null,fs=0,$&6)throw Error(S(331));var i=$;for($|=4,P=t.current;P!==null;){var o=P,s=o.child;if(P.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(P=c;P!==null;){var f=P;switch(f.tag){case 0:case 11:case 15:gi(8,f,o)}var d=f.child;if(d!==null)d.return=f,P=d;else for(;P!==null;){f=P;var h=f.sibling,v=f.return;if(mp(f),f===c){P=null;break}if(h!==null){h.return=v,P=h;break}P=v}}}var _=o.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}P=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,P=s;else e:for(;P!==null;){if(o=P,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gi(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,P=g;break e}P=o.return}}var p=t.current;for(P=p;P!==null;){s=P;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,P=m;else e:for(s=p;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ks(9,l)}}catch(I){ie(l,l.return,I)}if(l===s){P=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,P=E;break e}P=l.return}}if($=i,_n(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(xs,t)}catch{}r=!0}return r}finally{Q=n,Je.transition=e}}return!1}function Lf(t,e,n){e=xr(n,e),e=op(t,e,1),t=ln(t,e,1),e=Ne(),t!==null&&(bi(t,1,e),We(t,e))}function ie(t,e,n){if(t.tag===3)Lf(t,t,n);else for(;e!==null;){if(e.tag===3){Lf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(an===null||!an.has(r))){t=xr(n,t),t=sp(e,t,1),e=ln(e,t,1),t=Ne(),e!==null&&(bi(e,1,t),We(e,t));break}}e=e.return}}function zv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(_e&n)===n&&(ue===4||ue===3&&(_e&130023424)===_e&&500>se()-Ru?Nn(t,0):Nu|=n),We(t,e)}function Cp(t,e){e===0&&(t.mode&1?(e=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):e=1);var n=Ne();t=Wt(t,e),t!==null&&(bi(t,e,n),We(t,n))}function Fv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cp(t,n)}function Uv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),Cp(t,n)}var Pp;Pp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fe.current)ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ze=!1,xv(t,e,n);ze=!!(t.flags&131072)}else ze=!1,ee&&e.flags&1048576&&Nh(e,ns,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zo(t,e),t=e.pendingProps;var i=wr(e,Ce.current);vr(e,n),i=xu(null,e,r,t,i,n);var o=Cu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(o=!0,es(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eu(e),i.updater=Rs,e.stateNode=i,i._reactInternals=e,aa(e,r,t,n),e=fa(null,e,r,!0,o,n)):(e.tag=0,ee&&o&&hu(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Bv(r),t=rt(r,t),i){case 0:e=ca(null,e,r,t,n);break e;case 1:e=yf(null,e,r,t,n);break e;case 11:e=mf(null,e,r,t,n);break e;case 14:e=vf(null,e,r,rt(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),ca(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),yf(t,e,r,i,n);case 3:e:{if(cp(e),t===null)throw Error(S(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Fh(t,e),os(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=xr(Error(S(423)),e),e=_f(t,e,r,n,i);break e}else if(r!==i){i=xr(Error(S(424)),e),e=_f(t,e,r,n,i);break e}else for(je=sn(e.stateNode.containerInfo.firstChild),$e=e,ee=!0,st=null,n=Dh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sr(),r===i){e=Bt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return Uh(e),t===null&&oa(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,ea(r,i)?s=null:o!==null&&ea(r,o)&&(e.flags|=32),up(t,e),Le(t,e,s,n),e.child;case 6:return t===null&&oa(e),null;case 13:return fp(t,e,n);case 4:return wu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tr(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),mf(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Y(rs,r._currentValue),r._currentValue=s,o!==null)if(ht(o.value,s)){if(o.children===i.children&&!Fe.current){e=Bt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Mt(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),sa(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(S(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),sa(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vr(e,n),i=Ze(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=rt(r,e.pendingProps),i=rt(r.type,i),vf(t,e,r,i,n);case 15:return lp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),zo(t,e),e.tag=1,Ue(r)?(t=!0,es(e)):t=!1,vr(e,n),ip(e,r,i),aa(e,r,i,n),fa(null,e,r,!0,t,n);case 19:return dp(t,e,n);case 22:return ap(t,e,n)}throw Error(S(156,e.tag))};function Lp(t,e){return th(t,e)}function Wv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,n,r){return new Wv(t,e,n,r)}function zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bv(t){if(typeof t=="function")return zu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tu)return 11;if(t===nu)return 14}return 2}function cn(t,e){var n=t.alternate;return n===null?(n=Xe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wo(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")zu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Zn:return Rn(n.children,i,o,e);case eu:s=8,i|=8;break;case Rl:return t=Xe(12,n,e,i|2),t.elementType=Rl,t.lanes=o,t;case kl:return t=Xe(13,n,e,i),t.elementType=kl,t.lanes=o,t;case Ml:return t=Xe(19,n,e,i),t.elementType=Ml,t.lanes=o,t;case Ud:return Ds(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zd:s=10;break e;case Fd:s=9;break e;case tu:s=11;break e;case nu:s=14;break e;case Kt:s=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=Xe(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Rn(t,e,n,r){return t=Xe(7,t,r,e),t.lanes=n,t}function Ds(t,e,n,r){return t=Xe(22,t,r,e),t.elementType=Ud,t.lanes=n,t.stateNode={isHidden:!1},t}function wl(t,e,n){return t=Xe(6,t,null,e),t.lanes=n,t}function Sl(t,e,n){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(t,e,n,r,i,o,s,l,u){return t=new Vv(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(o),t}function jv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ap(t){if(!t)return dn;t=t._reactInternals;e:{if(jn(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Ue(n))return Ah(t,n,e)}return e}function Op(t,e,n,r,i,o,s,l,u){return t=Fu(n,r,!0,t,i,o,s,l,u),t.context=Ap(null),n=t.current,r=Ne(),i=un(n),o=Mt(r,i),o.callback=e??null,ln(n,o,i),t.current.lanes=i,bi(t,i,r),We(t,r),t}function zs(t,e,n,r){var i=e.current,o=Ne(),s=un(i);return n=Ap(n),e.context===null?e.context=n:e.pendingContext=n,e=Mt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ln(i,e,s),t!==null&&(ct(t,i,s,o),ko(t,i,s)),s}function hs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Af(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uu(t,e){Af(t,e),(t=t.alternate)&&Af(t,e)}function $v(){return null}var Np=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wu(t){this._internalRoot=t}Fs.prototype.render=Wu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));zs(t,e,null,null)};Fs.prototype.unmount=Wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fn(function(){zs(null,t,null,null)}),e[Ut]=null}};function Fs(t){this._internalRoot=t}Fs.prototype.unstable_scheduleHydration=function(t){if(t){var e=ah();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xt.length&&e!==0&&e<Xt[n].priority;n++);Xt.splice(n,0,t),n===0&&ch(t)}};function Bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Us(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Of(){}function Gv(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=hs(s);o.call(c)}}var s=Op(e,r,t,0,null,!1,!1,"",Of);return t._reactRootContainer=s,t[Ut]=s.current,Ai(t.nodeType===8?t.parentNode:t),Fn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=hs(u);l.call(c)}}var u=Fu(t,0,!1,null,null,!1,!1,"",Of);return t._reactRootContainer=u,t[Ut]=u.current,Ai(t.nodeType===8?t.parentNode:t),Fn(function(){zs(e,u,n,r)}),u}function Ws(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=hs(s);l.call(u)}}zs(e,s,t,i)}else s=Gv(n,e,t,i,r);return hs(s)}sh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=si(e.pendingLanes);n!==0&&(ou(e,n|1),We(e,se()),!($&6)&&(Cr=se()+500,_n()))}break;case 13:Fn(function(){var r=Wt(t,1);if(r!==null){var i=Ne();ct(r,t,1,i)}}),Uu(t,1)}};su=function(t){if(t.tag===13){var e=Wt(t,134217728);if(e!==null){var n=Ne();ct(e,t,134217728,n)}Uu(t,134217728)}};lh=function(t){if(t.tag===13){var e=un(t),n=Wt(t,e);if(n!==null){var r=Ne();ct(n,t,e,r)}Uu(t,e)}};ah=function(){return Q};uh=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};Gl=function(t,e,n){switch(e){case"input":if(Fl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=As(r);if(!i)throw Error(S(90));Bd(r),Fl(r,i)}}}break;case"textarea":jd(t,n);break;case"select":e=n.value,e!=null&&hr(t,!!n.multiple,e,!1)}};Yd=ku;qd=Fn;var Hv={usingClientEntryPoint:!1,Events:[Ki,rr,As,Qd,Kd,ku]},ti={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bv={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zd(t),t===null?null:t.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||$v,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{xs=To.inject(bv),Tt=To}catch{}}be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hv;be.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(e))throw Error(S(200));return jv(t,e,null,n)};be.createRoot=function(t,e){if(!Bu(t))throw Error(S(299));var n=!1,r="",i=Np;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fu(t,1,!1,null,null,n,!1,r,i),t[Ut]=e.current,Ai(t.nodeType===8?t.parentNode:t),new Wu(e)};be.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=Zd(e),t=t===null?null:t.stateNode,t};be.flushSync=function(t){return Fn(t)};be.hydrate=function(t,e,n){if(!Us(e))throw Error(S(200));return Ws(null,t,e,!0,n)};be.hydrateRoot=function(t,e,n){if(!Bu(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Np;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Op(e,null,t,1,n??null,i,!1,o,s),t[Ut]=e.current,Ai(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fs(e)};be.render=function(t,e,n){if(!Us(e))throw Error(S(200));return Ws(null,t,e,!1,n)};be.unmountComponentAtNode=function(t){if(!Us(t))throw Error(S(40));return t._reactRootContainer?(Fn(function(){Ws(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};be.unstable_batchedUpdates=ku;be.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Us(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return Ws(t,e,n,!1,r)};be.version="18.3.1-next-f1338f8080-20240426";function Rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rp)}catch(t){console.error(t)}}Rp(),Rd.exports=be;var Qv=Rd.exports,Nf=Qv;Ol.createRoot=Nf.createRoot,Ol.hydrateRoot=Nf.hydrateRoot;const Kv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),Yv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),qv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),Xv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),Jv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),Zv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),ey=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),ty=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),ny=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),ry=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),iy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),oy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),sy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),ly=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),ay=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),uy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),cy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),fy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),dy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"})),hy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M6.854 5.854l.353-.354-.707-.707-.354.353.708.708zM4.5 7.5l-.354-.354-.353.354.353.354L4.5 7.5zm1.646 2.354l.354.353.707-.707-.353-.354-.708.708zM7.5.5V0v.5zm7 7h.5-.5zm-14 0H1 .5zm7 7V14v.5zM6.146 5.146l-2 2 .708.708 2-2-.708-.708zm-2 2.708l2 2 .708-.708-2-2-.708.708zM4.5 8H11V7H4.5v1zm3-7A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zM1 7.5A6.5 6.5 0 017.5 1V0A7.5 7.5 0 000 7.5h1zM7.5 14A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zm0 1A7.5 7.5 0 0015 7.5h-1A6.5 6.5 0 017.5 14v1z",fill:"currentColor"})),py=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M8.146 9.146l-.353.354.707.707.354-.353-.708-.708zM10.5 7.5l.354.354.353-.354-.353-.354-.354.354zM8.854 5.146L8.5 4.793l-.707.707.353.354.708-.708zm0 4.708l2-2-.708-.708-2 2 .708.708zm2-2.708l-2-2-.708.708 2 2 .708-.708zM10.5 7H4v1h6.5V7zm-3 7A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zM14 7.5A6.5 6.5 0 017.5 14v1A7.5 7.5 0 0015 7.5h-1zM7.5 1A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zm0-1A7.5 7.5 0 000 7.5h1A6.5 6.5 0 017.5 1V0z",fill:"currentColor"})),gy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"}),R.createElement("path",{d:"M 9.159 5.175 L 1.166 5.175 C 0.799 5.175 0.5 5.472 0.5 5.841 L 0.5 13.834 C 0.5 14.203 0.799 14.5 1.166 14.5 L 9.159 14.5 C 9.528 14.5 9.825 14.203 9.825 13.834 L 9.825 5.841 C 9.825 5.472 9.528 5.175 9.159 5.175 Z",stroke:"currentColor"})),my=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 7.5l-4 4m4-4l-4-4m4 4H3M1.5 1v13",stroke:"currentColor"}),R.createElement("path",{d:"M1.5 7.5l4-4m-4 4l4 4m-4-4H12m1.5 6.5V1",stroke:"currentColor"}));var me=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.ArrowLeftCircle="ArrowLeftCircle",t.ArrowRightCircle="ArrowRightCircle",t.Measurement="Measurement",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t.Scale="Scale",t))(me||{});const vy={Line:Kv,Square:Yv,Circle:qv,Direction:Xv,VectorDocument:Jv,LayersDifference:Zv,AntiClockwise:oy,Clockwise:sy,Github:ly,Crop:ay,Folder:uy,Save:fy,Svg:ey,Expand:cy,Image:dy,ArrowLeftCircle:hy,ArrowRightCircle:py,Measurement:my,SolidDown:ty,SolidUp:ny,SolidUpSmall:ry,SolidDownSmall:iy,Scale:gy},kp=({name:t,className:e})=>{const n=vy[t];return M.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:M.jsx(n,{})})};var z=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.SCALE="SCALE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t.ROTATE="ROTATE",t.MEASUREMENT="MEASUREMENT",t))(z||{});const K=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:o,className:s,iconClassname:l,style:u})=>M.jsx(M.Fragment,{children:M.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(s?" "+s:""),style:u,"data-active":i,onClick:r,title:e,children:[n&&M.jsx(kp,{name:n,className:l}),t&&M.jsx("span",{children:t}),o]})}),Tl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:o,children:s})=>{const[l,u]=R.useState(!1);return M.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[M.jsx(K,{icon:n,label:t,title:e,"data-active":l,onClick:()=>u(!l),style:o}),M.jsx(kp,{name:me.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&M.jsx("div",{className:"flex flex-row gap-1",onClick:()=>u(!1),children:s})]})},Mp=!0,yy=!1,Bo={CCW:-1,CW:1,NOT_ORIENTABLE:0},_y=2*Math.PI,ps=1,Dp=0,vt=2,Ey=3,wy=4,Sy=1,Ty=2,Vu=0,yi=1,_r=2;var gs=Object.freeze({__proto__:null,BOUNDARY:vt,CCW:Mp,CONTAINS:Ey,CW:yy,END_VERTEX:_r,INSIDE:ps,INTERLACE:wy,NOT_VERTEX:Vu,ORIENTATION:Bo,OUTSIDE:Dp,OVERLAP_OPPOSITE:Ty,OVERLAP_SAME:Sy,PIx2:_y,START_VERTEX:yi});let Ct=1e-6;function zp(t){Ct=t}function Fp(){return Ct}const Iy=3;function Ta(t){return t<Ct&&t>-Ct}function Un(t,e){return t-e<Ct&&t-e>-Ct}function Up(t,e){return t-e>Ct}function xy(t,e){return t-e>-Ct}function Wp(t,e){return t-e<-Ct}function Cy(t,e){return t-e<Ct}var Py=Object.freeze({__proto__:null,DECIMALS:Iy,EQ:Un,EQ_0:Ta,GE:xy,GT:Up,LE:Cy,LT:Wp,getTolerance:Fp,setTolerance:zp});let a={Utils:Py,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in gs)a[t]=gs[t];Object.defineProperty(a,"DP_TOL",{get:function(){return Fp()},set:function(t){zp(t)}});class J{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}a.Errors=J;class ju{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,o=n||this.last,s=i;if(s===void 0)return r;do r.push(s),s=s.next;while(s!==o.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw J.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const Rf={stroke:"black"};class Ly{constructor(e=Rf){for(const n in e)this[n]=e[n];this.stroke=e.stroke??Rf.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function $n(t){return new Ly(t).toAttributesString()}function Vr(t,e){let n=[],[r,i,o]=t.standard,[s,l,u]=e.standard,c=r*l-i*s,f=o*l-i*u,d=r*u-o*s;if(!a.Utils.EQ_0(c)){let h,v;i===0?(h=o/r,v=d/c):l===0?(h=u/s,v=d/c):r===0?(h=f/c,v=o/i):s===0?(h=f/c,v=u/l):(h=f/c,v=d/c),n.push(new a.Point(h,v))}return n}function Gn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(a.Utils.EQ(i,e.r))n.push(r);else if(a.Utils.LT(i,e.r)){let o=Math.sqrt(e.r*e.r-i*i),s,l;s=t.norm.rotate90CCW().multiply(o),l=r.translate(s),n.push(l),s=t.norm.rotate90CW().multiply(o),l=r.translate(s),n.push(l)}return n}function Pr(t,e){let n=[];for(let r of e.toSegments()){let i=qi(r,t);for(let o of i)Kp(o,n)||n.push(o)}return n}function Bs(t,e){let n=[];if(Pr(t,e.box).length===0)return n;let r=new a.Circle(e.pc,e.r),i=Gn(t,r);for(let o of i)o.on(e)&&n.push(o);return n}function qi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new a.Line(t.ps,t.pe);return Vr(r,e)}function Vs(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let o=Vr(r,i);o.length>0&&kf(o[0],t)&&kf(o[0],e)&&n.push(o[0])}return n}function kf(t,e){const n=e.box;return a.Utils.LE(t.x,n.xmax)&&a.Utils.GE(t.x,n.xmin)&&a.Utils.LE(t.y,n.ymax)&&a.Utils.GE(t.y,n.ymin)}function js(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[o,s]=t.ps.distanceTo(e.pc);return a.Utils.EQ(o,e.r)&&n.push(t.ps),n}let r=new a.Line(t.ps,t.pe),i=Gn(r,e);for(let o of i)o.on(t)&&n.push(o);return n}function jr(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Circle(e.pc,e.r),o=Gn(r,i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Ay(t,e){let n=[];for(let r of e.toSegments()){let i=Vs(r,t);for(let o of i)n.push(o)}return n}function Bp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new a.Vector(t.pc,e.pc),i=t.r,o=e.r;if(a.Utils.EQ_0(i)||a.Utils.EQ_0(o))return n;if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y)&&a.Utils.EQ(i,o))return n.push(t.pc.translate(-i,0)),n;let s=t.pc.distanceTo(e.pc)[0];if(a.Utils.GT(s,i+o)||a.Utils.LT(s,Math.abs(i-o)))return n;r.x/=s,r.y/=s;let l;if(a.Utils.EQ(s,i+o)||a.Utils.EQ(s,Math.abs(i-o)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let u=i*i/(2*s)-o*o/(2*s)+s/2,c=t.pc.translate(u*r.x,u*r.y),f=Math.sqrt(i*i-u*u);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Oy(t,e){let n=[];for(let r of e.toSegments()){let i=js(r,t);for(let o of i)n.push(o)}return n}function Vp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&a.Utils.EQ(t.r,e.r)){let s;return s=t.start,s.on(e)&&n.push(s),s=t.end,s.on(e)&&n.push(s),s=e.start,s.on(t)&&n.push(s),s=e.end,s.on(t)&&n.push(s),n}let r=new a.Circle(t.pc,t.r),i=new a.Circle(e.pc,e.r),o=r.intersect(i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function $u(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&a.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new a.Circle(t.pc,t.r),o=Bp(r,i);for(let s of o)s.on(t)&&n.push(s);return n}function Ny(t,e){let n=[];for(let r of e.toSegments()){let i=jr(r,t);for(let o of i)n.push(o)}return n}function jp(t,e){return t.isSegment?Vs(t.shape,e):jr(e,t.shape)}function $p(t,e){return t.isSegment?jr(t.shape,e):Vp(t.shape,e)}function Gp(t,e){return t.isSegment?qi(t.shape,e):Bs(e,t.shape)}function Ry(t,e){return t.isSegment?bu(e,t.shape):Qu(e,t.shape)}function ky(t,e){return t.isSegment?js(t.shape,e):$u(t.shape,e)}function Gu(t,e){let n=[];for(let r of e.edges)for(let i of jp(r,t))n.push(i);return n}function Hu(t,e){let n=[];for(let r of e.edges)for(let i of $p(r,t))n.push(i);return n}function Xi(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Gp(r,t))Kp(i,n)||n.push(i);return t.sortPoints(n)}function Hp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of ky(r,t))n.push(i);return n}function bp(t,e){return t.isSegment?jp(e,t.shape):t.isArc?$p(e,t.shape):t.isLine?Gp(e,t.shape):t.isRay?Ry(e,t.shape):[]}function Qp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...bp(t,i)];return n}function My(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...Qp(r,e)];return n}function Dy(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...Qp(r,e)];return n}function zy(t,e){return t instanceof a.Line?Xi(t,e):t instanceof a.Segment?Gu(t,e):t instanceof a.Arc?Hu(t,e):[]}function Kp(t,e){return e.some(n=>n.equalTo(t))}function hn(t){return new a.Line(t.start,t.norm)}function bu(t,e){return qi(e,hn(t)).filter(n=>t.contains(n))}function Qu(t,e){return Bs(hn(t),e).filter(n=>t.contains(n))}function Yp(t,e){return Gn(hn(t),e).filter(n=>t.contains(n))}function Fy(t,e){return Pr(hn(t),e).filter(n=>t.contains(n))}function qp(t,e){return Vr(hn(t),e).filter(n=>t.contains(n))}function Uy(t,e){return Vr(hn(t),hn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function Xp(t,e){return Xi(hn(t),e).filter(n=>t.contains(n))}function Jp(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw J.UNSUPPORTED_SHAPE_TYPE}function Ji(t,e){let n=[];for(let r of e)n=[...n,...Jp(r,r.shape)];return n}function Wy(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...Jp(r,i)];return n}let Hn=class ai extends ju{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,o=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray||u instanceof a.Line,s=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray,l=u=>u instanceof a.Segment||u instanceof a.Arc;if(n=i===1&&o(r[0])||i>1&&s(r[0])&&s(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(u=>u instanceof a.Ray||u instanceof a.Line);for(let u of r){let c=new a.Edge(u);this.append(c)}this.setArcLength()}else throw a.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new ai(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return this.insert(i,o),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Line){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Circle){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Segment){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Multiline)return a.Distance.multiline2multiline(this,e);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof a.Multiline?Wy(this,e):Ji(e,this)}contains(e){if(e instanceof a.Point)return this.edges.some(n=>n.shape.contains(e));throw a.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new ai(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new a.Point){return new ai(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new a.Matrix){return new ai(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${$n({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};a.Multiline=Hn;const By=(...t)=>new a.Multiline(...t);a.multiline=By;function Lr(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let o=0;i[0]===null?o=0:i[1]===null?o=t.shape.length:o=i[0].length;let s=Vu;Un(o,0)&&(s|=yi),Un(o,t.shape.length)&&(s|=_r);let l;o===1/0?l=i[0].coord(e):l=s&_r&&t.next&&t.next.arc_length===0?0:t.arc_length+o,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:s})}function Ui(t){t.int_points1_sorted=qt(t.int_points1),t.int_points2_sorted=qt(t.int_points2)}function qt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(Vy)}function Vy(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function Ku(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,o;for(let s=0;s<t.int_points1_sorted.length;s++)if(t.int_points1_sorted[s].id!==-1){n=t.int_points1_sorted[s],r=t.int_points2[n.id];for(let l=s+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!Un(i.arc_length,n.arc_length));l++)i.id!==-1&&(o=t.int_points2[i.id],o.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&o.edge_before===r.edge_before&&o.edge_after===r.edge_after&&(i.id=-1,o.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let s=1;s<t.int_points2_sorted.length;s++){let l=t.int_points2_sorted[s];if(l.id===-1)continue;if(r.id===-1||!Un(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let u=t.int_points1[l.id];u.edge_before===n.edge_before&&u.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(u.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(s=>s.id>=0),t.int_points2=t.int_points2.filter(s=>s.id>=0),t.int_points1.forEach((s,l)=>s.id=l),t.int_points2.forEach((s,l)=>s.id=l))}function Ia(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=vt),e.edge_after&&(e.edge_after.bvStart=vt)}function xa(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function jy(t){let e,n,r,i=t.int_points1.length;for(let o=0;o<i;o++){let s=t.int_points1_sorted[o];s.face!==e&&(n=o,e=s.face);let l=o,u=Ar(t.int_points1_sorted,o,e),c;l+u<i&&t.int_points1_sorted[l+u].face===e?c=l+u:c=n;let f=Ar(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[s.id].face){r=p;break}}if(r===null)continue;let d=s.edge_after,h=r.edge_before;if(!(d.bv===vt&&h.bv===vt)||d!==h)continue;let v=t.int_points2[s.id],_=t.int_points2[r.id],y=v.edge_after,T=_.edge_before;y.bv===vt&&T.bv===vt&&y===T||(v=t.int_points2[r.id],_=t.int_points2[s.id],y=v.edge_after,T=_.edge_before),y.bv===vt&&T.bv===vt&&y===T&&d.setOverlap(y)}}function Ar(t,e,n){let r,i,o=1;if(t.length===1)return 1;r=t[e];for(let s=e+1;s<t.length&&!(r.face!==n||(i=t[s],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));s++)o++;return o}function Or(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=Vu,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=yi),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=_r),n.is_vertex&yi){n.edge_before=r.prev,r.prev&&(n.is_vertex=_r);continue}if(n.is_vertex&_r)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof Hn&&n.is_vertex&yi&&(n.edge_after=t.first)}}function Mf(t,e,n){const r=t.edge_before,i=e.edge_after,o=n.length;r.next=n[0],n[0].prev=r,n[o-1].next=i,i.prev=n[o-1]}const{INSIDE:Et,OUTSIDE:wt,BOUNDARY:fe,OVERLAP_SAME:$y,OVERLAP_OPPOSITE:Gy}=gs,{NOT_VERTEX:eS,START_VERTEX:Df,END_VERTEX:zf}=gs,$s=1,Zi=2,Wn=3;function Hy(t,e){let[n,r]=eo(t,e,$s,!0);return n}function Ca(t,e){let r=e.clone().reverse(),[i,o]=eo(t,r,Wn,!0);return i}function Zp(t,e){let[n,r]=eo(t,e,Zi,!0);return n}function eg(t,e){let[n,r]=eo(t,e,Zi,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(l=>l.shape)];let o=[];for(let s of r.faces)o=[...o,...[...s.edges].map(l=>l.shape)];return[i,o]}function Pa(t,e){let[n,r]=eo(t,e,Wn,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(s=>s.shape)];return i}function tg(t,e){let n=t.clone(),r=e.clone(),i=ng(n,r);Ui(i),Or(n,i.int_points1_sorted),Or(r,i.int_points2_sorted),Ku(i),Ui(i);let o=i.int_points1_sorted.map(l=>l.pt),s=i.int_points2_sorted.map(l=>l.pt);return[o,s]}function by(t,e,n,r){let i=Ff(t,n.int_points1),o=Ff(e,n.int_points2);for(Uf(i,e),Uf(o,t),Ia(n.int_points1),Ia(n.int_points2),xa(n.int_points1,e),xa(n.int_points2,t);Ky(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););jy(n),La(t,r,n.int_points1_sorted,!0),La(e,r,n.int_points2_sorted,!1),Wf(t,i,r,!0),Wf(e,o,r,!1)}function Qy(t,e,n,r){Yy(t,e,r,n.int_points2),qy(t,e,n),Aa(t,n.int_points1),Aa(e,n.int_points2),Oa(t,n.int_points1,n.int_points2),Oa(t,n.int_points2,n.int_points1)}function eo(t,e,n,r){let i=t.clone(),o=e.clone(),s=ng(i,o);return Ui(s),Or(i,s.int_points1_sorted),Or(o,s.int_points2_sorted),Ku(s),Ui(s),by(i,o,s,n),r&&Qy(i,o,s,n),[i,o]}function ng(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let o of i){let s=r.shape.intersect(o.shape);for(let l of s)Lr(r,l,n.int_points1),Lr(o,l,n.int_points2)}}return n}function Ff(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Uf(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Ky(t,e,n,r,i,o){let s,l,u,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==s&&(l=d,s=h.face);let v=d,_=Ar(r,d,s),y;v+_<c&&r[v+_].face===s?y=v+_:y=l;let T=Ar(r,y,s);u=null;for(let m=y;m<y+T;m++){let E=r[m];if(E.face===s&&i[E.id].face===i[h.id].face){u=E;break}}if(u===null)continue;let g=h.edge_after,p=u.edge_before;if(g.bv===fe&&p.bv!=fe){g.bv=p.bv;continue}if(g.bv!=fe&&p.bv===fe){p.bv=g.bv;continue}if(g.bv===fe&&p.bv===fe&&g!=p||g.bv===Et&&p.bv===wt||g.bv===wt&&p.bv===Et){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===fe&&p.bv===fe&&g!=p){let m=g.next,E;for(;m!=p;){if(m.bv!=fe){if(E===void 0)E=m.bv;else if(m.bv!=E)throw J.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}E!=null&&(g.bv=E,p.bv=E);continue}if(g.bv===Et&&p.bv===wt||g.bv===wt&&p.bv===Et){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[E,I]=m.shape.distanceTo(e);if(E<10*a.DP_TOL){Lr(m,I.ps,n);let C=n[n.length-1];if(C.is_vertex&Df)C.edge_after=m,C.edge_before=m.prev,m.bvStart=fe,m.bv=void 0,m.setInclusion(e);else if(C.is_vertex&zf)C.edge_after=m.next,m.bvEnd=fe,m.bv=void 0,m.setInclusion(e);else{let G=e.addVertex(C.pt,m);C.edge_before=G,C.edge_after=G.next,G.setInclusion(e),G.next.bvStart=fe,G.next.bvEnd=void 0,G.next.bv=void 0,G.next.setInclusion(e)}let L=e.findEdgeByPoint(I.pe);Lr(L,I.pe,i);let N=i[i.length-1];if(N.is_vertex&Df)N.edge_after=L,N.edge_before=L.prev;else if(N.is_vertex&zf)N.edge_after=L.next;else{let G=i.find(Be=>Be.edge_after===L),k=e.addVertex(N.pt,L);N.edge_before=k,N.edge_after=k.next,G&&(G.edge_after=k),k.bvStart=void 0,k.bvEnd=fe,k.bv=void 0,k.setInclusion(t),k.next.bvStart=fe,k.next.bvEnd=void 0,k.next.bv=void 0,k.next.setInclusion(t)}Ui(o),f=!0;break}}m=m.next}if(f)break;throw J.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function La(t,e,n,r){if(!n)return;let i,o,s,l;for(let u=0;u<n.length;u++){if(s=n[u],s.face!==i&&(o=u,i=s.face),i.isEmpty())continue;let c=u,f=Ar(n,u,i),d;c+f<n.length&&n[c+f].face===s.face?d=c+f:d=o,l=n[d];let h=d,v=Ar(n,h,i),_=s.edge_after,y=l.edge_before;if(_.bv===Et&&y.bv===Et&&e===$s||_.bv===wt&&y.bv===wt&&e===Zi||(_.bv===wt||y.bv===wt)&&e===Wn&&!r||(_.bv===Et||y.bv===Et)&&e===Wn&&r||_.bv===fe&&y.bv===fe&&_.overlap&$y&&r||_.bv===fe&&y.bv===fe&&_.overlap&Gy){t.removeChain(i,_,y);for(let T=c;T<c+f;T++)n[T].edge_after=void 0;for(let T=h;T<h+v;T++)n[T].edge_before=void 0}u+=f-1}}function Yy(t,e,n,r){for(let i of e.faces){for(let o of i)t.edges.add(o);r.find(o=>o.face===i)===void 0&&t.addFace(i.first,i.last)}}function qy(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],o=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&o.edge_before===void 0&&o.edge_after!==void 0&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before),o.edge_before!==void 0&&o.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(o.edge_before.next=i.edge_after,i.edge_after.prev=o.edge_before,o.edge_after=i.edge_after,i.edge_before=o.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let s of n.int_points1_sorted)s!==i&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(i.pt)&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before);if(o.edge_before!==void 0&&o.edge_after===void 0)for(let s of n.int_points2_sorted)s!==o&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(o.pt)&&(o.edge_before.next=s.edge_after,s.edge_after.prev=o.edge_before,o.edge_after=s.edge_after,s.edge_before=o.edge_before)}}function Aa(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Oa(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,o=r.edge_before;try{ju.testInfiniteLoop(i)}catch{throw J.CANNOT_COMPLETE_BOOLEAN_OPERATION}let s=t.addFace(i,o);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s)}}function Wf(t,e,n,r){for(let i of e){let o=i.first.bv;(n===$s&&o===Et||n===Wn&&o===Et&&r||n===Wn&&o===wt&&!r||n===Zi&&o===wt)&&t.deleteFace(i)}}var Xy=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:Zi,BOOLEAN_SUBTRACT:Wn,BOOLEAN_UNION:$s,calculateIntersections:tg,innerClip:eg,intersect:Zp,outerClip:Pa,removeNotRelevantChains:La,removeOldFaces:Aa,restoreFaces:Oa,subtract:Ca,unify:Hy});const Jy=RegExp("T.F..FFF.|T.F...F.."),Zy=RegExp("T........|.T.......|...T.....|....T...."),e1=RegExp("FT.......|F..T.....|F...T...."),t1=RegExp("T.F..F..."),n1=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class $r{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return Jy.test(this.toString())}intersect(){return Zy.test(this.toString())}touch(){return e1.test(this.toString())}inside(){return t1.test(this.toString())}covered(){return n1.test(this.toString())}}function _i(t,e){let n,r=new a.Ray(e),i=new a.Line(r.pt,r.norm);const o=new a.Box(r.box.xmin-a.DP_TOL,r.box.ymin-a.DP_TOL,r.box.xmax,r.box.ymax+a.DP_TOL);if(t.box.not_intersect(o))return a.OUTSIDE;let s=t.edges.search(o);if(s.length===0)return a.OUTSIDE;for(let f of s)if(f.shape.contains(e))return a.BOUNDARY;let l=[...t.faces],u=[];for(let f of s)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return a.BOUNDARY;u.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}u.sort((f,d)=>Wp(f.pt.x,d.pt.x)?-1:Up(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<u.length;f++){let d=u[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.prev===u[f-1].edge)continue;let h=d.edge.prev;for(;Ta(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),_=d.pt.translate(v),y=d.edge.shape.tangentInStart(),T=d.pt.translate(y),g=_.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.next===u[f-1].edge)continue;let h=d.edge.next;for(;Ta(h.length);)h=h.next;let v=h.shape.tangentInStart(),_=d.pt.translate(v),y=d.edge.shape.tangentInEnd(),T=d.pt.translate(y),g=_.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof a.Segment)c++;else{let h=d.edge.shape.box;Un(d.pt.y,h.ymin)||Un(d.pt.y,h.ymax)||c++}}return n=c%2===1?ps:Dp,n}function r1(t,e){return Gr(t,e).equal()}function rg(t,e){return Gr(t,e).intersect()}function i1(t,e){return Gr(t,e).touch()}function o1(t,e){return!rg(t,e)}function ig(t,e){return Gr(t,e).inside()}function og(t,e){return Gr(t,e).covered()}function s1(t,e){return ig(e,t)}function sg(t,e){return og(e,t)}function Gr(t,e){if(t instanceof a.Line&&e instanceof a.Line)return l1(t,e);if(t instanceof a.Line&&e instanceof a.Circle)return a1(t,e);if(t instanceof a.Line&&e instanceof a.Box)return u1(t,e);if(t instanceof a.Line&&e instanceof a.Polygon)return c1(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&e instanceof a.Polygon)return Bf(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&(e instanceof a.Circle||e instanceof a.Box))return Bf(t,new a.Polygon(e));if(t instanceof a.Polygon&&e instanceof a.Polygon)return Io(t,e);if((t instanceof a.Circle||t instanceof a.Box)&&(e instanceof a.Circle||e instanceof a.Box))return Io(new a.Polygon(t),new a.Polygon(e));if((t instanceof a.Circle||t instanceof a.Box)&&e instanceof a.Polygon)return Io(new a.Polygon(t),e);if(t instanceof a.Polygon&&(e instanceof a.Circle||e instanceof a.Box))return Io(t,new a.Polygon(e))}function l1(t,e){let n=new $r,r=Vr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function a1(t,e){let n=new $r,r=Gn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Hn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon([e.toArc()]).cutWithLine(t)}return n}function u1(t,e){let n=new $r,r=Pr(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Hn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[s[1]],n.I2E=[s[0],s[2]],n.E2I=[e]):(n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon(e.toSegments()).cutWithLine(t))}return n}function c1(t,e){let n=new $r,r=Xi(t,e),i=new Hn([t]),o=r.length>0?r.slice():t.sortPoints(r);return i.split(o),[...i].forEach(s=>s.setInclusion(e)),n.I2I=[...i].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...i].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...i].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.E2I=e.cutWithLine(t),n}function Bf(t,e){let n=new $r,r=zy(t,e),i=r.length>0?r.slice():t.sortPoints(r),o=new Hn([t]);o.split(i),[...o].forEach(s=>s.setInclusion(e)),n.I2I=[...o].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...o].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...o].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let s of[t.start,t.end])switch(_i(e,s)){case a.INSIDE:n.B2I.push(s);break;case a.BOUNDARY:n.B2B.push(s);break;case a.OUTSIDE:n.B2E.push(s);break}return n}function Io(t,e){let n=new $r,[r,i]=tg(t,e),o=Zp(t,e),s=Ca(t,e),l=Ca(e,t),[u,c]=eg(t,e),f=Pa(t,e),d=Pa(e,t);return n.I2I=o.isEmpty()?[]:[o],n.I2B=c,n.I2E=s.isEmpty()?[]:[s],n.B2I=u,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var Yu=Object.freeze({__proto__:null,contain:s1,cover:sg,covered:og,disjoint:o1,equal:r1,inside:ig,intersect:rg,relate:Gr,touch:i1});class lt{constructor(e=1,n=0,r=0,i=1,o=0,s=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s}clone(){return new lt(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new lt(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw J.ILLEGAL_PARAMETERS;return this.multiply(new lt(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),o=Math.sin(e);return this.translate(n,r).multiply(new lt(i,o,-o,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new lt(e,0,0,n,0,0))}equalTo(e){return!(!a.Utils.EQ(this.tx,e.tx)||!a.Utils.EQ(this.ty,e.ty)||!a.Utils.EQ(this.a,e.a)||!a.Utils.EQ(this.b,e.b)||!a.Utils.EQ(this.c,e.c)||!a.Utils.EQ(this.d,e.d))}}a.Matrix=lt;const f1=(...t)=>new a.Matrix(...t);a.matrix=f1;const d1=class Na{constructor(e,n){this.low=e,this.high=n}clone(){return new Na(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new Na(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},ge=0,H=1;class Tn{constructor(e=void 0,n=void 0,r=null,i=null,o=null,s=H){if(this.left=r,this.right=i,this.parent=o,this.color=s,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,u]=e;l>u&&([l,u]=[u,l]),this.item.key=new d1(l,u)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===H}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class Wi{constructor(){this.root=null,this.nil_node=new Tn}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new Tn(e,n,this.nil_node,this.nil_node,null,ge);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new Tn(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new Tn(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new Tn(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(o=>n(o.item.value,o.item.key))}intersect_any(e){let n=new Tn(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new Wi;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new Tn(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===ge;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===ge?(n.parent.color=H,r.color=H,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=H,n.parent.parent.color=ge,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===ge?(n.parent.color=H,r.color=H,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=H,n.parent.parent.color=ge,this.rotate_left(n.parent.parent)));this.root.color=H}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===H&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===H;)n===n.parent.left?(r=n.parent.right,r.color===ge&&(r.color=H,n.parent.color=ge,this.rotate_left(n.parent),r=n.parent.right),r.left.color===H&&r.right.color===H?(r.color=ge,n=n.parent):(r.right.color===H&&(r.color=ge,r.left.color=H,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=H,r.right.color=H,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===ge&&(r.color=H,n.parent.color=ge,this.rotate_right(n.parent),r=n.parent.left),r.left.color===H&&r.right.color===H?(r.color=ge,n=n.parent):(r.left.color===H&&(r.color=ge,r.right.color=H,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=H,r.left.color=H,this.rotate_right(n.parent),n=this.root));n.color=H}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===ge&&(n.left.color===H&&n.right.color===H||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===H&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class h1 extends Set{constructor(e){super(e),this.index=new Wi,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,o=r||e.box,s=i||e;return super.add(s),this.size>n&&this.index.insert(o,s),this}delete(e){const{key:n,value:r}=e,i=n||e.box,o=r||e;let s=super.delete(o);return s&&this.index.remove(i,o),s}clear(){super.clear(),this.index=new Wi}search(e){return this.index.search(e)}hit(e){let n=new a.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}a.PlanarSet=h1;class En{get name(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new lt().translate(...e))}rotate(e,n=new a.Point){return this.transform(new lt().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new lt().scale(e,n))}transform(...e){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}}let w=class lg extends En{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw J.ILLEGAL_PARAMETERS}}get box(){return new a.Box(this.x,this.y,this.x,this.y)}clone(){return new a.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}lessThan(e){return!!(a.Utils.LT(this.y,e.y)||a.Utils.EQ(this.y,e.y)&&a.Utils.LT(this.x,e.x))}transform(e){return new a.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new a.Vector(this,e.pt);if(a.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new a.Vector(e.pt,this);return a.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof lg){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new a.Segment(this,e)]}if(e instanceof a.Line)return a.Distance.point2line(this,e);if(e instanceof a.Circle)return a.Distance.point2circle(this,e);if(e instanceof a.Segment)return a.Distance.point2segment(this,e);if(e instanceof a.Arc)return a.Distance.point2arc(this,e);if(e instanceof a.Polygon)return a.Distance.point2polygon(this,e);if(e instanceof a.PlanarSet)return a.Distance.shape2planarSet(this,e);if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}on(e){if(e instanceof a.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${$n({fill:"red",...e})} />`}};a.Point=w;const p1=(...t)=>new a.Point(...t);a.point=p1;let tt=class extends En{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof a.Point&&r instanceof a.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}multiply(e){return new a.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!a.Utils.EQ_0(this.length))return new a.Vector(this.x/this.length,this.y/this.length);throw J.ZERO_DIVISION}rotate(e,n=new a.Point){if(n.x===0&&n.y===0)return this.transform(new lt().rotate(e));throw J.OPERATION_IS_NOT_SUPPORTED}transform(e){return new a.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new a.Vector(-this.y,this.x)}rotate90CW(){return new a.Vector(this.y,-this.x)}invert(){return new a.Vector(-this.x,-this.y)}add(e){return new a.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new a.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};a.Vector=tt;const ag=(...t)=>new a.Vector(...t);a.vector=ag;let yt=class Ra extends En{constructor(...e){if(super(),this.ps=new a.Point,this.pe=new a.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new a.Point(n[0],n[1]),this.pe=new a.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new a.Point(n.x,n.y),this.pe=new a.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof a.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof a.Point&&e[1]instanceof a.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new a.Point(e[0],e[1]),this.pe=new a.Point(e[2],e[3]);return}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new a.Vector(this.start,this.end).slope}get box(){return new a.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return a.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return qi(this,e);if(e instanceof a.Ray)return bu(e,this);if(e instanceof a.Segment)return Vs(this,e);if(e instanceof a.Circle)return js(this,e);if(e instanceof a.Box)return Ay(this,e);if(e instanceof a.Arc)return jr(this,e);if(e instanceof a.Polygon)return Gu(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.segment2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.segment2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2segment(this,e);return[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.segment2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}tangentInStart(){return new a.Vector(this.start,this.end).normalize()}tangentInEnd(){return new a.Vector(this.end,this.start).normalize()}reverse(){return new Ra(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new a.Segment(this.start,e),new a.Segment(e,this.end)]}middle(){return new a.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new a.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=a.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new a.Matrix){return new Ra(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new a.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${$n(e)} />`}};a.Segment=yt;const g1=(...t)=>new a.Segment(...t);a.segment=g1;let{vector:ni}=a,St=class ug extends En{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new a.Point(n),this.norm=new a.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof a.Point&&r instanceof a.Point){this.pt=n,this.norm=ug.points2norm(n,r),this.norm.dot(ni(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Point&&r instanceof a.Vector){if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y))throw J.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(ni(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Vector&&r instanceof a.Point){if(a.Utils.EQ_0(n.x)&&a.Utils.EQ_0(n.y))throw J.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(ni(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new a.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(ni(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return a.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))}coord(e){return ni(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Vr(this,e);if(e instanceof a.Ray)return qp(e,this);if(e instanceof a.Circle)return Gn(this,e);if(e instanceof a.Box)return Pr(this,e);if(e instanceof a.Segment)return qi(e,this);if(e instanceof a.Arc)return Bs(this,e);if(e instanceof a.Polygon)return Xi(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof a.Point)return[new a.Ray(e,this.norm),new a.Ray(e,this.norm)];{let n=new a.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new a.Point){return new a.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=Pr(this,e);if(r.length===0)return"";let i=r[0],o=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return o===void 0&&(o=i),new a.Segment(i,o).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw J.ILLEGAL_PARAMETERS;return new a.Vector(e,n).normalize().rotate90CCW()}};a.Line=St;const m1=(...t)=>new a.Line(...t);a.line=m1;let Vo=class extends En{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new a.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new a.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new a.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof a.Point)return a.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof a.Segment)return a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Arc)return this.intersect(e).length===0&&a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Circle)return this.intersect(e).length===0&&a.Utils.LE(e.r,this.r)&&a.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new a.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw J.OPERATION_IS_NOT_SUPPORTED;return new a.Circle(this.pc,this.r*e)}transform(e=new a.Matrix){return new a.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Gn(e,this);if(e instanceof a.Ray)return Yp(e,this);if(e instanceof a.Segment)return js(e,this);if(e instanceof a.Circle)return Bp(e,this);if(e instanceof a.Box)return Oy(this,e);if(e instanceof a.Arc)return $u(e,this);if(e instanceof a.Polygon)return Hp(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.circle2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline){let[n,r]=a.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${$n({fill:"none",...e})} />`}};a.Circle=Vo;const v1=(...t)=>new a.Circle(...t);a.circle=v1;class ka extends En{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=a.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:o,counterClockwise:s}=e[0];this.pc=new a.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=o,this.counterClockwise=s}else{let[n,r,i,o,s]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),o!==void 0&&(this.endAngle=o),s!==void 0&&(this.counterClockwise=s)}}clone(){return new a.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(a.Utils.EQ(this.startAngle,this.endAngle))return 0;if(a.Utils.EQ(Math.abs(this.startAngle-this.endAngle),a.PIx2))return a.PIx2;let e;return this.counterClockwise?e=a.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+a.PIx2:e=a.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+a.PIx2,a.Utils.GT(e,a.PIx2)&&(e-=a.PIx2),a.Utils.LT(e,0)&&(e+=a.PIx2),e}get start(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new a.Box);return n=n.merge(this.end.box),n}contains(e){if(!a.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new a.Vector(this.pc,e).slope,r=new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return a.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new a.Vector(this.pc,e).slope;return[new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new a.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new a.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new a.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Bs(e,this);if(e instanceof a.Ray)return Qu(e,this);if(e instanceof a.Circle)return $u(this,e);if(e instanceof a.Segment)return jr(e,this);if(e instanceof a.Box)return Ny(this,e);if(e instanceof a.Arc)return Vp(this,e);if(e instanceof a.Polygon)return Hu(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.arc2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.arc2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let o=0;o<4;o++)r[o].on(this)&&i.push(new a.Arc(this.pc,this.r,this.startAngle,n[o],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,u)=>l.length-u.length);for(let l=0;l<i.length;l++){let u=e.length>0?e[e.length-1]:void 0,c;u?c=new a.Arc(this.pc,this.r,u.endAngle,i[l].endAngle,this.counterClockwise):c=new a.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),a.Utils.EQ_0(c.length)||e.push(c.clone())}let o=e.length>0?e[e.length-1]:void 0,s;o?s=new a.Arc(this.pc,this.r,o.endAngle,this.endAngle,this.counterClockwise):s=new a.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!a.Utils.EQ_0(s.length)&&!a.Utils.EQ(s.sweep,2*Math.PI)&&e.push(s.clone())}return e}tangentInStart(){let e=new a.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new a.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new a.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new a.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),o=this.counterClockwise;return e.a*e.d<0&&(o=!o),a.Arc.arcSE(i,n,r,o)}static arcSE(e,n,r,i){let{vector:o}=a,s=o(e,n).slope,l=o(e,r).slope;a.Utils.EQ(s,l)&&(l+=2*Math.PI,i=!0);let u=o(e,n).length;return new a.Arc(e,u,s,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,o)=>i+o.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new a.Line(this.start,this.end),r=this.pc.leftTo(n),o=new a.Segment(this.start,this.end).definiteIntegral(e),s=this.circularSegmentArea();return r?o-s:o+s}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=a;return e.slice().sort((r,i)=>{let o=n(this.pc,r).slope,s=n(this.pc,i).slope;return o<s?-1:o>s?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return a.Utils.EQ(this.sweep,2*Math.PI)?new a.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${$n({fill:"none",...e})} />`}}a.Arc=ka;const y1=(...t)=>new a.Arc(...t);a.arc=y1;class Dt extends En{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new Dt(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new a.Point(this.xmin,this.ymin)}get high(){return new a.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new a.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Dt(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new a.Point(this.xmin,this.ymin),new a.Point(this.xmax,this.ymin),new a.Point(this.xmax,this.ymax),new a.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new a.Segment(e[0],e[1]),new a.Segment(e[1],e[2]),new a.Segment(e[2],e[3]),new a.Segment(e[3],e[0])]}rotate(e,n=new a.Point){throw J.OPERATION_IS_NOT_SUPPORTED}transform(e=new a.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new Dt)}contains(e){if(e instanceof a.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof a.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof a.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof a.Circle)return this.contains(e.box);if(e instanceof a.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>jr(n,e).length===0);if(e instanceof a.Line||e instanceof a.Ray)return!1;if(e instanceof a.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof a.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${$n({fill:"none",...e})} />`}}a.Box=Dt;const _1=(...t)=>new a.Box(...t);a.box=_1;class E1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof a.Segment}get isArc(){return this.shape instanceof a.Arc}get isLine(){return this.shape instanceof a.Line}get isRay(){return this.shape instanceof a.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof a.Line||this.shape instanceof a.Ray)return this.bv=a.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=_i(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=_i(e,this.end)),this.bvStart===a.OUTSIDE||this.bvEnd==a.OUTSIDE)this.bv=a.OUTSIDE;else if(this.bvStart===a.INSIDE||this.bvEnd==a.INSIDE)this.bv=a.INSIDE;else{let n=_i(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof a.Segment&&i instanceof a.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=a.OVERLAP_OPPOSITE):(r instanceof a.Arc&&i instanceof a.Arc||r instanceof a.Segment&&i instanceof a.Arc||r instanceof a.Arc&&i instanceof a.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=a.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof a.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof a.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(a.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,o=new a.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),s=new a.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}
                    A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}a.Edge=E1;class w1 extends ju{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class cr extends w1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof a.Point)){let i=cr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(s=>new a.Point(s[0],s[1])),o=cr.points2segments(i);this.shapes2face(e.edges,o)}else if(r.every(i=>i instanceof a.Segment||i instanceof a.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let o of r){let s;o.name==="segment"?s=new a.Segment(o):s=new a.Arc(o),i.push(s)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof cr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof a.Circle)this.shapes2face(e.edges,[n[0].toArc(Mp)]);else if(n[0]instanceof a.Box){let r=n[0];this.shapes2face(e.edges,[new a.Segment(new a.Point(r.xmin,r.ymin),new a.Point(r.xmax,r.ymin)),new a.Segment(new a.Point(r.xmax,r.ymin),new a.Point(r.xmax,r.ymax)),new a.Segment(new a.Point(r.xmax,r.ymax),new a.Point(r.xmin,r.ymax)),new a.Segment(new a.Point(r.xmin,r.ymax),new a.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof a.Edge&&n[1]instanceof a.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new a.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new a.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new a.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();a.Utils.EQ_0(e)?this._orientation=Bo.NOT_ORIENTABLE:a.Utils.LT(e,0)?this._orientation=Bo.CCW:this._orientation=Bo.CW}return this._orientation}isSimple(e){return cr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let o of e){let s=n.search(o.box);for(let l of s){if(o===l||l.face!==e||o.shape instanceof a.Segment&&l.shape instanceof a.Segment&&(o.next===l||o.prev===l))continue;let u=o.shape.intersect(l.shape);for(let c of u)if(!(c.equalTo(o.start)&&c.equalTo(l.end)&&l===o.prev)&&!(c.equalTo(o.end)&&c.equalTo(l.start)&&l===o.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new a.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}a.Face=cr;class qu extends En{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof a.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof a.Vector){this.norm=e[1].clone();return}throw J.ILLEGAL_PARAMETERS}}clone(){return new qu(this.pt,this.norm)}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new a.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))&&a.Utils.GE(n.cross(this.norm),0)}coord(e){return ag(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new a.Segment(this.pt,e),new a.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Segment)return bu(this,e);if(e instanceof a.Arc)return Qu(this,e);if(e instanceof a.Line)return qp(this,e);if(e instanceof a.Ray)return Uy(this,e);if(e instanceof a.Circle)return Yp(this,e);if(e instanceof a.Box)return Fy(this,e);if(e instanceof a.Polygon)return Xp(this,e)}rotate(e,n=new a.Point){return new a.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new a.Line(this.pt,this.norm),i=Pr(r,e);return i=i.filter(s=>this.contains(s)),i.length===0||i.length===2?"":new a.Segment(this.pt,i[0]).svg(n)}}a.Ray=qu;const S1=(...t)=>new a.Ray(...t);a.ray=S1;let pn=class qn{constructor(){this.faces=new a.PlanarSet,this.edges=new a.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof a.Circle||e[0]instanceof a.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new a.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new a.Face(this,i));else this.faces.add(new a.Face(this,r));else this.faces.add(new a.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new qn;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new a.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return n.face.insert(i,o),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let s of e.edges)for(let l of n.edges){let u=bp(s,l);for(let c of u)Lr(s,c,r.int_points1),Lr(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=qt(r.int_points1),r.int_points2_sorted=qt(r.int_points2),Or(e,r.int_points1_sorted),Or(n,r.int_points2_sorted),Ku(r),r.int_points1_sorted=qt(r.int_points1),r.int_points2_sorted=qt(r.int_points2),Ia(r.int_points1),xa(r.int_points1,n);for(let s of r.int_points1_sorted)s.edge_before&&s.edge_after&&s.edge_before.bv===s.edge_after.bv&&(r.int_points2[s.id]=-1,s.id=-1);if(r.int_points1=r.int_points1.filter(s=>s.id>=0),r.int_points2=r.int_points2.filter(s=>s.id>=0),r.int_points1.forEach((s,l)=>{s.id=l}),r.int_points2.forEach((s,l)=>{s.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=qt(r.int_points1),r.int_points2_sorted=qt(r.int_points2);let i,o;for(let s=1;s<r.int_points1_sorted.length;s++)if(o=r.int_points1_sorted[s],i=r.int_points1_sorted[s-1],o.edge_before&&o.edge_before.bv===ps){let l=i.edge_after,u=o.edge_before,c=e.getChain(l,u);Mf(r.int_points2[i.id],r.int_points2[o.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new a.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Mf(r.int_points2[o.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new Hn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,o)=>o.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let o=[...i.faces][0];if(o.orientation()!==n){for(let s of r)if(o.shapes.every(l=>s.contains(l))){s.addFace(o.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof a.Point){let n=_i(this,e);return n===ps||n===vt}else return sg(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle||e instanceof a.Line||e instanceof a.Segment||e instanceof a.Arc){let[n,r]=a.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let n=[Number.POSITIVE_INFINITY,new a.Segment],r,i;for(let o of this.edges){let s=n[0];[r,i]=a.Distance.shape2planarSet(o.shape,e.edges,s),a.Utils.LT(r,s)&&(n=[r,i])}return n}}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Xi(e,this);if(e instanceof a.Ray)return Xp(e,this);if(e instanceof a.Circle)return Hp(e,this);if(e instanceof a.Segment)return Gu(e,this);if(e instanceof a.Arc)return Hu(e,this);if(e instanceof a.Polygon)return Dy(e,this);if(e instanceof a.Multiline)return My(e,this)}translate(e){let n=new qn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new a.Point){let r=new qn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.rotate(e,n)));return r}scale(e,n){let r=new qn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.scale(e,n)));return r}transform(e=new a.Matrix){let n=new qn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${$n({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};a.Polygon=pn;const T1=(...t)=>new a.Polygon(...t);a.polygon=T1;const{Circle:Il,Line:Vf,Point:jf,Vector:xo,Utils:xl}=a;class Ei{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new xo(e.pc,n),i=e.r*e.r,o=r.dot(r);return xl.EQ_0(o)?new jf(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/o))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(xl.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),o=new xo(e.pc,n.pc);o=o.normalize();let s=e.pc.translate(o.multiply(i));return new Vf(s,o)}else{let i=new xo(e.pc,n.pc),o=e.r*e.r/(i.dot(i)-n.r*n.r),s=e.pc.translate(i.multiply(o)),l=Math.abs(o)*n.r;return new Il(s,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(xl.EQ_0(r))return n.clone();{let o=e.r*e.r/(2*r),s=new xo(e.pc,i.end);return s=s.multiply(o/r),new Il(e.pc.translate(s),o)}}inverse(e){if(e instanceof jf)return Ei.inversePoint(this.circle,e);if(e instanceof Il)return Ei.inverseCircle(this.circle,e);if(e instanceof Vf)return Ei.inverseLine(this.circle,e)}}a.Inversion=Ei;const I1=t=>new a.Inversion(t);a.inversion=I1;class x{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new a.Vector(e,r).length,new a.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(a.Utils.EQ_0(r))return[n.r,new a.Segment(e,n.toArc().start)];{let o=Math.abs(r-n.r),s=new a.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(s);return[o,new a.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return x.point2point(e,n.start);let r=new a.Vector(n.start,n.end),i=new a.Vector(n.start,e),o=new a.Vector(n.end,e),s=r.dot(i),l=-r.dot(o),u,c;if(a.Utils.GE(s,0)&&a.Utils.GE(l,0)){let f=n.tangentInStart();return u=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[u,new a.Segment(e,c)]}else return s<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new a.Circle(n.pc,n.r),i=[],o,s;return[o,s]=x.point2circle(e,r),s.end.on(n)&&i.push(x.point2circle(e,r)),i.push(x.point2point(e,n.start)),i.push(x.point2point(e,n.end)),x.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof a.Segment?x.point2segment(e,n.shape):x.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[];return i.push(x.point2line(e.start,n)),i.push(x.point2line(e.end,n)),x.sort(i),i[0]}static segment2segment(e,n){let r=Vs(e,n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[],o,s;return[o,s]=x.point2segment(n.start,e),i.push([o,s.reverse()]),[o,s]=x.point2segment(n.end,e),i.push([o,s.reverse()]),i.push(x.point2segment(e.start,n)),i.push(x.point2segment(e.end,n)),x.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),[o,s]=x.point2line(n.center,i);if(a.Utils.GE(o,n.r)&&s.end.on(e))return x.point2circle(s.end,n);{let[l,u]=x.point2circle(e.start,n),[c,f]=x.point2circle(e.end,n);return a.Utils.LT(l,c)?[l,u]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),o=new a.Circle(n.pc,n.r),[s,l]=x.point2line(o.center,i);if(a.Utils.GE(s,o.r)&&l.end.on(e)){let[d,h]=x.point2circle(l.end,o);if(h.end.on(n))return[d,h]}let u=[];u.push(x.point2arc(e.start,n)),u.push(x.point2arc(e.end,n));let c,f;return[c,f]=x.point2segment(n.start,e),u.push([c,f.reverse()]),[c,f]=x.point2segment(n.end,e),u.push([c,f.reverse()]),x.sort(u),u[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),o=n.toArc();return x.point2point(i.start,o.start)}else{let i=new a.Line(e.center,n.center),o=i.intersect(e),s=i.intersect(n),l=[];return l.push(x.point2point(o[0],s[0])),l.push(x.point2point(o[0],s[1])),l.push(x.point2point(o[1],s[0])),l.push(x.point2point(o[1],s[1])),x.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let[i,o]=x.point2line(e.center,n),[s,l]=x.point2circle(o.end,e);return l=l.reverse(),[s,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.point2line(i.center,n);if(a.Utils.GE(o,i.r)){let[l,u]=x.point2circle(s.end,i);if(u.end.on(e))return[l,u]}else{let l=[];return l.push(x.point2line(e.start,n)),l.push(x.point2line(e.end,n)),x.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.circle2circle(i,n);if(s.start.on(e))return[o,s];{let l=[];return l.push(x.point2circle(e.start,n)),l.push(x.point2circle(e.end,n)),x.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),o=new a.Circle(n.center,n.r),[s,l]=x.circle2circle(i,o);if(l.start.on(e)&&l.end.on(n))return[s,l];{let u=[],c,f;return[c,f]=x.point2arc(e.start,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(e.end,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(n.start,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2arc(n.end,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2point(e.start,n.start),u.push([c,f]),[c,f]=x.point2point(e.start,n.end),u.push([c,f]),[c,f]=x.point2point(e.end,n.start),u.push([c,f]),[c,f]=x.point2point(e.end,n.end),u.push([c,f]),x.sort(u),u[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=x.point2edge(e,i);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=e.distanceTo(i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e.edges)for(let o of n.edges){let[s,l]=i.shape.distanceTo(o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),o=r*r+i*i,s=e.merge(n),l=s.xmax-s.xmin,u=s.ymax-s.ymin,c=l*l+u*u;return[o,c]}static minmax_tree_process_level(e,n,r,i){let o,s;for(let f of n)[o,s]=x.box2box_minmax(e.box,f.item.key),f.item.value instanceof a.Edge?i.insert([o,s],f.item.value.shape):i.insert([o,s],f.item.value),a.Utils.LT(s,r)&&(r=s);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),u=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...u].filter(f=>{let[d,h]=x.box2box_minmax(e.box,f.max);return a.Utils.LE(d,r)});return r=x.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new Wi,o=[n.index.root],s=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return s=x.minmax_tree_process_level(e,o,s,i),i}static minmax_tree_calc_distance(e,n,r){let i,o;if(n!=null&&!n.isNil()){if([i,o]=x.minmax_tree_calc_distance(e,n.left,r),o)return[i,o];if(a.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[s,l]=x.distance(e,n.item.value);return a.Utils.LT(s,i[0])&&(i=[s,l]),[i,o]=x.minmax_tree_calc_distance(e,n.right,i),[i,o]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new a.Segment],o=!1;if(n instanceof a.PlanarSet){let s=x.minmax_tree(e,n,r);[i,o]=x.minmax_tree_calc_distance(e,s.root,i)}return i}static sort(e){e.sort((n,r)=>a.Utils.LT(n[0],r[0])?-1:a.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n){let[o,s]=x.distance(e,i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e)for(let o of n){let[s,l]=x.distance(i.shape,o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}}a.Distance=x;const{Multiline:x1,Point:cg,Segment:C1,Polygon:fg}=a;function Xu(t){return new cg(t.split(" ").map(Number))}function dg(t){return t.split(", ").map(Xu)}function Ju(t){const e=dg(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new C1(e[r],e[r+1]));return new x1(n)}function P1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(Ju)}function hg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new fg;let r;return e.forEach((i,o)=>{let s=i.split(", ").map(u=>new cg(u.split(" ").map(Number)));const l=n.addFace(s);o===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function L1(t){const n=t.split(/\)\), \(\(/).map(o=>"(("+o+"))").map(hg),r=new fg;return n.reduce((o,s)=>[...o,...s==null?void 0:s.faces],[]).forEach(o=>r.addFace([...o==null?void 0:o.shapes])),r}function A1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return hg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return L1(e)}}function O1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Xu)}function N1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Ju).reduce((n,r)=>[...n,...r],[])}function pg(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return Xu(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return dg(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return Ju(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return P1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return A1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(pg).map(i=>i instanceof Array?i:[i]).reduce((i,o)=>[...i,...o],[])}else{if(gg(t))return O1(t);if(mg(t))return N1(t)}}return[]}function gg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function mg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function R1(t){return t.startsWith("POINT")||gg(t)||t.startsWith("LINESTRING")||mg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}a.isWktString=R1;a.parseWKT=pg;a.BooleanOperations=Xy;a.Relations=Yu;var U=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(U||{}),ms=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(ms||{}),vs=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(vs||{}),Ae=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(Ae||{});function k1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function Ee(t){const e=[];for(const n of t)n&&e.push(n);return e}function M1(t,e){let n=t[0],r=1/0;for(const i of t){const o=e(i);o<r&&(r=o,n=i)}return n}function D1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Gs(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const o=e[i],s=typeof o=="function",l=s?o(n):n[o],u=s?o(r):r[o],c=D1(l,u,"asc");if(c!==0)return c}return 0})}function to(t,e){const n=[];for(const r of t)n.every(o=>!e(o,r))&&n.push(r);return n}function $f(){}function z1(t,e=0){if(!Number.isInteger(e))throw new Error("Precision must be an integer.");const n=Math.pow(10,e);return Math.round(t*n)/n}function Gf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const F1="[object RegExp]",U1="[object String]",W1="[object Number]",B1="[object Boolean]",Hf="[object Arguments]",V1="[object Symbol]",j1="[object Date]",$1="[object Map]",G1="[object Set]",H1="[object Array]",b1="[object Function]",Q1="[object ArrayBuffer]",Cl="[object Object]",K1="[object Error]",Y1="[object DataView]",q1="[object Uint8Array]",X1="[object Uint8ClampedArray]",J1="[object Uint16Array]",Z1="[object Uint32Array]",e_="[object BigUint64Array]",t_="[object Int8Array]",n_="[object Int16Array]",r_="[object Int32Array]",i_="[object BigInt64Array]",o_="[object Float32Array]",s_="[object Float64Array]";function bf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Qf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function l_(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ot(t,e)}return Ot(t,e)}function Ot(t,e,n){if(Object.is(t,e))return!0;let r=Qf(t),i=Qf(e);if(r===Hf&&(r=Cl),i===Hf&&(i=Cl),r!==i)return!1;switch(r){case U1:return t.toString()===e.toString();case W1:{const l=t.valueOf(),u=e.valueOf();return l===u||Number.isNaN(l)&&Number.isNaN(u)}case B1:case j1:case V1:return Object.is(t.valueOf(),e.valueOf());case F1:return t.source===e.source&&t.flags===e.flags;case b1:return t===e}n=n??new Map;const o=n.get(t),s=n.get(e);if(o!=null&&s!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(r){case $1:{if(t.size!==e.size)return!1;for(const[l,u]of t.entries())if(!e.has(l)||!Ot(u,e.get(l),n))return!1;return!0}case G1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),u=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=u.findIndex(h=>Ot(f,h,n));if(d===-1)return!1;u.splice(d,1)}return!0}case H1:case q1:case X1:case J1:case Z1:case e_:case t_:case n_:case r_:case i_:case o_:case s_:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Ot(t[l],e[l],n))return!1;return!0}case Q1:return t.byteLength!==e.byteLength?!1:Ot(new Uint8Array(t),new Uint8Array(e),n);case Y1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ot(t.buffer,e.buffer,n);case K1:return t.name===e.name&&t.message===e.message;case Cl:{if(!(Ot(t.constructor,e.constructor,n)||Gf(t)&&Gf(e)))return!1;const u=[...Object.keys(t),...bf(t)],c=[...Object.keys(e),...bf(e)];if(u.length!==c.length)return!1;for(let f=0;f<u.length;f++){const d=u[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!Ot(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}let vg=new w(0,0),yg=null,jo=null,_g=null,Nr=[],Eg=[],no=[],wg=!1,Sg=[],Tg=[],Ig=!1,xg=[],Cg=45,Ma=null,Da=null,Pg=null,Lg=null,Ag=null,Og=null,Ng=[],Rg=0,kg="#fff",Mg=1;const Zu=()=>vg,a_=()=>yg,ye=()=>jo,Dg=()=>_g,we=()=>Nr,Oe=()=>no,u_=()=>wg,c_=()=>Sg,f_=()=>Tg,d_=()=>Ig,h_=()=>xg,zg=()=>Cg,p_=()=>Pg,Bi=()=>Lg,ys=()=>Ag,g_=()=>Og,ec=()=>Ng,m_=()=>Rg,Vt=()=>kg,jt=()=>Mg,ft=()=>{if(!Ma)throw new Error("getScreenCanvasDrawController() returned null");return Ma},v_=()=>{if(!Da)throw new Error("getCanvasInputField() returned null");return Da},tc=()=>Nr.filter(t=>no.includes(t.id)),y_=()=>Nr.filter(t=>!no.includes(t.id)),Rr=t=>no.includes(t.id),nc=t=>Eg.includes(t.id),__=t=>vg=t,E_=t=>yg=t,_s=(t,e=!0)=>{var n;(n=ye())==null||n.stop(),jo=t,jo.subscribe(r=>{var o;const i=(o=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:o.instructions;Dg()!==i&&(w_(i||null),i&&(document.getElementById("toolInstructions").innerText=i,console.log("STATE: "+i)))}),jo.start(),e&&bs(Ae.activeTool)},w_=t=>_g=t,Hs=t=>{k_(Ae.entities,Nr),Nr=t},za=t=>Eg=t,b=t=>no=t,rc=t=>wg=t,ic=t=>Sg=t,B=t=>Tg=t,He=t=>(console.log("setShouldDrawHelpers",t),Fg(null),Ug(null),ic([]),Ig=t),S_=t=>xg=t,T_=(t,e=!0)=>{Cg=t,e&&bs(Ae.activeTool)},I_=t=>Ma=t,x_=t=>Da=t,oc=t=>Pg=t,Fg=t=>Lg=t,Ug=t=>Ag=t,pe=t=>Og=t,C_=t=>Ng=t,P_=t=>Rg=t,L_=(t,e=!0)=>{kg=t,e&&bs(Ae.activeLineColor)},A_=(t,e=!0)=>{Mg=t,e&&bs(Ae.activeLineWidth)},$t=(...t)=>{const e=t.map(r=>r.id),n=we().filter(r=>!e.includes(r.id));return Hs(n),n},Re=(...t)=>{const e=[...we(),...t];return Hs(e),e},O_=[Ae.activeTool,Ae.angleStep,Ae.activeLineColor,Ae.activeLineWidth,Ae.screenZoom],N_=[Ae.entities],R_=[],fr=k1();function k_(t,e){if(!N_.includes(t))return;const n=fr.peek();if(!l_(e,n==null?void 0:n.value)){if(t!==Ae.activeEntity&&fr.clear(Ae.activeEntity),R_.includes(t)&&(n==null?void 0:n.variable)===t){fr.replace({variable:t,value:e});return}fr.push({variable:t,value:e})}}function Wg(t){const e=t.variable,n=t.value;switch(e){case Ae.entities:Nr=n;break}}function M_(){const t=fr.undo();t&&Wg(t)}function D_(){const t=fr.redo();t&&Wg(t)}function bs(t){O_.includes(t)&&window.dispatchEvent(new CustomEvent(vs.UPDATE_STATE))}var q=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t.Measurement="Measurement",t))(q||{});const Fa=1e-6,Co=10,Po=30,z_="#111",F_="#FFFF00",sc=15,U_=15,lc=15,O=15,ac=1e3,W_=3,Kf=20,Yf=20,B_=200,V_=20,qf=7,j_=2,$_=20,G_=40,H_="#b6ff9a",b_="#6899f3",Q_=1,K_=[5,5],Bg="#999",Vg=1,jg=[5,5],Y_=.1,Kn=20,q_=150,Pl=20,X_="#161616",J_="#FFF",Z_=16,eE="#999",tE=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"],Ua=Math.PI/180;function pt(t,e){return Math.abs(t.x-e.x)<Fa&&Math.abs(t.y-e.y)<Fa}function $g(t,e,n){const r=ot.getAngle(e,n),i=t.map(o=>({point:o,angle:(new St(e,o).slope-r+2*Math.PI)%(2*Math.PI)}));return Gs(i,[o=>o.angle]).map(o=>o.point)}function bn(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}function xt(t,e,n){const i=new tt(e,t).scale(n-1,n-1);return new w(t.x+i.x,t.y+i.y)}class ot{constructor(e,n,r,i,o=!0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"arc");this.arc=new ka(e,n,r,i,o)}static getAngle(e,n){return new St(e,n).slope}draw(e){var n,r;e.drawArc(this.arc.center,this.arc.r.valueOf(),((n=this.arc)==null?void 0:n.startAngle)||0,((r=this.arc)==null?void 0:r.endAngle)||2*Math.PI)}move(e,n){this.arc=this.arc.translate(e,n)}scale(e,n){const r=xt(this.arc.center,e,n);this.arc=new ka(r,this.arc.r.valueOf()*n,this.arc.startAngle,this.arc.endAngle,this.arc.counterClockwise)}rotate(e,n){this.arc=this.arc.rotate(n,e)}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:o}=this.arc;return new ot(e,n.valueOf(),r,i,o)}return this}intersectsWithBox(e){return this.arc.intersect(e).length>0}isContainedInBox(e){return e.contains(this.arc)}getBoundingBox(){return this.arc.box}getShape(){return this.arc}getSnapPoints(){return[{point:this.arc.center,type:U.CircleCenter},{point:this.arc.start,type:U.LineEndPoint},{point:this.arc.end,type:U.LineEndPoint}]}getIntersections(e){const n=e.getShape();return n?this.arc.intersect(n):[]}getFirstPoint(){return this.arc.center}distanceTo(e){return this.arc.distanceTo(e)}getSvgString(){return this.arc.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){const n=to([this.arc.start,this.arc.end,...e],pt),r=$g(n,this.arc.center,this.arc.start),i=[];for(let o=0;o<r.length-1;o++){const s=r[o],l=r[o+1],u=ot.getAngle(this.arc.center,s),c=ot.getAngle(this.arc.center,l),f=new ot(this.arc.center,Number(this.arc.r),u,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:q.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==q.Arc)throw new Error("Invalid Entity type in JSON");const n=new w(e.shapeData.center.x,e.shapeData.center.y),r=new w(e.shapeData.start.x,e.shapeData.start.y),i=new w(e.shapeData.end.x,e.shapeData.end.y),o=Number(n.distanceTo(r)[0]),s=Number(ot.getAngle(n,r)),l=Number(ot.getAngle(n,i)),u=e.shapeData.counterClockwise,c=new ot(n,o,s,l,u);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class kr{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"circle");e instanceof Vo?this.circle=e:this.circle=new Vo(e,n)}draw(e){e.drawArc(this.circle.center,this.circle.r,0,2*Math.PI)}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}scale(e,n){const r=xt(this.circle.center,e,n);this.circle=new Vo(r,this.circle.r.valueOf()*n)}rotate(e,n){this.circle=this.circle.rotate(n,e)}clone(){return this.circle?new kr(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){var e;return(e=this.circle)!=null&&e.center?[{point:this.circle.center,type:U.CircleCenter},{point:new w(this.circle.center.x+this.circle.r,this.circle.center.y),type:U.CircleCardinal},{point:new w(this.circle.center.x-this.circle.r,this.circle.center.y),type:U.CircleCardinal},{point:new w(this.circle.center.x,this.circle.center.y+this.circle.r),type:U.CircleCardinal},{point:new w(this.circle.center.x,this.circle.center.y-this.circle.r),type:U.CircleCardinal}]:[]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.circle.center}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}async toJson(){var e;return this.circle?{id:this.id,type:q.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new w(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new kr(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}function Gt(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}class dt{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"segment");e instanceof yt?this.segment=e:this.segment=new yt(e,n)}draw(e){const n=new w(this.segment.start.x,this.segment.start.y),r=new w(this.segment.end.x,this.segment.end.y);e.drawLine(n,r)}move(e,n){this.segment=this.segment.translate(e,n)}scale(e,n){const r=xt(this.segment.start,e,n),i=xt(this.segment.end,e,n);this.segment=new yt(r,i)}rotate(e,n){this.segment=this.segment.rotate(n,e)}clone(){return new dt(this.segment.clone())}intersectsWithBox(e){return this.segment.intersect(e).length>0}isContainedInBox(e){return e.contains(this.segment)}getBoundingBox(){return this.segment.box}getShape(){return this.segment}getSnapPoints(){return[{point:this.segment.start,type:U.LineEndPoint},{point:this.segment.end,type:U.LineEndPoint},{point:this.segment.middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?this.segment.intersect(n):[]}getFirstPoint(){return this.segment.start}distanceTo(e){return this.segment.distanceTo(e)}getSvgString(){return this.segment.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Line}containsPointOnShape(e){return this.segment.contains(e)}cutAtPoints(e){const n=to([this.segment.start,this.segment.end,...e],pt),r=Gs(n,[o=>Gt(this.segment.start,o)]),i=[];for(let o=0;o<r.length-1;o++)i.push(new dt(r[o],r[o+1]));return i}async toJson(){return{id:this.id,type:q.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}}static async fromJson(e){const n=new w(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new w(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new dt(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class Vi{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"point");e instanceof w?this.point=new w(e.x,e.y):this.point=new w(e,n)}draw(e){e.drawArc(this.point,5,0,Math.PI*2)}move(e,n){this.point=this.point.translate(e,n)}scale(e,n){this.point=xt(this.point,e,n)}rotate(e,n){this.point=this.point.rotate(n,e)}clone(){return new Vi(this.point.clone())}intersectsWithBox(){return!1}isContainedInBox(e){return e.contains(this.point)}getBoundingBox(){return this.point?new Dt(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return[{point:this.point,type:U.Point}]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point.distanceTo(e)}getSvgString(){return this.point.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Point}containsPointOnShape(e){return this.point.equalTo(e)}async toJson(){return{id:this.id,type:q.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}}static async fromJson(e){const n=new w(e.shapeData.point.x,e.shapeData.point.y),r=new Vi(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function nE(t){return new pn([new w(Math.min(t.low.x,t.high.x),Math.min(t.low.y,t.high.y)),new w(Math.min(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new w(Math.max(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new w(Math.max(t.low.x,t.high.x),Math.min(t.low.y,t.high.y))])}function uc(t,e){return new pn([new w(Math.min(t.x,e.x),Math.min(t.y,e.y)),new w(Math.min(t.x,e.x),Math.max(t.y,e.y)),new w(Math.max(t.x,e.x),Math.max(t.y,e.y)),new w(Math.max(t.x,e.x),Math.min(t.y,e.y))])}function at(t){const e=[];return t.edges.forEach(n=>{e.push(n.shape)}),e}class Ht{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"polygon");e instanceof pn?this.polygon=e:this.polygon=uc(e,n)}draw(e){at(this.polygon).forEach(n=>{const r=new w(n.start.x,n.start.y),i=new w(n.end.x,n.end.y);e.drawLine(r,i)})}move(e,n){this.polygon=this.polygon.translate(new tt(e,n))}scale(e,n){const r=this.polygon.box.center,i=xt(r,e,n);this.polygon=this.polygon.translate(new tt(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e)}clone(){return new Ht(this.polygon.clone())}intersectsWithBox(e){return Yu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=at(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_VALUE,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=at(this.polygon);return[{point:e[0],type:U.LineEndPoint},{point:e[1],type:U.LineEndPoint},{point:e[2],type:U.LineEndPoint},{point:e[3],type:U.LineEndPoint},{point:n[0].middle(),type:U.LineMidPoint},{point:n[1].middle(),type:U.LineMidPoint},{point:n[2].middle(),type:U.LineMidPoint},{point:n[3].middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?at(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})}getType(){return q.Rectangle}containsPointOnShape(e){return at(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y}))}}}static async fromJson(e){const n=new pn(e.shapeData.points.map(i=>new w(i.x,i.y))),r=new Ht(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function rE(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,o=JSON.parse(i);o.entities||n(new Error("Invalid JSON file"));const s=Ee(o.entities.map(l=>{switch(l.type){case q.Arc:return ot.fromJson(l);case q.Circle:return kr.fromJson(l);case q.Line:return dt.fromJson(l);case q.Point:return Vi.fromJson(l);case q.Rectangle:return Ht.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));Hs(Ee(await Promise.all(s))),e()}),r.readAsText(t,"utf-8")})}var Gg={exports:{}};(function(t,e){(function(n,r){r()})(Qr,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){u(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Qr=="object"&&Qr.global===Qr?Qr:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=s.URL||s.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?o(v):i(v.href)?r(c,f,d):o(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){o(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",_=/constructor/i.test(s.HTMLElement)||s.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&_||l)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var m=T.result;m=y?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},T.readAsDataURL(c)}else{var g=s.URL||s.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});s.saveAs=u.saveAs=u,t.exports=u})})(Gg);var cc=Gg.exports;async function iE(){const e=we().map(o=>o.toJson()),n={entities:Ee(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});cc.saveAs(i,"open-web-cad--drawing.json")}function Hg(t,e){let n=e.x,r=e.y,i=0,o=0;const s=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),o=Math.max(o,d.ymax))}),console.log("exporting svg",s);const l=i-n+Co*2,u=o-r+Co*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new tt(new w(n,r),new w(Co,Co))).svg({stroke:bn(f.lineColor),strokeWidth:f.lineWidth});v&&s.push(v)}),{svgString:`
      <svg width="${l}" height="${u}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${u}" fill="white" />
        ${s.join("")}
      </svg>
    `,width:l,height:u}}function oE(){const t=we(),e=Zu(),n=Hg(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});cc.saveAs(r,"open-web-cad--drawing.svg")}function sE(t,e,n,r){return new Promise((i,o)=>{const s=document.createElement("canvas"),l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const u=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);u.onload=()=>{s.width=e+r*2,s.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,s.width,s.height),l.drawImage(u,r,r),URL.revokeObjectURL(f),s.toBlob(d=>{d?i(d):o(new Error("Could not convert canvas to blob"))},"image/png")},u.src=f})}async function lE(){const t=we(),e=Zu(),n=Hg(t,e),r=await sE(n.svgString,n.width,n.height,20);cc.saveAs(r,"open-web-cad--drawing.png")}function bg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function aE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function uE(){const t=aE();if(t.__xstate__)return t.__xstate__}const cE=t=>{if(typeof window>"u")return;const e=uE();e&&e.register(t)};class Xf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Qg=".",fE="",Kg="",dE="#",hE="*",Yg="xstate.init",pE="xstate.error",Wa="xstate.stop";function gE(t,e){return{type:`xstate.after.${t}.${e}`}}function Ba(t,e){return{type:`xstate.done.state.${t}`,output:e}}function mE(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function qg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Xg(t){return{type:Yg,input:t}}function Lt(t){setTimeout(()=>{throw t})}const vE=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jg(t,e){const n=Jf(t),r=Jf(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?Jg(n[i],r[i]):!1)}function fc(t){if(em(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Jf(t){if(YE(t))return t.value;if(typeof t!="string")return t;const e=fc(t);return yE(e)}function yE(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function Zf(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function Zg(t){return em(t)?t:[t]}function tn(t){return t===void 0?[]:Zg(t)}function Va(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function em(t){return Array.isArray(t)}function _E(t){return t.type.startsWith("xstate.error.actor")}function Xn(t){return Zg(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function tm(t){if(!(t===void 0||t===fE))return tn(t)}function ja(t,e,n){var o,s,l;const r=typeof t=="object",i=r?t:void 0;return{next:(o=r?t.next:t)==null?void 0:o.bind(i),error:(s=r?t.error:e)==null?void 0:s.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function ed(t,e){return`${e}.${t}`}function dc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,s=t.getStateNodeById(i).config.invoke;return(Array.isArray(s)?s[r]:s).src}function td(t,e){return`${t.sessionId}.${e}`}let EE=0;function wE(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,s={},{clock:l,logger:u}=e,c={schedule:(h,v,_,y,T=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:_,delay:y,id:T,startedAt:Date.now()},p=td(h,T);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete s[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,_)},y);s[p]=m},cancel:(h,v)=>{const _=td(h,v),y=s[_];delete s[_],delete d._snapshot._scheduledEvents[_],y!==void 0&&l.clearTimeout(y)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===h&&c.cancel(h,_.id)}}},f=h=>{if(!o.size)return;const v={...h,rootId:t.sessionId};o.forEach(_=>{var y;return(y=_.next)==null?void 0:y.call(_,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${EE++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const _=r.get(h);if(_&&_!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=ja(h);return o.add(v),{unsubscribe(){o.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:_}),v._send(_)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:_,target:y,event:T,delay:g,id:p}=h[v];c.schedule(_,y,T,g,p)}},_clock:l,_logger:u};return d}const hc=1;let Pe=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const SE={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class ji{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Xf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Pe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...SE,...n},{clock:i,logger:o,parent:s,syncSnapshot:l,id:u,systemId:c,inspect:f}=r;this.system=s?s.system:wE(this,{clock:i,logger:o}),f&&!s&&this.system.inspect(ja(f)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=s,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const _=new Set([...h?h.values():[],...v?v.values():[]]);for(const y of Array.from(_))y(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,o;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...e,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{(i=s.next)==null||i.call(s,e)}catch(l){Lt(l)}break;case"done":for(const s of this.observers)try{(o=s.next)==null||o.call(s,e)}catch(l){Lt(l)}this._stopProcedure(),this._complete(),this._doneEvent=mE(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var o;const i=ja(e,n,r);if(this._processingStatus!==Pe.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(o=i.complete)==null||o.call(i)}catch(s){Lt(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)Lt(s);else try{i.error(s)}catch(l){Lt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Pe.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Pe.Running;const e=Xg(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Wa&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Pe.Stopped?this:(this.mailbox.clear(),this._processingStatus===Pe.NotStarted?(this._processingStatus=Pe.Stopped,this):(this.mailbox.enqueue({type:Wa}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){Lt(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Lt(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(o){Lt(o)}}this.observers.clear(),n&&Lt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,qg(this.id,e))}_stopProcedure(){return this._processingStatus!==Pe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Xf(this._process.bind(this)),this._processingStatus=Pe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Pe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:cE)(this)}toJSON(){return{xstate$$type:hc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[vE](){return this}getSnapshot(){return this._snapshot}}function Es(t,...[e]){return new ji(t,e)}function TE(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,o]}function IE(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function xE(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=TE,e.execute=IE,e}function CE(t,e,n,r,{id:i,systemId:o,src:s,input:l,syncSnapshot:u}){const c=typeof s=="string"?dc(e.machine,s):s,f=typeof i=="function"?i(n):i;let d;return c&&(d=Es(c,{id:f,src:s,parent:t.self,syncSnapshot:u,systemId:o,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[Bn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function PE(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==Pe.Stopped&&n.start()})}function LE(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(s,l){}return o.type="snapshot.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=CE,o.execute=PE,o}function AE(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,s=typeof o=="string"?e.children[o]:o;let l=e.children;return s&&(l={...l},delete l[s.id]),[Bn(e,{children:l}),s]}function OE(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Pe.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function nm(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=AE,e.execute=OE,e}function pc(t,e,n,r){const{machine:i}=r,o=typeof t=="function",s=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!s)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof s!="function")return pc(s,e,n,r);const l={context:e,event:n},u=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(r,l,s):s(l,u)}const gc=t=>t.type==="atomic"||t.type==="final";function Mr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function ro(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function ws(t){const e=new Set(t),n=im(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))nd(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of Mr(r))if(i.type!=="history"&&!e.has(i)){const o=nd(i);for(const s of o)e.add(s)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function rm(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(gc(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=rm(i,e);return r}function im(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function om(t,e){const n=ws(e);return rm(t,im(n))}function mc(t,e){return e.type==="compound"?Mr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?Mr(e).every(n=>mc(t,n)):e.type==="final"}const Qs=t=>t[0]===dE;function NE(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===hE)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let s=0;s<i.length;s++){const l=i[s],u=o[s];if(l==="*")return s===i.length-1;if(l!==u)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function RE(t){const e=t.config.after;if(!e)return[];const n=(i,o)=>{const s=gE(i,t.id),l=s.type;return t.entry.push(iw(s,{id:l,delay:i})),t.exit.push(xE(l)),l};return Object.keys(e).flatMap((i,o)=>{const s=e[i],l=typeof s=="string"?{target:s}:s,u=Number.isNaN(+i)?i:+i,c=n(u);return tn(l).map(f=>({...f,event:c,delay:u}))}).map(i=>{const{delay:o}=i;return{...Cn(t,i.event,i),delay:o}})}function Cn(t,e,n){const r=tm(n.target),i=n.reenter??!1,o=DE(t,r),s={...n,actions:tn(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...s,source:`#${t.id}`,target:o?o.map(l=>`#${l.id}`):void 0})};return s}function kE(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Kg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Xn(r).map(i=>Cn(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Xn(t.config.onDone).map(r=>Cn(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Xn(n.onDone).map(i=>Cn(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Xn(n.onError).map(i=>Cn(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Xn(n.onSnapshot).map(i=>Cn(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function ME(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:tn(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function DE(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(Qs(n))return t.machine.getStateNodeById(n);const r=n[0]===Qg;if(r&&!t.parent)return Ss(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return Ss(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function sm(t){const e=tm(t.config.target);return e?{target:e.map(n=>typeof n=="string"?Ss(t.parent,n):n)}:t.parent.initial}function On(t){return t.type==="history"}function nd(t){const e=lm(t);for(const n of e)for(const r of ro(n,t))e.add(r);return e}function lm(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of Mr(r))n(i)}}return n(t),e}function Dr(t,e){if(Qs(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function Ss(t,e){if(typeof e=="string"&&Qs(e))try{return t.machine.getStateNodeById(e)}catch{}const n=fc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Dr(r,i)}return r}function Ts(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Dr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const s=Dr(t,o);if(!s)return i;const l=Ts(s,e[o]);return i.concat(l)},[]))}function zE(t,e,n,r){const o=Dr(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function FE(t,e,n,r){const i=Object.keys(e),o=Dr(t,i[0]),s=vc(o,e[i[0]],n,r);return!s||!s.length?t.next(n,r):s}function UE(t,e,n,r){const i=[];for(const o of Object.keys(e)){const s=e[o];if(!s)continue;const l=Dr(t,o),u=vc(l,s,n,r);u&&i.push(...u)}return i.length?i:t.next(n,r)}function vc(t,e,n,r){return typeof e=="string"?zE(t,e,n,r):Object.keys(e).length===1?FE(t,e,n,r):UE(t,e,n,r)}function WE(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function gn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function BE(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function am(t,e,n){const r=new Set;for(const i of t){let o=!1;const s=new Set;for(const l of r)if(BE($a([i],e,n),$a([l],e,n)))if(gn(i.source,l.source))s.add(l);else{o=!0;break}if(!o){for(const l of s)r.delete(l);r.add(i)}}return Array.from(r)}function VE(t){const[e,...n]=t;for(const r of ro(e,void 0))if(n.every(i=>gn(i,r)))return r}function yc(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(On(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of yc(sm(r),e))n.add(i);else n.add(r);return[...n]}function um(t,e){const n=yc(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||gn(i,t.source)))return t.source;const r=VE(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function $a(t,e,n){var i;const r=new Set;for(const o of t)if((i=o.target)!=null&&i.length){const s=um(o,n);o.reenter&&o.source===s&&r.add(s);for(const l of e)gn(l,s)&&r.add(l)}return[...r]}function jE(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Ga(t,e,n,r,i,o){if(!t.length)return e;const s=new Set(e._nodes);let l=e.historyValue;const u=am(t,s,l);let c=e;i||([c,l]=bE(c,r,n,u,s,l,o)),c=zr(c,r,n,u.flatMap(d=>d.actions),o),c=GE(c,r,n,u,s,o,l,i);const f=[...s];c.status==="done"&&(c=zr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),o));try{return l===e.historyValue&&jE(e._nodes,s)?c:Bn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function $E(t,e,n,r,i){if(r.output===void 0)return;const o=Ba(i.id,i.output!==void 0&&i.parent?Va(i.output,t.context,e,n.self):void 0);return Va(r.output,t.context,o,n.self)}function GE(t,e,n,r,i,o,s,l){let u=t;const c=new Set,f=new Set;HE(r,s,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,_)=>v.order-_.order)){i.add(h);const v=[];v.push(...h.entry);for(const _ of h.invoke)v.push(LE(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;v.push(..._)}if(u=zr(u,e,n,v,o,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let y=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,T=y||h;for((_==null?void 0:_.type)==="compound"&&o.push(Ba(_.id,h.output!==void 0?Va(h.output,u.context,e,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!d.has(y)&&mc(i,y);)d.add(y),o.push(Ba(y.id)),T=y,y=y.parent;if(y)continue;u=Bn(u,{status:"done",output:$E(u,e,n,u.machine.root,T)})}}return u}function HE(t,e,n,r){for(const i of t){const o=um(i,e);for(const l of i.target||[])!On(l)&&(i.source!==l||i.source!==o||i.reenter)&&(r.add(l),n.add(l)),dr(l,e,n,r);const s=yc(i,e);for(const l of s){const u=ro(l,o);(o==null?void 0:o.type)==="parallel"&&u.push(o),cm(r,e,n,u,!i.source.parent&&i.reenter?void 0:o)}}}function dr(t,e,n,r){var i;if(On(t))if(e[t.id]){const o=e[t.id];for(const s of o)r.add(s),dr(s,e,n,r);for(const s of o)Ll(s,t.parent,r,e,n)}else{const o=sm(t);for(const s of o.target)r.add(s),o===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),dr(s,e,n,r);for(const s of o.target)Ll(s,t.parent,r,e,n)}else if(t.type==="compound"){const[o]=t.initial.target;On(o)||(r.add(o),n.add(o)),dr(o,e,n,r),Ll(o,t,r,e,n)}else if(t.type==="parallel")for(const o of Mr(t).filter(s=>!On(s)))[...r].some(s=>gn(s,o))||(On(o)||(r.add(o),n.add(o)),dr(o,e,n,r))}function cm(t,e,n,r,i){for(const o of r)if((!i||gn(o,i))&&t.add(o),o.type==="parallel")for(const s of Mr(o).filter(l=>!On(l)))[...t].some(l=>gn(l,s))||(t.add(s),dr(s,e,n,t))}function Ll(t,e,n,r,i){cm(n,r,i,ro(t,e))}function bE(t,e,n,r,i,o,s){let l=t;const u=$a(r,i,o);u.sort((f,d)=>d.order-f.order);let c;for(const f of u)for(const d of WE(f)){let h;d.history==="deep"?h=v=>gc(v)&&gn(v,f):h=v=>v.parent===f,c??(c={...o}),c[d.id]=Array.from(i).filter(h)}for(const f of u)l=zr(l,e,n,[...f.exit,...f.invoke.map(d=>nm(d.id))],s),i.delete(f);return[l,c||o]}let rd=!1;function fm(t,e,n,r,i,o){const{machine:s}=t;let l=t;for(const c of r){let _=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{rd=d,d(h,v)}finally{rd=!1}};var u=_;const f=typeof c=="function",d=f?c:s.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===Pe.Running?_():n.defer(()=>{_()});continue}const y=d,[T,g,p]=y.resolve(n,l,h,v,d,i);l=T,"retryResolve"in y&&(o==null||o.push([y,g])),"execute"in y&&(n.self._processingStatus===Pe.Running?y.execute(n,g):n.defer(y.execute.bind(null,n,g))),p&&(l=fm(l,e,n,p,i,o))}return l}function zr(t,e,n,r,i,o){const s=o?[]:void 0,l=fm(t,e,n,r,{internalQueue:i,deferredActorIds:o},s);return s==null||s.forEach(([u,c])=>{u.retryResolve(n,l,c)}),l}function Al(t,e,n,r=[]){let i=t;const o=[];function s(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),o.push(c)}if(e.type===Wa)return i=Bn(id(i,e,n),{status:"stopped"}),s(i,e,[]),{snapshot:i,microstates:o};let l=e;if(l.type!==Yg){const c=l,f=_E(c),d=od(c,i);if(f&&!d.length)return i=Bn(t,{status:"error",error:c.error}),s(i,c,[]),{snapshot:i,microstates:o};i=Ga(d,t,n,l,!1,r),s(i,c,d)}let u=!0;for(;i.status==="active";){let c=u?QE(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=od(l,i)}i=Ga(c,i,n,l,!1,r),u=i!==f,s(i,l,c)}return i.status!=="active"&&id(i,l,n),{snapshot:i,microstates:o}}function id(t,e,n){return zr(t,e,n,Object.values(t.children).map(r=>nm(r)),[])}function od(t,e){return e.machine.getTransitionData(e,t)}function QE(t,e){const n=new Set,r=t._nodes.filter(gc);for(const i of r)e:for(const o of[i].concat(ro(i,void 0)))if(o.always){for(const s of o.always)if(s.guard===void 0||pc(s.guard,t.context,e,t)){n.add(s);break e}}return am(Array.from(n),new Set(t._nodes),t.historyValue)}function KE(t,e){const n=ws(Ts(t,e));return om(t,[...n])}function YE(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const qE=function(e){return Jg(e,this.value)},XE=function(e){return this.tags.has(e)},JE=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},ZE=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:s,hasTag:l,matches:u,...c}=this;return{...c,tags:Array.from(n)}},ew=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function $o(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:om(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:qE,hasTag:XE,can:JE,getMeta:ew,toJSON:ZE}}function Bn(t,e={}){return $o({...t,...e},t.machine)}function tw(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:s,can:l,hasTag:u,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const y in o){const T=o[y];v[y]={snapshot:T.getPersistedSnapshot(e),src:T.src,systemId:T._systemId,syncSnapshot:T._syncSnapshot}}return{...h,context:dm(s),children:v}}function dm(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:hc,id:r.id};else{const i=dm(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function nw(t,e,n,r,{event:i,id:o,delay:s},{internalQueue:l}){const u=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof s=="string"){const d=u&&u[s];f=typeof d=="function"?d(n,r):d}else f=typeof s=="function"?s(n,r):s;return typeof f!="number"&&l.push(c),[e,{event:c,id:o,delay:f}]}function rw(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function iw(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=nw,n.execute=rw,n}function ow(t,{machine:e,context:n},r,i){const o=(s,l={})=>{const{systemId:u,input:c}=l;if(typeof s=="string"){const f=dc(e,s);if(!f)throw new Error(`Actor logic '${s}' not implemented in machine '${e.id}'`);const d=Es(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:s,systemId:u});return i[d.id]=d,d}else return Es(s,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:s,systemId:u})};return(s,l)=>{const u=o(s,l);return i[u.id]=u,t.defer(()=>{u._processingStatus!==Pe.Stopped&&u.start()}),u}}function sw(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},s={context:e.context,event:n.event,spawn:ow(t,e,n.event,o),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(s,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(s,r):f}const u=Object.assign({},e.context,l);return[Bn(e,{context:u,children:Object.keys(o).length?{...e.children,...o}:e.children})]}function j(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=sw,e}let sd=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function lw(t,e,n,r,{to:i,event:o,id:s,delay:l},u){var _;const c=e.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);const f=typeof o=="function"?o(n,r):o;let d;if(typeof l=="string"){const y=c&&c[l];d=typeof y=="function"?y(n,r):y}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===sd.Parent?v=t.self._parent:h===sd.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(_=u.deferredActorIds)!=null&&_.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:s,delay:d}]}function aw(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function uw(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:o}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,o);return}t.system._relay(t.self,n,r.type===pE?qg(t.self.id,r.data):r)})}function zt(t,e,n){function r(i,o){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=lw,r.retryResolve=aw,r.execute=uw,r}const ld=new WeakMap;function Yn(t,e,n){let r=ld.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},ld.set(t,r)),r[e]}const cw={},ri=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class _c{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Qg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Zf(this.config.states,(r,i)=>new _c(r,{_parent:this,_key:i,_machine:this.machine})):cw,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=tn(this.config.entry).slice(),this.exit=tn(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=tn(e.tags).slice()}_initialize(){this.transitions=kE(this),this.config.always&&(this.always=Xn(this.config.always).map(e=>Cn(this,Kg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(ri),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(ri),eventType:null})}:void 0,history:this.history,states:Zf(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(ri)})),entry:this.entry.map(ri),exit:this.exit.map(ri),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Yn(this,"invoke",()=>tn(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??ed(this.id,n),s=typeof r=="string"?r:`xstate.invoke.${ed(this.id,n)}`;return{...e,src:s,id:o,systemId:i,toJSON(){const{onDone:l,onError:u,...c}=e;return{...c,type:"xstate.invoke",src:s,id:o}}}}))}get on(){return Yn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return Yn(this,"delayedTransitions",()=>RE(this))}get initial(){return Yn(this,"initial",()=>ME(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const s=Yn(this,`candidates-${r}`,()=>NE(this,r));for(const l of s){const{guard:u}=l,c=e.context;let f=!1;try{f=!u||pc(u,c,n,e)}catch(d){const h=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),o=l;break}}return o?[o]:void 0}get events(){return Yn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const fw="#";class Ec{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new _c(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new Ec(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=KE(this.root,e.value),r=ws(Ts(this.root,n));return $o({_nodes:[...r],context:e.context||{},children:{},status:mc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return Al(e,n,r).snapshot}microstep(e,n,r){return Al(e,n,r).microstates}getTransitionData(e,n){return vc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=$o({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?zr(o,n,e,[j(({spawn:l,event:u,self:c})=>i({spawn:l,input:u.input,self:c}))],r):o}getInitialSnapshot(e,n){const r=Xg(n),i=[],o=this.getPreInitialState(e,r,i),s=Ga([{target:[...lm(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:l}=Al(s,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=fc(e),r=n.slice(1),i=Qs(n[0])?n[0].slice(fw.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Ss(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return tw(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(u=>{const c=i[u],f=c.snapshot,d=c.src,h=typeof d=="string"?dc(this,d):d;if(!h)return;const v=Es(h,{id:u,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[u]=v});const o=$o({...e,children:r,_nodes:Array.from(ws(Ts(this.root,e.value)))},this);let s=new Set;function l(u,c){if(!s.has(u)){s.add(u);for(let f in u){const d=u[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===hc){u[f]=c[d.id];continue}l(d,c)}}}}return l(o.context,r),o}}function Pt(t,e){return new Ec(t,e)}const dw=Pt({types:{},context:{startPoint:null,type:z.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},NUMBER_INPUT:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:j(()=>(He(!0),b([]),B([]),pe(null),{startPoint:null})),RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new dt(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=Vt(),n.lineWidth=jt(),B([n])},DRAW_FINAL_LINE:j(({context:t,event:e})=>{if(console.log("drawFinalLine",{context:t,event:e}),!t.startPoint)throw new Error("Start point is not set during DRAW_FINAL_LINE in LineEntity");let n;if(e.type==="NUMBER_INPUT"){const i=e.value,s=new tt(e.worldClickPoint.x-t.startPoint.x,e.worldClickPoint.y-t.startPoint.y).normalize();n=t.startPoint.translate(s.multiply(i))}else if(e.type==="MOUSE_CLICK")n=e.worldClickPoint;else throw new Error("Received unexpected event type in DRAW_FINAL_LINE of LineEntity");const r=new dt(t.startPoint,n);return r.lineColor=Vt(),r.lineWidth=jt(),Re(r),B([new dt(n,n)]),pe(n),{startPoint:n}})}}),hw=Pt({types:{},context:{startPoint:null,type:z.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{He(!0),B([]),b([]),pe(null)},RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new Ht(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=Vt(),n.lineWidth=jt(),B([n])},DRAW_FINAL_RECTANGLE:({context:t,event:e})=>{const n=e.worldClickPoint,r=new Ht(t.startPoint,n);r.lineColor=Vt(),r.lineWidth=jt(),Re(r)}}}),pw=Pt({types:{},context:{centerPoint:null,type:z.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:j(()=>(console.log("activate circle tool"),He(!0),B([]),b([]),pe(null),{centerPoint:null})),RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{centerPoint:t.worldClickPoint})),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new kr(t.centerPoint,Gt(e.drawController.getWorldMouseLocation(),t.centerPoint));n.lineColor=Vt(),n.lineWidth=jt(),B([n])},DRAW_FINAL_CIRCLE:j(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new kr(t.centerPoint,Gt(n,t.centerPoint));return r.lineColor=Vt(),r.lineWidth=jt(),Re(r),B([]),{centerPoint:null}})}});function Fr(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const o=i.distanceTo(t);o&&o[0]<r[0]&&(r=o,n=i)}),{distance:r[0],segment:r[1],entity:n}}function gw(t,e){const n=Fr(e.worldClickPoint,we());if(n&&n.distance<lc){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?b([r.id]):e.holdingCtrl?Rr(r)?b(Oe().filter(i=>i!==r.id)):b([...Oe(),r.id]):b([...Oe(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function mw(t,e,n){const r=new Ht(t,e);console.log("Finish selection: ",r);const i=hm(r,t),o=Ee(we().map(s=>{if(i){if(s.intersectsWithBox(r.getBoundingBox())||s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id}else if(s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id;return null}));b(o)}function vw(t,e){const n=new Ht(t,e),r=hm(n,t);n.lineColor=r?H_:b_,n.lineWidth=Q_,n.lineStyle=K_,B([n])}function hm(t,e){if(!t.getShape()||!e)return!1;const n=Math.min(...t.getShape().vertices.map(r=>r.x));return Math.abs(e.x-n)>Fa}const mn=Pt({types:{},context:{startPoint:null,type:z.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),He(!1),B([]),b([])},HANDLE_FIRST_SELECT_POINT:j(({context:t,event:e})=>(console.log("handle first select point"),gw(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");vw(t.startPoint,e.drawController.getWorldMouseLocation())},SELECT_ENTITIES_INSIDE_RECTANGLE:({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");mw(t.startPoint,e.worldClickPoint,e.holdingCtrl),B([])},DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),Hs(y_()),b([]),B([])},RESET_SELECTION:j(()=>(B([]),b([]),{startPoint:null}))}});function yw(t,e,n,r){const i=Gs(to([e,...r,t,n],pt),[s=>Gt(e,s)]),o=i.findIndex(s=>pt(t,s));if(o===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[o-1]||e,i[o+1]||n]}function _w(t,e){const n=t.map(r=>({point:r,angle:new St(e,r).slope}));return Gs(n,[r=>r.angle]).map(r=>r.point)}function Ew(t,e,n){const r=_w(to([...n,t],pt),e.getShape().center),i=r.findIndex(o=>pt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function ww(t,e,n){const r=$g(to([...n,t],pt),e.getShape().center,e.getShape().start),i=r.findIndex(o=>pt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function ad(t,e){return Ee(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function ud(t,e,n){const r=t.getShape(),[i,o]=yw(e,r.start,r.end,n);S_([i,o].map(u=>new Vi(u)));const l=t.cutAtPoints([i,o]).filter(u=>!u.containsPointOnShape(e));$t(t),Re(...l)}function Sw(t,e,n){if(n.length===0){$t(t);return}const[r,i]=Ew(e,t,n),o=t.getShape(),s=o.center,l=[r,i,e].map(d=>Math.atan2(d.y-s.y,d.x-s.x)),[u,c]=Tw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new ot(s,o.r,u,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),$t(t),Re(f)}function Tw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function Iw(t,e,n){const[r,i]=ww(e,t,n);if(pt(r,i)){$t(t);return}$t(t),t.cutAtPoints([r,i]).filter(o=>!o.containsPointOnShape(e)).forEach(o=>{Object.assign(o,{lineColor:t.lineColor,lineWidth:t.lineWidth}),Re(o)})}const xw=Pt({types:{},context:{startPoint:null,type:z.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:j(()=>(console.log("activate eraser tool"),He(!1),B([]),b([]),{})),HANDLE_MOUSE_CLICK:j(({context:t,event:e})=>(Cw(e.worldClickPoint),t))}});function Cw(t){const e=Fr(t,we());if(!e)return;const n=e.segment.start,r=ad(e.entity,we());switch(e.entity.getType()){case q.Line:{const o=e.entity;ud(o,n,r);break}case q.Circle:{const o=e.entity;Sw(o,n,r);break}case q.Arc:{const o=e.entity;Iw(o,n,r);break}case q.Rectangle:{const o=e.entity,l=at(o.getShape()).map(f=>new dt(f)),u=Fr(t,l);$t(o),Re(...l);const c=ad(u.entity,we());ud(u.entity,n,c);break}case q.Image:}}function cd(t,e,n){t.forEach(r=>r.move(e,n))}const Pw=Pt({types:{},context:{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null,type:z.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Oe().length>0),Oe().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Oe().length===0),Oe().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:mn,onDone:{actions:j(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=ye())==null?void 0:t.getSnapshot()),{startPoint:null}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:zt("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:zt("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:zt("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_ENTITIES"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:j(()=>(console.log("activate move tool"),He(!1),B([]),b([]),pe(null),{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null})),ENABLE_HELPERS:()=>{He(!0)},RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),COPY_SELECTION_BEFORE_MOVE:j(({context:t})=>{const e=tc();return B(e),$t(...e),b([]),{startPoint:t.startPoint,originalSelectedEntities:Ee(e.map(n=>n.clone())),movedEntities:e}}),DRAW_TEMP_MOVE_ENTITIES:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawController.getWorldMouseLocation(),r=t.originalSelectedEntities.map(o=>o.clone());cd(r,n.x-t.startPoint.x,n.y-t.startPoint.y);const i=new dt(t.startPoint,n);i.lineColor=Bg,i.lineWidth=Vg,i.lineStyle=jg,B([i,...r])},MOVE_SELECTION:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=e.worldClickPoint;cd(t.originalSelectedEntities,n.x-t.startPoint.x,n.y-t.startPoint.y),Re(...t.originalSelectedEntities),B([]),b([])},DESELECT_ENTITIES:j(()=>(B([]),b([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=we();return console.log({entities:e}),Re(...t.originalSelectedEntities),B([]),b([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...mn.implementations.actions}});var qe=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t.NUMBER_INPUT="NUMBER_INPUT",t.TEXT_INPUT="TEXT_INPUT",t.ABSOLUTE_POINT_INPUT="ABSOLUTE_POINT_INPUT",t.RELATIVE_POINT_INPUT="RELATIVE_POINT_INPUT",t))(qe||{});class $i{constructor(e,n,r,i=0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"imageElement");D(this,"polygon");D(this,"angle");this.imageElement=e,n instanceof pn?this.polygon=n:this.polygon=uc(n,r),r instanceof w?this.angle=i:this.angle=r}draw(e){at(this.polygon).forEach(i=>{e.drawLine(i.start,i.end)});const n=this.polygon.box.width,r=this.polygon.box.height;e.drawImage(this.imageElement,this.polygon.box.xmin,this.polygon.box.ymin,n,r,this.angle)}move(e,n){this.polygon=this.polygon.translate(new tt(e,n))}scale(e,n){const r=this.polygon.box.center,i=xt(r,e,n);this.polygon=this.polygon.translate(new tt(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e),this.angle+=n}clone(){const e=document.createElement("img");return e.src=this.imageElement.src,new $i(e,this.polygon.clone())}intersectsWithBox(e){return Yu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=at(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=at(this.polygon);return[{point:e[0],type:U.LineEndPoint},{point:e[1],type:U.LineEndPoint},{point:e[2],type:U.LineEndPoint},{point:e[3],type:U.LineEndPoint},{point:n[0].middle(),type:U.LineMidPoint},{point:n[1].middle(),type:U.LineMidPoint},{point:n[2].middle(),type:U.LineMidPoint},{point:n[3].middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?at(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})}getType(){return q.Image}containsPointOnShape(e){return at(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y})),imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new pn(e.shapeData.points.map(o=>new w(o.x,o.y))),r=new Image;r.src=e.shapeData.imageData;const i=new $i(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function fd(t,e,n,r){const i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y);if(i===0||o===0)return null;const s=t/e,l=i/o;if(s<l){const u=Math.abs(o*s),c=n.x<r.x?n.x:n.x-u,f=n.y<r.y?n.y:n.y-o;return new Dt(c,f,c+u,f+o)}else{const u=Math.abs(i/s),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-u;return new Dt(c,f,c+i,f+u)}}const pm=Pt({types:{},context:{type:z.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[qe.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{target:"INIT"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},ESC:{target:"INIT"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:j(()=>(He(!0),B([]),b([]),pe(null),{startPoint:null,imageElement:null})),STORE_IMAGE_DATA:j(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,startPoint:e.worldClickPoint})),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!fd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.drawController.getWorldMouseLocation()))return;const r=new $i(t.imageElement,new pn),i=new Ht(uc(t.startPoint,e.drawController.getWorldMouseLocation()));B([r]),ic([i])},DRAW_FINAL_IMAGE_IMPORT:({context:t,event:e})=>{if(console.log("drawFinalImageImport",{context:t,event:e}),!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=fd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldClickPoint);if(!n)return;const r=new $i(t.imageElement,nE(n));Re(r)},SWITCH_TO_SELECT_TOOL:()=>{_s(new ji(mn))}}});function dd(t,e,n,r){const i=Gt(e,r)/Gt(e,n);t.forEach(o=>o.scale(e,i))}const Lw=Pt({types:{},context:{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[],type:z.SCALE},initial:"INIT",states:{INIT:{description:"Initializing the scale tool",always:{actions:"INIT_SCALE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Oe().length>0),Oe().length>0),target:"WAITING_FOR_BASE_VECTOR_START_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Oe().length===0),Oe().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to scale",meta:{instructions:"Select what you want to scale, then ENTER"},invoke:{id:"selectToolInsideTheScaleTool",src:mn,onDone:{actions:j(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=ye())==null?void 0:t.getSnapshot()),{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:zt("selectToolInsideTheScaleTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_SCALE_TOOL"]},ENTER:{actions:zt("selectToolInsideTheScaleTool",({event:t})=>t)},DRAW:{actions:zt("selectToolInsideTheScaleTool",({event:t})=>t)}}},WAITING_FOR_BASE_VECTOR_START_POINT:{description:"Select the origin of the scale operation",meta:{instructions:"Select the origin of the scale operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_START_POINT"],target:"WAITING_FOR_BASE_VECTOR_END_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_BASE_VECTOR_END_POINT:{description:"Select the end of the base scale line",meta:{instructions:"Select the end of the base scale line"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_END_POINT","COPY_SELECTION_BEFORE_SCALE"],target:"WAITING_FOR_SCALE_VECTOR_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_SCALE_VECTOR_END_POINT:{description:"Select the end of the scale line",meta:{instructions:"Select the end of the scale line"},on:{DRAW:{actions:["DRAW_TEMP_SCALE_ENTITIES"]},MOUSE_CLICK:{actions:["SCALE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_SCALE_TOOL:()=>{console.log("activate scale tool"),He(!1),B([]),b([]),pe(null)},ENABLE_HELPERS:()=>{He(!0)},RECORD_BASE_VECTOR_START_POINT:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,baseVectorStartPoint:e.worldClickPoint})),RECORD_BASE_VECTOR_END_POINT:j(({context:t,event:e})=>({...t,baseVectorEndPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_SCALE:j(({context:t})=>{const e=tc();return B(e),$t(...e),b([]),{...t,originalSelectedEntities:Ee(e.map(n=>n.clone()))}}),DRAW_TEMP_SCALE_ENTITIES:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling draw temp scale entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=Ee(t.originalSelectedEntities.map(i=>i.clone()));dd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),B(r)},SCALE_SELECTION:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling scale selection without some scale vector endpoints");const n=e.worldClickPoint,r=Ee(t.originalSelectedEntities.map(i=>i.clone()));dd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),Re(...r),B([]),b([])},DESELECT_ENTITIES:j(()=>(B([]),b([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=we();return console.log({entities:e}),Re(...t.originalSelectedEntities),B([]),B([]),b([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...mn.implementations.actions}});function hd(t,e,n,r){const i=new St(e,r).slope-new St(e,n).slope;t.forEach(o=>o.rotate(e,i))}const Aw=Pt({types:{},context:{rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[],type:z.ROTATE},initial:"INIT",states:{INIT:{description:"Initializing the rotate tool",always:{actions:"INIT_ROTATE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Oe().length>0),Oe().length>0),target:"WAITING_FOR_ROTATION_ORIGIN"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Oe().length===0),Oe().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to rotate",meta:{instructions:"Select what you want to rotate, then ENTER"},invoke:{id:"selectToolInsideTheRotateTool",src:mn,onDone:{actions:j(({context:t})=>{var e;return console.log("select tool finished selection"),console.log("actor: ",(e=ye())==null?void 0:e.getSnapshot()),{...t}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:zt("selectToolInsideTheRotateTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_ROTATE_TOOL"]},ENTER:{actions:zt("selectToolInsideTheRotateTool",({event:t})=>t)},DRAW:{actions:zt("selectToolInsideTheRotateTool",({event:t})=>t)}}},WAITING_FOR_ROTATION_ORIGIN:{description:"Select the origin of the rotate operation",meta:{instructions:"Select the origin of the rotate operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ORIGIN"],target:"WAITING_FOR_ANGLE_START_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_START_POINT:{description:"Select the end of the base rotate line",meta:{instructions:"Select the end of the base rotate line"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ANGLE_START_POINT","COPY_SELECTION_BEFORE_ROTATE"],target:"WAITING_FOR_ANGLE_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_END_POINT:{description:"Select the end of the rotate line",meta:{instructions:"Select the end of the rotate line"},on:{DRAW:{actions:["DRAW_TEMP_ROTATE_ENTITIES"]},MOUSE_CLICK:{actions:["ROTATE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_ROTATE_TOOL:()=>{console.log("activate rotate tool"),He(!1),B([]),b([]),pe(null)},ENABLE_HELPERS:()=>{He(!0)},RECORD_ROTATION_ORIGIN:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,rotationOrigin:e.worldClickPoint})),RECORD_ROTATION_ANGLE_START_POINT:j(({context:t,event:e})=>({...t,angleStartPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_ROTATE:j(({context:t})=>{const e=tc();return B(e),$t(...e),b([]),{...t,originalSelectedEntities:Ee(e.map(n=>n.clone()))}}),DRAW_TEMP_ROTATE_ENTITIES:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling draw temp rotate entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=Ee(t.originalSelectedEntities.map(i=>i.clone()));hd(r,t.rotationOrigin,t.angleStartPoint,n),B(r)},ROTATE_SELECTION:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling rotate selection without some rotate vector endpoints");const n=e.worldClickPoint,r=Ee(t.originalSelectedEntities.map(i=>i.clone()));hd(r,t.rotationOrigin,t.angleStartPoint,n),Re(...r),B([]),b([])},DESELECT_ENTITIES:j(({context:t})=>(B([]),b([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=we();return console.log({entities:e}),Re(...t.originalSelectedEntities),B([]),b([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]}}),...mn.implementations.actions}});function pd(t=[]){let e=t[0],n;for(const r of t)(n==null||r>n)&&(n=r,e=r);return e}function gd(t=[]){let e=t[0],n;for(const r of t)(n==null||r<n)&&(n=r,e=r);return e}class Gi{constructor(e,n,r){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"startPoint");D(this,"endPoint");D(this,"offsetPoint");this.startPoint=e,this.endPoint=n,this.offsetPoint=r}getDrawPoints(){const e=new St(this.startPoint,this.endPoint),[,n]=this.offsetPoint.distanceTo(e),r=n.end;let i;pt(r,this.offsetPoint)?i=e.norm:i=new tt(r,this.offsetPoint);const o=i.normalize(),s=this.startPoint.clone().translate(i),l=this.endPoint.clone().translate(i),u=this.startPoint.clone().translate(o.multiply(Yf)),c=this.endPoint.clone().translate(o.multiply(Yf)),f=s.clone().translate(o.multiply(Kf)),d=l.clone().translate(o.multiply(Kf)),v=new w((s.x+l.x)/2,(s.y+l.y)/2).clone().translate(o.multiply($_));return{offsetStartPoint:s,offsetEndPoint:l,offsetStartPointExtend:f,offsetEndPointExtend:d,offsetStartPointMargin:u,offsetEndPointMargin:c,midpointMeasurementLineOffset:v,normalUnit:o}}draw(e){const n=this.getDrawPoints();if(!n)return;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u,midpointMeasurementLineOffset:c,normalUnit:f}=n;e.drawArrowHead(r,i),e.drawArrowHead(i,r),e.drawLine(r,i),e.drawLine(l,o),e.drawLine(u,s);const d=z1(Gt(this.startPoint,this.endPoint),j_);e.drawText(String(d),c,{textAlign:"center",textDirection:f.rotate90CCW(),fontSize:G_})}move(e,n){this.startPoint=this.startPoint.translate(e,n),this.endPoint=this.endPoint.translate(e,n),this.offsetPoint=this.offsetPoint.translate(e,n)}scale(e,n){this.startPoint=xt(this.startPoint,e,n),this.endPoint=xt(this.endPoint,e,n),this.offsetPoint=xt(this.offsetPoint,e,n)}rotate(e,n){this.startPoint=this.startPoint.rotate(n,e),this.endPoint=this.endPoint.rotate(n,e),this.offsetPoint=this.offsetPoint.rotate(n,e)}clone(){return new Gi(this.startPoint.clone(),this.endPoint.clone(),this.offsetPoint.clone())}intersectsWithBox(e){const n=this.getDrawPoints(),r=[new yt(n.offsetStartPoint,n.offsetEndPoint),new yt(n.offsetStartPointMargin,n.offsetStartPointExtend),new yt(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(i.intersect(e).length>0||e.contains(i))return!0;return!1}isContainedInBox(e){const n=this.getDrawPoints(),r=[new yt(n.offsetStartPoint,n.offsetEndPoint),new yt(n.offsetStartPointMargin,n.offsetStartPointExtend),new yt(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(!e.contains(i))return!1;return!0}getBoundingBox(){const e=this.getDrawPoints();if(!e)return null;const n=[e.offsetStartPointMargin,e.offsetStartPointExtend,e.offsetEndPointMargin,e.offsetEndPointExtend];return new Dt(gd(n.map(r=>r.x)),gd(n.map(r=>r.y)),pd(n.map(r=>r.x)),pd(n.map(r=>r.y)))}getShape(){return null}getSnapPoints(){return[]}getIntersections(){return[]}getFirstPoint(){return this.startPoint}distanceTo(e){const n=this.getDrawPoints();if(!n)return null;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u}=n,f=new St(r,i).distanceTo(e),h=new St(l,o).distanceTo(e),_=new St(u,s).distanceTo(e);return M1([f,h,_],y=>y[0])}getSvgString(){throw new Error("getSvgString for MeasurementEntity not yet implemented")}getType(){return q.Measurement}containsPointOnShape(e){throw new Error("containsPointOnShape for MeasurementEntity not yet implemented")}async toJson(){return{id:this.id,type:q.Measurement,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.startPoint.x,y:this.startPoint.y},endPoint:{x:this.endPoint.x,y:this.endPoint.y},offsetPoint:{x:this.offsetPoint.x,y:this.offsetPoint.y}}}}static async fromJson(e){const n=new w(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new w(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new w(e.shapeData.offsetPoint.x,e.shapeData.offsetPoint.y),o=new Gi(n,r,i);return o.id=e.id,o.lineColor=e.lineColor,o.lineWidth=e.lineWidth,o}}const Ow=Pt({types:{},context:{startPoint:null,endPoint:null,type:z.MEASUREMENT},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_MEASUREMENT_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the measurement",meta:{instructions:"Select the start point of the measurement"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the measurement",meta:{instructions:"Select the end point of the measurement"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},ESC:{target:"INIT"}}},WAITING_FOR_OFFSET:{description:"Select the offset to display the measurement at",meta:{instructions:"Select the offset to display the measurement at"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_MEASUREMENT_TOOL:j(()=>(He(!0),b([]),B([]),pe(null),{startPoint:null})),RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),RECORD_END_POINT:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,endPoint:e.worldClickPoint})),DRAW_TEMP_MEASUREMENT:({context:t,event:e})=>{const n=t.startPoint;let r,i;if(t.endPoint)r=t.endPoint,i=e.drawController.getWorldMouseLocation();else{r=e.drawController.getWorldMouseLocation();const s=new tt(n,r).rotate(-90*Ua).normalize();i=n.clone().translate(s.multiply(B_))}const o=new Gi(t.startPoint,r,i);o.lineColor=Vt(),o.lineWidth=jt(),B([o])},DRAW_FINAL_MEASUREMENT:({context:t,event:e})=>{console.log("drawFinalMeasurement",{context:t,event:e});const n=e.worldClickPoint,r=new Gi(t.startPoint,t.endPoint,n);r.lineColor=Vt(),r.lineWidth=jt(),Re(r)}}}),gm={[z.LINE]:dw,[z.RECTANGLE]:hw,[z.CIRCLE]:pw,[z.SELECT]:mn,[z.ERASER]:xw,[z.MOVE]:Pw,[z.SCALE]:Lw,[z.ROTATE]:Aw,[z.IMAGE_IMPORT]:pm,[z.MEASUREMENT]:Ow};function Nw(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const Rw=()=>{const[t,e]=R.useState(z.LINE),[n,r]=R.useState(45),[i,o]=R.useState("#FFF"),[s,l]=R.useState(1),[u,c]=R.useState(1),f=R.useCallback(()=>{var y,T;e((T=(y=ye())==null?void 0:y.getSnapshot())==null?void 0:T.context.type),r(zg()),o(Vt()),l(jt()),c(ft().getScreenScale())},[]),d=y=>{y.ctrlKey&&y.preventDefault()};R.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(vs.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(vs.UPDATE_STATE,f)}),[f]);const h=R.useCallback(y=>{var g;(g=ye())==null||g.stop();const T=new ji(gm[y]);_s(T),e(y)},[]),v=R.useCallback(y=>{r(y),T_(y,!1)},[]),_=R.useCallback(()=>{ft().setScreenScale(1),ft().setScreenOffset(new w(0,0))},[]);return M.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[M.jsx(K,{title:"Select (s)",icon:me.Direction,onClick:()=>{h(z.SELECT)},active:t===z.SELECT}),M.jsx(K,{title:"Line (l)",icon:me.Line,onClick:()=>{h(z.LINE)},active:t===z.LINE}),M.jsx(K,{title:"Rectangle (r)",icon:me.Square,onClick:()=>{h(z.RECTANGLE)},active:t===z.RECTANGLE}),M.jsx(K,{title:"Circle (c)",icon:me.Circle,onClick:()=>{h(z.CIRCLE)},active:t===z.CIRCLE}),M.jsx(K,{className:"mt-2",title:"Move",icon:me.Expand,iconClassname:"transform rotate-45",onClick:()=>h(z.MOVE),active:t===z.MOVE}),M.jsx(K,{title:"Scale",icon:me.Scale,onClick:()=>h(z.SCALE),active:t===z.SCALE}),M.jsx(K,{title:"Rotate",icon:me.Clockwise,onClick:()=>h(z.ROTATE),active:t===z.ROTATE}),M.jsx(K,{className:"mt-2",title:"Add measurements",icon:me.Measurement,onClick:()=>h(z.MEASUREMENT),active:t===z.MEASUREMENT}),M.jsx(K,{className:"mt-2",title:"Undo (ctrl + z)",icon:me.ArrowLeftCircle,onClick:()=>M_()}),M.jsx(K,{title:"Redo (ctrl + shift + z)",icon:me.ArrowRightCircle,onClick:()=>D_()}),M.jsx(K,{className:"mt-2",title:"Delete segments",icon:me.Crop,onClick:()=>h(z.ERASER),active:t===z.ERASER}),M.jsx(Tl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:tE.map(y=>M.jsx(K,{title:"Change line color",style:{backgroundColor:y},active:y===i,onClick:()=>L_(y)},"line-color--"+y))}),M.jsx(Tl,{title:"Line width",label:String(s)+"px",children:bg(9).map(y=>{const T=y+1;return M.jsx(K,{title:"Change line width",label:String(T)+"px",active:T===s,onClick:()=>A_(T)},"line-width--"+T)})}),M.jsxs(Tl,{title:"Snap angles",label:n+"",children:[M.jsx(K,{title:"Add guide every 5 degrees",label:"5",onClick:()=>v(5),active:n===5}),M.jsx(K,{title:"Add guide every 15 degrees",label:"15",onClick:()=>v(15),active:n===15}),M.jsx(K,{title:"Add guide every 30 degrees",label:"30",onClick:()=>v(30),active:n===30}),M.jsx(K,{title:"Add guide every 45 degrees",label:"45",onClick:()=>v(45),active:n===45}),M.jsx(K,{title:"Add guide every 90 degrees",label:"90",onClick:()=>v(90),active:n===90})]}),M.jsx(K,{title:"Zoom level",label:(u*100).toFixed(0)+"%",onClick:_}),M.jsx(K,{className:"relative mt-2",title:"Import image into the current drawing",icon:me.Image,onClick:$f,children:M.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async y=>{var p;const T=await Nw((p=y.target.files)==null?void 0:p[0]),g=new ji(pm);g.start(),g.send({type:qe.FILE_SELECTED,image:T}),_s(g),y.target.files=null}})}),M.jsx(K,{className:"relative",title:"Load from JSON file",icon:me.Folder,onClick:$f,children:M.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async y=>{var T;await rE((T=y.target.files)==null?void 0:T[0]),y.target.files=null}})}),M.jsx(K,{title:"Save to JSON file",icon:me.Save,onClick:()=>iE()}),M.jsx(K,{title:"Export to SVG file",label:"SVG",onClick:()=>oE()}),M.jsx(K,{title:"Export to PNG file",label:"PNG",onClick:()=>lE()}),M.jsx(K,{className:"mt-2",title:"Github",icon:me.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function kw(){return M.jsx("div",{children:M.jsx(Rw,{})})}function md(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const o=t[i];e.push(...r.getIntersections(o))}}return e}function Ha(t,e){let n=null,r=1/0;return t.forEach(i=>{const o=Gt(i.point,e);o<r&&(r=o,n=i)}),{distance:r,snapPoint:n}}function ba(t,e,n){const{distance:r,snapPoint:i}=Ha(t.filter(l=>l.type!==U.AngleGuide),e);if(r<n)return i;const{distance:o,snapPoint:s}=Ha(t.filter(l=>l.type===U.AngleGuide),e);return o<n?s:null}function Mw(t,e){return bg(180/e,n=>{const i=n*e*(Math.PI/180),o=t.x+Math.cos(i),s=t.y+Math.sin(i);return new dt(new w(t.x-1e4*(o-t.x),t.y-1e4*(s-t.y)),new w(t.x+1e4*(o-t.x),t.y+1e4*(s-t.y)))})}function Dw(t,e,n,r,i){let o=null,s=null;const l=[],u=[];e.forEach(v=>{const _=Mw(v,r),y=Fr(n,_);y.distance<U_&&(u.push(y.entity),l.push({point:y.segment.start,type:U.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...md(Ee(t)).map(v=>({point:v,type:U.Intersection}))],f=ba(c,n,i);f&&(o=f);const d=[...l,...md([...Ee(t),...u]).map(v=>({point:v,type:U.Intersection}))],h=ba(d,n,i);return h&&(s=h),{angleGuides:u,entitySnapPoint:o,angleSnapPoint:s}}function vd(t,e){e.forEach(n=>{t.setLineStyles(nc(n),Rr(n),n.lineColor,n.lineWidth,[]),n.draw(t)})}function zw(t,e){e.forEach(n=>{t.setLineStyles(nc(n),Rr(n),"#FF5500",1,[]),n.draw(t)})}function Fw(t,e,n){if(!e)return;const r=e.point;switch(t.setLineStyles(!1,!1,F_,1,[]),n&&(t.drawLine(new w(r.x-O/2,r.y),new w(r.x+O/2,r.y)),t.drawLine(new w(r.x,r.y-O/2),new w(r.x,r.y+O/2))),e.type){case U.LineEndPoint:t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x+O/2,r.y-O/2)),t.drawLine(new w(r.x+O/2,r.y-O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y+O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x-O/2,r.y+O/2));break;case U.LineMidPoint:t.drawLine(new w(r.x,r.y-O/2),new w(r.x-O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y+O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x+O/2,r.y+O/2),new w(r.x,r.y-O/2));break;case U.AngleGuide:t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x+O/2,r.y-O/2)),t.drawLine(new w(r.x+O/2,r.y-O/2),new w(r.x-O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y+O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x+O/2,r.y+O/2),new w(r.x-O/2,r.y-O/2));break;case U.Intersection:t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x+O/2,r.y-O/2),new w(r.x-O/2,r.y+O/2));break;case U.CircleCenter:t.drawArc(r,O/2,0,2*Math.PI);break;case U.CircleCardinal:t.drawLine(new w(r.x,r.y-O/2),new w(r.x-O/2,r.y)),t.drawLine(new w(r.x-O/2,r.y),new w(r.x,r.y+O/2)),t.drawLine(new w(r.x,r.y+O/2),new w(r.x+O/2,r.y)),t.drawLine(new w(r.x+O/2,r.y),new w(r.x,r.y-O/2));break}}function Uw(t,e){e.forEach(n=>{t.setLineStyles(nc(n),Rr(n),Bg,Vg,jg),n.draw(t)})}function Ww(t,e){e&&(t.setLineStyles(!1,!1,"#FFF",1,[]),t.drawLine(new w(t.getScreenMouseLocation().x,t.getScreenMouseLocation().y-Po),new w(t.getScreenMouseLocation().x,t.getScreenMouseLocation().y+Po)),t.drawLine(new w(t.getScreenMouseLocation().x-Po,t.getScreenMouseLocation().y),new w(t.getScreenMouseLocation().x+Po,t.getScreenMouseLocation().y)))}function Bw(t){t.clearCanvas(),Uw(t,c_()),vd(t,f_()),vd(t,we()),zw(t,h_());const{snapPoint:e}=Ha(Ee([Bi(),ys()]),t.getWorldMouseLocation()),n=!!e&&ec().some(r=>r.milliSecondsHovered>ac&&pt(r.snapPoint.point,e.point));Fw(t,e,n),Ww(t,u_()),v_().draw(t)}function Vw(t,e,n,r,i){if(!t)return;const o=e.at(-1);let s;o?Gt(t.point,o.snapPoint.point)<r?s=[...e.slice(0,e.length-1),{...o,milliSecondsHovered:o.milliSecondsHovered+i}]:o.milliSecondsHovered>=ac?s=[...e,{snapPoint:t,milliSecondsHovered:i}]:s=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:s=[{snapPoint:t,milliSecondsHovered:i}];const l=s.slice(0,W_);n(l)}class jw{constructor(e,n){D(this,"screenOffset",new w(0,0));D(this,"screenScale",1);D(this,"screenMouseLocation");this.context=e,this.canvasSize=n,this.screenMouseLocation=new w(n.x/2,n.y/2)}getScreenScale(){return this.screenScale}setScreenScale(e){this.screenScale=e}getScreenOffset(){return this.screenOffset}setScreenOffset(e){this.screenOffset=e}getScreenMouseLocation(){return this.screenMouseLocation}setScreenMouseLocation(e){this.screenMouseLocation=e}getWorldMouseLocation(){return this.screenToWorld(this.screenMouseLocation)}setLineStyles(e,n,r,i,o=[]){this.context.strokeStyle=r,this.context.lineWidth=i,this.context.setLineDash(o),e&&(this.context.lineWidth=i+1),n&&this.context.setLineDash([5,5])}clearCanvas(){var e,n;this.canvasSize!==null&&this.context&&(this.context.fillStyle=z_,this.context.fillRect(0,0,(e=this.canvasSize)==null?void 0:e.x,(n=this.canvasSize)==null?void 0:n.y))}drawLine(e,n){const[r,i]=this.worldsToScreens([e,n]);this.context.beginPath(),this.context.moveTo(r.x,r.y),this.context.lineTo(i.x,i.y),this.context.stroke()}drawArc(e,n,r,i){const o=this.worldToScreen(e),s=n*this.screenScale;this.context.beginPath(),this.context.arc(o.x,o.y,s,r,i),this.context.stroke()}drawArrowHead(e,n){const i=new tt(n,e).normalize(),o=n.clone().translate(i.multiply(V_*this.screenScale)),s=i.rotate(90*Ua),l=i.rotate(-90*Ua),u=o.clone().translate(s.multiply(qf*this.screenScale)),c=o.clone().translate(l.multiply(qf*this.screenScale)),[f,d,h]=this.worldsToScreens([n,u,c]);this.context.beginPath(),this.context.moveTo(f.x,f.y),this.context.lineTo(d.x,d.y),this.context.lineTo(h.x,h.y),this.context.lineTo(f.x,f.y),this.context.fillStyle="#FFF",this.context.stroke(),this.context.fill()}drawText(e,n,r={}){const i=this.worldToScreen(n);this.drawTextScreen(e,i,{...r,fontSize:r.fontSize?r.fontSize*this.screenScale:void 0})}drawTextScreen(e,n,r={}){const i={textDirection:new tt(1,0),textAlign:"center",textColor:"#FFF",fontSize:Z_,fontFamily:"sans-serif",...r};this.context.save(),this.context.translate(n.x,n.y);const o=Math.atan2(i.textDirection.y,i.textDirection.x);this.context.rotate(o),this.context.font=`${i.fontSize}px ${i.fontFamily}`,this.context.textAlign=i.textAlign,this.context.fillStyle=i.textColor,this.context.fillText(e,0,0),this.context.restore()}drawImage(e,n,r,i,o,s){const l=n+i/2,u=r+o/2;this.context.translate(l,u),this.context.rotate(s),this.context.drawImage(e,-i/2,-o/2,i,o),this.context.rotate(-s),this.context.translate(-l,-u)}worldToScreen(e){return new w((e.x-this.screenOffset.x)*this.screenScale,(e.y-this.screenOffset.y)*this.screenScale)}worldsToScreens(e){return e.map(this.worldToScreen.bind(this))}screenToWorld(e){return new w(e.x/this.screenScale+this.screenOffset.x,e.y/this.screenScale+this.screenOffset.y)}screensToWorlds(e){return e.map(this.screenToWorld.bind(this))}panScreen(e,n){this.screenOffset=new w(this.screenOffset.x-e/this.screenScale,this.screenOffset.y-n/this.screenScale)}zoomScreen(e){const n=this.getWorldMouseLocation(),r=this.getScreenScale()*(1-Y_*(e/Math.abs(e)));this.setScreenScale(r);const i=this.getWorldMouseLocation();this.panScreen(n.x-i.x,n.y-i.y)}fillRectScreen(e,n,r,i,o){this.context.fillStyle=o,this.context.fillRect(e,n,r,i)}}const $w=/^[0-9]+([.][0-9]+)?$/,yd=/^([0-9]+([.][0-9]+))\s*,\s*([0-9]+([.][0-9]+)?)$/,_d=/^@([0-9]+([.][0-9]+))\s*,\s*([0-9]+([.][0-9]+)?)$/;class Gw{constructor(){D(this,"text","");document.addEventListener("keydown",e=>{this.handleKeyStroke(e)})}draw(e){const n=e.getScreenMouseLocation();e.fillRectScreen(n.x+Kn,n.y+Kn,q_,Pl,X_),e.drawTextScreen(this.text,new w(n.x+Kn+2,n.y+Kn+Pl-2),{textAlign:"left",textColor:J_,fontSize:18});const r=Dg();r&&e.drawTextScreen(r,new w(n.x+Kn+2,n.y+Kn+Pl*2+2),{textAlign:"left",textColor:eE,fontSize:18})}handleKeyStroke(e){var n,r,i,o,s,l,u,c,f,d,h;if(!(e.ctrlKey&&e.key==="v"))if(e.key==="Backspace")this.text=this.text.slice(0,this.text.length-1);else if(e.key==="Escape")this.text===""?(n=ye())==null||n.send({type:qe.ESC}):this.text="";else if(e.key==="Enter")if(this.text==="")(r=ye())==null||r.send({type:qe.ENTER});else if($w.test(this.text))(s=ye())==null||s.send({type:qe.NUMBER_INPUT,value:parseFloat(this.text),worldClickPoint:((i=ys())==null?void 0:i.point)||((o=Bi())==null?void 0:o.point)||ft().getWorldMouseLocation()}),this.text="";else if(yd.test(this.text)){const v=yd.exec(this.text);if(!v)return;const _=parseFloat(v[1]),y=parseFloat(v[3]);(l=ye())==null||l.send({type:qe.ABSOLUTE_POINT_INPUT,value:new w(_,y)}),this.text=""}else if(_d.test(this.text)){const v=_d.exec(this.text);if(!v)return;const _=parseFloat(v[1]),y=parseFloat(v[3]);(f=ye())==null||f.send({type:qe.RELATIVE_POINT_INPUT,value:new w(_,y),worldClickPoint:((u=ys())==null?void 0:u.point)||((c=Bi())==null?void 0:c.point)||ft().getWorldMouseLocation()}),this.text=""}else(d=ye())==null||d.send({type:qe.TEXT_INPUT,value:this.text}),this.text="";else((h=e.key)==null?void 0:h.length)===1&&(this.text+=e.key.toUpperCase())}}Ol.createRoot(document.getElementById("root")).render(M.jsx(zm.StrictMode,{children:M.jsx(kw,{})}));function Hw(){rc(!0)}function bw(t){var i,o;rc(!0);const e=new w(t.clientX,t.clientY),n=ft();n.setScreenMouseLocation(e);const r=p_();if(r&&(n.panScreen(t.clientX-r.x,t.clientY-r.y),oc(e)),Xw(),((o=(i=ye())==null?void 0:i.getSnapshot())==null?void 0:o.context.type)===z.SELECT){const s=Fr(n.screenToWorld(e),we());s.distance<lc?za([s.entity.id]):za([])}}function Qw(){rc(!1)}function Kw(t){ft().zoomScreen(t.deltaY)}function Yw(t){t.button===ms.Middle&&oc(new w(t.clientX,t.clientY))}function qw(t){if(t.button===ms.Middle&&oc(null),t.button===ms.Left){const e=ft(),n=ba(Ee([Bi(),ys()]),e.getWorldMouseLocation(),sc/e.getScreenScale()),r=ft().screenToWorld(new w(t.clientX,t.clientY)),i=n?n.point:r,o=ye();o==null||o.send({type:qe.MOUSE_CLICK,worldClickPoint:i,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function Xw(){const t=zg(),e=ft(),n=we(),r=e.getScreenScale(),i=e.getWorldMouseLocation(),l=ec().filter(u=>u.milliSecondsHovered>ac).map(u=>u.snapPoint.point);if(d_()){const{angleGuides:u,entitySnapPoint:c,angleSnapPoint:f}=Dw(n,Ee([g_(),...l]),i,t,sc/r);ic(u),Fg(c),Ug(f)}}function mm(t,e){var i,o,s,l,u;const n=m_(),r=e-n;if(P_(e),(i=ye())!=null&&i.getSnapshot().can({type:qe.DRAW})&&((o=ye())==null||o.send({type:qe.DRAW,drawController:t})),((u=(l=(s=ye())==null?void 0:s.getSnapshot())==null?void 0:l.context)==null?void 0:u.type)===z.SELECT){const c=ft();if(!c)throw new Error("getScreenCanvasDrawController() returned null");const{distance:f,entity:d}=Fr(c.getWorldMouseLocation(),we());f<lc&&za([d.id])}Vw(Bi(),ec(),C_,sc/t.getScreenScale(),r),Bw(t),requestAnimationFrame(c=>{mm(t,c)})}function Ed(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),__(new w(window.innerWidth,window.innerHeight));const t=a_();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function Jw(){const t=document.getElementsByTagName("canvas")[0];if(t){E_(t),t.addEventListener("mousedown",Yw),t.addEventListener("mousemove",bw),t.addEventListener("mouseup",qw),t.addEventListener("wheel",Kw),t.addEventListener("mouseout",Qw),t.addEventListener("mouseenter",Hw),window.addEventListener("resize",Ed);const e=new Gw;x_(e),Ed();const n=t.getContext("2d");if(!n)return;const r=new jw(n,Zu());I_(r),mm(r,0);const i=new ji(gm[z.LINE]);i.start(),_s(i)}}document.addEventListener("DOMContentLoaded",()=>{Jw()});
