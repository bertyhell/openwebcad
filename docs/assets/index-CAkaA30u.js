var Em=Object.defineProperty;var wm=(t,e,n)=>e in t?Em(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var F=(t,e,n)=>wm(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gd={exports:{}},So={},md={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),Tm=Symbol.for("react.portal"),xm=Symbol.for("react.fragment"),Im=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),Pm=Symbol.for("react.provider"),Lm=Symbol.for("react.context"),Am=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),km=Symbol.for("react.memo"),Nm=Symbol.for("react.lazy"),Tc=Symbol.iterator;function Rm(t){return t===null||typeof t!="object"?null:(t=Tc&&t[Tc]||t["@@iterator"],typeof t=="function"?t:null)}var vd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yd=Object.assign,_d={};function Dr(t,e,n){this.props=t,this.context=e,this.refs=_d,this.updater=n||vd}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ed(){}Ed.prototype=Dr.prototype;function ju(t,e,n){this.props=t,this.context=e,this.refs=_d,this.updater=n||vd}var $u=ju.prototype=new Ed;$u.constructor=ju;yd($u,Dr.prototype);$u.isPureReactComponent=!0;var xc=Array.isArray,wd=Object.prototype.hasOwnProperty,Gu={current:null},Sd={key:!0,ref:!0,__self:!0,__source:!0};function Td(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wd.call(e,r)&&!Sd.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Vi,type:t,key:s,ref:o,props:i,_owner:Gu.current}}function Mm(t,e){return{$$typeof:Vi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vi}function Dm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ic=/\/+/g;function qo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Dm(""+t.key):e.toString(36)}function Is(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vi:case Tm:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qo(o,0):r,xc(i)?(n="",t!=null&&(n=t.replace(Ic,"$&/")+"/"),Is(i,e,n,"",function(c){return c})):i!=null&&(Hu(i)&&(i=Mm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ic,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+qo(s,l);o+=Is(s,e,n,a,i)}else if(a=Rm(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+qo(s,l++),o+=Is(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function is(t,e,n){if(t==null)return t;var r=[],i=0;return Is(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ae={current:null},Cs={transition:null},Fm={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:Cs,ReactCurrentOwner:Gu};function xd(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:is,forEach:function(t,e,n){is(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return is(t,function(){e++}),e},toArray:function(t){return is(t,function(e){return e})||[]},only:function(t){if(!Hu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=Dr;U.Fragment=xm;U.Profiler=Cm;U.PureComponent=ju;U.StrictMode=Im;U.Suspense=Om;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm;U.act=xd;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yd({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)wd.call(e,a)&&!Sd.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Vi,type:t.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(t){return t={$$typeof:Lm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pm,_context:t},t.Consumer=t};U.createElement=Td;U.createFactory=function(t){var e=Td.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:Am,render:t}};U.isValidElement=Hu;U.lazy=function(t){return{$$typeof:Nm,_payload:{_status:-1,_result:t},_init:zm}};U.memo=function(t,e){return{$$typeof:km,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=Cs.transition;Cs.transition={};try{t()}finally{Cs.transition=e}};U.unstable_act=xd;U.useCallback=function(t,e){return Ae.current.useCallback(t,e)};U.useContext=function(t){return Ae.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return Ae.current.useDeferredValue(t)};U.useEffect=function(t,e){return Ae.current.useEffect(t,e)};U.useId=function(){return Ae.current.useId()};U.useImperativeHandle=function(t,e,n){return Ae.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return Ae.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return Ae.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return Ae.current.useMemo(t,e)};U.useReducer=function(t,e,n){return Ae.current.useReducer(t,e,n)};U.useRef=function(t){return Ae.current.useRef(t)};U.useState=function(t){return Ae.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return Ae.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return Ae.current.useTransition()};U.version="18.3.1";md.exports=U;var O=md.exports;const Um=Sm(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=O,Wm=Symbol.for("react.element"),Vm=Symbol.for("react.fragment"),jm=Object.prototype.hasOwnProperty,$m=Bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gm={key:!0,ref:!0,__self:!0,__source:!0};function Id(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jm.call(e,r)&&!Gm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wm,type:t,key:s,ref:o,props:i,_owner:$m.current}}So.Fragment=Vm;So.jsx=Id;So.jsxs=Id;gd.exports=So;var N=gd.exports,Ll={},Cd={exports:{}},$e={},Pd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,R){var D=L.length;L.push(R);e:for(;0<D;){var se=D-1>>>1,fe=L[se];if(0<i(fe,R))L[se]=R,L[D]=fe,D=se;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var R=L[0],D=L.pop();if(D!==R){L[0]=D;e:for(var se=0,fe=L.length,ns=fe>>>1;se<ns;){var pn=2*(se+1)-1,Ko=L[pn],gn=pn+1,rs=L[gn];if(0>i(Ko,D))gn<fe&&0>i(rs,Ko)?(L[se]=rs,L[gn]=D,se=gn):(L[se]=Ko,L[pn]=D,se=pn);else if(gn<fe&&0>i(rs,D))L[se]=rs,L[gn]=D,se=gn;else break e}}return R}function i(L,R){var D=L.sortIndex-R.sortIndex;return D!==0?D:L.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,d=null,h=3,v=!1,_=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(L){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=L)r(c),R.sortIndex=R.expirationTime,e(a,R);else break;R=n(c)}}function E(L){if(y=!1,m(L),!_)if(n(a)!==null)_=!0,Qo(T);else{var R=n(c);R!==null&&Yo(E,R.startTime-L)}}function T(L,R){_=!1,y&&(y=!1,g(A),A=-1),v=!0;var D=h;try{for(m(R),d=n(a);d!==null&&(!(d.expirationTime>R)||L&&!Ue());){var se=d.callback;if(typeof se=="function"){d.callback=null,h=d.priorityLevel;var fe=se(d.expirationTime<=R);R=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(a)&&r(a),m(R)}else r(a);d=n(a)}if(d!==null)var ns=!0;else{var pn=n(c);pn!==null&&Yo(E,pn.startTime-R),ns=!1}return ns}finally{d=null,h=D,v=!1}}var I=!1,P=null,A=-1,$=5,k=-1;function Ue(){return!(t.unstable_now()-k<$)}function Gr(){if(P!==null){var L=t.unstable_now();k=L;var R=!0;try{R=P(!0,L)}finally{R?Hr():(I=!1,P=null)}}else I=!1}var Hr;if(typeof p=="function")Hr=function(){p(Gr)};else if(typeof MessageChannel<"u"){var Sc=new MessageChannel,_m=Sc.port2;Sc.port1.onmessage=Gr,Hr=function(){_m.postMessage(null)}}else Hr=function(){S(Gr,0)};function Qo(L){P=L,I||(I=!0,Hr())}function Yo(L,R){A=S(function(){L(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,Qo(T))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var D=h;h=R;try{return L()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,R){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var D=h;h=L;try{return R()}finally{h=D}},t.unstable_scheduleCallback=function(L,R,D){var se=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?se+D:se):D=se,L){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=D+fe,L={id:f++,callback:R,priorityLevel:L,startTime:D,expirationTime:fe,sortIndex:-1},D>se?(L.sortIndex=D,e(c,L),n(a)===null&&L===n(c)&&(y?(g(A),A=-1):y=!0,Yo(E,D-se))):(L.sortIndex=fe,e(a,L),_||v||(_=!0,Qo(T))),L},t.unstable_shouldYield=Ue,t.unstable_wrapCallback=function(L){var R=h;return function(){var D=h;h=R;try{return L.apply(this,arguments)}finally{h=D}}}})(Ld);Pd.exports=Ld;var Hm=Pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm=O,je=Hm;function w(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ad=new Set,Ei={};function Un(t,e){vr(t,e),vr(t+"Capture",e)}function vr(t,e){for(Ei[t]=e,t=0;t<e.length;t++)Ad.add(e[t])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=Object.prototype.hasOwnProperty,Qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cc={},Pc={};function Ym(t){return Al.call(Pc,t)?!0:Al.call(Cc,t)?!1:Qm.test(t)?Pc[t]=!0:(Cc[t]=!0,!1)}function Km(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qm(t,e,n,r){if(e===null||typeof e>"u"||Km(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ye[t]=new Oe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ye[e]=new Oe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ye[t]=new Oe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ye[t]=new Oe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ye[t]=new Oe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ye[t]=new Oe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ye[t]=new Oe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ye[t]=new Oe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ye[t]=new Oe(t,5,!1,t.toLowerCase(),null,!1,!1)});var bu=/[\-:]([a-z])/g;function Qu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bu,Qu);ye[e]=new Oe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bu,Qu);ye[e]=new Oe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bu,Qu);ye[e]=new Oe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ye[t]=new Oe(t,1,!1,t.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ye[t]=new Oe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yu(t,e,n,r){var i=ye.hasOwnProperty(e)?ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qm(e,n,i,r)&&(n=null),r||i===null?Ym(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ut=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ss=Symbol.for("react.element"),Yn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),Ol=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),kd=Symbol.for("react.context"),qu=Symbol.for("react.forward_ref"),kl=Symbol.for("react.suspense"),Nl=Symbol.for("react.suspense_list"),Xu=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),Nd=Symbol.for("react.offscreen"),Lc=Symbol.iterator;function Qr(t){return t===null||typeof t!="object"?null:(t=Lc&&t[Lc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,Xo;function ri(t){if(Xo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xo=e&&e[1]||""}return`
`+Xo+t}var Jo=!1;function Zo(t,e){if(!t||Jo)return"";Jo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Jo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ri(t):""}function Xm(t){switch(t.tag){case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return t=Zo(t.type,!1),t;case 11:return t=Zo(t.type.render,!1),t;case 1:return t=Zo(t.type,!0),t;default:return""}}function Rl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kn:return"Fragment";case Yn:return"Portal";case Ol:return"Profiler";case Ku:return"StrictMode";case kl:return"Suspense";case Nl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kd:return(t.displayName||"Context")+".Consumer";case Od:return(t._context.displayName||"Context")+".Provider";case qu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xu:return e=t.displayName||null,e!==null?e:Rl(t.type)||"Memo";case Wt:e=t._payload,t=t._init;try{return Rl(t(e))}catch{}}return null}function Jm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rl(e);case 8:return e===Ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zm(t){var e=Rd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function os(t){t._valueTracker||(t._valueTracker=Zm(t))}function Md(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $s(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ml(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ac(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dd(t,e){e=e.checked,e!=null&&Yu(t,"checked",e,!1)}function Dl(t,e){Dd(t,e);var n=nn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,n):e.hasOwnProperty("defaultValue")&&zl(t,e.type,nn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Oc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zl(t,e,n){(e!=="number"||$s(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ii=Array.isArray;function ar(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(w(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(w(92));if(ii(n)){if(1<n.length)throw Error(w(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nn(n)}}function zd(t,e){var n=nn(e.value),r=nn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ul(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ls,Ud=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ls=ls||document.createElement("div"),ls.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ls.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e0=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){e0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ui[e]=ui[t]})});function Bd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ui.hasOwnProperty(t)&&ui[t]?(""+e).trim():e+"px"}function Wd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Bd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var t0=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(t,e){if(e){if(t0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(w(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(w(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(w(61))}if(e.style!=null&&typeof e.style!="object")throw Error(w(62))}}function Wl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=null;function Ju(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jl=null,cr=null,fr=null;function Rc(t){if(t=Gi(t)){if(typeof jl!="function")throw Error(w(280));var e=t.stateNode;e&&(e=Po(e),jl(t.stateNode,t.type,e))}}function Vd(t){cr?fr?fr.push(t):fr=[t]:cr=t}function jd(){if(cr){var t=cr,e=fr;if(fr=cr=null,Rc(t),e)for(t=0;t<e.length;t++)Rc(e[t])}}function $d(t,e){return t(e)}function Gd(){}var el=!1;function Hd(t,e,n){if(el)return t(e,n);el=!0;try{return $d(t,e,n)}finally{el=!1,(cr!==null||fr!==null)&&(Gd(),jd())}}function Si(t,e){var n=t.stateNode;if(n===null)return null;var r=Po(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(w(231,e,typeof n));return n}var $l=!1;if(kt)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){$l=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{$l=!1}function n0(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ai=!1,Gs=null,Hs=!1,Gl=null,r0={onError:function(t){ai=!0,Gs=t}};function i0(t,e,n,r,i,s,o,l,a){ai=!1,Gs=null,n0.apply(r0,arguments)}function s0(t,e,n,r,i,s,o,l,a){if(i0.apply(this,arguments),ai){if(ai){var c=Gs;ai=!1,Gs=null}else throw Error(w(198));Hs||(Hs=!0,Gl=c)}}function Bn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mc(t){if(Bn(t)!==t)throw Error(w(188))}function o0(t){var e=t.alternate;if(!e){if(e=Bn(t),e===null)throw Error(w(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Mc(i),t;if(s===r)return Mc(i),e;s=s.sibling}throw Error(w(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(w(189))}}if(n.alternate!==r)throw Error(w(190))}if(n.tag!==3)throw Error(w(188));return n.stateNode.current===n?t:e}function Qd(t){return t=o0(t),t!==null?Yd(t):null}function Yd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yd(t);if(e!==null)return e;t=t.sibling}return null}var Kd=je.unstable_scheduleCallback,Dc=je.unstable_cancelCallback,l0=je.unstable_shouldYield,u0=je.unstable_requestPaint,oe=je.unstable_now,a0=je.unstable_getCurrentPriorityLevel,Zu=je.unstable_ImmediatePriority,qd=je.unstable_UserBlockingPriority,bs=je.unstable_NormalPriority,c0=je.unstable_LowPriority,Xd=je.unstable_IdlePriority,To=null,vt=null;function f0(t){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(To,t,void 0,(t.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:p0,d0=Math.log,h0=Math.LN2;function p0(t){return t>>>=0,t===0?32:31-(d0(t)/h0|0)|0}var us=64,as=4194304;function si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=si(l):(s&=o,s!==0&&(r=si(s)))}else o=n&~i,o!==0?r=si(o):s!==0&&(r=si(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ot(e),i=1<<n,r|=t[n],e&=~i;return r}function g0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ot(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=g0(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Hl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jd(){var t=us;return us<<=1,!(us&4194240)&&(us=64),t}function tl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ji(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ot(e),t[e]=n}function v0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ea(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function Zd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eh,ta,th,nh,rh,bl=!1,cs=[],Yt=null,Kt=null,qt=null,Ti=new Map,xi=new Map,$t=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zc(t,e){switch(t){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":Ti.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(e.pointerId)}}function Kr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gi(e),e!==null&&ta(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _0(t,e,n,r,i){switch(e){case"focusin":return Yt=Kr(Yt,t,e,n,r,i),!0;case"dragenter":return Kt=Kr(Kt,t,e,n,r,i),!0;case"mouseover":return qt=Kr(qt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ti.set(s,Kr(Ti.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xi.set(s,Kr(xi.get(s)||null,t,e,n,r,i)),!0}return!1}function ih(t){var e=En(t.target);if(e!==null){var n=Bn(e);if(n!==null){if(e=n.tag,e===13){if(e=bd(n),e!==null){t.blockedOn=e,rh(t.priority,function(){th(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ps(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ql(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vl=r,n.target.dispatchEvent(r),Vl=null}else return e=Gi(n),e!==null&&ta(e),t.blockedOn=n,!1;e.shift()}return!0}function Fc(t,e,n){Ps(t)&&n.delete(e)}function E0(){bl=!1,Yt!==null&&Ps(Yt)&&(Yt=null),Kt!==null&&Ps(Kt)&&(Kt=null),qt!==null&&Ps(qt)&&(qt=null),Ti.forEach(Fc),xi.forEach(Fc)}function qr(t,e){t.blockedOn===e&&(t.blockedOn=null,bl||(bl=!0,je.unstable_scheduleCallback(je.unstable_NormalPriority,E0)))}function Ii(t){function e(i){return qr(i,t)}if(0<cs.length){qr(cs[0],t);for(var n=1;n<cs.length;n++){var r=cs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yt!==null&&qr(Yt,t),Kt!==null&&qr(Kt,t),qt!==null&&qr(qt,t),Ti.forEach(e),xi.forEach(e),n=0;n<$t.length;n++)r=$t[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$t.length&&(n=$t[0],n.blockedOn===null);)ih(n),n.blockedOn===null&&$t.shift()}var dr=Ut.ReactCurrentBatchConfig,Ys=!0;function w0(t,e,n,r){var i=H,s=dr.transition;dr.transition=null;try{H=1,na(t,e,n,r)}finally{H=i,dr.transition=s}}function S0(t,e,n,r){var i=H,s=dr.transition;dr.transition=null;try{H=4,na(t,e,n,r)}finally{H=i,dr.transition=s}}function na(t,e,n,r){if(Ys){var i=Ql(t,e,n,r);if(i===null)fl(t,e,r,Ks,n),zc(t,r);else if(_0(i,t,e,n,r))r.stopPropagation();else if(zc(t,r),e&4&&-1<y0.indexOf(t)){for(;i!==null;){var s=Gi(i);if(s!==null&&eh(s),s=Ql(t,e,n,r),s===null&&fl(t,e,r,Ks,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fl(t,e,r,null,n)}}var Ks=null;function Ql(t,e,n,r){if(Ks=null,t=Ju(r),t=En(t),t!==null)if(e=Bn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ks=t,null}function sh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case Zu:return 1;case qd:return 4;case bs:case c0:return 16;case Xd:return 536870912;default:return 16}default:return 16}}var Ht=null,ra=null,Ls=null;function oh(){if(Ls)return Ls;var t,e=ra,n=e.length,r,i="value"in Ht?Ht.value:Ht.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ls=i.slice(t,1<r?1-r:void 0)}function As(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fs(){return!0}function Uc(){return!1}function Ge(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fs:Uc,this.isPropagationStopped=Uc,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),e}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=Ge(zr),$i=re({},zr,{view:0,detail:0}),T0=Ge($i),nl,rl,Xr,xo=re({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xr&&(Xr&&t.type==="mousemove"?(nl=t.screenX-Xr.screenX,rl=t.screenY-Xr.screenY):rl=nl=0,Xr=t),nl)},movementY:function(t){return"movementY"in t?t.movementY:rl}}),Bc=Ge(xo),x0=re({},xo,{dataTransfer:0}),I0=Ge(x0),C0=re({},$i,{relatedTarget:0}),il=Ge(C0),P0=re({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),L0=Ge(P0),A0=re({},zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O0=Ge(A0),k0=re({},zr,{data:0}),Wc=Ge(k0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M0[t])?!!e[t]:!1}function sa(){return D0}var z0=re({},$i,{key:function(t){if(t.key){var e=N0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=As(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(t){return t.type==="keypress"?As(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?As(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F0=Ge(z0),U0=re({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vc=Ge(U0),B0=re({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),W0=Ge(B0),V0=re({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),j0=Ge(V0),$0=re({},xo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=Ge($0),H0=[9,13,27,32],oa=kt&&"CompositionEvent"in window,ci=null;kt&&"documentMode"in document&&(ci=document.documentMode);var b0=kt&&"TextEvent"in window&&!ci,lh=kt&&(!oa||ci&&8<ci&&11>=ci),jc=" ",$c=!1;function uh(t,e){switch(t){case"keyup":return H0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ah(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qn=!1;function Q0(t,e){switch(t){case"compositionend":return ah(e);case"keypress":return e.which!==32?null:($c=!0,jc);case"textInput":return t=e.data,t===jc&&$c?null:t;default:return null}}function Y0(t,e){if(qn)return t==="compositionend"||!oa&&uh(t,e)?(t=oh(),Ls=ra=Ht=null,qn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lh&&e.locale!=="ko"?null:e.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!K0[t.type]:e==="textarea"}function ch(t,e,n,r){Vd(r),e=qs(e,"onChange"),0<e.length&&(n=new ia("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fi=null,Ci=null;function q0(t){wh(t,0)}function Io(t){var e=Zn(t);if(Md(e))return t}function X0(t,e){if(t==="change")return e}var fh=!1;if(kt){var sl;if(kt){var ol="oninput"in document;if(!ol){var Hc=document.createElement("div");Hc.setAttribute("oninput","return;"),ol=typeof Hc.oninput=="function"}sl=ol}else sl=!1;fh=sl&&(!document.documentMode||9<document.documentMode)}function bc(){fi&&(fi.detachEvent("onpropertychange",dh),Ci=fi=null)}function dh(t){if(t.propertyName==="value"&&Io(Ci)){var e=[];ch(e,Ci,t,Ju(t)),Hd(q0,e)}}function J0(t,e,n){t==="focusin"?(bc(),fi=e,Ci=n,fi.attachEvent("onpropertychange",dh)):t==="focusout"&&bc()}function Z0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Io(Ci)}function ev(t,e){if(t==="click")return Io(e)}function tv(t,e){if(t==="input"||t==="change")return Io(e)}function nv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:nv;function Pi(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Al.call(e,i)||!at(t[i],e[i]))return!1}return!0}function Qc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yc(t,e){var n=Qc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qc(n)}}function hh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ph(){for(var t=window,e=$s();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$s(t.document)}return e}function la(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rv(t){var e=ph(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hh(n.ownerDocument.documentElement,n)){if(r!==null&&la(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yc(n,s);var o=Yc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iv=kt&&"documentMode"in document&&11>=document.documentMode,Xn=null,Yl=null,di=null,Kl=!1;function Kc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kl||Xn==null||Xn!==$s(r)||(r=Xn,"selectionStart"in r&&la(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),di&&Pi(di,r)||(di=r,r=qs(Yl,"onSelect"),0<r.length&&(e=new ia("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xn)))}function ds(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jn={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionend:ds("Transition","TransitionEnd")},ll={},gh={};kt&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function Co(t){if(ll[t])return ll[t];if(!Jn[t])return t;var e=Jn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gh)return ll[t]=e[n];return t}var mh=Co("animationend"),vh=Co("animationiteration"),yh=Co("animationstart"),_h=Co("transitionend"),Eh=new Map,qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function an(t,e){Eh.set(t,e),Un(e,[t])}for(var ul=0;ul<qc.length;ul++){var al=qc[ul],sv=al.toLowerCase(),ov=al[0].toUpperCase()+al.slice(1);an(sv,"on"+ov)}an(mh,"onAnimationEnd");an(vh,"onAnimationIteration");an(yh,"onAnimationStart");an("dblclick","onDoubleClick");an("focusin","onFocus");an("focusout","onBlur");an(_h,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Un("onBeforeInput",["compositionend","keypress","textInput","paste"]);Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lv=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function Xc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,s0(r,e,void 0,t),t.currentTarget=null}function wh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Xc(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Xc(i,l,c),s=a}}}if(Hs)throw t=Gl,Hs=!1,Gl=null,t}function Y(t,e){var n=e[eu];n===void 0&&(n=e[eu]=new Set);var r=t+"__bubble";n.has(r)||(Sh(e,t,2,!1),n.add(r))}function cl(t,e,n){var r=0;e&&(r|=4),Sh(n,t,r,e)}var hs="_reactListening"+Math.random().toString(36).slice(2);function Li(t){if(!t[hs]){t[hs]=!0,Ad.forEach(function(n){n!=="selectionchange"&&(lv.has(n)||cl(n,!1,t),cl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hs]||(e[hs]=!0,cl("selectionchange",!1,e))}}function Sh(t,e,n,r){switch(sh(e)){case 1:var i=w0;break;case 4:i=S0;break;default:i=na}n=i.bind(null,e,n,t),i=void 0,!$l||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=En(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Hd(function(){var c=s,f=Ju(n),d=[];e:{var h=Eh.get(t);if(h!==void 0){var v=ia,_=t;switch(t){case"keypress":if(As(n)===0)break e;case"keydown":case"keyup":v=F0;break;case"focusin":_="focus",v=il;break;case"focusout":_="blur",v=il;break;case"beforeblur":case"afterblur":v=il;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=I0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=W0;break;case mh:case vh:case yh:v=L0;break;case _h:v=j0;break;case"scroll":v=T0;break;case"wheel":v=G0;break;case"copy":case"cut":case"paste":v=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Vc}var y=(e&4)!==0,S=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=c,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Si(p,g),E!=null&&y.push(Ai(p,E,m)))),S)break;p=p.return}0<y.length&&(h=new v(h,_,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==Vl&&(_=n.relatedTarget||n.fromElement)&&(En(_)||_[Nt]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?En(_):null,_!==null&&(S=Bn(_),_!==S||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(y=Bc,E="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Vc,E="onPointerLeave",g="onPointerEnter",p="pointer"),S=v==null?h:Zn(v),m=_==null?h:Zn(_),h=new y(E,p+"leave",v,n,f),h.target=S,h.relatedTarget=m,E=null,En(f)===c&&(y=new y(g,p+"enter",_,n,f),y.target=m,y.relatedTarget=S,E=y),S=E,v&&_)t:{for(y=v,g=_,p=0,m=y;m;m=Gn(m))p++;for(m=0,E=g;E;E=Gn(E))m++;for(;0<p-m;)y=Gn(y),p--;for(;0<m-p;)g=Gn(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Gn(y),g=Gn(g)}y=null}else y=null;v!==null&&Jc(d,h,v,y,!1),_!==null&&S!==null&&Jc(d,S,_,y,!0)}}e:{if(h=c?Zn(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var T=X0;else if(Gc(h))if(fh)T=tv;else{T=Z0;var I=J0}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=ev);if(T&&(T=T(t,c))){ch(d,T,n,f);break e}I&&I(t,h,c),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&zl(h,"number",h.value)}switch(I=c?Zn(c):window,t){case"focusin":(Gc(I)||I.contentEditable==="true")&&(Xn=I,Yl=c,di=null);break;case"focusout":di=Yl=Xn=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,Kc(d,n,f);break;case"selectionchange":if(iv)break;case"keydown":case"keyup":Kc(d,n,f)}var P;if(oa)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else qn?uh(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(lh&&n.locale!=="ko"&&(qn||A!=="onCompositionStart"?A==="onCompositionEnd"&&qn&&(P=oh()):(Ht=f,ra="value"in Ht?Ht.value:Ht.textContent,qn=!0)),I=qs(c,A),0<I.length&&(A=new Wc(A,t,null,n,f),d.push({event:A,listeners:I}),P?A.data=P:(P=ah(n),P!==null&&(A.data=P)))),(P=b0?Q0(t,n):Y0(t,n))&&(c=qs(c,"onBeforeInput"),0<c.length&&(f=new Wc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=P))}wh(d,e)})}function Ai(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Si(t,n),s!=null&&r.unshift(Ai(t,s,i)),s=Si(t,e),s!=null&&r.push(Ai(t,s,i))),t=t.return}return r}function Gn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Si(n,s),a!=null&&o.unshift(Ai(n,a,l))):i||(a=Si(n,s),a!=null&&o.push(Ai(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uv=/\r\n?/g,av=/\u0000|\uFFFD/g;function Zc(t){return(typeof t=="string"?t:""+t).replace(uv,`
`).replace(av,"")}function ps(t,e,n){if(e=Zc(e),Zc(t)!==e&&n)throw Error(w(425))}function Xs(){}var ql=null,Xl=null;function Jl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zl=typeof setTimeout=="function"?setTimeout:void 0,cv=typeof clearTimeout=="function"?clearTimeout:void 0,ef=typeof Promise=="function"?Promise:void 0,fv=typeof queueMicrotask=="function"?queueMicrotask:typeof ef<"u"?function(t){return ef.resolve(null).then(t).catch(dv)}:Zl;function dv(t){setTimeout(function(){throw t})}function dl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ii(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ii(e)}function Xt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),ht="__reactFiber$"+Fr,Oi="__reactProps$"+Fr,Nt="__reactContainer$"+Fr,eu="__reactEvents$"+Fr,hv="__reactListeners$"+Fr,pv="__reactHandles$"+Fr;function En(t){var e=t[ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nt]||n[ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tf(t);t!==null;){if(n=t[ht])return n;t=tf(t)}return e}t=n,n=t.parentNode}return null}function Gi(t){return t=t[ht]||t[Nt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(w(33))}function Po(t){return t[Oi]||null}var tu=[],er=-1;function cn(t){return{current:t}}function X(t){0>er||(t.current=tu[er],tu[er]=null,er--)}function b(t,e){er++,tu[er]=t.current,t.current=e}var rn={},Te=cn(rn),Re=cn(!1),Pn=rn;function yr(t,e){var n=t.type.contextTypes;if(!n)return rn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Me(t){return t=t.childContextTypes,t!=null}function Js(){X(Re),X(Te)}function nf(t,e,n){if(Te.current!==rn)throw Error(w(168));b(Te,e),b(Re,n)}function Th(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(w(108,Jm(t)||"Unknown",i));return re({},n,r)}function Zs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rn,Pn=Te.current,b(Te,t),b(Re,Re.current),!0}function rf(t,e,n){var r=t.stateNode;if(!r)throw Error(w(169));n?(t=Th(t,e,Pn),r.__reactInternalMemoizedMergedChildContext=t,X(Re),X(Te),b(Te,t)):X(Re),b(Re,n)}var Ct=null,Lo=!1,hl=!1;function xh(t){Ct===null?Ct=[t]:Ct.push(t)}function gv(t){Lo=!0,xh(t)}function fn(){if(!hl&&Ct!==null){hl=!0;var t=0,e=H;try{var n=Ct;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ct=null,Lo=!1}catch(i){throw Ct!==null&&(Ct=Ct.slice(t+1)),Kd(Zu,fn),i}finally{H=e,hl=!1}}return null}var tr=[],nr=0,eo=null,to=0,be=[],Qe=0,Ln=null,Lt=1,At="";function vn(t,e){tr[nr++]=to,tr[nr++]=eo,eo=t,to=e}function Ih(t,e,n){be[Qe++]=Lt,be[Qe++]=At,be[Qe++]=Ln,Ln=t;var r=Lt;t=At;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lt=1<<32-ot(e)+i|n<<i|r,At=s+t}else Lt=1<<s|n<<i|r,At=t}function ua(t){t.return!==null&&(vn(t,1),Ih(t,1,0))}function aa(t){for(;t===eo;)eo=tr[--nr],tr[nr]=null,to=tr[--nr],tr[nr]=null;for(;t===Ln;)Ln=be[--Qe],be[Qe]=null,At=be[--Qe],be[Qe]=null,Lt=be[--Qe],be[Qe]=null}var Ve=null,We=null,Z=!1,nt=null;function Ch(t,e){var n=Ye(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ve=t,We=Xt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ve=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ln!==null?{id:Lt,overflow:At}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ye(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ve=t,We=null,!0):!1;default:return!1}}function nu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ru(t){if(Z){var e=We;if(e){var n=e;if(!sf(t,e)){if(nu(t))throw Error(w(418));e=Xt(n.nextSibling);var r=Ve;e&&sf(t,e)?Ch(r,n):(t.flags=t.flags&-4097|2,Z=!1,Ve=t)}}else{if(nu(t))throw Error(w(418));t.flags=t.flags&-4097|2,Z=!1,Ve=t}}}function of(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ve=t}function gs(t){if(t!==Ve)return!1;if(!Z)return of(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jl(t.type,t.memoizedProps)),e&&(e=We)){if(nu(t))throw Ph(),Error(w(418));for(;e;)Ch(t,e),e=Xt(e.nextSibling)}if(of(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){We=Xt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}We=null}}else We=Ve?Xt(t.stateNode.nextSibling):null;return!0}function Ph(){for(var t=We;t;)t=Xt(t.nextSibling)}function _r(){We=Ve=null,Z=!1}function ca(t){nt===null?nt=[t]:nt.push(t)}var mv=Ut.ReactCurrentBatchConfig;function Jr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(w(309));var r=n.stateNode}if(!r)throw Error(w(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(w(284));if(!n._owner)throw Error(w(290,t))}return t}function ms(t,e){throw t=Object.prototype.toString.call(e),Error(w(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lf(t){var e=t._init;return e(t._payload)}function Lh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=tn(g,p),g.index=0,g.sibling=null,g}function s(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,E){return p===null||p.tag!==6?(p=El(m,g.mode,E),p.return=g,p):(p=i(p,m),p.return=g,p)}function a(g,p,m,E){var T=m.type;return T===Kn?f(g,p,m.props.children,E,m.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wt&&lf(T)===p.type)?(E=i(p,m.props),E.ref=Jr(g,p,m),E.return=g,E):(E=zs(m.type,m.key,m.props,null,g.mode,E),E.ref=Jr(g,p,m),E.return=g,E)}function c(g,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=wl(m,g.mode,E),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,E,T){return p===null||p.tag!==7?(p=Cn(m,g.mode,E,T),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=El(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ss:return m=zs(p.type,p.key,p.props,null,g.mode,m),m.ref=Jr(g,null,p),m.return=g,m;case Yn:return p=wl(p,g.mode,m),p.return=g,p;case Wt:var E=p._init;return d(g,E(p._payload),m)}if(ii(p)||Qr(p))return p=Cn(p,g.mode,m,null),p.return=g,p;ms(g,p)}return null}function h(g,p,m,E){var T=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return T!==null?null:l(g,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ss:return m.key===T?a(g,p,m,E):null;case Yn:return m.key===T?c(g,p,m,E):null;case Wt:return T=m._init,h(g,p,T(m._payload),E)}if(ii(m)||Qr(m))return T!==null?null:f(g,p,m,E,null);ms(g,m)}return null}function v(g,p,m,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,l(p,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ss:return g=g.get(E.key===null?m:E.key)||null,a(p,g,E,T);case Yn:return g=g.get(E.key===null?m:E.key)||null,c(p,g,E,T);case Wt:var I=E._init;return v(g,p,m,I(E._payload),T)}if(ii(E)||Qr(E))return g=g.get(m)||null,f(p,g,E,T,null);ms(p,E)}return null}function _(g,p,m,E){for(var T=null,I=null,P=p,A=p=0,$=null;P!==null&&A<m.length;A++){P.index>A?($=P,P=null):$=P.sibling;var k=h(g,P,m[A],E);if(k===null){P===null&&(P=$);break}t&&P&&k.alternate===null&&e(g,P),p=s(k,p,A),I===null?T=k:I.sibling=k,I=k,P=$}if(A===m.length)return n(g,P),Z&&vn(g,A),T;if(P===null){for(;A<m.length;A++)P=d(g,m[A],E),P!==null&&(p=s(P,p,A),I===null?T=P:I.sibling=P,I=P);return Z&&vn(g,A),T}for(P=r(g,P);A<m.length;A++)$=v(P,g,A,m[A],E),$!==null&&(t&&$.alternate!==null&&P.delete($.key===null?A:$.key),p=s($,p,A),I===null?T=$:I.sibling=$,I=$);return t&&P.forEach(function(Ue){return e(g,Ue)}),Z&&vn(g,A),T}function y(g,p,m,E){var T=Qr(m);if(typeof T!="function")throw Error(w(150));if(m=T.call(m),m==null)throw Error(w(151));for(var I=T=null,P=p,A=p=0,$=null,k=m.next();P!==null&&!k.done;A++,k=m.next()){P.index>A?($=P,P=null):$=P.sibling;var Ue=h(g,P,k.value,E);if(Ue===null){P===null&&(P=$);break}t&&P&&Ue.alternate===null&&e(g,P),p=s(Ue,p,A),I===null?T=Ue:I.sibling=Ue,I=Ue,P=$}if(k.done)return n(g,P),Z&&vn(g,A),T;if(P===null){for(;!k.done;A++,k=m.next())k=d(g,k.value,E),k!==null&&(p=s(k,p,A),I===null?T=k:I.sibling=k,I=k);return Z&&vn(g,A),T}for(P=r(g,P);!k.done;A++,k=m.next())k=v(P,g,A,k.value,E),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?A:k.key),p=s(k,p,A),I===null?T=k:I.sibling=k,I=k);return t&&P.forEach(function(Gr){return e(g,Gr)}),Z&&vn(g,A),T}function S(g,p,m,E){if(typeof m=="object"&&m!==null&&m.type===Kn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ss:e:{for(var T=m.key,I=p;I!==null;){if(I.key===T){if(T=m.type,T===Kn){if(I.tag===7){n(g,I.sibling),p=i(I,m.props.children),p.return=g,g=p;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wt&&lf(T)===I.type){n(g,I.sibling),p=i(I,m.props),p.ref=Jr(g,I,m),p.return=g,g=p;break e}n(g,I);break}else e(g,I);I=I.sibling}m.type===Kn?(p=Cn(m.props.children,g.mode,E,m.key),p.return=g,g=p):(E=zs(m.type,m.key,m.props,null,g.mode,E),E.ref=Jr(g,p,m),E.return=g,g=E)}return o(g);case Yn:e:{for(I=m.key;p!==null;){if(p.key===I)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=wl(m,g.mode,E),p.return=g,g=p}return o(g);case Wt:return I=m._init,S(g,p,I(m._payload),E)}if(ii(m))return _(g,p,m,E);if(Qr(m))return y(g,p,m,E);ms(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=El(m,g.mode,E),p.return=g,g=p),o(g)):n(g,p)}return S}var Er=Lh(!0),Ah=Lh(!1),no=cn(null),ro=null,rr=null,fa=null;function da(){fa=rr=ro=null}function ha(t){var e=no.current;X(no),t._currentValue=e}function iu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hr(t,e){ro=t,fa=rr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ne=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(fa!==t)if(t={context:t,memoizedValue:e,next:null},rr===null){if(ro===null)throw Error(w(308));rr=t,ro.dependencies={lanes:0,firstContext:t}}else rr=rr.next=t;return e}var wn=null;function pa(t){wn===null?wn=[t]:wn.push(t)}function Oh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pa(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rt(t,r)}function Rt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vt=!1;function ga(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ot(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,j&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rt(t,n)}return i=r.interleaved,i===null?(e.next=e,pa(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rt(t,n)}function Os(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ea(t,n)}}function uf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function io(t,e,n,r){var i=t.updateQueue;Vt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=c=a=null,l=s;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(v,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(v,d,h):_,h==null)break e;d=re({},d,h);break e;case 2:Vt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,a=d):f=f.next=v,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);On|=o,t.lanes=o,t.memoizedState=d}}function af(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(w(191,i));i.call(r)}}}var Hi={},yt=cn(Hi),ki=cn(Hi),Ni=cn(Hi);function Sn(t){if(t===Hi)throw Error(w(174));return t}function ma(t,e){switch(b(Ni,e),b(ki,t),b(yt,Hi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ul(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ul(e,t)}X(yt),b(yt,e)}function wr(){X(yt),X(ki),X(Ni)}function Nh(t){Sn(Ni.current);var e=Sn(yt.current),n=Ul(e,t.type);e!==n&&(b(ki,t),b(yt,n))}function va(t){ki.current===t&&(X(yt),X(ki))}var ee=cn(0);function so(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pl=[];function ya(){for(var t=0;t<pl.length;t++)pl[t]._workInProgressVersionPrimary=null;pl.length=0}var ks=Ut.ReactCurrentDispatcher,gl=Ut.ReactCurrentBatchConfig,An=0,ne=null,ae=null,he=null,oo=!1,hi=!1,Ri=0,vv=0;function _e(){throw Error(w(321))}function _a(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!at(t[n],e[n]))return!1;return!0}function Ea(t,e,n,r,i,s){if(An=s,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ks.current=t===null||t.memoizedState===null?wv:Sv,t=n(r,i),hi){s=0;do{if(hi=!1,Ri=0,25<=s)throw Error(w(301));s+=1,he=ae=null,e.updateQueue=null,ks.current=Tv,t=n(r,i)}while(hi)}if(ks.current=lo,e=ae!==null&&ae.next!==null,An=0,he=ae=ne=null,oo=!1,e)throw Error(w(300));return t}function wa(){var t=Ri!==0;return Ri=0,t}function ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?ne.memoizedState=he=t:he=he.next=t,he}function Xe(){if(ae===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=he===null?ne.memoizedState:he.next;if(e!==null)he=e,ae=t;else{if(t===null)throw Error(w(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},he===null?ne.memoizedState=he=t:he=he.next=t}return he}function Mi(t,e){return typeof e=="function"?e(t):e}function ml(t){var e=Xe(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var r=ae,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var f=c.lane;if((An&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ne.lanes|=f,On|=f}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,at(r,e.memoizedState)||(Ne=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ne.lanes|=s,On|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vl(t){var e=Xe(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);at(s,e.memoizedState)||(Ne=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Rh(){}function Mh(t,e){var n=ne,r=Xe(),i=e(),s=!at(r.memoizedState,i);if(s&&(r.memoizedState=i,Ne=!0),r=r.queue,Sa(Fh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Di(9,zh.bind(null,n,r,i,e),void 0,null),pe===null)throw Error(w(349));An&30||Dh(n,e,i)}return i}function Dh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zh(t,e,n,r){e.value=n,e.getSnapshot=r,Uh(e)&&Bh(t)}function Fh(t,e,n){return n(function(){Uh(e)&&Bh(t)})}function Uh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!at(t,n)}catch{return!0}}function Bh(t){var e=Rt(t,1);e!==null&&lt(e,t,1,-1)}function cf(t){var e=ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:t},e.queue=t,t=t.dispatch=Ev.bind(null,ne,t),[e.memoizedState,t]}function Di(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Wh(){return Xe().memoizedState}function Ns(t,e,n,r){var i=ft();ne.flags|=t,i.memoizedState=Di(1|e,n,void 0,r===void 0?null:r)}function Ao(t,e,n,r){var i=Xe();r=r===void 0?null:r;var s=void 0;if(ae!==null){var o=ae.memoizedState;if(s=o.destroy,r!==null&&_a(r,o.deps)){i.memoizedState=Di(e,n,s,r);return}}ne.flags|=t,i.memoizedState=Di(1|e,n,s,r)}function ff(t,e){return Ns(8390656,8,t,e)}function Sa(t,e){return Ao(2048,8,t,e)}function Vh(t,e){return Ao(4,2,t,e)}function jh(t,e){return Ao(4,4,t,e)}function $h(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gh(t,e,n){return n=n!=null?n.concat([t]):null,Ao(4,4,$h.bind(null,e,t),n)}function Ta(){}function Hh(t,e){var n=Xe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_a(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bh(t,e){var n=Xe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_a(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qh(t,e,n){return An&21?(at(n,e)||(n=Jd(),ne.lanes|=n,On|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ne=!0),t.memoizedState=n)}function yv(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=gl.transition;gl.transition={};try{t(!1),e()}finally{H=n,gl.transition=r}}function Yh(){return Xe().memoizedState}function _v(t,e,n){var r=en(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kh(t))qh(e,n);else if(n=Oh(t,e,n,r),n!==null){var i=Le();lt(n,t,r,i),Xh(n,e,r)}}function Ev(t,e,n){var r=en(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kh(t))qh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,at(l,o)){var a=e.interleaved;a===null?(i.next=i,pa(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Oh(t,e,i,r),n!==null&&(i=Le(),lt(n,t,r,i),Xh(n,e,r))}}function Kh(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function qh(t,e){hi=oo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ea(t,n)}}var lo={readContext:qe,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},wv={readContext:qe,useCallback:function(t,e){return ft().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:ff,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ns(4194308,4,$h.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ns(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ns(4,2,t,e)},useMemo:function(t,e){var n=ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ft();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_v.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=ft();return t={current:t},e.memoizedState=t},useState:cf,useDebugValue:Ta,useDeferredValue:function(t){return ft().memoizedState=t},useTransition:function(){var t=cf(!1),e=t[0];return t=yv.bind(null,t[1]),ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=ft();if(Z){if(n===void 0)throw Error(w(407));n=n()}else{if(n=e(),pe===null)throw Error(w(349));An&30||Dh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ff(Fh.bind(null,r,s,t),[t]),r.flags|=2048,Di(9,zh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ft(),e=pe.identifierPrefix;if(Z){var n=At,r=Lt;n=(r&~(1<<32-ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sv={readContext:qe,useCallback:Hh,useContext:qe,useEffect:Sa,useImperativeHandle:Gh,useInsertionEffect:Vh,useLayoutEffect:jh,useMemo:bh,useReducer:ml,useRef:Wh,useState:function(){return ml(Mi)},useDebugValue:Ta,useDeferredValue:function(t){var e=Xe();return Qh(e,ae.memoizedState,t)},useTransition:function(){var t=ml(Mi)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:Rh,useSyncExternalStore:Mh,useId:Yh,unstable_isNewReconciler:!1},Tv={readContext:qe,useCallback:Hh,useContext:qe,useEffect:Sa,useImperativeHandle:Gh,useInsertionEffect:Vh,useLayoutEffect:jh,useMemo:bh,useReducer:vl,useRef:Wh,useState:function(){return vl(Mi)},useDebugValue:Ta,useDeferredValue:function(t){var e=Xe();return ae===null?e.memoizedState=t:Qh(e,ae.memoizedState,t)},useTransition:function(){var t=vl(Mi)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:Rh,useSyncExternalStore:Mh,useId:Yh,unstable_isNewReconciler:!1};function et(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function su(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oo={isMounted:function(t){return(t=t._reactInternals)?Bn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Le(),i=en(t),s=Ot(r,i);s.payload=e,n!=null&&(s.callback=n),e=Jt(t,s,i),e!==null&&(lt(e,t,i,r),Os(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Le(),i=en(t),s=Ot(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jt(t,s,i),e!==null&&(lt(e,t,i,r),Os(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Le(),r=en(t),i=Ot(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jt(t,i,r),e!==null&&(lt(e,t,r,n),Os(e,t,r))}};function df(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Pi(n,r)||!Pi(i,s):!0}function Jh(t,e,n){var r=!1,i=rn,s=e.contextType;return typeof s=="object"&&s!==null?s=qe(s):(i=Me(e)?Pn:Te.current,r=e.contextTypes,s=(r=r!=null)?yr(t,i):rn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function hf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Oo.enqueueReplaceState(e,e.state,null)}function ou(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ga(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qe(s):(s=Me(e)?Pn:Te.current,i.context=yr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(su(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Oo.enqueueReplaceState(i,i.state,null),io(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sr(t,e){try{var n="",r=e;do n+=Xm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function Zh(t,e,n){n=Ot(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ao||(ao=!0,vu=r),lu(t,e)},n}function ep(t,e,n){n=Ot(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lu(t,e),typeof r!="function"&&(Zt===null?Zt=new Set([this]):Zt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Uv.bind(null,t,e,n),e.then(t,t))}function gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ot(-1,1),e.tag=2,Jt(n,e,1))),n.lanes|=1),t)}var Iv=Ut.ReactCurrentOwner,Ne=!1;function Ce(t,e,n,r){e.child=t===null?Ah(e,null,n,r):Er(e,t.child,n,r)}function vf(t,e,n,r,i){n=n.render;var s=e.ref;return hr(e,i),r=Ea(t,e,n,r,s,i),n=wa(),t!==null&&!Ne?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mt(t,e,i)):(Z&&n&&ua(e),e.flags|=1,Ce(t,e,r,i),e.child)}function yf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ka(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tp(t,e,s,r,i)):(t=zs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Pi,n(o,r)&&t.ref===e.ref)return Mt(t,e,i)}return e.flags|=1,t=tn(s,r),t.ref=e.ref,t.return=e,e.child=t}function tp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Pi(s,r)&&t.ref===e.ref)if(Ne=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ne=!0);else return e.lanes=t.lanes,Mt(t,e,i)}return uu(t,e,n,r,i)}function np(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},b(sr,Be),Be|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,b(sr,Be),Be|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,b(sr,Be),Be|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,b(sr,Be),Be|=r;return Ce(t,e,i,n),e.child}function rp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uu(t,e,n,r,i){var s=Me(n)?Pn:Te.current;return s=yr(e,s),hr(e,i),n=Ea(t,e,n,r,s,i),r=wa(),t!==null&&!Ne?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mt(t,e,i)):(Z&&r&&ua(e),e.flags|=1,Ce(t,e,n,i),e.child)}function _f(t,e,n,r,i){if(Me(n)){var s=!0;Zs(e)}else s=!1;if(hr(e,i),e.stateNode===null)Rs(t,e),Jh(e,n,r),ou(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qe(c):(c=Me(n)?Pn:Te.current,c=yr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&hf(e,o,r,c),Vt=!1;var h=e.memoizedState;o.state=h,io(e,r,o,i),a=e.memoizedState,l!==r||h!==a||Re.current||Vt?(typeof f=="function"&&(su(e,n,f,r),a=e.memoizedState),(l=Vt||df(e,n,l,r,h,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:et(e.type,l),o.props=c,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=qe(a):(a=Me(n)?Pn:Te.current,a=yr(e,a));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&hf(e,o,r,a),Vt=!1,h=e.memoizedState,o.state=h,io(e,r,o,i);var _=e.memoizedState;l!==d||h!==_||Re.current||Vt?(typeof v=="function"&&(su(e,n,v,r),_=e.memoizedState),(c=Vt||df(e,n,c,r,h,_,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return au(t,e,n,r,s,i)}function au(t,e,n,r,i,s){rp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&rf(e,n,!1),Mt(t,e,s);r=e.stateNode,Iv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Er(e,t.child,null,s),e.child=Er(e,null,l,s)):Ce(t,e,l,s),e.memoizedState=r.state,i&&rf(e,n,!0),e.child}function ip(t){var e=t.stateNode;e.pendingContext?nf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nf(t,e.context,!1),ma(t,e.containerInfo)}function Ef(t,e,n,r,i){return _r(),ca(i),e.flags|=256,Ce(t,e,n,r),e.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function fu(t){return{baseLanes:t,cachePool:null,transitions:null}}function sp(t,e,n){var r=e.pendingProps,i=ee.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),b(ee,i&1),t===null)return ru(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ro(o,r,0,null),t=Cn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=fu(n),e.memoizedState=cu,t):xa(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Cv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=tn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=tn(l,s):(s=Cn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?fu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=cu,r}return s=t.child,t=s.sibling,r=tn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xa(t,e){return e=Ro({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vs(t,e,n,r){return r!==null&&ca(r),Er(e,t.child,null,n),t=xa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=yl(Error(w(422))),vs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ro({mode:"visible",children:r.children},i,0,null),s=Cn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Er(e,t.child,null,o),e.child.memoizedState=fu(o),e.memoizedState=cu,s);if(!(e.mode&1))return vs(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(w(419)),r=yl(s,r,void 0),vs(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ne||l){if(r=pe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rt(t,i),lt(r,t,i,-1))}return Oa(),r=yl(Error(w(421))),vs(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Bv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,We=Xt(i.nextSibling),Ve=e,Z=!0,nt=null,t!==null&&(be[Qe++]=Lt,be[Qe++]=At,be[Qe++]=Ln,Lt=t.id,At=t.overflow,Ln=e),e=xa(e,r.children),e.flags|=4096,e)}function wf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iu(t.return,e,n)}function _l(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function op(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ce(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wf(t,n,e);else if(t.tag===19)wf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(b(ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&so(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_l(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&so(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_l(e,!0,n,null,s);break;case"together":_l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),On|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(w(153));if(e.child!==null){for(t=e.child,n=tn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pv(t,e,n){switch(e.tag){case 3:ip(e),_r();break;case 5:Nh(e);break;case 1:Me(e.type)&&Zs(e);break;case 4:ma(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;b(no,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(b(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?sp(t,e,n):(b(ee,ee.current&1),t=Mt(t,e,n),t!==null?t.sibling:null);b(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return op(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),b(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,np(t,e,n)}return Mt(t,e,n)}var lp,du,up,ap;lp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};du=function(){};up=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sn(yt.current);var s=null;switch(n){case"input":i=Ml(t,i),r=Ml(t,r),s=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),s=[];break;case"textarea":i=Fl(t,i),r=Fl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xs)}Bl(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ei.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ei.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Y("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ap=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zr(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ee(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Lv(t,e,n){var r=e.pendingProps;switch(aa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(e),null;case 1:return Me(e.type)&&Js(),Ee(e),null;case 3:return r=e.stateNode,wr(),X(Re),X(Te),ya(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nt!==null&&(Eu(nt),nt=null))),du(t,e),Ee(e),null;case 5:va(e);var i=Sn(Ni.current);if(n=e.type,t!==null&&e.stateNode!=null)up(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(w(166));return Ee(e),null}if(t=Sn(yt.current),gs(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ht]=e,r[Oi]=s,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<oi.length;i++)Y(oi[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Ac(r,s),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Y("invalid",r);break;case"textarea":kc(r,s),Y("invalid",r)}Bl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ps(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ps(r.textContent,l,t),i=["children",""+l]):Ei.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",r)}switch(n){case"input":os(r),Oc(r,s,!0);break;case"textarea":os(r),Nc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xs)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ht]=e,t[Oi]=r,lp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wl(n,r),n){case"dialog":Y("cancel",t),Y("close",t),i=r;break;case"iframe":case"object":case"embed":Y("load",t),i=r;break;case"video":case"audio":for(i=0;i<oi.length;i++)Y(oi[i],t);i=r;break;case"source":Y("error",t),i=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),i=r;break;case"details":Y("toggle",t),i=r;break;case"input":Ac(t,r),i=Ml(t,r),Y("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),Y("invalid",t);break;case"textarea":kc(t,r),i=Fl(t,r),Y("invalid",t);break;default:i=r}Bl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Wd(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Ud(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&wi(t,a):typeof a=="number"&&wi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ei.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Y("scroll",t):a!=null&&Yu(t,s,a,o))}switch(n){case"input":os(t),Oc(t,r,!1);break;case"textarea":os(t),Nc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ar(t,!!r.multiple,s,!1):r.defaultValue!=null&&ar(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ee(e),null;case 6:if(t&&e.stateNode!=null)ap(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(w(166));if(n=Sn(Ni.current),Sn(yt.current),gs(e)){if(r=e.stateNode,n=e.memoizedProps,r[ht]=e,(s=r.nodeValue!==n)&&(t=Ve,t!==null))switch(t.tag){case 3:ps(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ps(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ht]=e,e.stateNode=r}return Ee(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&We!==null&&e.mode&1&&!(e.flags&128))Ph(),_r(),e.flags|=98560,s=!1;else if(s=gs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(w(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(w(317));s[ht]=e}else _r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ee(e),s=!1}else nt!==null&&(Eu(nt),nt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?ce===0&&(ce=3):Oa())),e.updateQueue!==null&&(e.flags|=4),Ee(e),null);case 4:return wr(),du(t,e),t===null&&Li(e.stateNode.containerInfo),Ee(e),null;case 10:return ha(e.type._context),Ee(e),null;case 17:return Me(e.type)&&Js(),Ee(e),null;case 19:if(X(ee),s=e.memoizedState,s===null)return Ee(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Zr(s,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=so(t),o!==null){for(e.flags|=128,Zr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return b(ee,ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&oe()>Tr&&(e.flags|=128,r=!0,Zr(s,!1),e.lanes=4194304)}else{if(!r)if(t=so(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Z)return Ee(e),null}else 2*oe()-s.renderingStartTime>Tr&&n!==1073741824&&(e.flags|=128,r=!0,Zr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=oe(),e.sibling=null,n=ee.current,b(ee,r?n&1|2:n&1),e):(Ee(e),null);case 22:case 23:return Aa(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Be&1073741824&&(Ee(e),e.subtreeFlags&6&&(e.flags|=8192)):Ee(e),null;case 24:return null;case 25:return null}throw Error(w(156,e.tag))}function Av(t,e){switch(aa(e),e.tag){case 1:return Me(e.type)&&Js(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wr(),X(Re),X(Te),ya(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return va(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(w(340));_r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return wr(),null;case 10:return ha(e.type._context),null;case 22:case 23:return Aa(),null;case 24:return null;default:return null}}var ys=!1,we=!1,Ov=typeof WeakSet=="function"?WeakSet:Set,C=null;function ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(t,e,r)}else n.current=null}function hu(t,e,n){try{n()}catch(r){ie(t,e,r)}}var Sf=!1;function kv(t,e){if(ql=Ys,t=ph(),la(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=o),h===s&&++f===r&&(a=o),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xl={focusedElem:t,selectionRange:n},Ys=!1,C=e;C!==null;)if(e=C,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,C=t;else for(;C!==null;){e=C;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,S=_.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:et(e.type,y),S);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(w(163))}}catch(E){ie(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,C=t;break}C=e.return}return _=Sf,Sf=!1,_}function pi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&hu(e,n,s)}i=i.next}while(i!==r)}}function ko(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cp(t){var e=t.alternate;e!==null&&(t.alternate=null,cp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ht],delete e[Oi],delete e[eu],delete e[hv],delete e[pv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fp(t){return t.tag===5||t.tag===3||t.tag===4}function Tf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xs));else if(r!==4&&(t=t.child,t!==null))for(gu(t,e,n),t=t.sibling;t!==null;)gu(t,e,n),t=t.sibling}function mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mu(t,e,n),t=t.sibling;t!==null;)mu(t,e,n),t=t.sibling}var me=null,tt=!1;function Bt(t,e,n){for(n=n.child;n!==null;)dp(t,e,n),n=n.sibling}function dp(t,e,n){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(To,n)}catch{}switch(n.tag){case 5:we||ir(n,e);case 6:var r=me,i=tt;me=null,Bt(t,e,n),me=r,tt=i,me!==null&&(tt?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(tt?(t=me,n=n.stateNode,t.nodeType===8?dl(t.parentNode,n):t.nodeType===1&&dl(t,n),Ii(t)):dl(me,n.stateNode));break;case 4:r=me,i=tt,me=n.stateNode.containerInfo,tt=!0,Bt(t,e,n),me=r,tt=i;break;case 0:case 11:case 14:case 15:if(!we&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hu(n,e,o),i=i.next}while(i!==r)}Bt(t,e,n);break;case 1:if(!we&&(ir(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ie(n,e,l)}Bt(t,e,n);break;case 21:Bt(t,e,n);break;case 22:n.mode&1?(we=(r=we)||n.memoizedState!==null,Bt(t,e,n),we=r):Bt(t,e,n);break;default:Bt(t,e,n)}}function xf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ov),e.forEach(function(r){var i=Wv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ze(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,tt=!1;break e;case 3:me=l.stateNode.containerInfo,tt=!0;break e;case 4:me=l.stateNode.containerInfo,tt=!0;break e}l=l.return}if(me===null)throw Error(w(160));dp(s,o,i),me=null,tt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){ie(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hp(e,t),e=e.sibling}function hp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ze(e,t),ct(t),r&4){try{pi(3,t,t.return),ko(3,t)}catch(y){ie(t,t.return,y)}try{pi(5,t,t.return)}catch(y){ie(t,t.return,y)}}break;case 1:Ze(e,t),ct(t),r&512&&n!==null&&ir(n,n.return);break;case 5:if(Ze(e,t),ct(t),r&512&&n!==null&&ir(n,n.return),t.flags&32){var i=t.stateNode;try{wi(i,"")}catch(y){ie(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Dd(i,s),Wl(l,o);var c=Wl(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?Wd(i,d):f==="dangerouslySetInnerHTML"?Ud(i,d):f==="children"?wi(i,d):Yu(i,f,d,c)}switch(l){case"input":Dl(i,s);break;case"textarea":zd(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?ar(i,!!s.multiple,v,!1):h!==!!s.multiple&&(s.defaultValue!=null?ar(i,!!s.multiple,s.defaultValue,!0):ar(i,!!s.multiple,s.multiple?[]:"",!1))}i[Oi]=s}catch(y){ie(t,t.return,y)}}break;case 6:if(Ze(e,t),ct(t),r&4){if(t.stateNode===null)throw Error(w(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ie(t,t.return,y)}}break;case 3:if(Ze(e,t),ct(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ii(e.containerInfo)}catch(y){ie(t,t.return,y)}break;case 4:Ze(e,t),ct(t);break;case 13:Ze(e,t),ct(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pa=oe())),r&4&&xf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(we=(c=we)||f,Ze(e,t),we=c):Ze(e,t),ct(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(C=t,f=t.child;f!==null;){for(d=C=f;C!==null;){switch(h=C,v=h.child,h.tag){case 0:case 11:case 14:case 15:pi(4,h,h.return);break;case 1:ir(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){ie(r,n,y)}}break;case 5:ir(h,h.return);break;case 22:if(h.memoizedState!==null){Cf(d);continue}}v!==null?(v.return=h,C=v):Cf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Bd("display",o))}catch(y){ie(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){ie(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ze(e,t),ct(t),r&4&&xf(t);break;case 21:break;default:Ze(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fp(n)){var r=n;break e}n=n.return}throw Error(w(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wi(i,""),r.flags&=-33);var s=Tf(t);mu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Tf(t);gu(t,l,o);break;default:throw Error(w(161))}}catch(a){ie(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nv(t,e,n){C=t,pp(t)}function pp(t,e,n){for(var r=(t.mode&1)!==0;C!==null;){var i=C,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ys;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||we;l=ys;var c=we;if(ys=o,(we=a)&&!c)for(C=i;C!==null;)o=C,a=o.child,o.tag===22&&o.memoizedState!==null?Pf(i):a!==null?(a.return=o,C=a):Pf(i);for(;s!==null;)C=s,pp(s),s=s.sibling;C=i,ys=l,we=c}If(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,C=s):If(t)}}function If(t){for(;C!==null;){var e=C;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||ko(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!we)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:et(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&af(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}af(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ii(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(w(163))}we||e.flags&512&&pu(e)}catch(h){ie(e,e.return,h)}}if(e===t){C=null;break}if(n=e.sibling,n!==null){n.return=e.return,C=n;break}C=e.return}}function Cf(t){for(;C!==null;){var e=C;if(e===t){C=null;break}var n=e.sibling;if(n!==null){n.return=e.return,C=n;break}C=e.return}}function Pf(t){for(;C!==null;){var e=C;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ko(4,e)}catch(a){ie(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ie(e,i,a)}}var s=e.return;try{pu(e)}catch(a){ie(e,s,a)}break;case 5:var o=e.return;try{pu(e)}catch(a){ie(e,o,a)}}}catch(a){ie(e,e.return,a)}if(e===t){C=null;break}var l=e.sibling;if(l!==null){l.return=e.return,C=l;break}C=e.return}}var Rv=Math.ceil,uo=Ut.ReactCurrentDispatcher,Ia=Ut.ReactCurrentOwner,Ke=Ut.ReactCurrentBatchConfig,j=0,pe=null,le=null,ve=0,Be=0,sr=cn(0),ce=0,zi=null,On=0,No=0,Ca=0,gi=null,ke=null,Pa=0,Tr=1/0,xt=null,ao=!1,vu=null,Zt=null,_s=!1,bt=null,co=0,mi=0,yu=null,Ms=-1,Ds=0;function Le(){return j&6?oe():Ms!==-1?Ms:Ms=oe()}function en(t){return t.mode&1?j&2&&ve!==0?ve&-ve:mv.transition!==null?(Ds===0&&(Ds=Jd()),Ds):(t=H,t!==0||(t=window.event,t=t===void 0?16:sh(t.type)),t):1}function lt(t,e,n,r){if(50<mi)throw mi=0,yu=null,Error(w(185));ji(t,n,r),(!(j&2)||t!==pe)&&(t===pe&&(!(j&2)&&(No|=n),ce===4&&Gt(t,ve)),De(t,r),n===1&&j===0&&!(e.mode&1)&&(Tr=oe()+500,Lo&&fn()))}function De(t,e){var n=t.callbackNode;m0(t,e);var r=Qs(t,t===pe?ve:0);if(r===0)n!==null&&Dc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dc(n),e===1)t.tag===0?gv(Lf.bind(null,t)):xh(Lf.bind(null,t)),fv(function(){!(j&6)&&fn()}),n=null;else{switch(Zd(r)){case 1:n=Zu;break;case 4:n=qd;break;case 16:n=bs;break;case 536870912:n=Xd;break;default:n=bs}n=Sp(n,gp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gp(t,e){if(Ms=-1,Ds=0,j&6)throw Error(w(327));var n=t.callbackNode;if(pr()&&t.callbackNode!==n)return null;var r=Qs(t,t===pe?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fo(t,r);else{e=r;var i=j;j|=2;var s=vp();(pe!==t||ve!==e)&&(xt=null,Tr=oe()+500,In(t,e));do try{zv();break}catch(l){mp(t,l)}while(!0);da(),uo.current=s,j=i,le!==null?e=0:(pe=null,ve=0,e=ce)}if(e!==0){if(e===2&&(i=Hl(t),i!==0&&(r=i,e=_u(t,i))),e===1)throw n=zi,In(t,0),Gt(t,r),De(t,oe()),n;if(e===6)Gt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Mv(i)&&(e=fo(t,r),e===2&&(s=Hl(t),s!==0&&(r=s,e=_u(t,s))),e===1))throw n=zi,In(t,0),Gt(t,r),De(t,oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(w(345));case 2:yn(t,ke,xt);break;case 3:if(Gt(t,r),(r&130023424)===r&&(e=Pa+500-oe(),10<e)){if(Qs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Le(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zl(yn.bind(null,t,ke,xt),e);break}yn(t,ke,xt);break;case 4:if(Gt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ot(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rv(r/1960))-r,10<r){t.timeoutHandle=Zl(yn.bind(null,t,ke,xt),r);break}yn(t,ke,xt);break;case 5:yn(t,ke,xt);break;default:throw Error(w(329))}}}return De(t,oe()),t.callbackNode===n?gp.bind(null,t):null}function _u(t,e){var n=gi;return t.current.memoizedState.isDehydrated&&(In(t,e).flags|=256),t=fo(t,e),t!==2&&(e=ke,ke=n,e!==null&&Eu(e)),t}function Eu(t){ke===null?ke=t:ke.push.apply(ke,t)}function Mv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!at(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gt(t,e){for(e&=~Ca,e&=~No,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ot(e),r=1<<n;t[n]=-1,e&=~r}}function Lf(t){if(j&6)throw Error(w(327));pr();var e=Qs(t,0);if(!(e&1))return De(t,oe()),null;var n=fo(t,e);if(t.tag!==0&&n===2){var r=Hl(t);r!==0&&(e=r,n=_u(t,r))}if(n===1)throw n=zi,In(t,0),Gt(t,e),De(t,oe()),n;if(n===6)throw Error(w(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yn(t,ke,xt),De(t,oe()),null}function La(t,e){var n=j;j|=1;try{return t(e)}finally{j=n,j===0&&(Tr=oe()+500,Lo&&fn())}}function kn(t){bt!==null&&bt.tag===0&&!(j&6)&&pr();var e=j;j|=1;var n=Ke.transition,r=H;try{if(Ke.transition=null,H=1,t)return t()}finally{H=r,Ke.transition=n,j=e,!(j&6)&&fn()}}function Aa(){Be=sr.current,X(sr)}function In(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cv(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(aa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Js();break;case 3:wr(),X(Re),X(Te),ya();break;case 5:va(r);break;case 4:wr();break;case 13:X(ee);break;case 19:X(ee);break;case 10:ha(r.type._context);break;case 22:case 23:Aa()}n=n.return}if(pe=t,le=t=tn(t.current,null),ve=Be=e,ce=0,zi=null,Ca=No=On=0,ke=gi=null,wn!==null){for(e=0;e<wn.length;e++)if(n=wn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wn=null}return t}function mp(t,e){do{var n=le;try{if(da(),ks.current=lo,oo){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oo=!1}if(An=0,he=ae=ne=null,hi=!1,Ri=0,Ia.current=null,n===null||n.return===null){ce=1,zi=e,le=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=gf(o);if(v!==null){v.flags&=-257,mf(v,o,l,s,e),v.mode&1&&pf(s,c,e),e=v,a=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(a),e.updateQueue=y}else _.add(a);break e}else{if(!(e&1)){pf(s,c,e),Oa();break e}a=Error(w(426))}}else if(Z&&l.mode&1){var S=gf(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),mf(S,o,l,s,e),ca(Sr(a,l));break e}}s=a=Sr(a,l),ce!==4&&(ce=2),gi===null?gi=[s]:gi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Zh(s,a,e);uf(s,g);break e;case 1:l=a;var p=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Zt===null||!Zt.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=ep(s,l,e);uf(s,E);break e}}s=s.return}while(s!==null)}_p(n)}catch(T){e=T,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function vp(){var t=uo.current;return uo.current=lo,t===null?lo:t}function Oa(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(On&268435455)&&!(No&268435455)||Gt(pe,ve)}function fo(t,e){var n=j;j|=2;var r=vp();(pe!==t||ve!==e)&&(xt=null,In(t,e));do try{Dv();break}catch(i){mp(t,i)}while(!0);if(da(),j=n,uo.current=r,le!==null)throw Error(w(261));return pe=null,ve=0,ce}function Dv(){for(;le!==null;)yp(le)}function zv(){for(;le!==null&&!l0();)yp(le)}function yp(t){var e=wp(t.alternate,t,Be);t.memoizedProps=t.pendingProps,e===null?_p(t):le=e,Ia.current=null}function _p(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Av(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,le=null;return}}else if(n=Lv(n,e,Be),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);ce===0&&(ce=5)}function yn(t,e,n){var r=H,i=Ke.transition;try{Ke.transition=null,H=1,Fv(t,e,n,r)}finally{Ke.transition=i,H=r}return null}function Fv(t,e,n,r){do pr();while(bt!==null);if(j&6)throw Error(w(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(w(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(v0(t,s),t===pe&&(le=pe=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_s||(_s=!0,Sp(bs,function(){return pr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ke.transition,Ke.transition=null;var o=H;H=1;var l=j;j|=4,Ia.current=null,kv(t,n),hp(n,t),rv(Xl),Ys=!!ql,Xl=ql=null,t.current=n,Nv(n),u0(),j=l,H=o,Ke.transition=s}else t.current=n;if(_s&&(_s=!1,bt=t,co=i),s=t.pendingLanes,s===0&&(Zt=null),f0(n.stateNode),De(t,oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ao)throw ao=!1,t=vu,vu=null,t;return co&1&&t.tag!==0&&pr(),s=t.pendingLanes,s&1?t===yu?mi++:(mi=0,yu=t):mi=0,fn(),null}function pr(){if(bt!==null){var t=Zd(co),e=Ke.transition,n=H;try{if(Ke.transition=null,H=16>t?16:t,bt===null)var r=!1;else{if(t=bt,bt=null,co=0,j&6)throw Error(w(331));var i=j;for(j|=4,C=t.current;C!==null;){var s=C,o=s.child;if(C.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(C=c;C!==null;){var f=C;switch(f.tag){case 0:case 11:case 15:pi(8,f,s)}var d=f.child;if(d!==null)d.return=f,C=d;else for(;C!==null;){f=C;var h=f.sibling,v=f.return;if(cp(f),f===c){C=null;break}if(h!==null){h.return=v,C=h;break}C=v}}}var _=s.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}C=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,C=o;else e:for(;C!==null;){if(s=C,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pi(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,C=g;break e}C=s.return}}var p=t.current;for(C=p;C!==null;){o=C;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,C=m;else e:for(o=p;C!==null;){if(l=C,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ko(9,l)}}catch(T){ie(l,l.return,T)}if(l===o){C=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,C=E;break e}C=l.return}}if(j=i,fn(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(To,t)}catch{}r=!0}return r}finally{H=n,Ke.transition=e}}return!1}function Af(t,e,n){e=Sr(n,e),e=Zh(t,e,1),t=Jt(t,e,1),e=Le(),t!==null&&(ji(t,1,e),De(t,e))}function ie(t,e,n){if(t.tag===3)Af(t,t,n);else for(;e!==null;){if(e.tag===3){Af(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zt===null||!Zt.has(r))){t=Sr(n,t),t=ep(e,t,1),e=Jt(e,t,1),t=Le(),e!==null&&(ji(e,1,t),De(e,t));break}}e=e.return}}function Uv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Le(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(ve&n)===n&&(ce===4||ce===3&&(ve&130023424)===ve&&500>oe()-Pa?In(t,0):Ca|=n),De(t,e)}function Ep(t,e){e===0&&(t.mode&1?(e=as,as<<=1,!(as&130023424)&&(as=4194304)):e=1);var n=Le();t=Rt(t,e),t!==null&&(ji(t,e,n),De(t,n))}function Bv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ep(t,n)}function Wv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(w(314))}r!==null&&r.delete(e),Ep(t,n)}var wp;wp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Re.current)Ne=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ne=!1,Pv(t,e,n);Ne=!!(t.flags&131072)}else Ne=!1,Z&&e.flags&1048576&&Ih(e,to,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rs(t,e),t=e.pendingProps;var i=yr(e,Te.current);hr(e,n),i=Ea(null,e,r,t,i,n);var s=wa();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Me(r)?(s=!0,Zs(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ga(e),i.updater=Oo,e.stateNode=i,i._reactInternals=e,ou(e,r,t,n),e=au(null,e,r,!0,s,n)):(e.tag=0,Z&&s&&ua(e),Ce(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jv(r),t=et(r,t),i){case 0:e=uu(null,e,r,t,n);break e;case 1:e=_f(null,e,r,t,n);break e;case 11:e=vf(null,e,r,t,n);break e;case 14:e=yf(null,e,r,et(r.type,t),n);break e}throw Error(w(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),uu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),_f(t,e,r,i,n);case 3:e:{if(ip(e),t===null)throw Error(w(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kh(t,e),io(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sr(Error(w(423)),e),e=Ef(t,e,r,n,i);break e}else if(r!==i){i=Sr(Error(w(424)),e),e=Ef(t,e,r,n,i);break e}else for(We=Xt(e.stateNode.containerInfo.firstChild),Ve=e,Z=!0,nt=null,n=Ah(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),r===i){e=Mt(t,e,n);break e}Ce(t,e,r,n)}e=e.child}return e;case 5:return Nh(e),t===null&&ru(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Jl(r,i)?o=null:s!==null&&Jl(r,s)&&(e.flags|=32),rp(t,e),Ce(t,e,o,n),e.child;case 6:return t===null&&ru(e),null;case 13:return sp(t,e,n);case 4:return ma(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Er(e,null,r,n):Ce(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),vf(t,e,r,i,n);case 7:return Ce(t,e,e.pendingProps,n),e.child;case 8:return Ce(t,e,e.pendingProps.children,n),e.child;case 12:return Ce(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,b(no,r._currentValue),r._currentValue=o,s!==null)if(at(s.value,o)){if(s.children===i.children&&!Re.current){e=Mt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Ot(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),iu(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(w(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),iu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ce(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hr(e,n),i=qe(i),r=r(i),e.flags|=1,Ce(t,e,r,n),e.child;case 14:return r=e.type,i=et(r,e.pendingProps),i=et(r.type,i),yf(t,e,r,i,n);case 15:return tp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),Rs(t,e),e.tag=1,Me(r)?(t=!0,Zs(e)):t=!1,hr(e,n),Jh(e,r,i),ou(e,r,i,n),au(null,e,r,!0,t,n);case 19:return op(t,e,n);case 22:return np(t,e,n)}throw Error(w(156,e.tag))};function Sp(t,e){return Kd(t,e)}function Vv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(t,e,n,r){return new Vv(t,e,n,r)}function ka(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jv(t){if(typeof t=="function")return ka(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qu)return 11;if(t===Xu)return 14}return 2}function tn(t,e){var n=t.alternate;return n===null?(n=Ye(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zs(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ka(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Kn:return Cn(n.children,i,s,e);case Ku:o=8,i|=8;break;case Ol:return t=Ye(12,n,e,i|2),t.elementType=Ol,t.lanes=s,t;case kl:return t=Ye(13,n,e,i),t.elementType=kl,t.lanes=s,t;case Nl:return t=Ye(19,n,e,i),t.elementType=Nl,t.lanes=s,t;case Nd:return Ro(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Od:o=10;break e;case kd:o=9;break e;case qu:o=11;break e;case Xu:o=14;break e;case Wt:o=16,r=null;break e}throw Error(w(130,t==null?t:typeof t,""))}return e=Ye(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cn(t,e,n,r){return t=Ye(7,t,r,e),t.lanes=n,t}function Ro(t,e,n,r){return t=Ye(22,t,r,e),t.elementType=Nd,t.lanes=n,t.stateNode={isHidden:!1},t}function El(t,e,n){return t=Ye(6,t,null,e),t.lanes=n,t}function wl(t,e,n){return e=Ye(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $v(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tl(0),this.expirationTimes=tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Na(t,e,n,r,i,s,o,l,a){return t=new $v(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ye(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ga(s),t}function Gv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tp(t){if(!t)return rn;t=t._reactInternals;e:{if(Bn(t)!==t||t.tag!==1)throw Error(w(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Me(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(w(171))}if(t.tag===1){var n=t.type;if(Me(n))return Th(t,n,e)}return e}function xp(t,e,n,r,i,s,o,l,a){return t=Na(n,r,!0,t,i,s,o,l,a),t.context=Tp(null),n=t.current,r=Le(),i=en(n),s=Ot(r,i),s.callback=e??null,Jt(n,s,i),t.current.lanes=i,ji(t,i,r),De(t,r),t}function Mo(t,e,n,r){var i=e.current,s=Le(),o=en(i);return n=Tp(n),e.context===null?e.context=n:e.pendingContext=n,e=Ot(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jt(i,e,o),t!==null&&(lt(t,i,o,s),Os(t,i,o)),o}function ho(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Of(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ra(t,e){Of(t,e),(t=t.alternate)&&Of(t,e)}function Hv(){return null}var Ip=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ma(t){this._internalRoot=t}Do.prototype.render=Ma.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(w(409));Mo(t,e,null,null)};Do.prototype.unmount=Ma.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kn(function(){Mo(null,t,null,null)}),e[Nt]=null}};function Do(t){this._internalRoot=t}Do.prototype.unstable_scheduleHydration=function(t){if(t){var e=nh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$t.length&&e!==0&&e<$t[n].priority;n++);$t.splice(n,0,t),n===0&&ih(t)}};function Da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kf(){}function bv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ho(o);s.call(c)}}var o=xp(e,r,t,0,null,!1,!1,"",kf);return t._reactRootContainer=o,t[Nt]=o.current,Li(t.nodeType===8?t.parentNode:t),kn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ho(a);l.call(c)}}var a=Na(t,0,!1,null,null,!1,!1,"",kf);return t._reactRootContainer=a,t[Nt]=a.current,Li(t.nodeType===8?t.parentNode:t),kn(function(){Mo(e,a,n,r)}),a}function Fo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ho(o);l.call(a)}}Mo(e,o,t,i)}else o=bv(n,e,t,i,r);return ho(o)}eh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=si(e.pendingLanes);n!==0&&(ea(e,n|1),De(e,oe()),!(j&6)&&(Tr=oe()+500,fn()))}break;case 13:kn(function(){var r=Rt(t,1);if(r!==null){var i=Le();lt(r,t,1,i)}}),Ra(t,1)}};ta=function(t){if(t.tag===13){var e=Rt(t,134217728);if(e!==null){var n=Le();lt(e,t,134217728,n)}Ra(t,134217728)}};th=function(t){if(t.tag===13){var e=en(t),n=Rt(t,e);if(n!==null){var r=Le();lt(n,t,e,r)}Ra(t,e)}};nh=function(){return H};rh=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};jl=function(t,e,n){switch(e){case"input":if(Dl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Po(r);if(!i)throw Error(w(90));Md(r),Dl(r,i)}}}break;case"textarea":zd(t,n);break;case"select":e=n.value,e!=null&&ar(t,!!n.multiple,e,!1)}};$d=La;Gd=kn;var Qv={usingClientEntryPoint:!1,Events:[Gi,Zn,Po,Vd,jd,La]},ei={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yv={bundleType:ei.bundleType,version:ei.version,rendererPackageName:ei.rendererPackageName,rendererConfig:ei.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qd(t),t===null?null:t.stateNode},findFiberByHostInstance:ei.findFiberByHostInstance||Hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Es.isDisabled&&Es.supportsFiber)try{To=Es.inject(Yv),vt=Es}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qv;$e.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Da(e))throw Error(w(200));return Gv(t,e,null,n)};$e.createRoot=function(t,e){if(!Da(t))throw Error(w(299));var n=!1,r="",i=Ip;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Na(t,1,!1,null,null,n,!1,r,i),t[Nt]=e.current,Li(t.nodeType===8?t.parentNode:t),new Ma(e)};$e.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(w(188)):(t=Object.keys(t).join(","),Error(w(268,t)));return t=Qd(e),t=t===null?null:t.stateNode,t};$e.flushSync=function(t){return kn(t)};$e.hydrate=function(t,e,n){if(!zo(e))throw Error(w(200));return Fo(null,t,e,!0,n)};$e.hydrateRoot=function(t,e,n){if(!Da(t))throw Error(w(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ip;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xp(e,null,t,1,n??null,i,!1,s,o),t[Nt]=e.current,Li(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Do(e)};$e.render=function(t,e,n){if(!zo(e))throw Error(w(200));return Fo(null,t,e,!1,n)};$e.unmountComponentAtNode=function(t){if(!zo(t))throw Error(w(40));return t._reactRootContainer?(kn(function(){Fo(null,null,t,!1,function(){t._reactRootContainer=null,t[Nt]=null})}),!0):!1};$e.unstable_batchedUpdates=La;$e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zo(n))throw Error(w(200));if(t==null||t._reactInternals===void 0)throw Error(w(38));return Fo(t,e,n,!1,r)};$e.version="18.3.1-next-f1338f8080-20240426";function Cp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cp)}catch(t){console.error(t)}}Cp(),Cd.exports=$e;var Kv=Cd.exports,Nf=Kv;Ll.createRoot=Nf.createRoot,Ll.hydrateRoot=Nf.hydrateRoot;const qv=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),Xv=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),Jv=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),Zv=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),ey=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),ty=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),ny=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),ry=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),iy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),sy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),oy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),ly=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),uy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),ay=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),cy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),fy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),dy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),hy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),py=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"}));var xe=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t))(xe||{});const gy={Line:qv,Square:Xv,Circle:Jv,Direction:Zv,VectorDocument:ey,LayersDifference:ty,AntiClockwise:ly,Clockwise:uy,Github:ay,Crop:cy,Folder:fy,Save:hy,Svg:ny,Expand:dy,Image:py,SolidDown:ry,SolidUp:iy,SolidUpSmall:sy,SolidDownSmall:oy},Pp=({name:t,className:e})=>{const n=gy[t];return N.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:N.jsx(n,{})})};var B=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.SCALE="SCALE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t))(B||{});const J=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:s,className:o,iconClassname:l,style:a})=>N.jsx(N.Fragment,{children:N.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(o?" "+o:""),style:a,"data-active":i,onClick:r,title:e,children:[n&&N.jsx(Pp,{name:n,className:l}),t&&N.jsx("span",{children:t}),s]})}),Sl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:s,children:o})=>{const[l,a]=O.useState(!1);return N.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[N.jsx(J,{icon:n,label:t,title:e,"data-active":l,onClick:()=>a(!l),style:s}),N.jsx(Pp,{name:xe.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&N.jsx("div",{className:"flex flex-row gap-1",onClick:()=>a(!1),children:o})]})},Lp=!0,my=!1,Fs={CCW:-1,CW:1,NOT_ORIENTABLE:0},vy=2*Math.PI,po=1,Ap=0,dt=2,yy=3,_y=4,Ey=1,wy=2,za=0,vi=1,gr=2;var go=Object.freeze({__proto__:null,BOUNDARY:dt,CCW:Lp,CONTAINS:yy,CW:my,END_VERTEX:gr,INSIDE:po,INTERLACE:_y,NOT_VERTEX:za,ORIENTATION:Fs,OUTSIDE:Ap,OVERLAP_OPPOSITE:wy,OVERLAP_SAME:Ey,PIx2:vy,START_VERTEX:vi});let _t=1e-6;function Op(t){_t=t}function kp(){return _t}const Sy=3;function wu(t){return t<_t&&t>-_t}function Nn(t,e){return t-e<_t&&t-e>-_t}function Np(t,e){return t-e>_t}function Ty(t,e){return t-e>-_t}function Rp(t,e){return t-e<-_t}function xy(t,e){return t-e<_t}var Iy=Object.freeze({__proto__:null,DECIMALS:Sy,EQ:Nn,EQ_0:wu,GE:Ty,GT:Np,LE:xy,LT:Rp,getTolerance:kp,setTolerance:Op});let u={Utils:Iy,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in go)u[t]=go[t];Object.defineProperty(u,"DP_TOL",{get:function(){return kp()},set:function(t){Op(t)}});class K{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}u.Errors=K;class Fa{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,s=n||this.last,o=i;if(o===void 0)return r;do r.push(o),o=o.next;while(o!==s.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw K.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const Rf={stroke:"black"};class Cy{constructor(e=Rf){for(const n in e)this[n]=e[n];this.stroke=e.stroke??Rf.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function Wn(t){return new Cy(t).toAttributesString()}function Ur(t,e){let n=[],[r,i,s]=t.standard,[o,l,a]=e.standard,c=r*l-i*o,f=s*l-i*a,d=r*a-s*o;if(!u.Utils.EQ_0(c)){let h,v;i===0?(h=s/r,v=d/c):l===0?(h=a/o,v=d/c):r===0?(h=f/c,v=s/i):o===0?(h=f/c,v=a/l):(h=f/c,v=d/c),n.push(new u.Point(h,v))}return n}function Vn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(u.Utils.EQ(i,e.r))n.push(r);else if(u.Utils.LT(i,e.r)){let s=Math.sqrt(e.r*e.r-i*i),o,l;o=t.norm.rotate90CCW().multiply(s),l=r.translate(o),n.push(l),o=t.norm.rotate90CW().multiply(s),l=r.translate(o),n.push(l)}return n}function xr(t,e){let n=[];for(let r of e.toSegments()){let i=bi(r,t);for(let s of i)jp(s,n)||n.push(s)}return n}function Uo(t,e){let n=[];if(xr(t,e.box).length===0)return n;let r=new u.Circle(e.pc,e.r),i=Vn(t,r);for(let s of i)s.on(e)&&n.push(s);return n}function bi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new u.Line(t.ps,t.pe);return Ur(r,e)}function Bo(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let s=Ur(r,i);s.length>0&&Mf(s[0],t)&&Mf(s[0],e)&&n.push(s[0])}return n}function Mf(t,e){const n=e.box;return u.Utils.LE(t.x,n.xmax)&&u.Utils.GE(t.x,n.xmin)&&u.Utils.LE(t.y,n.ymax)&&u.Utils.GE(t.y,n.ymin)}function Wo(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[s,o]=t.ps.distanceTo(e.pc);return u.Utils.EQ(s,e.r)&&n.push(t.ps),n}let r=new u.Line(t.ps,t.pe),i=Vn(r,e);for(let s of i)s.on(t)&&n.push(s);return n}function Br(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Circle(e.pc,e.r),s=Vn(r,i);for(let o of s)o.on(t)&&o.on(e)&&n.push(o);return n}function Py(t,e){let n=[];for(let r of e.toSegments()){let i=Bo(r,t);for(let s of i)n.push(s)}return n}function Mp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new u.Vector(t.pc,e.pc),i=t.r,s=e.r;if(u.Utils.EQ_0(i)||u.Utils.EQ_0(s))return n;if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y)&&u.Utils.EQ(i,s))return n.push(t.pc.translate(-i,0)),n;let o=t.pc.distanceTo(e.pc)[0];if(u.Utils.GT(o,i+s)||u.Utils.LT(o,Math.abs(i-s)))return n;r.x/=o,r.y/=o;let l;if(u.Utils.EQ(o,i+s)||u.Utils.EQ(o,Math.abs(i-s)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let a=i*i/(2*o)-s*s/(2*o)+o/2,c=t.pc.translate(a*r.x,a*r.y),f=Math.sqrt(i*i-a*a);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Ly(t,e){let n=[];for(let r of e.toSegments()){let i=Wo(r,t);for(let s of i)n.push(s)}return n}function Dp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&u.Utils.EQ(t.r,e.r)){let o;return o=t.start,o.on(e)&&n.push(o),o=t.end,o.on(e)&&n.push(o),o=e.start,o.on(t)&&n.push(o),o=e.end,o.on(t)&&n.push(o),n}let r=new u.Circle(t.pc,t.r),i=new u.Circle(e.pc,e.r),s=r.intersect(i);for(let o of s)o.on(t)&&o.on(e)&&n.push(o);return n}function Ua(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&u.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new u.Circle(t.pc,t.r),s=Mp(r,i);for(let o of s)o.on(t)&&n.push(o);return n}function Ay(t,e){let n=[];for(let r of e.toSegments()){let i=Br(r,t);for(let s of i)n.push(s)}return n}function zp(t,e){return t.isSegment?Bo(t.shape,e):Br(e,t.shape)}function Fp(t,e){return t.isSegment?Br(t.shape,e):Dp(t.shape,e)}function Up(t,e){return t.isSegment?bi(t.shape,e):Uo(e,t.shape)}function Oy(t,e){return t.isSegment?Va(e,t.shape):ja(e,t.shape)}function ky(t,e){return t.isSegment?Wo(t.shape,e):Ua(t.shape,e)}function Ba(t,e){let n=[];for(let r of e.edges)for(let i of zp(r,t))n.push(i);return n}function Wa(t,e){let n=[];for(let r of e.edges)for(let i of Fp(r,t))n.push(i);return n}function Qi(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Up(r,t))jp(i,n)||n.push(i);return t.sortPoints(n)}function Bp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of ky(r,t))n.push(i);return n}function Wp(t,e){return t.isSegment?zp(e,t.shape):t.isArc?Fp(e,t.shape):t.isLine?Up(e,t.shape):t.isRay?Oy(e,t.shape):[]}function Vp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Wp(t,i)];return n}function Ny(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...Vp(r,e)];return n}function Ry(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...Vp(r,e)];return n}function My(t,e){return t instanceof u.Line?Qi(t,e):t instanceof u.Segment?Ba(t,e):t instanceof u.Arc?Wa(t,e):[]}function jp(t,e){return e.some(n=>n.equalTo(t))}function sn(t){return new u.Line(t.start,t.norm)}function Va(t,e){return bi(e,sn(t)).filter(n=>t.contains(n))}function ja(t,e){return Uo(sn(t),e).filter(n=>t.contains(n))}function $p(t,e){return Vn(sn(t),e).filter(n=>t.contains(n))}function Dy(t,e){return xr(sn(t),e).filter(n=>t.contains(n))}function Gp(t,e){return Ur(sn(t),e).filter(n=>t.contains(n))}function zy(t,e){return Ur(sn(t),sn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function Hp(t,e){return Qi(sn(t),e).filter(n=>t.contains(n))}function bp(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw K.UNSUPPORTED_SHAPE_TYPE}function Yi(t,e){let n=[];for(let r of e)n=[...n,...bp(r,r.shape)];return n}function Fy(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...bp(r,i)];return n}let jn=class li extends Fa{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,s=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray||a instanceof u.Line,o=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray,l=a=>a instanceof u.Segment||a instanceof u.Arc;if(n=i===1&&s(r[0])||i>1&&o(r[0])&&o(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(a=>a instanceof u.Ray||a instanceof u.Line);for(let a of r){let c=new u.Edge(a);this.append(c)}this.setArcLength()}else throw u.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new li(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),s=n.prev;return this.insert(i,s),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Line){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Circle){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Segment){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Multiline)return u.Distance.multiline2multiline(this,e);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof u.Multiline?Fy(this,e):Yi(e,this)}contains(e){if(e instanceof u.Point)return this.edges.some(n=>n.shape.contains(e));throw u.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new li(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new u.Point){return new li(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new u.Matrix){return new li(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${Wn({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};u.Multiline=jn;const Uy=(...t)=>new u.Multiline(...t);u.multiline=Uy;function Ir(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let s=0;i[0]===null?s=0:i[1]===null?s=t.shape.length:s=i[0].length;let o=za;Nn(s,0)&&(o|=vi),Nn(s,t.shape.length)&&(o|=gr);let l;s===1/0?l=i[0].coord(e):l=o&gr&&t.next&&t.next.arc_length===0?0:t.arc_length+s,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:o})}function Fi(t){t.int_points1_sorted=jt(t.int_points1),t.int_points2_sorted=jt(t.int_points2)}function jt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(By)}function By(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function $a(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,s;for(let o=0;o<t.int_points1_sorted.length;o++)if(t.int_points1_sorted[o].id!==-1){n=t.int_points1_sorted[o],r=t.int_points2[n.id];for(let l=o+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!Nn(i.arc_length,n.arc_length));l++)i.id!==-1&&(s=t.int_points2[i.id],s.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&s.edge_before===r.edge_before&&s.edge_after===r.edge_after&&(i.id=-1,s.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let o=1;o<t.int_points2_sorted.length;o++){let l=t.int_points2_sorted[o];if(l.id===-1)continue;if(r.id===-1||!Nn(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let a=t.int_points1[l.id];a.edge_before===n.edge_before&&a.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(a.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(o=>o.id>=0),t.int_points2=t.int_points2.filter(o=>o.id>=0),t.int_points1.forEach((o,l)=>o.id=l),t.int_points2.forEach((o,l)=>o.id=l))}function Su(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=dt),e.edge_after&&(e.edge_after.bvStart=dt)}function Tu(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function Wy(t){let e,n,r,i=t.int_points1.length;for(let s=0;s<i;s++){let o=t.int_points1_sorted[s];o.face!==e&&(n=s,e=o.face);let l=s,a=Cr(t.int_points1_sorted,s,e),c;l+a<i&&t.int_points1_sorted[l+a].face===e?c=l+a:c=n;let f=Cr(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[o.id].face){r=p;break}}if(r===null)continue;let d=o.edge_after,h=r.edge_before;if(!(d.bv===dt&&h.bv===dt)||d!==h)continue;let v=t.int_points2[o.id],_=t.int_points2[r.id],y=v.edge_after,S=_.edge_before;y.bv===dt&&S.bv===dt&&y===S||(v=t.int_points2[r.id],_=t.int_points2[o.id],y=v.edge_after,S=_.edge_before),y.bv===dt&&S.bv===dt&&y===S&&d.setOverlap(y)}}function Cr(t,e,n){let r,i,s=1;if(t.length===1)return 1;r=t[e];for(let o=e+1;o<t.length&&!(r.face!==n||(i=t[o],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));o++)s++;return s}function Pr(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=za,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=vi),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=gr),n.is_vertex&vi){n.edge_before=r.prev,r.prev&&(n.is_vertex=gr);continue}if(n.is_vertex&gr)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof jn&&n.is_vertex&vi&&(n.edge_after=t.first)}}function Df(t,e,n){const r=t.edge_before,i=e.edge_after,s=n.length;r.next=n[0],n[0].prev=r,n[s-1].next=i,i.prev=n[s-1]}const{INSIDE:gt,OUTSIDE:mt,BOUNDARY:de,OVERLAP_SAME:Vy,OVERLAP_OPPOSITE:jy}=go,{NOT_VERTEX:Aw,START_VERTEX:zf,END_VERTEX:Ff}=go,Vo=1,Ki=2,Rn=3;function $y(t,e){let[n,r]=qi(t,e,Vo,!0);return n}function xu(t,e){let r=e.clone().reverse(),[i,s]=qi(t,r,Rn,!0);return i}function Qp(t,e){let[n,r]=qi(t,e,Ki,!0);return n}function Yp(t,e){let[n,r]=qi(t,e,Ki,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(l=>l.shape)];let s=[];for(let o of r.faces)s=[...s,...[...o.edges].map(l=>l.shape)];return[i,s]}function Iu(t,e){let[n,r]=qi(t,e,Rn,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(o=>o.shape)];return i}function Kp(t,e){let n=t.clone(),r=e.clone(),i=qp(n,r);Fi(i),Pr(n,i.int_points1_sorted),Pr(r,i.int_points2_sorted),$a(i),Fi(i);let s=i.int_points1_sorted.map(l=>l.pt),o=i.int_points2_sorted.map(l=>l.pt);return[s,o]}function Gy(t,e,n,r){let i=Uf(t,n.int_points1),s=Uf(e,n.int_points2);for(Bf(i,e),Bf(s,t),Su(n.int_points1),Su(n.int_points2),Tu(n.int_points1,e),Tu(n.int_points2,t);by(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););Wy(n),Cu(t,r,n.int_points1_sorted,!0),Cu(e,r,n.int_points2_sorted,!1),Wf(t,i,r,!0),Wf(e,s,r,!1)}function Hy(t,e,n,r){Qy(t,e,r,n.int_points2),Yy(t,e,n),Pu(t,n.int_points1),Pu(e,n.int_points2),Lu(t,n.int_points1,n.int_points2),Lu(t,n.int_points2,n.int_points1)}function qi(t,e,n,r){let i=t.clone(),s=e.clone(),o=qp(i,s);return Fi(o),Pr(i,o.int_points1_sorted),Pr(s,o.int_points2_sorted),$a(o),Fi(o),Gy(i,s,o,n),r&&Hy(i,s,o,n),[i,s]}function qp(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let s of i){let o=r.shape.intersect(s.shape);for(let l of o)Ir(r,l,n.int_points1),Ir(s,l,n.int_points2)}}return n}function Uf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Bf(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function by(t,e,n,r,i,s){let o,l,a,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==o&&(l=d,o=h.face);let v=d,_=Cr(r,d,o),y;v+_<c&&r[v+_].face===o?y=v+_:y=l;let S=Cr(r,y,o);a=null;for(let m=y;m<y+S;m++){let E=r[m];if(E.face===o&&i[E.id].face===i[h.id].face){a=E;break}}if(a===null)continue;let g=h.edge_after,p=a.edge_before;if(g.bv===de&&p.bv!=de){g.bv=p.bv;continue}if(g.bv!=de&&p.bv===de){p.bv=g.bv;continue}if(g.bv===de&&p.bv===de&&g!=p||g.bv===gt&&p.bv===mt||g.bv===mt&&p.bv===gt){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===de&&p.bv===de&&g!=p){let m=g.next,E;for(;m!=p;){if(m.bv!=de){if(E===void 0)E=m.bv;else if(m.bv!=E)throw K.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}E!=null&&(g.bv=E,p.bv=E);continue}if(g.bv===gt&&p.bv===mt||g.bv===mt&&p.bv===gt){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[E,T]=m.shape.distanceTo(e);if(E<10*u.DP_TOL){Ir(m,T.ps,n);let I=n[n.length-1];if(I.is_vertex&zf)I.edge_after=m,I.edge_before=m.prev,m.bvStart=de,m.bv=void 0,m.setInclusion(e);else if(I.is_vertex&Ff)I.edge_after=m.next,m.bvEnd=de,m.bv=void 0,m.setInclusion(e);else{let $=e.addVertex(I.pt,m);I.edge_before=$,I.edge_after=$.next,$.setInclusion(e),$.next.bvStart=de,$.next.bvEnd=void 0,$.next.bv=void 0,$.next.setInclusion(e)}let P=e.findEdgeByPoint(T.pe);Ir(P,T.pe,i);let A=i[i.length-1];if(A.is_vertex&zf)A.edge_after=P,A.edge_before=P.prev;else if(A.is_vertex&Ff)A.edge_after=P.next;else{let $=i.find(Ue=>Ue.edge_after===P),k=e.addVertex(A.pt,P);A.edge_before=k,A.edge_after=k.next,$&&($.edge_after=k),k.bvStart=void 0,k.bvEnd=de,k.bv=void 0,k.setInclusion(t),k.next.bvStart=de,k.next.bvEnd=void 0,k.next.bv=void 0,k.next.setInclusion(t)}Fi(s),f=!0;break}}m=m.next}if(f)break;throw K.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function Cu(t,e,n,r){if(!n)return;let i,s,o,l;for(let a=0;a<n.length;a++){if(o=n[a],o.face!==i&&(s=a,i=o.face),i.isEmpty())continue;let c=a,f=Cr(n,a,i),d;c+f<n.length&&n[c+f].face===o.face?d=c+f:d=s,l=n[d];let h=d,v=Cr(n,h,i),_=o.edge_after,y=l.edge_before;if(_.bv===gt&&y.bv===gt&&e===Vo||_.bv===mt&&y.bv===mt&&e===Ki||(_.bv===mt||y.bv===mt)&&e===Rn&&!r||(_.bv===gt||y.bv===gt)&&e===Rn&&r||_.bv===de&&y.bv===de&&_.overlap&Vy&&r||_.bv===de&&y.bv===de&&_.overlap&jy){t.removeChain(i,_,y);for(let S=c;S<c+f;S++)n[S].edge_after=void 0;for(let S=h;S<h+v;S++)n[S].edge_before=void 0}a+=f-1}}function Qy(t,e,n,r){for(let i of e.faces){for(let s of i)t.edges.add(s);r.find(s=>s.face===i)===void 0&&t.addFace(i.first,i.last)}}function Yy(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],s=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&s.edge_before===void 0&&s.edge_after!==void 0&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before),s.edge_before!==void 0&&s.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(s.edge_before.next=i.edge_after,i.edge_after.prev=s.edge_before,s.edge_after=i.edge_after,i.edge_before=s.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let o of n.int_points1_sorted)o!==i&&o.edge_before===void 0&&o.edge_after!==void 0&&o.pt.equalTo(i.pt)&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before);if(s.edge_before!==void 0&&s.edge_after===void 0)for(let o of n.int_points2_sorted)o!==s&&o.edge_before===void 0&&o.edge_after!==void 0&&o.pt.equalTo(s.pt)&&(s.edge_before.next=o.edge_after,o.edge_after.prev=s.edge_before,s.edge_after=o.edge_after,o.edge_before=s.edge_before)}}function Pu(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Lu(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,s=r.edge_before;try{Fa.testInfiniteLoop(i)}catch{throw K.CANNOT_COMPLETE_BOOLEAN_OPERATION}let o=t.addFace(i,s);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===o&&l.edge_after.face===o&&(l.face=o);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===o&&l.edge_after.face===o&&(l.face=o)}}function Wf(t,e,n,r){for(let i of e){let s=i.first.bv;(n===Vo&&s===gt||n===Rn&&s===gt&&r||n===Rn&&s===mt&&!r||n===Ki&&s===mt)&&t.deleteFace(i)}}var Ky=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:Ki,BOOLEAN_SUBTRACT:Rn,BOOLEAN_UNION:Vo,calculateIntersections:Kp,innerClip:Yp,intersect:Qp,outerClip:Iu,removeNotRelevantChains:Cu,removeOldFaces:Pu,restoreFaces:Lu,subtract:xu,unify:$y});const qy=RegExp("T.F..FFF.|T.F...F.."),Xy=RegExp("T........|.T.......|...T.....|....T...."),Jy=RegExp("FT.......|F..T.....|F...T...."),Zy=RegExp("T.F..F..."),e1=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Wr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return qy.test(this.toString())}intersect(){return Xy.test(this.toString())}touch(){return Jy.test(this.toString())}inside(){return Zy.test(this.toString())}covered(){return e1.test(this.toString())}}function yi(t,e){let n,r=new u.Ray(e),i=new u.Line(r.pt,r.norm);const s=new u.Box(r.box.xmin-u.DP_TOL,r.box.ymin-u.DP_TOL,r.box.xmax,r.box.ymax+u.DP_TOL);if(t.box.not_intersect(s))return u.OUTSIDE;let o=t.edges.search(s);if(o.length===0)return u.OUTSIDE;for(let f of o)if(f.shape.contains(e))return u.BOUNDARY;let l=[...t.faces],a=[];for(let f of o)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return u.BOUNDARY;a.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}a.sort((f,d)=>Rp(f.pt.x,d.pt.x)?-1:Np(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<a.length;f++){let d=a[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.prev===a[f-1].edge)continue;let h=d.edge.prev;for(;wu(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),_=d.pt.translate(v),y=d.edge.shape.tangentInStart(),S=d.pt.translate(y),g=_.leftTo(i),p=S.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.next===a[f-1].edge)continue;let h=d.edge.next;for(;wu(h.length);)h=h.next;let v=h.shape.tangentInStart(),_=d.pt.translate(v),y=d.edge.shape.tangentInEnd(),S=d.pt.translate(y),g=_.leftTo(i),p=S.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof u.Segment)c++;else{let h=d.edge.shape.box;Nn(d.pt.y,h.ymin)||Nn(d.pt.y,h.ymax)||c++}}return n=c%2===1?po:Ap,n}function t1(t,e){return Vr(t,e).equal()}function Xp(t,e){return Vr(t,e).intersect()}function n1(t,e){return Vr(t,e).touch()}function r1(t,e){return!Xp(t,e)}function Jp(t,e){return Vr(t,e).inside()}function Zp(t,e){return Vr(t,e).covered()}function i1(t,e){return Jp(e,t)}function eg(t,e){return Zp(e,t)}function Vr(t,e){if(t instanceof u.Line&&e instanceof u.Line)return s1(t,e);if(t instanceof u.Line&&e instanceof u.Circle)return o1(t,e);if(t instanceof u.Line&&e instanceof u.Box)return l1(t,e);if(t instanceof u.Line&&e instanceof u.Polygon)return u1(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&e instanceof u.Polygon)return Vf(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&(e instanceof u.Circle||e instanceof u.Box))return Vf(t,new u.Polygon(e));if(t instanceof u.Polygon&&e instanceof u.Polygon)return ws(t,e);if((t instanceof u.Circle||t instanceof u.Box)&&(e instanceof u.Circle||e instanceof u.Box))return ws(new u.Polygon(t),new u.Polygon(e));if((t instanceof u.Circle||t instanceof u.Box)&&e instanceof u.Polygon)return ws(new u.Polygon(t),e);if(t instanceof u.Polygon&&(e instanceof u.Circle||e instanceof u.Box))return ws(t,new u.Polygon(e))}function s1(t,e){let n=new Wr,r=Ur(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function o1(t,e){let n=new Wr,r=Vn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new jn([t]),s=t.sortPoints(r);i.split(s);let o=i.toShapes();n.I2I=[o[1]],n.I2B=s,n.I2E=[o[0],o[2]],n.E2I=new u.Polygon([e.toArc()]).cutWithLine(t)}return n}function l1(t,e){let n=new Wr,r=xr(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new jn([t]),s=t.sortPoints(r);i.split(s);let o=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[o[1]],n.I2E=[o[0],o[2]],n.E2I=[e]):(n.I2I=[o[1]],n.I2B=s,n.I2E=[o[0],o[2]],n.E2I=new u.Polygon(e.toSegments()).cutWithLine(t))}return n}function u1(t,e){let n=new Wr,r=Qi(t,e),i=new jn([t]),s=r.length>0?r.slice():t.sortPoints(r);return i.split(s),[...i].forEach(o=>o.setInclusion(e)),n.I2I=[...i].filter(o=>o.bv===u.INSIDE).map(o=>o.shape),n.I2B=[...i].slice(1).map(o=>o.bv===u.BOUNDARY?o.shape:o.shape.start),n.I2E=[...i].filter(o=>o.bv===u.OUTSIDE).map(o=>o.shape),n.E2I=e.cutWithLine(t),n}function Vf(t,e){let n=new Wr,r=My(t,e),i=r.length>0?r.slice():t.sortPoints(r),s=new jn([t]);s.split(i),[...s].forEach(o=>o.setInclusion(e)),n.I2I=[...s].filter(o=>o.bv===u.INSIDE).map(o=>o.shape),n.I2B=[...s].slice(1).map(o=>o.bv===u.BOUNDARY?o.shape:o.shape.start),n.I2E=[...s].filter(o=>o.bv===u.OUTSIDE).map(o=>o.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let o of[t.start,t.end])switch(yi(e,o)){case u.INSIDE:n.B2I.push(o);break;case u.BOUNDARY:n.B2B.push(o);break;case u.OUTSIDE:n.B2E.push(o);break}return n}function ws(t,e){let n=new Wr,[r,i]=Kp(t,e),s=Qp(t,e),o=xu(t,e),l=xu(e,t),[a,c]=Yp(t,e),f=Iu(t,e),d=Iu(e,t);return n.I2I=s.isEmpty()?[]:[s],n.I2B=c,n.I2E=o.isEmpty()?[]:[o],n.B2I=a,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var Ga=Object.freeze({__proto__:null,contain:i1,cover:eg,covered:Zp,disjoint:r1,equal:t1,inside:Jp,intersect:Xp,relate:Vr,touch:n1});class rt{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}clone(){return new rt(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new rt(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw K.ILLEGAL_PARAMETERS;return this.multiply(new rt(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),s=Math.sin(e);return this.translate(n,r).multiply(new rt(i,s,-s,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new rt(e,0,0,n,0,0))}equalTo(e){return!(!u.Utils.EQ(this.tx,e.tx)||!u.Utils.EQ(this.ty,e.ty)||!u.Utils.EQ(this.a,e.a)||!u.Utils.EQ(this.b,e.b)||!u.Utils.EQ(this.c,e.c)||!u.Utils.EQ(this.d,e.d))}}u.Matrix=rt;const a1=(...t)=>new u.Matrix(...t);u.matrix=a1;const c1=class Au{constructor(e,n){this.low=e,this.high=n}clone(){return new Au(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new Au(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},ge=0,G=1;class mn{constructor(e=void 0,n=void 0,r=null,i=null,s=null,o=G){if(this.left=r,this.right=i,this.parent=s,this.color=o,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,a]=e;l>a&&([l,a]=[a,l]),this.item.key=new c1(l,a)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===G}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class Ui{constructor(){this.root=null,this.nil_node=new mn}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new mn(e,n,this.nil_node,this.nil_node,null,ge);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new mn(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new mn(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new mn(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(s=>n(s.item.value,s.item.key))}intersect_any(e){let n=new mn(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new Ui;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new mn(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===ge;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===ge?(n.parent.color=G,r.color=G,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=G,n.parent.parent.color=ge,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===ge?(n.parent.color=G,r.color=G,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=G,n.parent.parent.color=ge,this.rotate_left(n.parent.parent)));this.root.color=G}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===G&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===G;)n===n.parent.left?(r=n.parent.right,r.color===ge&&(r.color=G,n.parent.color=ge,this.rotate_left(n.parent),r=n.parent.right),r.left.color===G&&r.right.color===G?(r.color=ge,n=n.parent):(r.right.color===G&&(r.color=ge,r.left.color=G,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=G,r.right.color=G,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===ge&&(r.color=G,n.parent.color=ge,this.rotate_right(n.parent),r=n.parent.left),r.left.color===G&&r.right.color===G?(r.color=ge,n=n.parent):(r.left.color===G&&(r.color=ge,r.right.color=G,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=G,r.left.color=G,this.rotate_right(n.parent),n=this.root));n.color=G}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===ge&&(n.left.color===G&&n.right.color===G||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===G&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class f1 extends Set{constructor(e){super(e),this.index=new Ui,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,s=r||e.box,o=i||e;return super.add(o),this.size>n&&this.index.insert(s,o),this}delete(e){const{key:n,value:r}=e,i=n||e.box,s=r||e;let o=super.delete(s);return o&&this.index.remove(i,s),o}clear(){super.clear(),this.index=new Ui}search(e){return this.index.search(e)}hit(e){let n=new u.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}u.PlanarSet=f1;class dn{get name(){throw K.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw K.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw K.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new rt().translate(...e))}rotate(e,n=new u.Point){return this.transform(new rt().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new rt().scale(e,n))}transform(...e){throw K.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw K.CANNOT_INVOKE_ABSTRACT_METHOD}}let z=class tg extends dn{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw K.ILLEGAL_PARAMETERS}}get box(){return new u.Box(this.x,this.y,this.x,this.y)}clone(){return new u.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}lessThan(e){return!!(u.Utils.LT(this.y,e.y)||u.Utils.EQ(this.y,e.y)&&u.Utils.LT(this.x,e.x))}transform(e){return new u.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new u.Vector(this,e.pt);if(u.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new u.Vector(e.pt,this);return u.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof tg){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new u.Segment(this,e)]}if(e instanceof u.Line)return u.Distance.point2line(this,e);if(e instanceof u.Circle)return u.Distance.point2circle(this,e);if(e instanceof u.Segment)return u.Distance.point2segment(this,e);if(e instanceof u.Arc)return u.Distance.point2arc(this,e);if(e instanceof u.Polygon)return u.Distance.point2polygon(this,e);if(e instanceof u.PlanarSet)return u.Distance.shape2planarSet(this,e);if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}on(e){if(e instanceof u.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${Wn({fill:"red",...e})} />`}};u.Point=z;const d1=(...t)=>new u.Point(...t);u.point=d1;let Ha=class extends dn{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof u.Point&&r instanceof u.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw K.ILLEGAL_PARAMETERS}}clone(){return new u.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}multiply(e){return new u.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!u.Utils.EQ_0(this.length))return new u.Vector(this.x/this.length,this.y/this.length);throw K.ZERO_DIVISION}rotate(e,n=new u.Point){if(n.x===0&&n.y===0)return this.transform(new rt().rotate(e));throw K.OPERATION_IS_NOT_SUPPORTED}transform(e){return new u.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new u.Vector(-this.y,this.x)}rotate90CW(){return new u.Vector(this.y,-this.x)}invert(){return new u.Vector(-this.x,-this.y)}add(e){return new u.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new u.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};u.Vector=Ha;const ng=(...t)=>new u.Vector(...t);u.vector=ng;let Us=class Ou extends dn{constructor(...e){if(super(),this.ps=new u.Point,this.pe=new u.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new u.Point(n[0],n[1]),this.pe=new u.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new u.Point(n.x,n.y),this.pe=new u.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof u.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof u.Point&&e[1]instanceof u.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new u.Point(e[0],e[1]),this.pe=new u.Point(e[2],e[3]);return}throw K.ILLEGAL_PARAMETERS}}clone(){return new u.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new u.Vector(this.start,this.end).slope}get box(){return new u.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return u.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return bi(this,e);if(e instanceof u.Ray)return Va(e,this);if(e instanceof u.Segment)return Bo(this,e);if(e instanceof u.Circle)return Wo(this,e);if(e instanceof u.Box)return Py(this,e);if(e instanceof u.Arc)return Br(this,e);if(e instanceof u.Polygon)return Ba(this,e);if(e instanceof u.Multiline)return Yi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.segment2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.segment2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2segment(this,e);return[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.segment2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}tangentInStart(){return new u.Vector(this.start,this.end).normalize()}tangentInEnd(){return new u.Vector(this.end,this.start).normalize()}reverse(){return new Ou(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new u.Segment(this.start,e),new u.Segment(e,this.end)]}middle(){return new u.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new u.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=u.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new u.Matrix){return new Ou(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new u.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${Wn(e)} />`}};u.Segment=Us;const h1=(...t)=>new u.Segment(...t);u.segment=h1;let{vector:ti}=u,jo=class rg extends dn{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new u.Point(n),this.norm=new u.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof u.Point&&r instanceof u.Point){this.pt=n,this.norm=rg.points2norm(n,r),this.norm.dot(ti(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Point&&r instanceof u.Vector){if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y))throw K.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(ti(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Vector&&r instanceof u.Point){if(u.Utils.EQ_0(n.x)&&u.Utils.EQ_0(n.y))throw K.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(ti(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw K.ILLEGAL_PARAMETERS}}clone(){return new u.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new u.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(ti(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return u.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))}coord(e){return ti(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Ur(this,e);if(e instanceof u.Ray)return Gp(e,this);if(e instanceof u.Circle)return Vn(this,e);if(e instanceof u.Box)return xr(this,e);if(e instanceof u.Segment)return bi(e,this);if(e instanceof u.Arc)return Uo(this,e);if(e instanceof u.Polygon)return Qi(this,e);if(e instanceof u.Multiline)return Yi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof u.Point)return[new u.Ray(e,this.norm),new u.Ray(e,this.norm)];{let n=new u.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new u.Point){return new u.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=xr(this,e);if(r.length===0)return"";let i=r[0],s=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return s===void 0&&(s=i),new u.Segment(i,s).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw K.ILLEGAL_PARAMETERS;return new u.Vector(e,n).normalize().rotate90CCW()}};u.Line=jo;const p1=(...t)=>new u.Line(...t);u.line=p1;let Bs=class extends dn{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new u.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new u.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new u.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof u.Point)return u.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof u.Segment)return u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Arc)return this.intersect(e).length===0&&u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Circle)return this.intersect(e).length===0&&u.Utils.LE(e.r,this.r)&&u.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new u.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw K.OPERATION_IS_NOT_SUPPORTED;return new u.Circle(this.pc,this.r*e)}transform(e=new u.Matrix){return new u.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Vn(e,this);if(e instanceof u.Ray)return $p(e,this);if(e instanceof u.Segment)return Wo(e,this);if(e instanceof u.Circle)return Mp(e,this);if(e instanceof u.Box)return Ly(this,e);if(e instanceof u.Arc)return Ua(e,this);if(e instanceof u.Polygon)return Bp(this,e);if(e instanceof u.Multiline)return Yi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.circle2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline){let[n,r]=u.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${Wn({fill:"none",...e})} />`}};u.Circle=Bs;const g1=(...t)=>new u.Circle(...t);u.circle=g1;class ku extends dn{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=u.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:s,counterClockwise:o}=e[0];this.pc=new u.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=s,this.counterClockwise=o}else{let[n,r,i,s,o]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),s!==void 0&&(this.endAngle=s),o!==void 0&&(this.counterClockwise=o)}}clone(){return new u.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(u.Utils.EQ(this.startAngle,this.endAngle))return 0;if(u.Utils.EQ(Math.abs(this.startAngle-this.endAngle),u.PIx2))return u.PIx2;let e;return this.counterClockwise?e=u.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+u.PIx2:e=u.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+u.PIx2,u.Utils.GT(e,u.PIx2)&&(e-=u.PIx2),u.Utils.LT(e,0)&&(e+=u.PIx2),e}get start(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new u.Box);return n=n.merge(this.end.box),n}contains(e){if(!u.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new u.Vector(this.pc,e).slope,r=new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return u.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new u.Vector(this.pc,e).slope;return[new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new u.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new u.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new u.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Uo(e,this);if(e instanceof u.Ray)return ja(e,this);if(e instanceof u.Circle)return Ua(this,e);if(e instanceof u.Segment)return Br(e,this);if(e instanceof u.Box)return Ay(this,e);if(e instanceof u.Arc)return Dp(this,e);if(e instanceof u.Polygon)return Wa(this,e);if(e instanceof u.Multiline)return Yi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.arc2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.arc2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let s=0;s<4;s++)r[s].on(this)&&i.push(new u.Arc(this.pc,this.r,this.startAngle,n[s],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,a)=>l.length-a.length);for(let l=0;l<i.length;l++){let a=e.length>0?e[e.length-1]:void 0,c;a?c=new u.Arc(this.pc,this.r,a.endAngle,i[l].endAngle,this.counterClockwise):c=new u.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),u.Utils.EQ_0(c.length)||e.push(c.clone())}let s=e.length>0?e[e.length-1]:void 0,o;s?o=new u.Arc(this.pc,this.r,s.endAngle,this.endAngle,this.counterClockwise):o=new u.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!u.Utils.EQ_0(o.length)&&!u.Utils.EQ(o.sweep,2*Math.PI)&&e.push(o.clone())}return e}tangentInStart(){let e=new u.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new u.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new u.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new u.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),s=this.counterClockwise;return e.a*e.d<0&&(s=!s),u.Arc.arcSE(i,n,r,s)}static arcSE(e,n,r,i){let{vector:s}=u,o=s(e,n).slope,l=s(e,r).slope;u.Utils.EQ(o,l)&&(l+=2*Math.PI,i=!0);let a=s(e,n).length;return new u.Arc(e,a,o,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,s)=>i+s.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new u.Line(this.start,this.end),r=this.pc.leftTo(n),s=new u.Segment(this.start,this.end).definiteIntegral(e),o=this.circularSegmentArea();return r?s-o:s+o}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=u;return e.slice().sort((r,i)=>{let s=n(this.pc,r).slope,o=n(this.pc,i).slope;return s<o?-1:s>o?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return u.Utils.EQ(this.sweep,2*Math.PI)?new u.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${Wn({fill:"none",...e})} />`}}u.Arc=ku;const m1=(...t)=>new u.Arc(...t);u.arc=m1;class ze extends dn{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new ze(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new u.Point(this.xmin,this.ymin)}get high(){return new u.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new u.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new ze(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new u.Point(this.xmin,this.ymin),new u.Point(this.xmax,this.ymin),new u.Point(this.xmax,this.ymax),new u.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new u.Segment(e[0],e[1]),new u.Segment(e[1],e[2]),new u.Segment(e[2],e[3]),new u.Segment(e[3],e[0])]}rotate(e,n=new u.Point){throw K.OPERATION_IS_NOT_SUPPORTED}transform(e=new u.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new ze)}contains(e){if(e instanceof u.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof u.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof u.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof u.Circle)return this.contains(e.box);if(e instanceof u.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>Br(n,e).length===0);if(e instanceof u.Line||e instanceof u.Ray)return!1;if(e instanceof u.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof u.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${Wn({fill:"none",...e})} />`}}u.Box=ze;const v1=(...t)=>new u.Box(...t);u.box=v1;class y1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof u.Segment}get isArc(){return this.shape instanceof u.Arc}get isLine(){return this.shape instanceof u.Line}get isRay(){return this.shape instanceof u.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof u.Line||this.shape instanceof u.Ray)return this.bv=u.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=yi(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=yi(e,this.end)),this.bvStart===u.OUTSIDE||this.bvEnd==u.OUTSIDE)this.bv=u.OUTSIDE;else if(this.bvStart===u.INSIDE||this.bvEnd==u.INSIDE)this.bv=u.INSIDE;else{let n=yi(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof u.Segment&&i instanceof u.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=u.OVERLAP_OPPOSITE):(r instanceof u.Arc&&i instanceof u.Arc||r instanceof u.Segment&&i instanceof u.Arc||r instanceof u.Arc&&i instanceof u.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=u.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof u.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof u.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(u.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,s=new u.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),o=new u.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}
                    A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}u.Edge=y1;class _1 extends Fa{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class or extends _1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof u.Point)){let i=or.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(o=>new u.Point(o[0],o[1])),s=or.points2segments(i);this.shapes2face(e.edges,s)}else if(r.every(i=>i instanceof u.Segment||i instanceof u.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let s of r){let o;s.name==="segment"?o=new u.Segment(s):o=new u.Arc(s),i.push(o)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof or){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof u.Circle)this.shapes2face(e.edges,[n[0].toArc(Lp)]);else if(n[0]instanceof u.Box){let r=n[0];this.shapes2face(e.edges,[new u.Segment(new u.Point(r.xmin,r.ymin),new u.Point(r.xmax,r.ymin)),new u.Segment(new u.Point(r.xmax,r.ymin),new u.Point(r.xmax,r.ymax)),new u.Segment(new u.Point(r.xmax,r.ymax),new u.Point(r.xmin,r.ymax)),new u.Segment(new u.Point(r.xmin,r.ymax),new u.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof u.Edge&&n[1]instanceof u.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new u.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new u.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new u.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();u.Utils.EQ_0(e)?this._orientation=Fs.NOT_ORIENTABLE:u.Utils.LT(e,0)?this._orientation=Fs.CCW:this._orientation=Fs.CW}return this._orientation}isSimple(e){return or.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let s of e){let o=n.search(s.box);for(let l of o){if(s===l||l.face!==e||s.shape instanceof u.Segment&&l.shape instanceof u.Segment&&(s.next===l||s.prev===l))continue;let a=s.shape.intersect(l.shape);for(let c of a)if(!(c.equalTo(s.start)&&c.equalTo(l.end)&&l===s.prev)&&!(c.equalTo(s.end)&&c.equalTo(l.start)&&l===s.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new u.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}u.Face=or;class ba extends dn{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof u.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof u.Vector){this.norm=e[1].clone();return}throw K.ILLEGAL_PARAMETERS}}clone(){return new ba(this.pt,this.norm)}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new u.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))&&u.Utils.GE(n.cross(this.norm),0)}coord(e){return ng(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new u.Segment(this.pt,e),new u.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Segment)return Va(this,e);if(e instanceof u.Arc)return ja(this,e);if(e instanceof u.Line)return Gp(this,e);if(e instanceof u.Ray)return zy(this,e);if(e instanceof u.Circle)return $p(this,e);if(e instanceof u.Box)return Dy(this,e);if(e instanceof u.Polygon)return Hp(this,e)}rotate(e,n=new u.Point){return new u.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new u.Line(this.pt,this.norm),i=xr(r,e);return i=i.filter(o=>this.contains(o)),i.length===0||i.length===2?"":new u.Segment(this.pt,i[0]).svg(n)}}u.Ray=ba;const E1=(...t)=>new u.Ray(...t);u.ray=E1;let w1=class bn{constructor(){this.faces=new u.PlanarSet,this.edges=new u.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof u.Circle||e[0]instanceof u.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new u.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new u.Face(this,i));else this.faces.add(new u.Face(this,r));else this.faces.add(new u.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new bn;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new u.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),s=n.prev;return n.face.insert(i,s),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let o of e.edges)for(let l of n.edges){let a=Wp(o,l);for(let c of a)Ir(o,c,r.int_points1),Ir(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=jt(r.int_points1),r.int_points2_sorted=jt(r.int_points2),Pr(e,r.int_points1_sorted),Pr(n,r.int_points2_sorted),$a(r),r.int_points1_sorted=jt(r.int_points1),r.int_points2_sorted=jt(r.int_points2),Su(r.int_points1),Tu(r.int_points1,n);for(let o of r.int_points1_sorted)o.edge_before&&o.edge_after&&o.edge_before.bv===o.edge_after.bv&&(r.int_points2[o.id]=-1,o.id=-1);if(r.int_points1=r.int_points1.filter(o=>o.id>=0),r.int_points2=r.int_points2.filter(o=>o.id>=0),r.int_points1.forEach((o,l)=>{o.id=l}),r.int_points2.forEach((o,l)=>{o.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=jt(r.int_points1),r.int_points2_sorted=jt(r.int_points2);let i,s;for(let o=1;o<r.int_points1_sorted.length;o++)if(s=r.int_points1_sorted[o],i=r.int_points1_sorted[o-1],s.edge_before&&s.edge_before.bv===po){let l=i.edge_after,a=s.edge_before,c=e.getChain(l,a);Df(r.int_points2[i.id],r.int_points2[s.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new u.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Df(r.int_points2[s.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new jn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,s)=>s.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let s=[...i.faces][0];if(s.orientation()!==n){for(let o of r)if(s.shapes.every(l=>o.contains(l))){o.addFace(s.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof u.Point){let n=yi(this,e);return n===po||n===dt}else return eg(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle||e instanceof u.Line||e instanceof u.Segment||e instanceof u.Arc){let[n,r]=u.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let n=[Number.POSITIVE_INFINITY,new u.Segment],r,i;for(let s of this.edges){let o=n[0];[r,i]=u.Distance.shape2planarSet(s.shape,e.edges,o),u.Utils.LT(r,o)&&(n=[r,i])}return n}}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Qi(e,this);if(e instanceof u.Ray)return Hp(e,this);if(e instanceof u.Circle)return Bp(e,this);if(e instanceof u.Segment)return Ba(e,this);if(e instanceof u.Arc)return Wa(e,this);if(e instanceof u.Polygon)return Ry(e,this);if(e instanceof u.Multiline)return Ny(e,this)}translate(e){let n=new bn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new u.Point){let r=new bn;for(let i of this.faces)r.addFace(i.shapes.map(s=>s.rotate(e,n)));return r}scale(e,n){let r=new bn;for(let i of this.faces)r.addFace(i.shapes.map(s=>s.scale(e,n)));return r}transform(e=new u.Matrix){let n=new bn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${Wn({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};u.Polygon=w1;const S1=(...t)=>new u.Polygon(...t);u.polygon=S1;const{Circle:Tl,Line:jf,Point:$f,Vector:Ss,Utils:xl}=u;class _i{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new Ss(e.pc,n),i=e.r*e.r,s=r.dot(r);return xl.EQ_0(s)?new $f(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/s))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(xl.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),s=new Ss(e.pc,n.pc);s=s.normalize();let o=e.pc.translate(s.multiply(i));return new jf(o,s)}else{let i=new Ss(e.pc,n.pc),s=e.r*e.r/(i.dot(i)-n.r*n.r),o=e.pc.translate(i.multiply(s)),l=Math.abs(s)*n.r;return new Tl(o,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(xl.EQ_0(r))return n.clone();{let s=e.r*e.r/(2*r),o=new Ss(e.pc,i.end);return o=o.multiply(s/r),new Tl(e.pc.translate(o),s)}}inverse(e){if(e instanceof $f)return _i.inversePoint(this.circle,e);if(e instanceof Tl)return _i.inverseCircle(this.circle,e);if(e instanceof jf)return _i.inverseLine(this.circle,e)}}u.Inversion=_i;const T1=t=>new u.Inversion(t);u.inversion=T1;class x{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new u.Vector(e,r).length,new u.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(u.Utils.EQ_0(r))return[n.r,new u.Segment(e,n.toArc().start)];{let s=Math.abs(r-n.r),o=new u.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(o);return[s,new u.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return x.point2point(e,n.start);let r=new u.Vector(n.start,n.end),i=new u.Vector(n.start,e),s=new u.Vector(n.end,e),o=r.dot(i),l=-r.dot(s),a,c;if(u.Utils.GE(o,0)&&u.Utils.GE(l,0)){let f=n.tangentInStart();return a=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[a,new u.Segment(e,c)]}else return o<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new u.Circle(n.pc,n.r),i=[],s,o;return[s,o]=x.point2circle(e,r),o.end.on(n)&&i.push(x.point2circle(e,r)),i.push(x.point2point(e,n.start)),i.push(x.point2point(e,n.end)),x.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof u.Segment?x.point2segment(e,n.shape):x.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[];return i.push(x.point2line(e.start,n)),i.push(x.point2line(e.end,n)),x.sort(i),i[0]}static segment2segment(e,n){let r=Bo(e,n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[],s,o;return[s,o]=x.point2segment(n.start,e),i.push([s,o.reverse()]),[s,o]=x.point2segment(n.end,e),i.push([s,o.reverse()]),i.push(x.point2segment(e.start,n)),i.push(x.point2segment(e.end,n)),x.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),[s,o]=x.point2line(n.center,i);if(u.Utils.GE(s,n.r)&&o.end.on(e))return x.point2circle(o.end,n);{let[l,a]=x.point2circle(e.start,n),[c,f]=x.point2circle(e.end,n);return u.Utils.LT(l,c)?[l,a]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),s=new u.Circle(n.pc,n.r),[o,l]=x.point2line(s.center,i);if(u.Utils.GE(o,s.r)&&l.end.on(e)){let[d,h]=x.point2circle(l.end,s);if(h.end.on(n))return[d,h]}let a=[];a.push(x.point2arc(e.start,n)),a.push(x.point2arc(e.end,n));let c,f;return[c,f]=x.point2segment(n.start,e),a.push([c,f.reverse()]),[c,f]=x.point2segment(n.end,e),a.push([c,f.reverse()]),x.sort(a),a[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),s=n.toArc();return x.point2point(i.start,s.start)}else{let i=new u.Line(e.center,n.center),s=i.intersect(e),o=i.intersect(n),l=[];return l.push(x.point2point(s[0],o[0])),l.push(x.point2point(s[0],o[1])),l.push(x.point2point(s[1],o[0])),l.push(x.point2point(s[1],o[1])),x.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let[i,s]=x.point2line(e.center,n),[o,l]=x.point2circle(s.end,e);return l=l.reverse(),[o,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[s,o]=x.point2line(i.center,n);if(u.Utils.GE(s,i.r)){let[l,a]=x.point2circle(o.end,i);if(a.end.on(e))return[l,a]}else{let l=[];return l.push(x.point2line(e.start,n)),l.push(x.point2line(e.end,n)),x.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[s,o]=x.circle2circle(i,n);if(o.start.on(e))return[s,o];{let l=[];return l.push(x.point2circle(e.start,n)),l.push(x.point2circle(e.end,n)),x.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),s=new u.Circle(n.center,n.r),[o,l]=x.circle2circle(i,s);if(l.start.on(e)&&l.end.on(n))return[o,l];{let a=[],c,f;return[c,f]=x.point2arc(e.start,n),f.end.on(n)&&a.push([c,f]),[c,f]=x.point2arc(e.end,n),f.end.on(n)&&a.push([c,f]),[c,f]=x.point2arc(n.start,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=x.point2arc(n.end,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=x.point2point(e.start,n.start),a.push([c,f]),[c,f]=x.point2point(e.start,n.end),a.push([c,f]),[c,f]=x.point2point(e.end,n.start),a.push([c,f]),[c,f]=x.point2point(e.end,n.end),a.push([c,f]),x.sort(a),a[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[s,o]=x.point2edge(e,i);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[s,o]=e.distanceTo(i.shape);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e.edges)for(let s of n.edges){let[o,l]=i.shape.distanceTo(s.shape);u.Utils.LT(o,r[0])&&(r=[o,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),s=r*r+i*i,o=e.merge(n),l=o.xmax-o.xmin,a=o.ymax-o.ymin,c=l*l+a*a;return[s,c]}static minmax_tree_process_level(e,n,r,i){let s,o;for(let f of n)[s,o]=x.box2box_minmax(e.box,f.item.key),f.item.value instanceof u.Edge?i.insert([s,o],f.item.value.shape):i.insert([s,o],f.item.value),u.Utils.LT(o,r)&&(r=o);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),a=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...a].filter(f=>{let[d,h]=x.box2box_minmax(e.box,f.max);return u.Utils.LE(d,r)});return r=x.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new Ui,s=[n.index.root],o=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return o=x.minmax_tree_process_level(e,s,o,i),i}static minmax_tree_calc_distance(e,n,r){let i,s;if(n!=null&&!n.isNil()){if([i,s]=x.minmax_tree_calc_distance(e,n.left,r),s)return[i,s];if(u.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[o,l]=x.distance(e,n.item.value);return u.Utils.LT(o,i[0])&&(i=[o,l]),[i,s]=x.minmax_tree_calc_distance(e,n.right,i),[i,s]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new u.Segment],s=!1;if(n instanceof u.PlanarSet){let o=x.minmax_tree(e,n,r);[i,s]=x.minmax_tree_calc_distance(e,o.root,i)}return i}static sort(e){e.sort((n,r)=>u.Utils.LT(n[0],r[0])?-1:u.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n){let[s,o]=x.distance(e,i.shape);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e)for(let s of n){let[o,l]=x.distance(i.shape,s.shape);u.Utils.LT(o,r[0])&&(r=[o,l])}return r}}u.Distance=x;const{Multiline:x1,Point:ig,Segment:I1,Polygon:sg}=u;function Qa(t){return new ig(t.split(" ").map(Number))}function og(t){return t.split(", ").map(Qa)}function Ya(t){const e=og(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new I1(e[r],e[r+1]));return new x1(n)}function C1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(Ya)}function lg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new sg;let r;return e.forEach((i,s)=>{let o=i.split(", ").map(a=>new ig(a.split(" ").map(Number)));const l=n.addFace(o);s===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function P1(t){const n=t.split(/\)\), \(\(/).map(s=>"(("+s+"))").map(lg),r=new sg;return n.reduce((s,o)=>[...s,...o==null?void 0:o.faces],[]).forEach(s=>r.addFace([...s==null?void 0:s.shapes])),r}function L1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return lg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return P1(e)}}function A1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Qa)}function O1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Ya).reduce((n,r)=>[...n,...r],[])}function ug(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return Qa(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return og(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return Ya(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return C1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return L1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(ug).map(i=>i instanceof Array?i:[i]).reduce((i,s)=>[...i,...s],[])}else{if(ag(t))return A1(t);if(cg(t))return O1(t)}}return[]}function ag(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function cg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function k1(t){return t.startsWith("POINT")||ag(t)||t.startsWith("LINESTRING")||cg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}u.isWktString=k1;u.parseWKT=ug;u.BooleanOperations=Ky;u.Relations=Ga;function Et(t){const e=Zi(),n=Dt();return new z((t.x-e.x)*n,(t.y-e.y)*n)}function $o(t){const e=Zi(),n=Dt();return new z(t.x/n+e.x,t.y/n+e.y)}var M=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(M||{}),mo=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(mo||{}),vo=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(vo||{}),ue=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(ue||{});function N1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function Fe(t){const e=[];for(const n of t)n&&e.push(n);return e}function R1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Go(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const s=e[i],o=typeof s=="function",l=o?s(n):n[s],a=o?s(r):r[s],c=R1(l,a,"asc");if(c!==0)return c}return 0})}function Xi(t,e){const n=[];for(const r of t)n.every(s=>!e(s,r))&&n.push(r);return n}function Gf(){}function Hf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const M1="[object RegExp]",D1="[object String]",z1="[object Number]",F1="[object Boolean]",bf="[object Arguments]",U1="[object Symbol]",B1="[object Date]",W1="[object Map]",V1="[object Set]",j1="[object Array]",$1="[object Function]",G1="[object ArrayBuffer]",Il="[object Object]",H1="[object Error]",b1="[object DataView]",Q1="[object Uint8Array]",Y1="[object Uint8ClampedArray]",K1="[object Uint16Array]",q1="[object Uint32Array]",X1="[object BigUint64Array]",J1="[object Int8Array]",Z1="[object Int16Array]",e_="[object Int32Array]",t_="[object BigInt64Array]",n_="[object Float32Array]",r_="[object Float64Array]";function Qf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Yf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function i_(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return It(t,e)}return It(t,e)}function It(t,e,n){if(Object.is(t,e))return!0;let r=Yf(t),i=Yf(e);if(r===bf&&(r=Il),i===bf&&(i=Il),r!==i)return!1;switch(r){case D1:return t.toString()===e.toString();case z1:{const l=t.valueOf(),a=e.valueOf();return l===a||Number.isNaN(l)&&Number.isNaN(a)}case F1:case B1:case U1:return Object.is(t.valueOf(),e.valueOf());case M1:return t.source===e.source&&t.flags===e.flags;case $1:return t===e}n=n??new Map;const s=n.get(t),o=n.get(e);if(s!=null&&o!=null)return s===e;n.set(t,e),n.set(e,t);try{switch(r){case W1:{if(t.size!==e.size)return!1;for(const[l,a]of t.entries())if(!e.has(l)||!It(a,e.get(l),n))return!1;return!0}case V1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),a=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=a.findIndex(h=>It(f,h,n));if(d===-1)return!1;a.splice(d,1)}return!0}case j1:case Q1:case Y1:case K1:case q1:case X1:case J1:case Z1:case e_:case t_:case n_:case r_:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!It(t[l],e[l],n))return!1;return!0}case G1:return t.byteLength!==e.byteLength?!1:It(new Uint8Array(t),new Uint8Array(e),n);case b1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:It(t.buffer,e.buffer,n);case H1:return t.name===e.name&&t.message===e.message;case Il:{if(!(It(t.constructor,e.constructor,n)||Hf(t)&&Hf(e)))return!1;const a=[...Object.keys(t),...Qf(t)],c=[...Object.keys(e),...Qf(e)];if(a.length!==c.length)return!1;for(let f=0;f<a.length;f++){const d=a[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!It(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Kf(t){return t==null}let fg=new z(0,0),dg=null,Ka=new z(0,0),Ws=null,hg=null,Lr=[],pg=[],Ji=[],qa=null,gg=!1,mg=[],vg=[],yg=!1,_g=[],Xa=45,Ja=new z(0,0),Za=1,Eg=null,wg=null,Sg=null,Tg=[],xg=0,Ig="#fff",Cg=1;const ec=()=>fg,s_=()=>dg,Pg=()=>Ka,Pe=()=>Ws,o_=()=>hg,Se=()=>Lr,st=()=>Ji,Lg=()=>qa,l_=()=>gg,u_=()=>mg,Vs=()=>vg,a_=()=>yg,c_=()=>_g,Ag=()=>Xa,Zi=()=>Ja,Dt=()=>Za,f_=()=>Eg,tc=()=>wg,Og=()=>Sg,nc=()=>Tg,d_=()=>xg,Mn=()=>Ig,Dn=()=>Cg,jr=()=>$o(Ka),kg=()=>Lr.filter(t=>Ji.includes(t.id)),h_=()=>Lr.filter(t=>!Ji.includes(t.id)),Ar=t=>Ji.includes(t.id),rc=t=>pg.includes(t.id),p_=t=>fg=t,g_=t=>dg=t,m_=t=>Ka=t,Pt=(t,e=!0)=>{var n;(n=Pe())==null||n.stop(),Ws=t,Ws.subscribe(r=>{var s;const i=(s=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:s.instructions;o_()!==i&&(v_(i||null),i&&(document.getElementById("toolInstructions").innerText=i,console.log("STATE: "+i)))}),Ws.start(),e&&es(ue.activeTool)},v_=t=>hg=t,Ho=t=>{P_(ue.entities,Lr),Lr=t},Q=t=>{qa=t},Nu=t=>pg=t,q=t=>Ji=t,ic=t=>gg=t,sc=t=>mg=t,Tn=t=>vg=t,wt=t=>(console.log("setShouldDrawHelpers",t),Rg(null),Mg(null),sc([]),yg=t),y_=t=>_g=t,__=(t,e=!0)=>{Xa=t,e&&es(ue.activeTool)},oc=t=>{Ja=t},Ng=t=>{Za=t,es(ue.screenZoom)},lc=t=>Eg=t,Rg=t=>wg=t,Mg=t=>Sg=t,E_=t=>Tg=t,w_=t=>xg=t,S_=(t,e=!0)=>{Ig=t,e&&es(ue.activeLineColor)},T_=(t,e=!0)=>{Cg=t,e&&es(ue.activeLineWidth)},on=(...t)=>{const e=t.map(r=>r.id),n=Se().filter(r=>!e.includes(r.id));return Ho(n),n},Je=(...t)=>{const e=[...Se(),...t];return Ho(e),e},x_=[ue.activeTool,ue.angleStep,ue.activeLineColor,ue.activeLineWidth,ue.screenZoom],I_=[ue.entities],C_=[],lr=N1();function P_(t,e){if(!I_.includes(t))return;const n=lr.peek();if(!i_(e,n==null?void 0:n.value)){if(t!==ue.activeEntity&&lr.clear(ue.activeEntity),C_.includes(t)&&(n==null?void 0:n.variable)===t){lr.replace({variable:t,value:e});return}lr.push({variable:t,value:e})}}function Dg(t){const e=t.variable,n=t.value;switch(e){case ue.entities:Lr=n;break;case ue.activeEntity:qa=n;break;case ue.angleStep:Xa=n;break;case ue.screenOffset:Ja=n;break;case ue.screenZoom:Za=n;break}}function zg(){const t=lr.undo();t&&Dg(t)}function Fg(){const t=lr.redo();t&&Dg(t)}function es(t){x_.includes(t)&&window.dispatchEvent(new CustomEvent(vo.UPDATE_STATE))}var te=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t))(te||{});function ln(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}const Ru=1e-6,Ts=10,xs=30,L_="#111",A_="#FFFF00",uc=15,O_=15,ac=15,W=15,cc=1e3,k_=3,N_="#b6ff9a",R_="#6899f3",M_=1,D_=[5,5],Ug="#999",Bg=1,Wg=[5,5],z_=.1,F_=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"];function St(t,e){return Math.abs(t.x-e.x)<Ru&&Math.abs(t.y-e.y)<Ru}function Vg(t,e,n){const r=He.getAngle(e,n),i=t.map(s=>({point:s,angle:(new jo(e,s).slope-r+2*Math.PI)%(2*Math.PI)}));return Go(i,[s=>s.angle]).map(s=>s.point)}function $n(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}function zt(t,e,n){const i=new Ha(e,t).scale(n,n);return new z(t.x+i.x,t.y+i.y)}class He{constructor(e,n,r,i,s=!0){F(this,"id",crypto.randomUUID());F(this,"lineColor","#fff");F(this,"lineWidth",1);F(this,"lineStyle");F(this,"arc",null);F(this,"centerPoint",null);F(this,"firstPoint",null);this.centerPoint=e,this.arc=new ku(e,n,r,i,s),this.firstPoint=this.arc.start}static getAngle(e,n){return new jo(e,n).slope}draw(e){var s,o;if(!this.centerPoint)return;let n;if(this.arc)n=this.arc.r.valueOf();else if(this.centerPoint&&this.firstPoint)n=ln(this.centerPoint,this.firstPoint);else return;const r=Et(this.centerPoint),i=n*e.screenZoom;e.context.beginPath(),e.context.arc(r.x,r.y,i,((s=this.arc)==null?void 0:s.startAngle)||0,((o=this.arc)==null?void 0:o.endAngle)||2*Math.PI),e.context.stroke()}move(e,n){this.arc&&(this.arc=this.arc.translate(e,n))}scale(e,n){var i,s;if(!((i=this.arc)!=null&&i.center)||!((s=this.arc)!=null&&s.r))return;const r=zt(this.arc.center,e,n);this.arc=new ku(r,this.arc.r.valueOf()*n,this.arc.startAngle,this.arc.endAngle,this.arc.counterClockwise)}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:s}=this.arc;return new He(e,n.valueOf(),r,i,s)}return this}intersectsWithBox(e){return this.arc?this.arc.intersect(e).length>0:!1}isContainedInBox(e){return this.arc?e.contains(this.arc):!1}getBoundingBox(){return this.arc?this.arc.box:null}getShape(){return this.arc}getSnapPoints(){return this.centerPoint===null||this.arc===null?[]:[{point:this.centerPoint,type:M.CircleCenter},{point:this.arc.start,type:M.LineEndPoint},{point:this.arc.end,type:M.LineEndPoint}]}getIntersections(e){const n=e.getShape();return!this.arc||!n?[]:this.arc.intersect(n)}getFirstPoint(){return this.centerPoint}distanceTo(e){return this.arc?this.arc.distanceTo(e):null}getSvgString(){return this.arc&&this.arc.svg({strokeWidth:this.lineWidth,stroke:$n(this.lineColor)})||null}getType(){return te.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){if(!this.arc)return[this];const n=Xi([this.arc.start,this.arc.end,...e],St),r=Vg(n,this.arc.center,this.arc.start),i=[];for(let s=0;s<r.length-1;s++){const o=r[s],l=r[s+1],a=He.getAngle(this.arc.center,o),c=He.getAngle(this.arc.center,l),f=new He(this.arc.center,Number(this.arc.r),a,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:te.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==te.Arc)throw new Error("Invalid Entity type in JSON");const n=new z(e.shapeData.center.x,e.shapeData.center.y),r=new z(e.shapeData.start.x,e.shapeData.start.y),i=new z(e.shapeData.end.x,e.shapeData.end.y),s=Number(n.distanceTo(r)[0]),o=Number(He.getAngle(n,r)),l=Number(He.getAngle(n,i)),a=e.shapeData.counterClockwise,c=new He(n,s,o,l,a);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class Or{constructor(e,n){F(this,"id",crypto.randomUUID());F(this,"lineColor","#fff");F(this,"lineWidth",1);F(this,"lineStyle");F(this,"circle",null);F(this,"centerPoint",null);if(e instanceof Bs){const r=e;this.circle=r,this.centerPoint=r.center}else e instanceof z&&!n?this.centerPoint=e:e instanceof z&&n&&(this.circle=new Bs(e,typeof n=="number"?n:ln(e,n)),this.centerPoint=this.circle.center)}draw(e){if(!this.centerPoint)return;let n;this.circle?n=this.circle.r:n=this.centerPoint.distanceTo(e.worldMouseLocation)[0];const r=Et(this.centerPoint),i=n*e.screenZoom;e.context.beginPath(),e.context.arc(r.x,r.y,i,0,2*Math.PI),e.context.stroke()}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}scale(e,n){var i,s;if(!((i=this.circle)!=null&&i.center)||!((s=this.circle)!=null&&s.r))return this;const r=zt(this.circle.center,e,n);this.circle=new Bs(r,this.circle.r.valueOf()*n)}clone(){return this.circle?new Or(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){return this.centerPoint===null||this.circle===null?[]:[{point:this.centerPoint,type:M.CircleCenter},{point:new z(this.centerPoint.x+this.circle.r,this.centerPoint.y),type:M.CircleCardinal},{point:new z(this.centerPoint.x-this.circle.r,this.centerPoint.y),type:M.CircleCardinal},{point:new z(this.centerPoint.x,this.centerPoint.y+this.circle.r),type:M.CircleCardinal},{point:new z(this.centerPoint.x,this.centerPoint.y-this.circle.r),type:M.CircleCardinal}]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.centerPoint}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle&&this.circle.svg({strokeWidth:this.lineWidth,stroke:$n(this.lineColor)})||null}getType(){return te.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}cutAtPoints(e){if(!this.circle||!this.centerPoint)return[this];const{centerPoint:n,circle:r}=this;return e.map((i,s)=>{const o=e[(s+1)%e.length],l=Math.atan2(i.y-n.y,i.x-n.x),a=Math.atan2(o.y-n.y,o.x-n.x);return new He(n,r.r,l,a,!0)})}async toJson(){var e;return this.circle?{id:this.id,type:te.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new z(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new Or(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}class ut{constructor(e,n){F(this,"id",crypto.randomUUID());F(this,"lineColor","#fff");F(this,"lineWidth",1);F(this,"lineStyle");F(this,"segment",null);F(this,"startPoint",null);e instanceof Us?(this.startPoint=e.start,this.segment=e):e&&n?(this.startPoint=e,this.segment=new Us(e,n)):e&&(this.startPoint=e)}draw(e){if(!this.startPoint)return;let n,r;this.segment?(n=this.segment.start,r=this.segment.end):(n=this.startPoint,r=new z(e.worldMouseLocation.x,e.worldMouseLocation.y));const i=Et(n),s=Et(r);e.context.beginPath(),e.context.moveTo(i.x,i.y),e.context.lineTo(s.x,s.y),e.context.stroke()}move(e,n){this.segment&&(this.segment=this.segment.translate(e,n))}scale(e,n){var s;if(!((s=this.segment)!=null&&s.start)||!this.segment.end)return this;const r=zt(this.segment.start,e,n),i=zt(this.segment.end,e,n);this.segment=new Us(r,i)}clone(){return this.segment?new ut(this.segment.clone()):null}intersectsWithBox(e){return this.segment?this.segment.intersect(e).length>0:!1}isContainedInBox(e){return this.segment?e.contains(this.segment):!1}getBoundingBox(){return this.segment?this.segment.box:null}getShape(){return this.segment}getSnapPoints(){var e,n;return!((e=this.segment)!=null&&e.start)||!((n=this.segment)!=null&&n.end)?[]:[{point:this.segment.start,type:M.LineEndPoint},{point:this.segment.end,type:M.LineEndPoint},{point:this.segment.middle(),type:M.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.segment||!n?[]:this.segment.intersect(n)}getFirstPoint(){return this.startPoint}distanceTo(e){return this.segment?this.segment.distanceTo(e):null}getSvgString(){return this.segment&&this.segment.svg({strokeWidth:this.lineWidth,stroke:$n(this.lineColor)})||null}getType(){return te.Line}containsPointOnShape(e){return this.segment?this.segment.contains(e):!1}cutAtPoints(e){if(!this.segment)return[this];const n=Xi([this.segment.start,this.segment.end,...e],St),r=Go(n,[s=>ln(this.segment.start,s)]),i=[];for(let s=0;s<r.length-1;s++)i.push(new ut(r[s],r[s+1]));return i}async toJson(){return this.segment?{id:this.id,type:te.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}:null}static async fromJson(e){const n=new z(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new z(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new ut(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class Bi{constructor(e,n){F(this,"id",crypto.randomUUID());F(this,"lineColor","#fff");F(this,"lineWidth",1);F(this,"lineStyle");F(this,"point",null);!Kf(e)&&!Kf(n)&&(this.point=new z(e,n))}draw(e){if(!this.point)return;const n=Et(this.point);e.context.beginPath(),e.context.arc(n.x,n.y,5,0,Math.PI*2),e.context.stroke()}move(e,n){this.point&&(this.point=this.point.translate(e,n))}scale(e,n){if(!this.point)return this;this.point=zt(this.point,e,n)}clone(){return this.point?new Bi(this.point.clone()):null}intersectsWithBox(){return!1}isContainedInBox(e){return this.point?e.contains(this.point):!1}getBoundingBox(){return this.point?new ze(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return this.point?[{point:this.point,type:M.Point}]:[]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point?this.point.distanceTo(e):null}getSvgString(){return this.point&&this.point.svg({strokeWidth:this.lineWidth,stroke:$n(this.lineColor)})||null}getType(){return te.Point}containsPointOnShape(e){return this.point?this.point.equalTo(e):!1}async toJson(){return this.point?{id:this.id,type:te.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}:null}static async fromJson(e){const n=new z(e.shapeData.point.x,e.shapeData.point.y),r=new Bi(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}class Ft{constructor(e,n){F(this,"id",crypto.randomUUID());F(this,"lineColor","#fff");F(this,"lineWidth",1);F(this,"lineStyle");F(this,"rectangle",null);F(this,"startPoint",null);if(e instanceof ze){const r=e;this.startPoint=new z(r.xmin,r.ymin),this.rectangle=r}else e&&!n?this.startPoint=e:e&&n&&(this.rectangle=new ze(Math.min(e.x,n.x),Math.min(e.y,n.y),Math.max(e.x,n.x),Math.max(e.y,n.y)))}draw(e){if(!this.startPoint&&!this.rectangle)return;let n,r;this.rectangle?(n=this.rectangle.high,r=this.rectangle.low):(n=this.startPoint,r=new z(e.worldMouseLocation.x,e.worldMouseLocation.y));const i=Et(n),s=Et(r);e.context.beginPath(),e.context.strokeRect(i.x,i.y,s.x-i.x,s.y-i.y)}move(e,n){this.rectangle&&(this.rectangle=this.rectangle.translate(e,n))}scale(e,n){var s;if(!((s=this.rectangle)!=null&&s.low)||!this.rectangle.high)return this;const r=zt(this.rectangle.low,e,n),i=zt(this.rectangle.high,e,n);this.rectangle=new ze(r.x,r.y,i.x,i.y)}clone(){return this.rectangle?new Ft(this.rectangle.clone()):null}intersectsWithBox(e){return this.rectangle?Ga.relate(this.rectangle,e).B2B.length>0:!1}isContainedInBox(e){return this.rectangle?e.contains(this.rectangle):!1}distanceTo(e){if(!this.rectangle)return null;const n=this.rectangle.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.rectangle?this.rectangle:null}getShape(){return this.rectangle}getSnapPoints(){if(!this.rectangle)return[];const e=this.rectangle.toPoints(),n=this.rectangle.toSegments();return[{point:e[0],type:M.LineEndPoint},{point:e[1],type:M.LineEndPoint},{point:e[2],type:M.LineEndPoint},{point:e[3],type:M.LineEndPoint},{point:n[0].middle(),type:M.LineMidPoint},{point:n[1].middle(),type:M.LineMidPoint},{point:n[2].middle(),type:M.LineMidPoint},{point:n[3].middle(),type:M.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.rectangle||!n?[]:this.rectangle.toSegments().flatMap(r=>r.intersect(n))}getFirstPoint(){return this.startPoint}getSvgString(){return this.rectangle?this.rectangle.svg({strokeWidth:this.lineWidth,stroke:$n(this.lineColor)}):null}getType(){return te.Rectangle}containsPointOnShape(e){return this.rectangle?this.rectangle.toSegments().some(n=>n.contains(e)):!1}async toJson(){return this.rectangle?{id:this.id,type:te.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{xmin:this.rectangle.xmin,ymin:this.rectangle.ymin,xmax:this.rectangle.xmax,ymax:this.rectangle.ymax}}:null}static async fromJson(e){const n=new z(e.shapeData.xmin,e.shapeData.ymin),r=new z(e.shapeData.xmax,e.shapeData.ymax),i=new Ft(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function U_(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,s=JSON.parse(i);s.entities||n(new Error("Invalid JSON file"));const o=Fe(s.entities.map(l=>{switch(l.type){case te.Arc:return He.fromJson(l);case te.Circle:return Or.fromJson(l);case te.Line:return ut.fromJson(l);case te.Point:return Bi.fromJson(l);case te.Rectangle:return Ft.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));Ho(Fe(await Promise.all(o))),e()}),r.readAsText(t,"utf-8")})}var jg={exports:{}};(function(t,e){(function(n,r){r()})(br,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){a(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof br=="object"&&br.global===br?br:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=o.URL||o.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?s(v):i(v.href)?r(c,f,d):s(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){s(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&_||l)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var m=S.result;m=y?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},S.readAsDataURL(c)}else{var g=o.URL||o.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})})(jg);var fc=jg.exports;async function B_(){const e=Se().map(s=>s.toJson()),n={entities:Fe(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});fc.saveAs(i,"open-web-cad--drawing.json")}function $g(t,e){let n=e.x,r=e.y,i=0,s=0;const o=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),s=Math.max(s,d.ymax))}),console.log("exporting svg",o);const l=i-n+Ts*2,a=s-r+Ts*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new Ha(new z(n,r),new z(Ts,Ts))).svg({stroke:$n(f.lineColor),strokeWidth:f.lineWidth});v&&o.push(v)}),{svgString:`
      <svg width="${l}" height="${a}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${a}" fill="white" />
        ${o.join("")}
      </svg>
    `,width:l,height:a}}function W_(){const t=Se(),e=ec(),n=$g(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});fc.saveAs(r,"open-web-cad--drawing.svg")}function V_(t,e,n,r){return new Promise((i,s)=>{const o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Could not get canvas context");const a=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);a.onload=()=>{o.width=e+r*2,o.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,o.width,o.height),l.drawImage(a,r,r),URL.revokeObjectURL(f),o.toBlob(d=>{d?i(d):s(new Error("Could not convert canvas to blob"))},"image/png")},a.src=f})}async function j_(){const t=Se(),e=ec(),n=$g(t,e),r=await V_(n.svgString,n.width,n.height,20);fc.saveAs(r,"open-web-cad--drawing.png")}function Gg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function $_(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function G_(){const t=$_();if(t.__xstate__)return t.__xstate__}const H_=t=>{if(typeof window>"u")return;const e=G_();e&&e.register(t)};class qf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Hg=".",b_="",bg="",Q_="#",Y_="*",Qg="xstate.init",K_="xstate.error",Mu="xstate.stop";function q_(t,e){return{type:`xstate.after.${t}.${e}`}}function Du(t,e){return{type:`xstate.done.state.${t}`,output:e}}function X_(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Yg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Kg(t){return{type:Qg,input:t}}function Tt(t){setTimeout(()=>{throw t})}const J_=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qg(t,e){const n=Xf(t),r=Xf(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?qg(n[i],r[i]):!1)}function dc(t){if(Jg(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Xf(t){if(OE(t))return t.value;if(typeof t!="string")return t;const e=dc(t);return Z_(e)}function Z_(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function Jf(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const s=r[i];n[s]=e(t[s],s,t,i)}return n}function Xg(t){return Jg(t)?t:[t]}function Qt(t){return t===void 0?[]:Xg(t)}function zu(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function Jg(t){return Array.isArray(t)}function eE(t){return t.type.startsWith("xstate.error.actor")}function Qn(t){return Xg(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function Zg(t){if(!(t===void 0||t===b_))return Qt(t)}function Fu(t,e,n){var s,o,l;const r=typeof t=="object",i=r?t:void 0;return{next:(s=r?t.next:t)==null?void 0:s.bind(i),error:(o=r?t.error:e)==null?void 0:o.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function Zf(t,e){return`${e}.${t}`}function hc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,o=t.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[r]:o).src}function ed(t,e){return`${t.sessionId}.${e}`}let tE=0;function nE(t,e){const n=new Map,r=new Map,i=new WeakMap,s=new Set,o={},{clock:l,logger:a}=e,c={schedule:(h,v,_,y,S=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:_,delay:y,id:S,startedAt:Date.now()},p=ed(h,S);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete o[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,_)},y);o[p]=m},cancel:(h,v)=>{const _=ed(h,v),y=o[_];delete o[_],delete d._snapshot._scheduledEvents[_],y!==void 0&&l.clearTimeout(y)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===h&&c.cancel(h,_.id)}}},f=h=>{if(!s.size)return;const v={...h,rootId:t.sessionId};s.forEach(_=>{var y;return(y=_.next)==null?void 0:y.call(_,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${tE++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const _=r.get(h);if(_&&_!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=Fu(h);return s.add(v),{unsubscribe(){s.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:_}),v._send(_)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:_,target:y,event:S,delay:g,id:p}=h[v];c.schedule(_,y,S,g,p)}},_clock:l,_logger:a};return d}const pc=1;let Ie=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const rE={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class pt{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new qf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ie.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...rE,...n},{clock:i,logger:s,parent:o,syncSnapshot:l,id:a,systemId:c,inspect:f}=r;this.system=o?o.system:nE(this,{clock:i,logger:s}),f&&!o&&this.system.inspect(Fu(f)),this.sessionId=this.system._bookId(),this.id=a??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=o,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const _=new Set([...h?h.values():[],...v?v.values():[]]);for(const y of Array.from(_))y(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,s;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(o){this._deferred.length=0,this._snapshot={...e,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(i=o.next)==null||i.call(o,e)}catch(l){Tt(l)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,e)}catch(l){Tt(l)}this._stopProcedure(),this._complete(),this._doneEvent=X_(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var s;const i=Fu(e,n,r);if(this._processingStatus!==Ie.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(s=i.complete)==null||s.call(i)}catch(o){Tt(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)Tt(o);else try{i.error(o)}catch(l){Tt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Ie.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Ie.Running;const e=Kg(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Mu&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ie.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ie.NotStarted?(this._processingStatus=Ie.Stopped,this):(this.mailbox.enqueue({type:Mu}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){Tt(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Tt(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(s){Tt(s)}}this.observers.clear(),n&&Tt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Yg(this.id,e))}_stopProcedure(){return this._processingStatus!==Ie.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new qf(this._process.bind(this)),this._processingStatus=Ie.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Ie.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:H_)(this)}toJSON(){return{xstate$$type:pc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[J_](){return this}getSnapshot(){return this._snapshot}}function yo(t,...[e]){return new pt(t,e)}function iE(t,e,n,r,{sendId:i}){const s=typeof i=="function"?i(n,r):i;return[e,s]}function sE(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function oE(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=iE,e.execute=sE,e}function lE(t,e,n,r,{id:i,systemId:s,src:o,input:l,syncSnapshot:a}){const c=typeof o=="string"?hc(e.machine,o):o,f=typeof i=="function"?i(n):i;let d;return c&&(d=yo(c,{id:f,src:o,parent:t.self,syncSnapshot:a,systemId:s,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[zn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function uE(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==Ie.Stopped&&n.start()})}function aE(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function s(o,l){}return s.type="snapshot.spawnChild",s.id=e,s.systemId=n,s.src=t,s.input=r,s.syncSnapshot=i,s.resolve=lE,s.execute=uE,s}function cE(t,e,n,r,{actorRef:i}){const s=typeof i=="function"?i(n,r):i,o=typeof s=="string"?e.children[s]:s;let l=e.children;return o&&(l={...l},delete l[o.id]),[zn(e,{children:l}),o]}function fE(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Ie.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function em(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=cE,e.execute=fE,e}function gc(t,e,n,r){const{machine:i}=r,s=typeof t=="function",o=s?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!s&&!o)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof o!="function")return gc(o,e,n,r);const l={context:e,event:n},a=s||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in o?o.check(r,l,o):o(l,a)}const mc=t=>t.type==="atomic"||t.type==="final";function kr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function ts(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function _o(t){const e=new Set(t),n=nm(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))td(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of kr(r))if(i.type!=="history"&&!e.has(i)){const s=td(i);for(const o of s)e.add(o)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function tm(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(mc(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=tm(i,e);return r}function nm(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function rm(t,e){const n=_o(e);return tm(t,nm(n))}function vc(t,e){return e.type==="compound"?kr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?kr(e).every(n=>vc(t,n)):e.type==="final"}const bo=t=>t[0]===Q_;function dE(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===Y_)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),s=e.split(".");for(let o=0;o<i.length;o++){const l=i[o],a=s[o];if(l==="*")return o===i.length-1;if(l!==a)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function hE(t){const e=t.config.after;if(!e)return[];const n=(i,s)=>{const o=q_(i,t.id),l=o.type;return t.entry.push(BE(o,{id:l,delay:i})),t.exit.push(oE(l)),l};return Object.keys(e).flatMap((i,s)=>{const o=e[i],l=typeof o=="string"?{target:o}:o,a=Number.isNaN(+i)?i:+i,c=n(a);return Qt(l).map(f=>({...f,event:c,delay:a}))}).map(i=>{const{delay:s}=i;return{..._n(t,i.event,i),delay:s}})}function _n(t,e,n){const r=Zg(n.target),i=n.reenter??!1,s=mE(t,r),o={...n,actions:Qt(n.actions),guard:n.guard,target:s,source:t,reenter:i,eventType:e,toJSON:()=>({...o,source:`#${t.id}`,target:s?s.map(l=>`#${l.id}`):void 0})};return o}function pE(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===bg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Qn(r).map(i=>_n(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Qn(t.config.onDone).map(r=>_n(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Qn(n.onDone).map(i=>_n(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Qn(n.onError).map(i=>_n(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Qn(n.onSnapshot).map(i=>_n(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function gE(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:Qt(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function mE(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(bo(n))return t.machine.getStateNodeById(n);const r=n[0]===Hg;if(r&&!t.parent)return Eo(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return Eo(t.parent,i)}catch(s){throw new Error(`Invalid transition definition for state node '${t.id}':
${s.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function im(t){const e=Zg(t.config.target);return e?{target:e.map(n=>typeof n=="string"?Eo(t.parent,n):n)}:t.parent.initial}function xn(t){return t.type==="history"}function td(t){const e=sm(t);for(const n of e)for(const r of ts(n,t))e.add(r);return e}function sm(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of kr(r))n(i)}}return n(t),e}function Nr(t,e){if(bo(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function Eo(t,e){if(typeof e=="string"&&bo(e))try{return t.machine.getStateNodeById(e)}catch{}const n=dc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Nr(r,i)}return r}function wo(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Nr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,s)=>{const o=Nr(t,s);if(!o)return i;const l=wo(o,e[s]);return i.concat(l)},[]))}function vE(t,e,n,r){const s=Nr(t,e).next(n,r);return!s||!s.length?t.next(n,r):s}function yE(t,e,n,r){const i=Object.keys(e),s=Nr(t,i[0]),o=yc(s,e[i[0]],n,r);return!o||!o.length?t.next(n,r):o}function _E(t,e,n,r){const i=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const l=Nr(t,s),a=yc(l,o,n,r);a&&i.push(...a)}return i.length?i:t.next(n,r)}function yc(t,e,n,r){return typeof e=="string"?vE(t,e,n,r):Object.keys(e).length===1?yE(t,e,n,r):_E(t,e,n,r)}function EE(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function un(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function wE(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function om(t,e,n){const r=new Set;for(const i of t){let s=!1;const o=new Set;for(const l of r)if(wE(Uu([i],e,n),Uu([l],e,n)))if(un(i.source,l.source))o.add(l);else{s=!0;break}if(!s){for(const l of o)r.delete(l);r.add(i)}}return Array.from(r)}function SE(t){const[e,...n]=t;for(const r of ts(e,void 0))if(n.every(i=>un(i,r)))return r}function _c(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(xn(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of _c(im(r),e))n.add(i);else n.add(r);return[...n]}function lm(t,e){const n=_c(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||un(i,t.source)))return t.source;const r=SE(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Uu(t,e,n){var i;const r=new Set;for(const s of t)if((i=s.target)!=null&&i.length){const o=lm(s,n);s.reenter&&s.source===o&&r.add(o);for(const l of e)un(l,o)&&r.add(l)}return[...r]}function TE(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Bu(t,e,n,r,i,s){if(!t.length)return e;const o=new Set(e._nodes);let l=e.historyValue;const a=om(t,o,l);let c=e;i||([c,l]=PE(c,r,n,a,o,l,s)),c=Rr(c,r,n,a.flatMap(d=>d.actions),s),c=IE(c,r,n,a,o,s,l,i);const f=[...o];c.status==="done"&&(c=Rr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),s));try{return l===e.historyValue&&TE(e._nodes,o)?c:zn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function xE(t,e,n,r,i){if(r.output===void 0)return;const s=Du(i.id,i.output!==void 0&&i.parent?zu(i.output,t.context,e,n.self):void 0);return zu(r.output,t.context,s,n.self)}function IE(t,e,n,r,i,s,o,l){let a=t;const c=new Set,f=new Set;CE(r,o,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,_)=>v.order-_.order)){i.add(h);const v=[];v.push(...h.entry);for(const _ of h.invoke)v.push(aE(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;v.push(..._)}if(a=Rr(a,e,n,v,s,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let y=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,S=y||h;for((_==null?void 0:_.type)==="compound"&&s.push(Du(_.id,h.output!==void 0?zu(h.output,a.context,e,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!d.has(y)&&vc(i,y);)d.add(y),s.push(Du(y.id)),S=y,y=y.parent;if(y)continue;a=zn(a,{status:"done",output:xE(a,e,n,a.machine.root,S)})}}return a}function CE(t,e,n,r){for(const i of t){const s=lm(i,e);for(const l of i.target||[])!xn(l)&&(i.source!==l||i.source!==s||i.reenter)&&(r.add(l),n.add(l)),ur(l,e,n,r);const o=_c(i,e);for(const l of o){const a=ts(l,s);(s==null?void 0:s.type)==="parallel"&&a.push(s),um(r,e,n,a,!i.source.parent&&i.reenter?void 0:s)}}}function ur(t,e,n,r){var i;if(xn(t))if(e[t.id]){const s=e[t.id];for(const o of s)r.add(o),ur(o,e,n,r);for(const o of s)Cl(o,t.parent,r,e,n)}else{const s=im(t);for(const o of s.target)r.add(o),s===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),ur(o,e,n,r);for(const o of s.target)Cl(o,t.parent,r,e,n)}else if(t.type==="compound"){const[s]=t.initial.target;xn(s)||(r.add(s),n.add(s)),ur(s,e,n,r),Cl(s,t,r,e,n)}else if(t.type==="parallel")for(const s of kr(t).filter(o=>!xn(o)))[...r].some(o=>un(o,s))||(xn(s)||(r.add(s),n.add(s)),ur(s,e,n,r))}function um(t,e,n,r,i){for(const s of r)if((!i||un(s,i))&&t.add(s),s.type==="parallel")for(const o of kr(s).filter(l=>!xn(l)))[...t].some(l=>un(l,o))||(t.add(o),ur(o,e,n,t))}function Cl(t,e,n,r,i){um(n,r,i,ts(t,e))}function PE(t,e,n,r,i,s,o){let l=t;const a=Uu(r,i,s);a.sort((f,d)=>d.order-f.order);let c;for(const f of a)for(const d of EE(f)){let h;d.history==="deep"?h=v=>mc(v)&&un(v,f):h=v=>v.parent===f,c??(c={...s}),c[d.id]=Array.from(i).filter(h)}for(const f of a)l=Rr(l,e,n,[...f.exit,...f.invoke.map(d=>em(d.id))],o),i.delete(f);return[l,c||s]}let nd=!1;function am(t,e,n,r,i,s){const{machine:o}=t;let l=t;for(const c of r){let _=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{nd=d,d(h,v)}finally{nd=!1}};var a=_;const f=typeof c=="function",d=f?c:o.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===Ie.Running?_():n.defer(()=>{_()});continue}const y=d,[S,g,p]=y.resolve(n,l,h,v,d,i);l=S,"retryResolve"in y&&(s==null||s.push([y,g])),"execute"in y&&(n.self._processingStatus===Ie.Running?y.execute(n,g):n.defer(y.execute.bind(null,n,g))),p&&(l=am(l,e,n,p,i,s))}return l}function Rr(t,e,n,r,i,s){const o=s?[]:void 0,l=am(t,e,n,r,{internalQueue:i,deferredActorIds:s},o);return o==null||o.forEach(([a,c])=>{a.retryResolve(n,l,c)}),l}function Pl(t,e,n,r=[]){let i=t;const s=[];function o(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),s.push(c)}if(e.type===Mu)return i=zn(rd(i,e,n),{status:"stopped"}),o(i,e,[]),{snapshot:i,microstates:s};let l=e;if(l.type!==Qg){const c=l,f=eE(c),d=id(c,i);if(f&&!d.length)return i=zn(t,{status:"error",error:c.error}),o(i,c,[]),{snapshot:i,microstates:s};i=Bu(d,t,n,l,!1,r),o(i,c,d)}let a=!0;for(;i.status==="active";){let c=a?LE(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=id(l,i)}i=Bu(c,i,n,l,!1,r),a=i!==f,o(i,l,c)}return i.status!=="active"&&rd(i,l,n),{snapshot:i,microstates:s}}function rd(t,e,n){return Rr(t,e,n,Object.values(t.children).map(r=>em(r)),[])}function id(t,e){return e.machine.getTransitionData(e,t)}function LE(t,e){const n=new Set,r=t._nodes.filter(mc);for(const i of r)e:for(const s of[i].concat(ts(i,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||gc(o.guard,t.context,e,t)){n.add(o);break e}}return om(Array.from(n),new Set(t._nodes),t.historyValue)}function AE(t,e){const n=_o(wo(t,e));return rm(t,[...n])}function OE(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const kE=function(e){return qg(e,this.value)},NE=function(e){return this.tags.has(e)},RE=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},ME=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:s,can:o,hasTag:l,matches:a,...c}=this;return{...c,tags:Array.from(n)}},DE=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function js(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:rm(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:kE,hasTag:NE,can:RE,getMeta:DE,toJSON:ME}}function zn(t,e={}){return js({...t,...e},t.machine)}function zE(t,e){const{_nodes:n,tags:r,machine:i,children:s,context:o,can:l,hasTag:a,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const y in s){const S=s[y];v[y]={snapshot:S.getPersistedSnapshot(e),src:S.src,systemId:S._systemId,syncSnapshot:S._syncSnapshot}}return{...h,context:cm(o),children:v}}function cm(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:pc,id:r.id};else{const i=cm(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function FE(t,e,n,r,{event:i,id:s,delay:o},{internalQueue:l}){const a=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof o=="string"){const d=a&&a[o];f=typeof d=="function"?d(n,r):d}else f=typeof o=="function"?o(n,r):o;return typeof f!="number"&&l.push(c),[e,{event:c,id:s,delay:f}]}function UE(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const s=t.self;t.system.scheduler.schedule(s,s,n,r,i)});return}}function BE(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=FE,n.execute=UE,n}function WE(t,{machine:e,context:n},r,i){const s=(o,l={})=>{const{systemId:a,input:c}=l;if(typeof o=="string"){const f=hc(e,o);if(!f)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const d=yo(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:o,systemId:a});return i[d.id]=d,d}else return yo(o,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:o,systemId:a})};return(o,l)=>{const a=s(o,l);return i[a.id]=a,t.defer(()=>{a._processingStatus!==Ie.Stopped&&a.start()}),a}}function VE(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:n.event,spawn:WE(t,e,n.event,s),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(o,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(o,r):f}const a=Object.assign({},e.context,l);return[zn(e,{context:a,children:Object.keys(s).length?{...e.children,...s}:e.children})]}function V(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=VE,e}let sd=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function jE(t,e,n,r,{to:i,event:s,id:o,delay:l},a){var _;const c=e.machine.implementations.delays;if(typeof s=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${s}" }) instead`);const f=typeof s=="function"?s(n,r):s;let d;if(typeof l=="string"){const y=c&&c[l];d=typeof y=="function"?y(n,r):y}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===sd.Parent?v=t.self._parent:h===sd.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(_=a.deferredActorIds)!=null&&_.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:o,delay:d}]}function $E(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function GE(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:s}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,s);return}t.system._relay(t.self,n,r.type===K_?Yg(t.self.id,r.data):r)})}function mr(t,e,n){function r(i,s){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=jE,r.retryResolve=$E,r.execute=GE,r}const od=new WeakMap;function Hn(t,e,n){let r=od.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},od.set(t,r)),r[e]}const HE={},ni=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class Ec{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Hg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Jf(this.config.states,(r,i)=>new Ec(r,{_parent:this,_key:i,_machine:this.machine})):HE,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Qt(this.config.entry).slice(),this.exit=Qt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Qt(e.tags).slice()}_initialize(){this.transitions=pE(this),this.config.always&&(this.always=Qn(this.config.always).map(e=>_n(this,bg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(ni),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(ni),eventType:null})}:void 0,history:this.history,states:Jf(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(ni)})),entry:this.entry.map(ni),exit:this.exit.map(ni),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Hn(this,"invoke",()=>Qt(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,s=e.id??Zf(this.id,n),o=typeof r=="string"?r:`xstate.invoke.${Zf(this.id,n)}`;return{...e,src:o,id:s,systemId:i,toJSON(){const{onDone:l,onError:a,...c}=e;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return Hn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return Hn(this,"delayedTransitions",()=>hE(this))}get initial(){return Hn(this,"initial",()=>gE(this,this.config.initial))}next(e,n){const r=n.type,i=[];let s;const o=Hn(this,`candidates-${r}`,()=>dE(this,r));for(const l of o){const{guard:a}=l,c=e.context;let f=!1;try{f=!a||gc(a,c,n,e)}catch(d){const h=typeof a=="string"?a:typeof a=="object"?a.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),s=l;break}}return s?[s]:void 0}get events(){return Hn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const s of i.events)n.add(`${s}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const bE="#";class wc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Ec(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:s}=this.implementations;return new wc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const n=AE(this.root,e.value),r=_o(wo(this.root,n));return js({_nodes:[...r],context:e.context||{},children:{},status:vc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return Pl(e,n,r).snapshot}microstep(e,n,r){return Pl(e,n,r).microstates}getTransitionData(e,n){return yc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,s=js({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Rr(s,n,e,[V(({spawn:l,event:a,self:c})=>i({spawn:l,input:a.input,self:c}))],r):s}getInitialSnapshot(e,n){const r=Kg(n),i=[],s=this.getPreInitialState(e,r,i),o=Bu([{target:[...sm(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,r,!0,i),{snapshot:l}=Pl(o,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=dc(e),r=n.slice(1),i=bo(n[0])?n[0].slice(bE.length):n[0],s=this.idMap.get(i);if(!s)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Eo(s,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return zE(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(a=>{const c=i[a],f=c.snapshot,d=c.src,h=typeof d=="string"?hc(this,d):d;if(!h)return;const v=yo(h,{id:a,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[a]=v});const s=js({...e,children:r,_nodes:Array.from(_o(wo(this.root,e.value)))},this);let o=new Set;function l(a,c){if(!o.has(a)){o.add(a);for(let f in a){const d=a[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===pc){a[f]=c[d.id];continue}l(d,c)}}}}return l(s.context,r),s}}function hn(t,e){return new wc(t,e)}const fm=hn({types:{},context:{startPoint:null,type:B.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:V(()=>(wt(!0),Q(null),q([]),{startPoint:null})),RECORD_START_POINT:V({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new ut(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=Mn(),n.lineWidth=Dn(),Q(n)},DRAW_FINAL_LINE:V(({context:t,event:e})=>{console.log("drawFinalLine",{context:t,event:e});const n=e.worldClickPoint,r=new ut(t.startPoint,n);return r.lineColor=Mn(),r.lineWidth=Dn(),Je(r),Q(new ut(n,n)),{startPoint:n}})}}),dm=hn({types:{},context:{startPoint:null,type:B.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{wt(!0),Q(null),q([])},RECORD_START_POINT:V(({event:t})=>({startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new Ft(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=Mn(),n.lineWidth=Dn(),Q(n)},DRAW_FINAL_RECTANGLE:V(({context:t,event:e})=>{const n=e.worldClickPoint,r=new Ft(t.startPoint,n);return r.lineColor=Mn(),r.lineWidth=Dn(),Je(r),Q(null),{startPoint:null}})}}),hm=hn({types:{},context:{centerPoint:null,type:B.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:V(()=>(console.log("activate circle tool"),wt(!0),Q(null),q([]),{centerPoint:null})),RECORD_START_POINT:V({centerPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new Or(t.centerPoint,e.drawInfo.worldMouseLocation);n.lineColor=Mn(),n.lineWidth=Dn(),Q(n)},DRAW_FINAL_CIRCLE:V(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new Or(t.centerPoint,n);return r.lineColor=Mn(),r.lineWidth=Dn(),Je(r),Q(null),{centerPoint:null}})}});function Mr(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const s=i.distanceTo(t);s&&s[0]<r[0]&&(r=s,n=i)}),{distance:r[0],segment:r[1],entity:n}}function QE(t,e){const n=Mr(e.worldClickPoint,Se());if(n&&n.distance<ac){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?q([r.id]):e.holdingCtrl?Ar(r)?q(st().filter(i=>i!==r.id)):q([...st(),r.id]):q([...st(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function YE(t,e,n){const r=new Ft(t,e);console.log("Finish selection: ",r);const i=pm(r,t),s=Fe(Se().map(o=>{if(i){if(o.intersectsWithBox(r.getBoundingBox())||o.isContainedInBox(r.getBoundingBox()))return n&&Ar(o)?null:o.id}else if(o.isContainedInBox(r.getBoundingBox()))return n&&Ar(o)?null:o.id;return null}));q(s)}function KE(t,e){const n=new Ft(t,e),r=pm(n,t);n.lineColor=r?N_:R_,n.lineWidth=M_,n.lineStyle=D_,Q(n)}function pm(t,e){return!t.getShape()||!e?!1:Math.abs(e.x-t.getShape().xmin)>Ru}const Fn=hn({types:{},context:{startPoint:null,type:B.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),wt(!1),Q(null),q([])},HANDLE_FIRST_SELECT_POINT:V(({context:t,event:e})=>(console.log("handle first select point"),QE(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");KE(t.startPoint,e.drawInfo.worldMouseLocation)},SELECT_ENTITIES_INSIDE_RECTANGLE:V(({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");return YE(t.startPoint,e.worldClickPoint,e.holdingCtrl),Q(null),{startPoint:null}}),DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),Ho(h_()),q([]),Q(null)},RESET_SELECTION:V(()=>(Q(null),q([]),{startPoint:null}))}});function qE(t,e,n,r){const i=Go(Xi([e,...r,t,n],St),[o=>ln(e,o)]),s=i.findIndex(o=>St(t,o));if(s===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[s-1]||e,i[s+1]||n]}function XE(t,e){const n=t.map(r=>({point:r,angle:new jo(e,r).slope}));return Go(n,[r=>r.angle]).map(r=>r.point)}function JE(t,e,n){const r=XE(Xi([...n,t],St),e.getShape().center),i=r.findIndex(s=>St(t,s));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function ZE(t,e,n){const r=Vg(Xi([...n,t],St),e.getShape().center,e.getShape().start),i=r.findIndex(s=>St(t,s));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function ld(t,e){return Fe(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function ud(t,e,n){const r=t.getShape(),[i,s]=qE(e,r.start,r.end,n);y_([i,s].map(a=>new Bi(a)));const l=t.cutAtPoints([i,s]).filter(a=>!a.containsPointOnShape(e));on(t),Je(...l)}function ew(t,e,n){if(n.length===0){on(t);return}const[r,i]=JE(e,t,n),s=t.getShape(),o=s.center,l=[r,i,e].map(d=>Math.atan2(d.y-o.y,d.x-o.x)),[a,c]=tw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new He(o,s.r,a,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),on(t),Je(f)}function tw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function nw(t,e,n){const[r,i]=ZE(e,t,n);if(St(r,i)){on(t);return}on(t),t.cutAtPoints([r,i]).filter(s=>!s.containsPointOnShape(e)).forEach(s=>{Object.assign(s,{lineColor:t.lineColor,lineWidth:t.lineWidth}),Je(s)})}const rw=hn({types:{},context:{startPoint:null,type:B.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:V(()=>(console.log("activate eraser tool"),wt(!0),Q(null),q([]),{})),HANDLE_MOUSE_CLICK:V(({context:t,event:e})=>(iw(e.worldClickPoint),t))}});function iw(t){const e=Mr(t,Se());if(!e)return;const n=e.segment.start,r=ld(e.entity,Se());switch(e.entity.getType()){case te.Line:{const i=e.entity;ud(i,n,r);break}case te.Circle:{const i=e.entity;ew(i,n,r);break}case te.Arc:{const i=e.entity;nw(i,n,r);break}case te.Rectangle:{const i=e.entity,l=i.getShape().toSegments().map(f=>new ut(f)),a=Mr(t,l);on(i),Je(...l);const c=ld(a.entity,Se());ud(a.entity,n,c);break}}}function ad(t,e,n){t.forEach(r=>r.move(e,n))}const gm=hn({types:{},context:{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null,type:B.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",st().length>0),st().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",st().length===0),st().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:Fn,onDone:{actions:V(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=Pe())==null?void 0:t.getSnapshot()),{startPoint:null}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:mr("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:mr("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:mr("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_ENTITIES"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:()=>{console.log("activate move tool"),wt(!1),Q(null),q([])},ENABLE_HELPERS:()=>{wt(!0)},RECORD_START_POINT:V(({event:t})=>({startPoint:t.worldClickPoint})),COPY_SELECTION_BEFORE_MOVE:V(({context:t})=>{const e=kg();return Tn(e),on(...e),q([]),{startPoint:t.startPoint,originalSelectedEntities:Fe(e.map(n=>n.clone()))}}),DRAW_TEMP_MOVE_ENTITIES:V(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawInfo.worldMouseLocation,r=new ut(t.startPoint,n);r.lineColor=Ug,r.lineWidth=Bg,r.lineStyle=Wg,Q(r);const i=t.lastDrawLocation||t.startPoint;return ad(Vs(),n.x-i.x,n.y-i.y),{...t,lastDrawLocation:e.drawInfo.worldMouseLocation}}),MOVE_SELECTION:V(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=t.lastDrawLocation||t.startPoint,r=e.worldClickPoint;return ad(Vs(),r.x-n.x,r.y-n.y),Je(...Vs()),Tn([]),q([]),{...t,startPoint:null,lastDrawLocation:null,originalSelectedEntities:[]}}),DESELECT_ENTITIES:V(()=>(Q(null),q([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:V(({context:t})=>{const e=Se();return console.log({entities:e}),Je(...t.originalSelectedEntities),Tn([]),Q(null),q([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Fn.implementations.actions}});var it=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t))(it||{});class Wi{constructor(e,n){F(this,"id",crypto.randomUUID());F(this,"lineColor","#fff");F(this,"lineWidth",1);F(this,"lineStyle");F(this,"imageElement",null);F(this,"rectangle",null);this.imageElement=e,this.rectangle=n}draw(e){if(!this.rectangle||!this.imageElement)return;const n=Et(this.rectangle.low),r=Et(this.rectangle.high),i=Math.abs(n.x-r.x),s=Math.abs(n.y-r.y);i===0||s===0||(e.context.beginPath(),e.context.strokeRect(n.x,n.y,r.x-n.x,r.y-n.y),e.context.drawImage(this.imageElement,n.x,n.y,i,s))}move(e,n){!this.rectangle||!this.imageElement||(this.rectangle=this.rectangle.translate(e,n))}scale(e,n){var s;if(!((s=this.rectangle)!=null&&s.low)||!this.rectangle.high)return this;const r=zt(this.rectangle.low,e,n),i=zt(this.rectangle.high,e,n);this.rectangle=new ze(r.x,r.y,i.x,i.y)}clone(){if(!this.rectangle||!this.imageElement)return null;const e=document.createElement("img");return e.src=this.imageElement.src,new Wi(e,this.rectangle.clone())}intersectsWithBox(e){return this.rectangle?Ga.relate(this.rectangle,e).B2B.length>0:!1}isContainedInBox(e){return this.rectangle?e.contains(this.rectangle):!1}distanceTo(e){if(!this.rectangle)return null;const n=this.rectangle.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.rectangle?this.rectangle:null}getShape(){return this.rectangle}getSnapPoints(){if(!this.rectangle)return[];const e=this.rectangle.toPoints(),n=this.rectangle.toSegments();return[{point:e[0],type:M.LineEndPoint},{point:e[1],type:M.LineEndPoint},{point:e[2],type:M.LineEndPoint},{point:e[3],type:M.LineEndPoint},{point:n[0].middle(),type:M.LineMidPoint},{point:n[1].middle(),type:M.LineMidPoint},{point:n[2].middle(),type:M.LineMidPoint},{point:n[3].middle(),type:M.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.rectangle||!n?[]:this.rectangle.toSegments().flatMap(r=>r.intersect(n))}getFirstPoint(){var e;return((e=this.rectangle)==null?void 0:e.low)||null}getSvgString(){return this.rectangle?this.rectangle.svg({strokeWidth:this.lineWidth,stroke:$n(this.lineColor)}):null}getType(){return te.Image}containsPointOnShape(e){return this.rectangle?this.rectangle.toSegments().some(n=>n.contains(e)):!1}async toJson(){return!this.rectangle||!this.imageElement?null:{id:this.id,type:te.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{xmin:this.rectangle.xmin,ymin:this.rectangle.ymin,xmax:this.rectangle.xmax,ymax:this.rectangle.ymax,imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new ze(e.shapeData.xmin,e.shapeData.ymin,e.shapeData.xmax,e.shapeData.ymax),r=new Image;r.src=e.shapeData.imageData;const i=new Wi(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function cd(t,e,n,r){const i=Math.abs(n.x-r.x),s=Math.abs(n.y-r.y);if(i===0||s===0)return null;const o=t/e,l=i/s;if(o<l){const a=Math.abs(s*o),c=n.x<r.x?n.x:n.x-a,f=n.y<r.y?n.y:n.y-s;return new ze(c,f,c+a,f+s)}else{const a=Math.abs(i/o),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-a;return new ze(c,f,c+i,f+a)}}const mm=hn({types:{},context:{type:B.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[it.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{target:"INIT"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","SWITCH_TO_SELECT_TOOL"],target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:V(()=>(wt(!0),Q(null),q([]),{startPoint:null})),STORE_IMAGE_DATA:V(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:V({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=cd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.drawInfo.worldMouseLocation);if(!n)return;const r=new Wi(t.imageElement,n),i=new Ft(new ze(t.startPoint.x,t.startPoint.y,e.drawInfo.worldMouseLocation.x,e.drawInfo.worldMouseLocation.y));Q(r),sc([i])},DRAW_FINAL_IMAGE_IMPORT:V(({context:t,event:e})=>{if(console.log("drawFinalImageImport",{context:t,event:e}),!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=cd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldClickPoint);if(!n)return{startPoint:null,imageElement:null};const r=new Wi(t.imageElement,n);return Je(r),{startPoint:null,imageArrayBuffer:null}}),SWITCH_TO_SELECT_TOOL:()=>{Pt(new pt(Fn))}}});function fd(t,e,n,r){const i=ln(e,r)/ln(e,n);t.forEach(s=>s.scale(e,i))}const sw=hn({types:{},context:{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[],type:B.SCALE},initial:"INIT",states:{INIT:{description:"Initializing the scale tool",always:{actions:"INIT_SCALE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",st().length>0),st().length>0),target:"WAITING_FOR_BASE_VECTOR_START_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",st().length===0),st().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to scale",meta:{instructions:"Select what you want to scale, then ENTER"},invoke:{id:"selectToolInsideTheScaleTool",src:Fn,onDone:{actions:V(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=Pe())==null?void 0:t.getSnapshot()),{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:mr("selectToolInsideTheScaleTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_SCALE_TOOL"]},ENTER:{actions:mr("selectToolInsideTheScaleTool",({event:t})=>t)},DRAW:{actions:mr("selectToolInsideTheScaleTool",({event:t})=>t)}}},WAITING_FOR_BASE_VECTOR_START_POINT:{description:"Select the origin of the scale operation",meta:{instructions:"Select the origin of the scale operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_START_POINT"],target:"WAITING_FOR_BASE_VECTOR_END_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_BASE_VECTOR_END_POINT:{description:"Select the end of the base scale line",meta:{instructions:"Select the end of the base scale line"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_END_POINT","COPY_SELECTION_BEFORE_SCALE"],target:"WAITING_FOR_SCALE_VECTOR_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_SCALE_VECTOR_END_POINT:{description:"Select the end of the scale line",meta:{instructions:"Select the end of the scale line"},on:{DRAW:{actions:["DRAW_TEMP_SCALE_ENTITIES"]},MOUSE_CLICK:{actions:["SCALE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_SCALE_TOOL:()=>{console.log("activate scale tool"),wt(!1),Q(null),q([])},ENABLE_HELPERS:()=>{wt(!0)},RECORD_BASE_VECTOR_START_POINT:V(({context:t,event:e})=>({...t,baseVectorStartPoint:e.worldClickPoint})),RECORD_BASE_VECTOR_END_POINT:V(({context:t,event:e})=>({...t,baseVectorEndPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_SCALE:V(({context:t})=>{const e=kg();return Tn(e),on(...e),q([]),{...t,originalSelectedEntities:Fe(e.map(n=>n.clone()))}}),DRAW_TEMP_SCALE_ENTITIES:V(({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling draw temp scale entities without a base start point or base end point");const n=e.drawInfo.worldMouseLocation,r=Fe(t.originalSelectedEntities.map(i=>i.clone()));return fd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),Tn(r),{...t}}),SCALE_SELECTION:V(({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling scale selection without some scale vector endpoints");const n=e.worldClickPoint,r=Fe(t.originalSelectedEntities.map(i=>i.clone()));return fd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),Je(...r),Tn([]),q([]),{...t,baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),DESELECT_ENTITIES:V(()=>(Q(null),q([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:V(({context:t})=>{const e=Se();return console.log({entities:e}),Je(...t.originalSelectedEntities),Tn([]),Q(null),q([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Fn.implementations.actions}}),vm={[B.LINE]:fm,[B.RECTANGLE]:dm,[B.CIRCLE]:hm,[B.SELECT]:Fn,[B.ERASER]:rw,[B.MOVE]:gm,[B.SCALE]:sw,[B.IMAGE_IMPORT]:mm};function ow(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const lw=()=>{const[t,e]=O.useState(B.LINE),[n,r]=O.useState(45),[i,s]=O.useState("#FFF"),[o,l]=O.useState(1),[a,c]=O.useState(1),f=O.useCallback(()=>{var y,S;e((S=(y=Pe())==null?void 0:y.getSnapshot())==null?void 0:S.context.type),r(Ag()),s(Mn()),l(Dn()),c(Dt())},[]),d=y=>{y.ctrlKey&&y.preventDefault()};O.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(vo.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(vo.UPDATE_STATE,f)}),[f]);const h=O.useCallback(y=>{var g;(g=Pe())==null||g.stop();const S=new pt(vm[y]);Pt(S),e(y)},[]),v=O.useCallback(y=>{r(y),__(y,!1)},[]),_=O.useCallback(()=>{Ng(1),oc(new z(0,0))},[]);return N.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[N.jsx(J,{title:"Select (s)",icon:xe.Direction,onClick:()=>{h(B.SELECT)},active:t===B.SELECT}),N.jsx(J,{title:"Line (l)",icon:xe.Line,onClick:()=>{h(B.LINE)},active:t===B.LINE}),N.jsx(J,{title:"Rectangle (r)",icon:xe.Square,onClick:()=>{h(B.RECTANGLE)},active:t===B.RECTANGLE}),N.jsx(J,{title:"Circle (c)",icon:xe.Circle,onClick:()=>{h(B.CIRCLE)},active:t===B.CIRCLE}),N.jsx(J,{className:"mt-2",title:"Move",icon:xe.Expand,iconClassname:"transform rotate-45",onClick:()=>h(B.MOVE),active:t===B.MOVE}),N.jsx(J,{title:"Scale",icon:xe.Expand,onClick:()=>h(B.SCALE),active:t===B.SCALE}),N.jsx(J,{className:"mt-2",title:"Undo (ctrl + z)",icon:xe.AntiClockwise,onClick:()=>zg()}),N.jsx(J,{title:"Redo (ctrl + shift + z)",icon:xe.Clockwise,onClick:()=>Fg()}),N.jsx(J,{className:"mt-2",title:"Delete segments",icon:xe.Crop,onClick:()=>h(B.ERASER),active:t===B.ERASER}),N.jsx(Sl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:F_.map(y=>N.jsx(J,{title:"Change line color",style:{backgroundColor:y},active:y===i,onClick:()=>S_(y)},"line-color--"+y))}),N.jsx(Sl,{title:"Line width",label:String(o)+"px",children:Gg(9).map(y=>{const S=y+1;return N.jsx(J,{title:"Change line width",label:String(S)+"px",active:S===o,onClick:()=>T_(S)},"line-width--"+S)})}),N.jsxs(Sl,{title:"Snap angles",label:n+"",children:[N.jsx(J,{title:"Add guide every 5 degrees",label:"5",onClick:()=>v(5),active:n===5}),N.jsx(J,{title:"Add guide every 15 degrees",label:"15",onClick:()=>v(15),active:n===15}),N.jsx(J,{title:"Add guide every 30 degrees",label:"30",onClick:()=>v(30),active:n===30}),N.jsx(J,{title:"Add guide every 45 degrees",label:"45",onClick:()=>v(45),active:n===45}),N.jsx(J,{title:"Add guide every 90 degrees",label:"90",onClick:()=>v(90),active:n===90})]}),N.jsx(J,{title:"Zoom level",label:(a*100).toFixed(0)+"%",onClick:_}),N.jsx(J,{className:"relative mt-2",title:"Import image into the current drawing",icon:xe.Image,onClick:Gf,children:N.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async y=>{var p;const S=await ow((p=y.target.files)==null?void 0:p[0]),g=new pt(mm);g.start(),g.send({type:it.FILE_SELECTED,image:S}),Pt(g),y.target.files=null}})}),N.jsx(J,{className:"relative",title:"Load from JSON file",icon:xe.Folder,onClick:Gf,children:N.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async y=>{var S;await U_((S=y.target.files)==null?void 0:S[0]),y.target.files=null}})}),N.jsx(J,{title:"Save to JSON file",icon:xe.Save,onClick:()=>B_()}),N.jsx(J,{title:"Export to SVG file",label:"SVG",onClick:()=>W_()}),N.jsx(J,{title:"Export to PNG file",label:"PNG",onClick:()=>j_()}),N.jsx(J,{className:"mt-2",title:"Github",icon:xe.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function uw(){return N.jsx("div",{children:N.jsx(lw,{})})}function dd(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const s=t[i];e.push(...r.getIntersections(s))}}return e}function Wu(t,e){let n=null,r=1/0;return t.forEach(i=>{const s=ln(i.point,e);s<r&&(r=s,n=i)}),{distance:r,snapPoint:n}}function Vu(t,e,n){const{distance:r,snapPoint:i}=Wu(t.filter(l=>l.type!==M.AngleGuide),e);if(r<n)return i;const{distance:s,snapPoint:o}=Wu(t.filter(l=>l.type===M.AngleGuide),e);return s<n?o:null}function aw(t,e){return Gg(180/e,n=>{const i=n*e*(Math.PI/180),s=t.x+Math.cos(i),o=t.y+Math.sin(i);return new ut(new z(t.x-1e4*(s-t.x),t.y-1e4*(o-t.y)),new z(t.x+1e4*(s-t.x),t.y+1e4*(o-t.y)))})}function cw(t,e,n,r,i){let s=null,o=null;const l=[],a=[];e.forEach(v=>{const _=aw(v,r),y=Mr(n,_);y.distance<O_&&(a.push(y.entity),l.push({point:y.segment.start,type:M.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...dd(Fe(t)).map(v=>({point:v,type:M.Intersection}))],f=Vu(c,n,i);f&&(s=f);const d=[...l,...dd([...Fe(t),...a]).map(v=>({point:v,type:M.Intersection}))],h=Vu(d,n,i);return h&&(o=h),{angleGuides:a,entitySnapPoint:s,angleSnapPoint:o}}function $r(t,e,n,r,i,s=[]){t.strokeStyle=r,t.lineWidth=i,t.setLineDash(s),e&&(t.lineWidth=i+1),n&&t.setLineDash([5,5])}function hd(t,e){e.forEach(n=>{$r(t.context,rc(n),Ar(n),n.lineColor,n.lineWidth),n.draw(t)})}function fw(t,e){e.forEach(n=>{$r(t.context,rc(n),Ar(n),"#FF5500",1),n.draw(t)})}function dw(t,e,n){if(!e)return;const r=Et(e.point);$r(t.context,!1,!1,A_,1);const i=t.context;switch(n&&(i.beginPath(),i.moveTo(r.x-W/2,r.y),i.lineTo(r.x+W/2,r.y),i.moveTo(r.x,r.y-W/2),i.lineTo(r.x,r.y+W/2),i.stroke()),e.type){case M.LineEndPoint:i.strokeRect(r.x-W/2,r.y-W/2,W,W);break;case M.LineMidPoint:i.beginPath(),i.moveTo(r.x,r.y-W/2),i.lineTo(r.x-W/2,r.y+W/2),i.lineTo(r.x+W/2,r.y+W/2),i.closePath(),i.stroke();break;case M.AngleGuide:i.beginPath(),i.moveTo(r.x-W/2,r.y-W/2),i.lineTo(r.x+W/2,r.y-W/2),i.lineTo(r.x-W/2,r.y+W/2),i.lineTo(r.x+W/2,r.y+W/2),i.closePath(),i.stroke();break;case M.Intersection:i.beginPath(),i.moveTo(r.x-W/2,r.y-W/2),i.lineTo(r.x+W/2,r.y+W/2),i.moveTo(r.x+W/2,r.y-W/2),i.lineTo(r.x-W/2,r.y+W/2),i.stroke();break;case M.CircleCenter:i.beginPath(),i.arc(r.x,r.y,W/2,0,2*Math.PI),i.stroke();break;case M.CircleCardinal:i.beginPath(),i.moveTo(r.x,r.y-W/2),i.lineTo(r.x-W/2,r.y),i.lineTo(r.x,r.y+W/2),i.lineTo(r.x+W/2,r.y),i.closePath(),i.stroke();break}}function hw(t,e){e.forEach(n=>{$r(t.context,rc(n),Ar(n),Ug,Bg,Wg),n.draw(t)})}function pw(t,e){e&&($r(t.context,!1,!1,e.lineColor,e.lineWidth,e.lineStyle),e==null||e.draw(t))}function gw(t,e){e&&($r(t.context,!1,!1,"#FFF",1),t.context.beginPath(),t.context.moveTo(t.screenMouseLocation.x,t.screenMouseLocation.y-xs),t.context.lineTo(t.screenMouseLocation.x,t.screenMouseLocation.y+xs),t.context.moveTo(t.screenMouseLocation.x-xs,t.screenMouseLocation.y),t.context.lineTo(t.screenMouseLocation.x+xs,t.screenMouseLocation.y),t.context.stroke())}function mw(t){var e,n;t.canvasSize!==null&&t.context&&(t.context.fillStyle=L_,t.context.fillRect(0,0,(e=t.canvasSize)==null?void 0:e.x,(n=t.canvasSize)==null?void 0:n.y))}function vw(t){mw(t),hw(t,u_()),hd(t,Vs()),hd(t,Se()),fw(t,c_()),pw(t,Lg());const{snapPoint:e}=Wu(Fe([tc(),Og()]),jr()),n=!!e&&nc().some(r=>r.milliSecondsHovered>cc&&St(r.snapPoint.point,e.point));dw(t,e,n),gw(t,l_())}function yw(t,e,n,r,i){if(!t)return;const s=e.at(-1);let o;s?ln(t.point,s.snapPoint.point)<r?o=[...e.slice(0,e.length-1),{...s,milliSecondsHovered:s.milliSecondsHovered+i}]:s.milliSecondsHovered>=cc?o=[...e,{snapPoint:t,milliSecondsHovered:i}]:o=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:o=[{snapPoint:t,milliSecondsHovered:i}];const l=o.slice(0,k_);n(l)}Ll.createRoot(document.getElementById("root")).render(N.jsx(Um.StrictMode,{children:N.jsx(uw,{})}));function _w(){ic(!0)}function Ew(t){var i,s;ic(!0),m_(new z(t.clientX,t.clientY));const e=f_(),n=Zi(),r=Dt();if(e){const o=new z(n.x-(t.clientX-e.x)/r,n.y-(t.clientY-e.y)/r);lc(new z(t.clientX,t.clientY)),oc(o)}if(Cw(),((s=(i=Pe())==null?void 0:i.getSnapshot())==null?void 0:s.context.type)===B.SELECT){const o=Mr(jr(),Se());o.distance<ac?Nu([o.entity.id]):Nu([])}}function ww(){ic(!1)}function Sw(t){const e=Zi(),n=Dt(),r=jr(),i=n*(1-z_*(t.deltaY/Math.abs(t.deltaY)));Ng(i);const s=$o(Pg());oc(new z(e.x+(r.x-s.x),e.y+(r.y-s.y)))}function Tw(t){t.button===mo.Middle&&lc(new z(t.clientX,t.clientY))}function xw(t){if(t.button===mo.Middle&&lc(null),t.button===mo.Left){const e=Vu(Fe([tc(),Og()]),jr(),uc/Dt()),n=$o(new z(t.clientX,t.clientY)),r=e?e.point:n,i=Pe();i==null||i.send({type:it.MOUSE_CLICK,worldClickPoint:r,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function Iw(t){var e,n,r,i,s;t.key==="Escape"?(t.preventDefault(),(e=Pe())==null||e.send({type:it.ESC})):t.key==="Enter"?(t.preventDefault(),(n=Pe())==null||n.send({type:it.ENTER})):t.key==="Delete"?(t.preventDefault(),(r=Pe())==null||r.send({type:it.DELETE})):t.key==="z"&&t.ctrlKey&&!t.shiftKey?(t.preventDefault(),zg(),Q(null),q([]),(i=Pe())==null||i.send({type:it.ESC})):t.key==="z"&&t.ctrlKey&&t.shiftKey?(t.preventDefault(),Fg(),Q(null),q([]),(s=Pe())==null||s.send({type:it.ESC})):t.key==="l"?(t.preventDefault(),Pt(new pt(fm))):t.key==="c"?(t.preventDefault(),Pt(new pt(hm))):t.key==="r"?(t.preventDefault(),Pt(new pt(dm))):t.key==="s"?(t.preventDefault(),Pt(new pt(Fn))):t.key==="m"&&(t.preventDefault(),Pt(new pt(gm)))}function Cw(){const t=Ag(),e=Lg(),n=Se(),r=Dt(),i=jr(),l=nc().filter(a=>a.milliSecondsHovered>cc).map(a=>a.snapPoint.point);if(a_()){let a=null;e&&e.getShape()&&e.getFirstPoint()&&(a=e.getFirstPoint());const{angleGuides:c,entitySnapPoint:f,angleSnapPoint:d}=cw(n,Fe([a,...l]),i,t,uc/r);sc(c),Rg(f),Mg(d)}}function ym(t,e){var f,d,h,v,_;const n=ec(),r=Pg(),i=jr(),s=Dt(),o=Zi(),l=d_(),a=e-l;w_(e);const c={context:t,canvasSize:n,worldMouseLocation:i,screenMouseLocation:r,screenOffset:o,screenZoom:s};if((f=Pe())!=null&&f.getSnapshot().can({type:it.DRAW})&&((d=Pe())==null||d.send({type:it.DRAW,drawInfo:c})),((_=(v=(h=Pe())==null?void 0:h.getSnapshot())==null?void 0:v.context)==null?void 0:_.type)===B.SELECT){const{distance:y,entity:S}=Mr($o(r),Se());y<ac&&Nu([S.id])}yw(tc(),nc(),E_,uc/Dt(),a),vw(c),requestAnimationFrame(y=>{ym(t,y)})}function pd(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),p_(new z(window.innerWidth,window.innerHeight));const t=s_();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function Pw(){const t=document.getElementsByTagName("canvas")[0];if(t){g_(t),t.addEventListener("mousedown",Tw),t.addEventListener("mousemove",Ew),t.addEventListener("mouseup",xw),t.addEventListener("wheel",Sw),t.addEventListener("mouseout",ww),t.addEventListener("mouseenter",_w),document.addEventListener("keyup",Iw),window.addEventListener("resize",pd),pd();const e=t.getContext("2d");if(!e)return;ym(e,0);const n=new pt(vm[B.LINE]);n.start(),Pt(n)}}document.addEventListener("DOMContentLoaded",()=>{Pw()});
