var wm=Object.defineProperty;var Sm=(t,e,n)=>e in t?wm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>Sm(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Id={exports:{}},Ls={},xd={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=Symbol.for("react.element"),Im=Symbol.for("react.portal"),xm=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),Lm=Symbol.for("react.provider"),Am=Symbol.for("react.context"),Nm=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),Rm=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),xc=Symbol.iterator;function km(t){return t===null||typeof t!="object"?null:(t=xc&&t[xc]||t["@@iterator"],typeof t=="function"?t:null)}var Pd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cd=Object.assign,Ld={};function Br(t,e,n){this.props=t,this.context=e,this.refs=Ld,this.updater=n||Pd}Br.prototype.isReactComponent={};Br.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Br.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ad(){}Ad.prototype=Br.prototype;function Ya(t,e,n){this.props=t,this.context=e,this.refs=Ld,this.updater=n||Pd}var qa=Ya.prototype=new Ad;qa.constructor=Ya;Cd(qa,Br.prototype);qa.isPureReactComponent=!0;var Pc=Array.isArray,Nd=Object.prototype.hasOwnProperty,Xa={current:null},Od={key:!0,ref:!0,__self:!0,__source:!0};function Rd(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Nd.call(e,r)&&!Od.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:bi,type:t,key:o,ref:s,props:i,_owner:Xa.current}}function Dm(t,e){return{$$typeof:bi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ja(t){return typeof t=="object"&&t!==null&&t.$$typeof===bi}function zm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cc=/\/+/g;function el(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zm(""+t.key):e.toString(36)}function Oo(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case bi:case Im:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+el(s,0):r,Pc(i)?(n="",t!=null&&(n=t.replace(Cc,"$&/")+"/"),Oo(i,e,n,"",function(c){return c})):i!=null&&(Ja(i)&&(i=Dm(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Cc,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Pc(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+el(o,l);s+=Oo(o,e,n,u,i)}else if(u=km(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+el(o,l++),s+=Oo(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ao(t,e,n){if(t==null)return t;var r=[],i=0;return Oo(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Um(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},Ro={transition:null},Fm={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Ro,ReactCurrentOwner:Xa};function Md(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:ao,forEach:function(t,e,n){ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ao(t,function(){e++}),e},toArray:function(t){return ao(t,function(e){return e})||[]},only:function(t){if(!Ja(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=Br;V.Fragment=xm;V.Profiler=Cm;V.PureComponent=Ya;V.StrictMode=Pm;V.Suspense=Om;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm;V.act=Md;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Cd({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Xa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Nd.call(e,u)&&!Od.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:bi,type:t.type,key:i,ref:o,props:r,_owner:s}};V.createContext=function(t){return t={$$typeof:Am,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lm,_context:t},t.Consumer=t};V.createElement=Rd;V.createFactory=function(t){var e=Rd.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Nm,render:t}};V.isValidElement=Ja;V.lazy=function(t){return{$$typeof:Mm,_payload:{_status:-1,_result:t},_init:Um}};V.memo=function(t,e){return{$$typeof:Rm,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Ro.transition;Ro.transition={};try{t()}finally{Ro.transition=e}};V.unstable_act=Md;V.useCallback=function(t,e){return Me.current.useCallback(t,e)};V.useContext=function(t){return Me.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};V.useEffect=function(t,e){return Me.current.useEffect(t,e)};V.useId=function(){return Me.current.useId()};V.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Me.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};V.useRef=function(t){return Me.current.useRef(t)};V.useState=function(t){return Me.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Me.current.useTransition()};V.version="18.3.1";xd.exports=V;var R=xd.exports;const Wm=Tm(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=R,Vm=Symbol.for("react.element"),Gm=Symbol.for("react.fragment"),jm=Object.prototype.hasOwnProperty,$m=Bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hm={key:!0,ref:!0,__self:!0,__source:!0};function kd(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)jm.call(e,r)&&!Hm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Vm,type:t,key:o,ref:s,props:i,_owner:$m.current}}Ls.Fragment=Gm;Ls.jsx=kd;Ls.jsxs=kd;Id.exports=Ls;var k=Id.exports,Rl={},Dd={exports:{}},Ke={},zd={exports:{}},Ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,U){var B=A.length;A.push(U);e:for(;0<B;){var se=B-1>>>1,fe=A[se];if(0<i(fe,U))A[se]=U,A[B]=fe,B=se;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var U=A[0],B=A.pop();if(B!==U){A[0]=B;e:for(var se=0,fe=A.length,so=fe>>>1;se<so;){var wn=2*(se+1)-1,Zs=A[wn],Sn=wn+1,lo=A[Sn];if(0>i(Zs,B))Sn<fe&&0>i(lo,Zs)?(A[se]=lo,A[Sn]=B,se=Sn):(A[se]=Zs,A[wn]=B,se=wn);else if(Sn<fe&&0>i(lo,B))A[se]=lo,A[Sn]=B,se=Sn;else break e}}return U}function i(A,U){var B=A.sortIndex-U.sortIndex;return B!==0?B:A.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,_=!1,y=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=A)r(c),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(c)}}function E(A){if(v=!1,m(A),!y)if(n(u)!==null)y=!0,Xs(I);else{var U=n(c);U!==null&&Js(E,U.startTime-A)}}function I(A,U){y=!1,v&&(v=!1,g(O),O=-1),_=!0;var B=h;try{for(m(U),d=n(u);d!==null&&(!(d.expirationTime>U)||A&&!Ve());){var se=d.callback;if(typeof se=="function"){d.callback=null,h=d.priorityLevel;var fe=se(d.expirationTime<=U);U=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(u)&&r(u),m(U)}else r(u);d=n(u)}if(d!==null)var so=!0;else{var wn=n(c);wn!==null&&Js(E,wn.startTime-U),so=!1}return so}finally{d=null,h=B,_=!1}}var P=!1,L=null,O=-1,$=5,M=-1;function Ve(){return!(t.unstable_now()-M<$)}function Qr(){if(L!==null){var A=t.unstable_now();M=A;var U=!0;try{U=L(!0,A)}finally{U?Yr():(P=!1,L=null)}}else P=!1}var Yr;if(typeof p=="function")Yr=function(){p(Qr)};else if(typeof MessageChannel<"u"){var Ic=new MessageChannel,Em=Ic.port2;Ic.port1.onmessage=Qr,Yr=function(){Em.postMessage(null)}}else Yr=function(){T(Qr,0)};function Xs(A){L=A,P||(P=!0,Yr())}function Js(A,U){O=T(function(){A(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,Xs(I))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var B=h;h=U;try{return A()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,U){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=h;h=A;try{return U()}finally{h=B}},t.unstable_scheduleCallback=function(A,U,B){var se=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?se+B:se):B=se,A){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=B+fe,A={id:f++,callback:U,priorityLevel:A,startTime:B,expirationTime:fe,sortIndex:-1},B>se?(A.sortIndex=B,e(c,A),n(u)===null&&A===n(c)&&(v?(g(O),O=-1):v=!0,Js(E,B-se))):(A.sortIndex=fe,e(u,A),y||_||(y=!0,Xs(I))),A},t.unstable_shouldYield=Ve,t.unstable_wrapCallback=function(A){var U=h;return function(){var B=h;h=U;try{return A.apply(this,arguments)}finally{h=B}}}})(Ud);zd.exports=Ud;var bm=zd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km=R,He=bm;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fd=new Set,xi={};function $n(t,e){Sr(t,e),Sr(t+"Capture",e)}function Sr(t,e){for(xi[t]=e,t=0;t<e.length;t++)Fd.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=Object.prototype.hasOwnProperty,Qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lc={},Ac={};function Ym(t){return Ml.call(Ac,t)?!0:Ml.call(Lc,t)?!1:Qm.test(t)?Ac[t]=!0:(Lc[t]=!0,!1)}function qm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xm(t,e,n,r){if(e===null||typeof e>"u"||qm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ke(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var Za=/[\-:]([a-z])/g;function eu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Za,eu);Se[e]=new ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Za,eu);Se[e]=new ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Za,eu);Se[e]=new ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new ke(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function tu(t,e,n,r){var i=Se.hasOwnProperty(e)?Se[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xm(e,n,i,r)&&(n=null),r||i===null?Ym(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qt=Km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uo=Symbol.for("react.element"),tr=Symbol.for("react.portal"),nr=Symbol.for("react.fragment"),nu=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),Wd=Symbol.for("react.provider"),Bd=Symbol.for("react.context"),ru=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),zl=Symbol.for("react.suspense_list"),iu=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),Vd=Symbol.for("react.offscreen"),Nc=Symbol.iterator;function Xr(t){return t===null||typeof t!="object"?null:(t=Nc&&t[Nc]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Object.assign,tl;function li(t){if(tl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tl=e&&e[1]||""}return`
`+tl+t}var nl=!1;function rl(t,e){if(!t||nl)return"";nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{nl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?li(t):""}function Jm(t){switch(t.tag){case 5:return li(t.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 2:case 15:return t=rl(t.type,!1),t;case 11:return t=rl(t.type.render,!1),t;case 1:return t=rl(t.type,!0),t;default:return""}}function Ul(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nr:return"Fragment";case tr:return"Portal";case kl:return"Profiler";case nu:return"StrictMode";case Dl:return"Suspense";case zl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bd:return(t.displayName||"Context")+".Consumer";case Wd:return(t._context.displayName||"Context")+".Provider";case ru:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iu:return e=t.displayName||null,e!==null?e:Ul(t.type)||"Memo";case qt:e=t._payload,t=t._init;try{return Ul(t(e))}catch{}}return null}function Zm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ul(e);case 8:return e===nu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function e0(t){var e=Gd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function co(t){t._valueTracker||(t._valueTracker=e0(t))}function jd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fl(t,e){var n=e.checked;return ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $d(t,e){e=e.checked,e!=null&&tu(t,"checked",e,!1)}function Wl(t,e){$d(t,e);var n=hn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bl(t,e.type,hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bl(t,e,n){(e!=="number"||Ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ai=Array.isArray;function gr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(ai(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hn(n)}}function Hd(t,e){var n=hn(e.value),r=hn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fo,Kd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t0=["Webkit","ms","Moz","O"];Object.keys(hi).forEach(function(t){t0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hi[e]=hi[t]})});function Qd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hi.hasOwnProperty(t)&&hi[t]?(""+e).trim():e+"px"}function Yd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var n0=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jl(t,e){if(e){if(n0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=null;function ou(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bl=null,mr=null,_r=null;function Dc(t){if(t=Yi(t)){if(typeof bl!="function")throw Error(S(280));var e=t.stateNode;e&&(e=Ms(e),bl(t.stateNode,t.type,e))}}function qd(t){mr?_r?_r.push(t):_r=[t]:mr=t}function Xd(){if(mr){var t=mr,e=_r;if(_r=mr=null,Dc(t),e)for(t=0;t<e.length;t++)Dc(e[t])}}function Jd(t,e){return t(e)}function Zd(){}var il=!1;function eh(t,e,n){if(il)return t(e,n);il=!0;try{return Jd(t,e,n)}finally{il=!1,(mr!==null||_r!==null)&&(Zd(),Xd())}}function Ci(t,e){var n=t.stateNode;if(n===null)return null;var r=Ms(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Kl=!1;if(Ft)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){Kl=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{Kl=!1}function r0(t,e,n,r,i,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var pi=!1,Qo=null,Yo=!1,Ql=null,i0={onError:function(t){pi=!0,Qo=t}};function o0(t,e,n,r,i,o,s,l,u){pi=!1,Qo=null,r0.apply(i0,arguments)}function s0(t,e,n,r,i,o,s,l,u){if(o0.apply(this,arguments),pi){if(pi){var c=Qo;pi=!1,Qo=null}else throw Error(S(198));Yo||(Yo=!0,Ql=c)}}function Hn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function th(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zc(t){if(Hn(t)!==t)throw Error(S(188))}function l0(t){var e=t.alternate;if(!e){if(e=Hn(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return zc(i),t;if(o===r)return zc(i),e;o=o.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function nh(t){return t=l0(t),t!==null?rh(t):null}function rh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rh(t);if(e!==null)return e;t=t.sibling}return null}var ih=He.unstable_scheduleCallback,Uc=He.unstable_cancelCallback,a0=He.unstable_shouldYield,u0=He.unstable_requestPaint,le=He.unstable_now,c0=He.unstable_getCurrentPriorityLevel,su=He.unstable_ImmediatePriority,oh=He.unstable_UserBlockingPriority,qo=He.unstable_NormalPriority,f0=He.unstable_LowPriority,sh=He.unstable_IdlePriority,As=null,St=null;function d0(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(As,t,void 0,(t.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:g0,h0=Math.log,p0=Math.LN2;function g0(t){return t>>>=0,t===0?32:31-(h0(t)/p0|0)|0}var ho=64,po=4194304;function ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=ui(l):(o&=s,o!==0&&(r=ui(o)))}else s=n&~i,s!==0?r=ui(s):o!==0&&(r=ui(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ut(e),i=1<<n,r|=t[n],e&=~i;return r}function m0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ut(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=m0(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lh(){var t=ho;return ho<<=1,!(ho&4194240)&&(ho=64),t}function ol(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ki(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ut(e),t[e]=n}function v0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ut(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function lu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var K=0;function ah(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uh,au,ch,fh,dh,ql=!1,go=[],on=null,sn=null,ln=null,Li=new Map,Ai=new Map,Zt=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(t,e){switch(t){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Li.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(e.pointerId)}}function Zr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Yi(e),e!==null&&au(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function E0(t,e,n,r,i){switch(e){case"focusin":return on=Zr(on,t,e,n,r,i),!0;case"dragenter":return sn=Zr(sn,t,e,n,r,i),!0;case"mouseover":return ln=Zr(ln,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Li.set(o,Zr(Li.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ai.set(o,Zr(Ai.get(o)||null,t,e,n,r,i)),!0}return!1}function hh(t){var e=Cn(t.target);if(e!==null){var n=Hn(e);if(n!==null){if(e=n.tag,e===13){if(e=th(n),e!==null){t.blockedOn=e,dh(t.priority,function(){ch(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hl=r,n.target.dispatchEvent(r),Hl=null}else return e=Yi(n),e!==null&&au(e),t.blockedOn=n,!1;e.shift()}return!0}function Wc(t,e,n){Mo(t)&&n.delete(e)}function w0(){ql=!1,on!==null&&Mo(on)&&(on=null),sn!==null&&Mo(sn)&&(sn=null),ln!==null&&Mo(ln)&&(ln=null),Li.forEach(Wc),Ai.forEach(Wc)}function ei(t,e){t.blockedOn===e&&(t.blockedOn=null,ql||(ql=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,w0)))}function Ni(t){function e(i){return ei(i,t)}if(0<go.length){ei(go[0],t);for(var n=1;n<go.length;n++){var r=go[n];r.blockedOn===t&&(r.blockedOn=null)}}for(on!==null&&ei(on,t),sn!==null&&ei(sn,t),ln!==null&&ei(ln,t),Li.forEach(e),Ai.forEach(e),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)hh(n),n.blockedOn===null&&Zt.shift()}var vr=Qt.ReactCurrentBatchConfig,Jo=!0;function S0(t,e,n,r){var i=K,o=vr.transition;vr.transition=null;try{K=1,uu(t,e,n,r)}finally{K=i,vr.transition=o}}function T0(t,e,n,r){var i=K,o=vr.transition;vr.transition=null;try{K=4,uu(t,e,n,r)}finally{K=i,vr.transition=o}}function uu(t,e,n,r){if(Jo){var i=Xl(t,e,n,r);if(i===null)gl(t,e,r,Zo,n),Fc(t,r);else if(E0(i,t,e,n,r))r.stopPropagation();else if(Fc(t,r),e&4&&-1<y0.indexOf(t)){for(;i!==null;){var o=Yi(i);if(o!==null&&uh(o),o=Xl(t,e,n,r),o===null&&gl(t,e,r,Zo,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else gl(t,e,r,null,n)}}var Zo=null;function Xl(t,e,n,r){if(Zo=null,t=ou(r),t=Cn(t),t!==null)if(e=Hn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=th(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zo=t,null}function ph(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c0()){case su:return 1;case oh:return 4;case qo:case f0:return 16;case sh:return 536870912;default:return 16}default:return 16}}var tn=null,cu=null,ko=null;function gh(){if(ko)return ko;var t,e=cu,n=e.length,r,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ko=i.slice(t,1<r?1-r:void 0)}function Do(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mo(){return!0}function Bc(){return!1}function Qe(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mo:Bc,this.isPropagationStopped=Bc,this}return ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),e}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=Qe(Vr),Qi=ie({},Vr,{view:0,detail:0}),I0=Qe(Qi),sl,ll,ti,Ns=ie({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(sl=t.screenX-ti.screenX,ll=t.screenY-ti.screenY):ll=sl=0,ti=t),sl)},movementY:function(t){return"movementY"in t?t.movementY:ll}}),Vc=Qe(Ns),x0=ie({},Ns,{dataTransfer:0}),P0=Qe(x0),C0=ie({},Qi,{relatedTarget:0}),al=Qe(C0),L0=ie({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),A0=Qe(L0),N0=ie({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O0=Qe(N0),R0=ie({},Vr,{data:0}),Gc=Qe(R0),M0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=D0[t])?!!e[t]:!1}function du(){return z0}var U0=ie({},Qi,{key:function(t){if(t.key){var e=M0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Do(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:du,charCode:function(t){return t.type==="keypress"?Do(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Do(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F0=Qe(U0),W0=ie({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=Qe(W0),B0=ie({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:du}),V0=Qe(B0),G0=ie({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),j0=Qe(G0),$0=ie({},Ns,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=Qe($0),b0=[9,13,27,32],hu=Ft&&"CompositionEvent"in window,gi=null;Ft&&"documentMode"in document&&(gi=document.documentMode);var K0=Ft&&"TextEvent"in window&&!gi,mh=Ft&&(!hu||gi&&8<gi&&11>=gi),$c=" ",Hc=!1;function _h(t,e){switch(t){case"keyup":return b0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rr=!1;function Q0(t,e){switch(t){case"compositionend":return vh(e);case"keypress":return e.which!==32?null:(Hc=!0,$c);case"textInput":return t=e.data,t===$c&&Hc?null:t;default:return null}}function Y0(t,e){if(rr)return t==="compositionend"||!hu&&_h(t,e)?(t=gh(),ko=cu=tn=null,rr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mh&&e.locale!=="ko"?null:e.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q0[t.type]:e==="textarea"}function yh(t,e,n,r){qd(r),e=es(e,"onChange"),0<e.length&&(n=new fu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mi=null,Oi=null;function X0(t){Nh(t,0)}function Os(t){var e=sr(t);if(jd(e))return t}function J0(t,e){if(t==="change")return e}var Eh=!1;if(Ft){var ul;if(Ft){var cl="oninput"in document;if(!cl){var Kc=document.createElement("div");Kc.setAttribute("oninput","return;"),cl=typeof Kc.oninput=="function"}ul=cl}else ul=!1;Eh=ul&&(!document.documentMode||9<document.documentMode)}function Qc(){mi&&(mi.detachEvent("onpropertychange",wh),Oi=mi=null)}function wh(t){if(t.propertyName==="value"&&Os(Oi)){var e=[];yh(e,Oi,t,ou(t)),eh(X0,e)}}function Z0(t,e,n){t==="focusin"?(Qc(),mi=e,Oi=n,mi.attachEvent("onpropertychange",wh)):t==="focusout"&&Qc()}function e_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Os(Oi)}function t_(t,e){if(t==="click")return Os(e)}function n_(t,e){if(t==="input"||t==="change")return Os(e)}function r_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:r_;function Ri(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ml.call(e,i)||!ht(t[i],e[i]))return!1}return!0}function Yc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qc(t,e){var n=Yc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yc(n)}}function Sh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Th(){for(var t=window,e=Ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ko(t.document)}return e}function pu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function i_(t){var e=Th(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sh(n.ownerDocument.documentElement,n)){if(r!==null&&pu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=qc(n,o);var s=qc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var o_=Ft&&"documentMode"in document&&11>=document.documentMode,ir=null,Jl=null,_i=null,Zl=!1;function Xc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zl||ir==null||ir!==Ko(r)||(r=ir,"selectionStart"in r&&pu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Ri(_i,r)||(_i=r,r=es(Jl,"onSelect"),0<r.length&&(e=new fu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ir)))}function _o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var or={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionend:_o("Transition","TransitionEnd")},fl={},Ih={};Ft&&(Ih=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Rs(t){if(fl[t])return fl[t];if(!or[t])return t;var e=or[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ih)return fl[t]=e[n];return t}var xh=Rs("animationend"),Ph=Rs("animationiteration"),Ch=Rs("animationstart"),Lh=Rs("transitionend"),Ah=new Map,Jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(t,e){Ah.set(t,e),$n(e,[t])}for(var dl=0;dl<Jc.length;dl++){var hl=Jc[dl],s_=hl.toLowerCase(),l_=hl[0].toUpperCase()+hl.slice(1);_n(s_,"on"+l_)}_n(xh,"onAnimationEnd");_n(Ph,"onAnimationIteration");_n(Ch,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(Lh,"onTransitionEnd");Sr("onMouseEnter",["mouseout","mouseover"]);Sr("onMouseLeave",["mouseout","mouseover"]);Sr("onPointerEnter",["pointerout","pointerover"]);Sr("onPointerLeave",["pointerout","pointerover"]);$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$n("onBeforeInput",["compositionend","keypress","textInput","paste"]);$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ci));function Zc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,s0(r,e,void 0,t),t.currentTarget=null}function Nh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Zc(i,l,c),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Zc(i,l,c),o=u}}}if(Yo)throw t=Ql,Yo=!1,Ql=null,t}function X(t,e){var n=e[ia];n===void 0&&(n=e[ia]=new Set);var r=t+"__bubble";n.has(r)||(Oh(e,t,2,!1),n.add(r))}function pl(t,e,n){var r=0;e&&(r|=4),Oh(n,t,r,e)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Mi(t){if(!t[vo]){t[vo]=!0,Fd.forEach(function(n){n!=="selectionchange"&&(a_.has(n)||pl(n,!1,t),pl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vo]||(e[vo]=!0,pl("selectionchange",!1,e))}}function Oh(t,e,n,r){switch(ph(e)){case 1:var i=S0;break;case 4:i=T0;break;default:i=uu}n=i.bind(null,e,n,t),i=void 0,!Kl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gl(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Cn(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}eh(function(){var c=o,f=ou(n),d=[];e:{var h=Ah.get(t);if(h!==void 0){var _=fu,y=t;switch(t){case"keypress":if(Do(n)===0)break e;case"keydown":case"keyup":_=F0;break;case"focusin":y="focus",_=al;break;case"focusout":y="blur",_=al;break;case"beforeblur":case"afterblur":_=al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=P0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=V0;break;case xh:case Ph:case Ch:_=A0;break;case Lh:_=j0;break;case"scroll":_=I0;break;case"wheel":_=H0;break;case"copy":case"cut":case"paste":_=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=jc}var v=(e&4)!==0,T=!v&&t==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var p=c,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Ci(p,g),E!=null&&v.push(ki(p,E,m)))),T)break;p=p.return}0<v.length&&(h=new _(h,y,null,n,f),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",h&&n!==Hl&&(y=n.relatedTarget||n.fromElement)&&(Cn(y)||y[Wt]))break e;if((_||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?Cn(y):null,y!==null&&(T=Hn(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(v=Vc,E="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=jc,E="onPointerLeave",g="onPointerEnter",p="pointer"),T=_==null?h:sr(_),m=y==null?h:sr(y),h=new v(E,p+"leave",_,n,f),h.target=T,h.relatedTarget=m,E=null,Cn(f)===c&&(v=new v(g,p+"enter",y,n,f),v.target=m,v.relatedTarget=T,E=v),T=E,_&&y)t:{for(v=_,g=y,p=0,m=v;m;m=qn(m))p++;for(m=0,E=g;E;E=qn(E))m++;for(;0<p-m;)v=qn(v),p--;for(;0<m-p;)g=qn(g),m--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=qn(v),g=qn(g)}v=null}else v=null;_!==null&&ef(d,h,_,v,!1),y!==null&&T!==null&&ef(d,T,y,v,!0)}}e:{if(h=c?sr(c):window,_=h.nodeName&&h.nodeName.toLowerCase(),_==="select"||_==="input"&&h.type==="file")var I=J0;else if(bc(h))if(Eh)I=n_;else{I=e_;var P=Z0}else(_=h.nodeName)&&_.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=t_);if(I&&(I=I(t,c))){yh(d,I,n,f);break e}P&&P(t,h,c),t==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&Bl(h,"number",h.value)}switch(P=c?sr(c):window,t){case"focusin":(bc(P)||P.contentEditable==="true")&&(ir=P,Jl=c,_i=null);break;case"focusout":_i=Jl=ir=null;break;case"mousedown":Zl=!0;break;case"contextmenu":case"mouseup":case"dragend":Zl=!1,Xc(d,n,f);break;case"selectionchange":if(o_)break;case"keydown":case"keyup":Xc(d,n,f)}var L;if(hu)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else rr?_h(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(mh&&n.locale!=="ko"&&(rr||O!=="onCompositionStart"?O==="onCompositionEnd"&&rr&&(L=gh()):(tn=f,cu="value"in tn?tn.value:tn.textContent,rr=!0)),P=es(c,O),0<P.length&&(O=new Gc(O,t,null,n,f),d.push({event:O,listeners:P}),L?O.data=L:(L=vh(n),L!==null&&(O.data=L)))),(L=K0?Q0(t,n):Y0(t,n))&&(c=es(c,"onBeforeInput"),0<c.length&&(f=new Gc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=L))}Nh(d,e)})}function ki(t,e,n){return{instance:t,listener:e,currentTarget:n}}function es(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ci(t,n),o!=null&&r.unshift(ki(t,o,i)),o=Ci(t,e),o!=null&&r.push(ki(t,o,i))),t=t.return}return r}function qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ef(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ci(n,o),u!=null&&s.unshift(ki(n,u,l))):i||(u=Ci(n,o),u!=null&&s.push(ki(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var u_=/\r\n?/g,c_=/\u0000|\uFFFD/g;function tf(t){return(typeof t=="string"?t:""+t).replace(u_,`
`).replace(c_,"")}function yo(t,e,n){if(e=tf(e),tf(t)!==e&&n)throw Error(S(425))}function ts(){}var ea=null,ta=null;function na(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ra=typeof setTimeout=="function"?setTimeout:void 0,f_=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,d_=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(t){return nf.resolve(null).then(t).catch(h_)}:ra;function h_(t){setTimeout(function(){throw t})}function ml(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ni(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ni(e)}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),vt="__reactFiber$"+Gr,Di="__reactProps$"+Gr,Wt="__reactContainer$"+Gr,ia="__reactEvents$"+Gr,p_="__reactListeners$"+Gr,g_="__reactHandles$"+Gr;function Cn(t){var e=t[vt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wt]||n[vt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rf(t);t!==null;){if(n=t[vt])return n;t=rf(t)}return e}t=n,n=t.parentNode}return null}function Yi(t){return t=t[vt]||t[Wt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function Ms(t){return t[Di]||null}var oa=[],lr=-1;function vn(t){return{current:t}}function Z(t){0>lr||(t.current=oa[lr],oa[lr]=null,lr--)}function Y(t,e){lr++,oa[lr]=t.current,t.current=e}var pn={},Ce=vn(pn),Ue=vn(!1),kn=pn;function Tr(t,e){var n=t.type.contextTypes;if(!n)return pn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fe(t){return t=t.childContextTypes,t!=null}function ns(){Z(Ue),Z(Ce)}function of(t,e,n){if(Ce.current!==pn)throw Error(S(168));Y(Ce,e),Y(Ue,n)}function Rh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,Zm(t)||"Unknown",i));return ie({},n,r)}function rs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pn,kn=Ce.current,Y(Ce,t),Y(Ue,Ue.current),!0}function sf(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=Rh(t,e,kn),r.__reactInternalMemoizedMergedChildContext=t,Z(Ue),Z(Ce),Y(Ce,t)):Z(Ue),Y(Ue,n)}var Ot=null,ks=!1,_l=!1;function Mh(t){Ot===null?Ot=[t]:Ot.push(t)}function m_(t){ks=!0,Mh(t)}function yn(){if(!_l&&Ot!==null){_l=!0;var t=0,e=K;try{var n=Ot;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ot=null,ks=!1}catch(i){throw Ot!==null&&(Ot=Ot.slice(t+1)),ih(su,yn),i}finally{K=e,_l=!1}}return null}var ar=[],ur=0,is=null,os=0,Ye=[],qe=0,Dn=null,Rt=1,Mt="";function In(t,e){ar[ur++]=os,ar[ur++]=is,is=t,os=e}function kh(t,e,n){Ye[qe++]=Rt,Ye[qe++]=Mt,Ye[qe++]=Dn,Dn=t;var r=Rt;t=Mt;var i=32-ut(r)-1;r&=~(1<<i),n+=1;var o=32-ut(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Rt=1<<32-ut(e)+i|n<<i|r,Mt=o+t}else Rt=1<<o|n<<i|r,Mt=t}function gu(t){t.return!==null&&(In(t,1),kh(t,1,0))}function mu(t){for(;t===is;)is=ar[--ur],ar[ur]=null,os=ar[--ur],ar[ur]=null;for(;t===Dn;)Dn=Ye[--qe],Ye[qe]=null,Mt=Ye[--qe],Ye[qe]=null,Rt=Ye[--qe],Ye[qe]=null}var $e=null,je=null,te=!1,st=null;function Dh(t,e){var n=Xe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$e=t,je=an(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$e=t,je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dn!==null?{id:Rt,overflow:Mt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$e=t,je=null,!0):!1;default:return!1}}function sa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function la(t){if(te){var e=je;if(e){var n=e;if(!lf(t,e)){if(sa(t))throw Error(S(418));e=an(n.nextSibling);var r=$e;e&&lf(t,e)?Dh(r,n):(t.flags=t.flags&-4097|2,te=!1,$e=t)}}else{if(sa(t))throw Error(S(418));t.flags=t.flags&-4097|2,te=!1,$e=t}}}function af(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$e=t}function Eo(t){if(t!==$e)return!1;if(!te)return af(t),te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!na(t.type,t.memoizedProps)),e&&(e=je)){if(sa(t))throw zh(),Error(S(418));for(;e;)Dh(t,e),e=an(e.nextSibling)}if(af(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){je=an(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}je=null}}else je=$e?an(t.stateNode.nextSibling):null;return!0}function zh(){for(var t=je;t;)t=an(t.nextSibling)}function Ir(){je=$e=null,te=!1}function _u(t){st===null?st=[t]:st.push(t)}var __=Qt.ReactCurrentBatchConfig;function ni(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function wo(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uf(t){var e=t._init;return e(t._payload)}function Uh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=dn(g,p),g.index=0,g.sibling=null,g}function o(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,E){return p===null||p.tag!==6?(p=Il(m,g.mode,E),p.return=g,p):(p=i(p,m),p.return=g,p)}function u(g,p,m,E){var I=m.type;return I===nr?f(g,p,m.props.children,E,m.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===qt&&uf(I)===p.type)?(E=i(p,m.props),E.ref=ni(g,p,m),E.return=g,E):(E=Go(m.type,m.key,m.props,null,g.mode,E),E.ref=ni(g,p,m),E.return=g,E)}function c(g,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=xl(m,g.mode,E),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,E,I){return p===null||p.tag!==7?(p=Rn(m,g.mode,E,I),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Il(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case uo:return m=Go(p.type,p.key,p.props,null,g.mode,m),m.ref=ni(g,null,p),m.return=g,m;case tr:return p=xl(p,g.mode,m),p.return=g,p;case qt:var E=p._init;return d(g,E(p._payload),m)}if(ai(p)||Xr(p))return p=Rn(p,g.mode,m,null),p.return=g,p;wo(g,p)}return null}function h(g,p,m,E){var I=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return I!==null?null:l(g,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case uo:return m.key===I?u(g,p,m,E):null;case tr:return m.key===I?c(g,p,m,E):null;case qt:return I=m._init,h(g,p,I(m._payload),E)}if(ai(m)||Xr(m))return I!==null?null:f(g,p,m,E,null);wo(g,m)}return null}function _(g,p,m,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,l(p,g,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uo:return g=g.get(E.key===null?m:E.key)||null,u(p,g,E,I);case tr:return g=g.get(E.key===null?m:E.key)||null,c(p,g,E,I);case qt:var P=E._init;return _(g,p,m,P(E._payload),I)}if(ai(E)||Xr(E))return g=g.get(m)||null,f(p,g,E,I,null);wo(p,E)}return null}function y(g,p,m,E){for(var I=null,P=null,L=p,O=p=0,$=null;L!==null&&O<m.length;O++){L.index>O?($=L,L=null):$=L.sibling;var M=h(g,L,m[O],E);if(M===null){L===null&&(L=$);break}t&&L&&M.alternate===null&&e(g,L),p=o(M,p,O),P===null?I=M:P.sibling=M,P=M,L=$}if(O===m.length)return n(g,L),te&&In(g,O),I;if(L===null){for(;O<m.length;O++)L=d(g,m[O],E),L!==null&&(p=o(L,p,O),P===null?I=L:P.sibling=L,P=L);return te&&In(g,O),I}for(L=r(g,L);O<m.length;O++)$=_(L,g,O,m[O],E),$!==null&&(t&&$.alternate!==null&&L.delete($.key===null?O:$.key),p=o($,p,O),P===null?I=$:P.sibling=$,P=$);return t&&L.forEach(function(Ve){return e(g,Ve)}),te&&In(g,O),I}function v(g,p,m,E){var I=Xr(m);if(typeof I!="function")throw Error(S(150));if(m=I.call(m),m==null)throw Error(S(151));for(var P=I=null,L=p,O=p=0,$=null,M=m.next();L!==null&&!M.done;O++,M=m.next()){L.index>O?($=L,L=null):$=L.sibling;var Ve=h(g,L,M.value,E);if(Ve===null){L===null&&(L=$);break}t&&L&&Ve.alternate===null&&e(g,L),p=o(Ve,p,O),P===null?I=Ve:P.sibling=Ve,P=Ve,L=$}if(M.done)return n(g,L),te&&In(g,O),I;if(L===null){for(;!M.done;O++,M=m.next())M=d(g,M.value,E),M!==null&&(p=o(M,p,O),P===null?I=M:P.sibling=M,P=M);return te&&In(g,O),I}for(L=r(g,L);!M.done;O++,M=m.next())M=_(L,g,O,M.value,E),M!==null&&(t&&M.alternate!==null&&L.delete(M.key===null?O:M.key),p=o(M,p,O),P===null?I=M:P.sibling=M,P=M);return t&&L.forEach(function(Qr){return e(g,Qr)}),te&&In(g,O),I}function T(g,p,m,E){if(typeof m=="object"&&m!==null&&m.type===nr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case uo:e:{for(var I=m.key,P=p;P!==null;){if(P.key===I){if(I=m.type,I===nr){if(P.tag===7){n(g,P.sibling),p=i(P,m.props.children),p.return=g,g=p;break e}}else if(P.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===qt&&uf(I)===P.type){n(g,P.sibling),p=i(P,m.props),p.ref=ni(g,P,m),p.return=g,g=p;break e}n(g,P);break}else e(g,P);P=P.sibling}m.type===nr?(p=Rn(m.props.children,g.mode,E,m.key),p.return=g,g=p):(E=Go(m.type,m.key,m.props,null,g.mode,E),E.ref=ni(g,p,m),E.return=g,g=E)}return s(g);case tr:e:{for(P=m.key;p!==null;){if(p.key===P)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=xl(m,g.mode,E),p.return=g,g=p}return s(g);case qt:return P=m._init,T(g,p,P(m._payload),E)}if(ai(m))return y(g,p,m,E);if(Xr(m))return v(g,p,m,E);wo(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=Il(m,g.mode,E),p.return=g,g=p),s(g)):n(g,p)}return T}var xr=Uh(!0),Fh=Uh(!1),ss=vn(null),ls=null,cr=null,vu=null;function yu(){vu=cr=ls=null}function Eu(t){var e=ss.current;Z(ss),t._currentValue=e}function aa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yr(t,e){ls=t,vu=cr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ze=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(vu!==t)if(t={context:t,memoizedValue:e,next:null},cr===null){if(ls===null)throw Error(S(308));cr=t,ls.dependencies={lanes:0,firstContext:t}}else cr=cr.next=t;return e}var Ln=null;function wu(t){Ln===null?Ln=[t]:Ln.push(t)}function Wh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Bt(t,r)}function Bt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xt=!1;function Su(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function un(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,j&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Bt(t,n)}return i=r.interleaved,i===null?(e.next=e,wu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Bt(t,n)}function zo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lu(t,n)}}function cf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function as(t,e,n,r){var i=t.updateQueue;Xt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var d=i.baseState;s=0,f=c=u=null,l=o;do{var h=l.lane,_=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,v=l;switch(h=e,_=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(_,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(_,d,h):y,h==null)break e;d=ie({},d,h);break e;case 2:Xt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else _={eventTime:_,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=_,u=d):f=f.next=_,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Un|=s,t.lanes=s,t.memoizedState=d}}function ff(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var qi={},Tt=vn(qi),zi=vn(qi),Ui=vn(qi);function An(t){if(t===qi)throw Error(S(174));return t}function Tu(t,e){switch(Y(Ui,e),Y(zi,t),Y(Tt,qi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gl(e,t)}Z(Tt),Y(Tt,e)}function Pr(){Z(Tt),Z(zi),Z(Ui)}function Vh(t){An(Ui.current);var e=An(Tt.current),n=Gl(e,t.type);e!==n&&(Y(zi,t),Y(Tt,n))}function Iu(t){zi.current===t&&(Z(Tt),Z(zi))}var ne=vn(0);function us(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vl=[];function xu(){for(var t=0;t<vl.length;t++)vl[t]._workInProgressVersionPrimary=null;vl.length=0}var Uo=Qt.ReactCurrentDispatcher,yl=Qt.ReactCurrentBatchConfig,zn=0,re=null,ue=null,he=null,cs=!1,vi=!1,Fi=0,v_=0;function Te(){throw Error(S(321))}function Pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function Cu(t,e,n,r,i,o){if(zn=o,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uo.current=t===null||t.memoizedState===null?S_:T_,t=n(r,i),vi){o=0;do{if(vi=!1,Fi=0,25<=o)throw Error(S(301));o+=1,he=ue=null,e.updateQueue=null,Uo.current=I_,t=n(r,i)}while(vi)}if(Uo.current=fs,e=ue!==null&&ue.next!==null,zn=0,he=ue=re=null,cs=!1,e)throw Error(S(300));return t}function Lu(){var t=Fi!==0;return Fi=0,t}function gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?re.memoizedState=he=t:he=he.next=t,he}function et(){if(ue===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=he===null?re.memoizedState:he.next;if(e!==null)he=e,ue=t;else{if(t===null)throw Error(S(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},he===null?re.memoizedState=he=t:he=he.next=t}return he}function Wi(t,e){return typeof e=="function"?e(t):e}function El(t){var e=et(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((zn&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,s=r):u=u.next=d,re.lanes|=f,Un|=f}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=l,ht(r,e.memoizedState)||(ze=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,re.lanes|=o,Un|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wl(t){var e=et(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);ht(o,e.memoizedState)||(ze=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Gh(){}function jh(t,e){var n=re,r=et(),i=e(),o=!ht(r.memoizedState,i);if(o&&(r.memoizedState=i,ze=!0),r=r.queue,Au(bh.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Bi(9,Hh.bind(null,n,r,i,e),void 0,null),pe===null)throw Error(S(349));zn&30||$h(n,e,i)}return i}function $h(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hh(t,e,n,r){e.value=n,e.getSnapshot=r,Kh(e)&&Qh(t)}function bh(t,e,n){return n(function(){Kh(e)&&Qh(t)})}function Kh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function Qh(t){var e=Bt(t,1);e!==null&&ct(e,t,1,-1)}function df(t){var e=gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},e.queue=t,t=t.dispatch=w_.bind(null,re,t),[e.memoizedState,t]}function Bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yh(){return et().memoizedState}function Fo(t,e,n,r){var i=gt();re.flags|=t,i.memoizedState=Bi(1|e,n,void 0,r===void 0?null:r)}function Ds(t,e,n,r){var i=et();r=r===void 0?null:r;var o=void 0;if(ue!==null){var s=ue.memoizedState;if(o=s.destroy,r!==null&&Pu(r,s.deps)){i.memoizedState=Bi(e,n,o,r);return}}re.flags|=t,i.memoizedState=Bi(1|e,n,o,r)}function hf(t,e){return Fo(8390656,8,t,e)}function Au(t,e){return Ds(2048,8,t,e)}function qh(t,e){return Ds(4,2,t,e)}function Xh(t,e){return Ds(4,4,t,e)}function Jh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zh(t,e,n){return n=n!=null?n.concat([t]):null,Ds(4,4,Jh.bind(null,e,t),n)}function Nu(){}function ep(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tp(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function np(t,e,n){return zn&21?(ht(n,e)||(n=lh(),re.lanes|=n,Un|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ze=!0),t.memoizedState=n)}function y_(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=yl.transition;yl.transition={};try{t(!1),e()}finally{K=n,yl.transition=r}}function rp(){return et().memoizedState}function E_(t,e,n){var r=fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ip(t))op(e,n);else if(n=Wh(t,e,n,r),n!==null){var i=Oe();ct(n,t,r,i),sp(n,e,r)}}function w_(t,e,n){var r=fn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ip(t))op(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,ht(l,s)){var u=e.interleaved;u===null?(i.next=i,wu(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Wh(t,e,i,r),n!==null&&(i=Oe(),ct(n,t,r,i),sp(n,e,r))}}function ip(t){var e=t.alternate;return t===re||e!==null&&e===re}function op(t,e){vi=cs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lu(t,n)}}var fs={readContext:Ze,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},S_={readContext:Ze,useCallback:function(t,e){return gt().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:hf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fo(4194308,4,Jh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fo(4,2,t,e)},useMemo:function(t,e){var n=gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=E_.bind(null,re,t),[r.memoizedState,t]},useRef:function(t){var e=gt();return t={current:t},e.memoizedState=t},useState:df,useDebugValue:Nu,useDeferredValue:function(t){return gt().memoizedState=t},useTransition:function(){var t=df(!1),e=t[0];return t=y_.bind(null,t[1]),gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=re,i=gt();if(te){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),pe===null)throw Error(S(349));zn&30||$h(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,hf(bh.bind(null,r,o,t),[t]),r.flags|=2048,Bi(9,Hh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=gt(),e=pe.identifierPrefix;if(te){var n=Mt,r=Rt;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},T_={readContext:Ze,useCallback:ep,useContext:Ze,useEffect:Au,useImperativeHandle:Zh,useInsertionEffect:qh,useLayoutEffect:Xh,useMemo:tp,useReducer:El,useRef:Yh,useState:function(){return El(Wi)},useDebugValue:Nu,useDeferredValue:function(t){var e=et();return np(e,ue.memoizedState,t)},useTransition:function(){var t=El(Wi)[0],e=et().memoizedState;return[t,e]},useMutableSource:Gh,useSyncExternalStore:jh,useId:rp,unstable_isNewReconciler:!1},I_={readContext:Ze,useCallback:ep,useContext:Ze,useEffect:Au,useImperativeHandle:Zh,useInsertionEffect:qh,useLayoutEffect:Xh,useMemo:tp,useReducer:wl,useRef:Yh,useState:function(){return wl(Wi)},useDebugValue:Nu,useDeferredValue:function(t){var e=et();return ue===null?e.memoizedState=t:np(e,ue.memoizedState,t)},useTransition:function(){var t=wl(Wi)[0],e=et().memoizedState;return[t,e]},useMutableSource:Gh,useSyncExternalStore:jh,useId:rp,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ua(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zs={isMounted:function(t){return(t=t._reactInternals)?Hn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Oe(),i=fn(t),o=kt(r,i);o.payload=e,n!=null&&(o.callback=n),e=un(t,o,i),e!==null&&(ct(e,t,i,r),zo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Oe(),i=fn(t),o=kt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=un(t,o,i),e!==null&&(ct(e,t,i,r),zo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Oe(),r=fn(t),i=kt(n,r);i.tag=2,e!=null&&(i.callback=e),e=un(t,i,r),e!==null&&(ct(e,t,r,n),zo(e,t,r))}};function pf(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ri(n,r)||!Ri(i,o):!0}function lp(t,e,n){var r=!1,i=pn,o=e.contextType;return typeof o=="object"&&o!==null?o=Ze(o):(i=Fe(e)?kn:Ce.current,r=e.contextTypes,o=(r=r!=null)?Tr(t,i):pn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function gf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zs.enqueueReplaceState(e,e.state,null)}function ca(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Su(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ze(o):(o=Fe(e)?kn:Ce.current,i.context=Tr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ua(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zs.enqueueReplaceState(i,i.state,null),as(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,e){try{var n="",r=e;do n+=Jm(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Sl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var x_=typeof WeakMap=="function"?WeakMap:Map;function ap(t,e,n){n=kt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hs||(hs=!0,wa=r),fa(t,e)},n}function up(t,e,n){n=kt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fa(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){fa(t,e),typeof r!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function mf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new x_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=W_.bind(null,t,e,n),e.then(t,t))}function _f(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kt(-1,1),e.tag=2,un(n,e,1))),n.lanes|=1),t)}var P_=Qt.ReactCurrentOwner,ze=!1;function Ae(t,e,n,r){e.child=t===null?Fh(e,null,n,r):xr(e,t.child,n,r)}function yf(t,e,n,r,i){n=n.render;var o=e.ref;return yr(e,i),r=Cu(t,e,n,r,o,i),n=Lu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vt(t,e,i)):(te&&n&&gu(e),e.flags|=1,Ae(t,e,r,i),e.child)}function Ef(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Fu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,cp(t,e,o,r,i)):(t=Go(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ri,n(s,r)&&t.ref===e.ref)return Vt(t,e,i)}return e.flags|=1,t=dn(o,r),t.ref=e.ref,t.return=e,e.child=t}function cp(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ri(o,r)&&t.ref===e.ref)if(ze=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ze=!0);else return e.lanes=t.lanes,Vt(t,e,i)}return da(t,e,n,r,i)}function fp(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(dr,Ge),Ge|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(dr,Ge),Ge|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Y(dr,Ge),Ge|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Y(dr,Ge),Ge|=r;return Ae(t,e,i,n),e.child}function dp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function da(t,e,n,r,i){var o=Fe(n)?kn:Ce.current;return o=Tr(e,o),yr(e,i),n=Cu(t,e,n,r,o,i),r=Lu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vt(t,e,i)):(te&&r&&gu(e),e.flags|=1,Ae(t,e,n,i),e.child)}function wf(t,e,n,r,i){if(Fe(n)){var o=!0;rs(e)}else o=!1;if(yr(e,i),e.stateNode===null)Wo(t,e),lp(e,n,r),ca(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ze(c):(c=Fe(n)?kn:Ce.current,c=Tr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==c)&&gf(e,s,r,c),Xt=!1;var h=e.memoizedState;s.state=h,as(e,r,s,i),u=e.memoizedState,l!==r||h!==u||Ue.current||Xt?(typeof f=="function"&&(ua(e,n,f,r),u=e.memoizedState),(l=Xt||pf(e,n,l,r,h,u,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Bh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:rt(e.type,l),s.props=c,d=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ze(u):(u=Fe(n)?kn:Ce.current,u=Tr(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==u)&&gf(e,s,r,u),Xt=!1,h=e.memoizedState,s.state=h,as(e,r,s,i);var y=e.memoizedState;l!==d||h!==y||Ue.current||Xt?(typeof _=="function"&&(ua(e,n,_,r),y=e.memoizedState),(c=Xt||pf(e,n,c,r,h,y,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ha(t,e,n,r,o,i)}function ha(t,e,n,r,i,o){dp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&sf(e,n,!1),Vt(t,e,o);r=e.stateNode,P_.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=xr(e,t.child,null,o),e.child=xr(e,null,l,o)):Ae(t,e,l,o),e.memoizedState=r.state,i&&sf(e,n,!0),e.child}function hp(t){var e=t.stateNode;e.pendingContext?of(t,e.pendingContext,e.pendingContext!==e.context):e.context&&of(t,e.context,!1),Tu(t,e.containerInfo)}function Sf(t,e,n,r,i){return Ir(),_u(i),e.flags|=256,Ae(t,e,n,r),e.child}var pa={dehydrated:null,treeContext:null,retryLane:0};function ga(t){return{baseLanes:t,cachePool:null,transitions:null}}function pp(t,e,n){var r=e.pendingProps,i=ne.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(ne,i&1),t===null)return la(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ws(s,r,0,null),t=Rn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ga(n),e.memoizedState=pa,t):Ou(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return C_(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=dn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=dn(l,o):(o=Rn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ga(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=pa,r}return o=t.child,t=o.sibling,r=dn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ou(t,e){return e=Ws({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function So(t,e,n,r){return r!==null&&_u(r),xr(e,t.child,null,n),t=Ou(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function C_(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Sl(Error(S(422))),So(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ws({mode:"visible",children:r.children},i,0,null),o=Rn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&xr(e,t.child,null,s),e.child.memoizedState=ga(s),e.memoizedState=pa,o);if(!(e.mode&1))return So(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(S(419)),r=Sl(o,r,void 0),So(t,e,s,r)}if(l=(s&t.childLanes)!==0,ze||l){if(r=pe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Bt(t,i),ct(r,t,i,-1))}return Uu(),r=Sl(Error(S(421))),So(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=B_.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,je=an(i.nextSibling),$e=e,te=!0,st=null,t!==null&&(Ye[qe++]=Rt,Ye[qe++]=Mt,Ye[qe++]=Dn,Rt=t.id,Mt=t.overflow,Dn=e),e=Ou(e,r.children),e.flags|=4096,e)}function Tf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),aa(t.return,e,n)}function Tl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function gp(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ae(t,e,r.children,n),r=ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tf(t,n,e);else if(t.tag===19)Tf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&us(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&us(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tl(e,!0,n,null,o);break;case"together":Tl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Un|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=dn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L_(t,e,n){switch(e.tag){case 3:hp(e),Ir();break;case 5:Vh(e);break;case 1:Fe(e.type)&&rs(e);break;case 4:Tu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Y(ss,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(ne,ne.current&1),e.flags|=128,null):n&e.child.childLanes?pp(t,e,n):(Y(ne,ne.current&1),t=Vt(t,e,n),t!==null?t.sibling:null);Y(ne,ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(ne,ne.current),r)break;return null;case 22:case 23:return e.lanes=0,fp(t,e,n)}return Vt(t,e,n)}var mp,ma,_p,vp;mp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ma=function(){};_p=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,An(Tt.current);var o=null;switch(n){case"input":i=Fl(t,i),r=Fl(t,r),o=[];break;case"select":i=ie({},i,{value:void 0}),r=ie({},r,{value:void 0}),o=[];break;case"textarea":i=Vl(t,i),r=Vl(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ts)}jl(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xi.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xi.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&X("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};vp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ri(t,e){if(!te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function A_(t,e,n){var r=e.pendingProps;switch(mu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Fe(e.type)&&ns(),Ie(e),null;case 3:return r=e.stateNode,Pr(),Z(Ue),Z(Ce),xu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(Ia(st),st=null))),ma(t,e),Ie(e),null;case 5:Iu(e);var i=An(Ui.current);if(n=e.type,t!==null&&e.stateNode!=null)_p(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return Ie(e),null}if(t=An(Tt.current),Eo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[vt]=e,r[Di]=o,t=(e.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(i=0;i<ci.length;i++)X(ci[i],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":Oc(r,o),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},X("invalid",r);break;case"textarea":Mc(r,o),X("invalid",r)}jl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&yo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&yo(r.textContent,l,t),i=["children",""+l]):xi.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&X("scroll",r)}switch(n){case"input":co(r),Rc(r,o,!0);break;case"textarea":co(r),kc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ts)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[vt]=e,t[Di]=r,mp(t,e,!1,!1),e.stateNode=t;e:{switch(s=$l(n,r),n){case"dialog":X("cancel",t),X("close",t),i=r;break;case"iframe":case"object":case"embed":X("load",t),i=r;break;case"video":case"audio":for(i=0;i<ci.length;i++)X(ci[i],t);i=r;break;case"source":X("error",t),i=r;break;case"img":case"image":case"link":X("error",t),X("load",t),i=r;break;case"details":X("toggle",t),i=r;break;case"input":Oc(t,r),i=Fl(t,r),X("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ie({},r,{value:void 0}),X("invalid",t);break;case"textarea":Mc(t,r),i=Vl(t,r),X("invalid",t);break;default:i=r}jl(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Yd(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Kd(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Pi(t,u):typeof u=="number"&&Pi(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xi.hasOwnProperty(o)?u!=null&&o==="onScroll"&&X("scroll",t):u!=null&&tu(t,o,u,s))}switch(n){case"input":co(t),Rc(t,r,!1);break;case"textarea":co(t),kc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?gr(t,!!r.multiple,o,!1):r.defaultValue!=null&&gr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)vp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=An(Ui.current),An(Tt.current),Eo(e)){if(r=e.stateNode,n=e.memoizedProps,r[vt]=e,(o=r.nodeValue!==n)&&(t=$e,t!==null))switch(t.tag){case 3:yo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vt]=e,e.stateNode=r}return Ie(e),null;case 13:if(Z(ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(te&&je!==null&&e.mode&1&&!(e.flags&128))zh(),Ir(),e.flags|=98560,o=!1;else if(o=Eo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(S(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(S(317));o[vt]=e}else Ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),o=!1}else st!==null&&(Ia(st),st=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ne.current&1?ce===0&&(ce=3):Uu())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Pr(),ma(t,e),t===null&&Mi(e.stateNode.containerInfo),Ie(e),null;case 10:return Eu(e.type._context),Ie(e),null;case 17:return Fe(e.type)&&ns(),Ie(e),null;case 19:if(Z(ne),o=e.memoizedState,o===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ri(o,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=us(t),s!==null){for(e.flags|=128,ri(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(ne,ne.current&1|2),e.child}t=t.sibling}o.tail!==null&&le()>Lr&&(e.flags|=128,r=!0,ri(o,!1),e.lanes=4194304)}else{if(!r)if(t=us(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ri(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!te)return Ie(e),null}else 2*le()-o.renderingStartTime>Lr&&n!==1073741824&&(e.flags|=128,r=!0,ri(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=le(),e.sibling=null,n=ne.current,Y(ne,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return zu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ge&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function N_(t,e){switch(mu(e),e.tag){case 1:return Fe(e.type)&&ns(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pr(),Z(Ue),Z(Ce),xu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Iu(e),null;case 13:if(Z(ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));Ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(ne),null;case 4:return Pr(),null;case 10:return Eu(e.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var To=!1,xe=!1,O_=typeof WeakSet=="function"?WeakSet:Set,C=null;function fr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oe(t,e,r)}else n.current=null}function _a(t,e,n){try{n()}catch(r){oe(t,e,r)}}var If=!1;function R_(t,e){if(ea=Jo,t=Th(),pu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(_=d.firstChild)!==null;)h=d,d=_;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(u=s),(_=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:t,selectionRange:n},Jo=!1,C=e;C!==null;)if(e=C,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,C=t;else for(;C!==null;){e=C;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,T=y.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:rt(e.type,v),T);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(E){oe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,C=t;break}C=e.return}return y=If,If=!1,y}function yi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&_a(e,n,o)}i=i.next}while(i!==r)}}function Us(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function va(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yp(t){var e=t.alternate;e!==null&&(t.alternate=null,yp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vt],delete e[Di],delete e[ia],delete e[p_],delete e[g_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ep(t){return t.tag===5||t.tag===3||t.tag===4}function xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ya(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ts));else if(r!==4&&(t=t.child,t!==null))for(ya(t,e,n),t=t.sibling;t!==null;)ya(t,e,n),t=t.sibling}function Ea(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ea(t,e,n),t=t.sibling;t!==null;)Ea(t,e,n),t=t.sibling}var ve=null,it=!1;function Yt(t,e,n){for(n=n.child;n!==null;)wp(t,e,n),n=n.sibling}function wp(t,e,n){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(As,n)}catch{}switch(n.tag){case 5:xe||fr(n,e);case 6:var r=ve,i=it;ve=null,Yt(t,e,n),ve=r,it=i,ve!==null&&(it?(t=ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ve.removeChild(n.stateNode));break;case 18:ve!==null&&(it?(t=ve,n=n.stateNode,t.nodeType===8?ml(t.parentNode,n):t.nodeType===1&&ml(t,n),Ni(t)):ml(ve,n.stateNode));break;case 4:r=ve,i=it,ve=n.stateNode.containerInfo,it=!0,Yt(t,e,n),ve=r,it=i;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&_a(n,e,s),i=i.next}while(i!==r)}Yt(t,e,n);break;case 1:if(!xe&&(fr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){oe(n,e,l)}Yt(t,e,n);break;case 21:Yt(t,e,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,Yt(t,e,n),xe=r):Yt(t,e,n);break;default:Yt(t,e,n)}}function Pf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new O_),e.forEach(function(r){var i=V_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,it=!1;break e;case 3:ve=l.stateNode.containerInfo,it=!0;break e;case 4:ve=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(ve===null)throw Error(S(160));wp(o,s,i),ve=null,it=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){oe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sp(e,t),e=e.sibling}function Sp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),pt(t),r&4){try{yi(3,t,t.return),Us(3,t)}catch(v){oe(t,t.return,v)}try{yi(5,t,t.return)}catch(v){oe(t,t.return,v)}}break;case 1:nt(e,t),pt(t),r&512&&n!==null&&fr(n,n.return);break;case 5:if(nt(e,t),pt(t),r&512&&n!==null&&fr(n,n.return),t.flags&32){var i=t.stateNode;try{Pi(i,"")}catch(v){oe(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&$d(i,o),$l(l,s);var c=$l(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];f==="style"?Yd(i,d):f==="dangerouslySetInnerHTML"?Kd(i,d):f==="children"?Pi(i,d):tu(i,f,d,c)}switch(l){case"input":Wl(i,o);break;case"textarea":Hd(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?gr(i,!!o.multiple,_,!1):h!==!!o.multiple&&(o.defaultValue!=null?gr(i,!!o.multiple,o.defaultValue,!0):gr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Di]=o}catch(v){oe(t,t.return,v)}}break;case 6:if(nt(e,t),pt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){oe(t,t.return,v)}}break;case 3:if(nt(e,t),pt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ni(e.containerInfo)}catch(v){oe(t,t.return,v)}break;case 4:nt(e,t),pt(t);break;case 13:nt(e,t),pt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ku=le())),r&4&&Pf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(xe=(c=xe)||f,nt(e,t),xe=c):nt(e,t),pt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(C=t,f=t.child;f!==null;){for(d=C=f;C!==null;){switch(h=C,_=h.child,h.tag){case 0:case 11:case 14:case 15:yi(4,h,h.return);break;case 1:fr(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){oe(r,n,v)}}break;case 5:fr(h,h.return);break;case 22:if(h.memoizedState!==null){Lf(d);continue}}_!==null?(_.return=h,C=_):Lf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Qd("display",s))}catch(v){oe(t,t.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){oe(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nt(e,t),pt(t),r&4&&Pf(t);break;case 21:break;default:nt(e,t),pt(t)}}function pt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ep(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pi(i,""),r.flags&=-33);var o=xf(t);Ea(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=xf(t);ya(t,l,s);break;default:throw Error(S(161))}}catch(u){oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function M_(t,e,n){C=t,Tp(t)}function Tp(t,e,n){for(var r=(t.mode&1)!==0;C!==null;){var i=C,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||To;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||xe;l=To;var c=xe;if(To=s,(xe=u)&&!c)for(C=i;C!==null;)s=C,u=s.child,s.tag===22&&s.memoizedState!==null?Af(i):u!==null?(u.return=s,C=u):Af(i);for(;o!==null;)C=o,Tp(o),o=o.sibling;C=i,To=l,xe=c}Cf(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,C=o):Cf(t)}}function Cf(t){for(;C!==null;){var e=C;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xe||Us(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ff(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ff(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ni(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}xe||e.flags&512&&va(e)}catch(h){oe(e,e.return,h)}}if(e===t){C=null;break}if(n=e.sibling,n!==null){n.return=e.return,C=n;break}C=e.return}}function Lf(t){for(;C!==null;){var e=C;if(e===t){C=null;break}var n=e.sibling;if(n!==null){n.return=e.return,C=n;break}C=e.return}}function Af(t){for(;C!==null;){var e=C;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Us(4,e)}catch(u){oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){oe(e,i,u)}}var o=e.return;try{va(e)}catch(u){oe(e,o,u)}break;case 5:var s=e.return;try{va(e)}catch(u){oe(e,s,u)}}}catch(u){oe(e,e.return,u)}if(e===t){C=null;break}var l=e.sibling;if(l!==null){l.return=e.return,C=l;break}C=e.return}}var k_=Math.ceil,ds=Qt.ReactCurrentDispatcher,Ru=Qt.ReactCurrentOwner,Je=Qt.ReactCurrentBatchConfig,j=0,pe=null,ae=null,Ee=0,Ge=0,dr=vn(0),ce=0,Vi=null,Un=0,Fs=0,Mu=0,Ei=null,De=null,ku=0,Lr=1/0,At=null,hs=!1,wa=null,cn=null,Io=!1,nn=null,ps=0,wi=0,Sa=null,Bo=-1,Vo=0;function Oe(){return j&6?le():Bo!==-1?Bo:Bo=le()}function fn(t){return t.mode&1?j&2&&Ee!==0?Ee&-Ee:__.transition!==null?(Vo===0&&(Vo=lh()),Vo):(t=K,t!==0||(t=window.event,t=t===void 0?16:ph(t.type)),t):1}function ct(t,e,n,r){if(50<wi)throw wi=0,Sa=null,Error(S(185));Ki(t,n,r),(!(j&2)||t!==pe)&&(t===pe&&(!(j&2)&&(Fs|=n),ce===4&&en(t,Ee)),We(t,r),n===1&&j===0&&!(e.mode&1)&&(Lr=le()+500,ks&&yn()))}function We(t,e){var n=t.callbackNode;_0(t,e);var r=Xo(t,t===pe?Ee:0);if(r===0)n!==null&&Uc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uc(n),e===1)t.tag===0?m_(Nf.bind(null,t)):Mh(Nf.bind(null,t)),d_(function(){!(j&6)&&yn()}),n=null;else{switch(ah(r)){case 1:n=su;break;case 4:n=oh;break;case 16:n=qo;break;case 536870912:n=sh;break;default:n=qo}n=Op(n,Ip.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ip(t,e){if(Bo=-1,Vo=0,j&6)throw Error(S(327));var n=t.callbackNode;if(Er()&&t.callbackNode!==n)return null;var r=Xo(t,t===pe?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gs(t,r);else{e=r;var i=j;j|=2;var o=Pp();(pe!==t||Ee!==e)&&(At=null,Lr=le()+500,On(t,e));do try{U_();break}catch(l){xp(t,l)}while(!0);yu(),ds.current=o,j=i,ae!==null?e=0:(pe=null,Ee=0,e=ce)}if(e!==0){if(e===2&&(i=Yl(t),i!==0&&(r=i,e=Ta(t,i))),e===1)throw n=Vi,On(t,0),en(t,r),We(t,le()),n;if(e===6)en(t,r);else{if(i=t.current.alternate,!(r&30)&&!D_(i)&&(e=gs(t,r),e===2&&(o=Yl(t),o!==0&&(r=o,e=Ta(t,o))),e===1))throw n=Vi,On(t,0),en(t,r),We(t,le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:xn(t,De,At);break;case 3:if(en(t,r),(r&130023424)===r&&(e=ku+500-le(),10<e)){if(Xo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Oe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ra(xn.bind(null,t,De,At),e);break}xn(t,De,At);break;case 4:if(en(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ut(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k_(r/1960))-r,10<r){t.timeoutHandle=ra(xn.bind(null,t,De,At),r);break}xn(t,De,At);break;case 5:xn(t,De,At);break;default:throw Error(S(329))}}}return We(t,le()),t.callbackNode===n?Ip.bind(null,t):null}function Ta(t,e){var n=Ei;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=gs(t,e),t!==2&&(e=De,De=n,e!==null&&Ia(e)),t}function Ia(t){De===null?De=t:De.push.apply(De,t)}function D_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ht(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~Mu,e&=~Fs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ut(e),r=1<<n;t[n]=-1,e&=~r}}function Nf(t){if(j&6)throw Error(S(327));Er();var e=Xo(t,0);if(!(e&1))return We(t,le()),null;var n=gs(t,e);if(t.tag!==0&&n===2){var r=Yl(t);r!==0&&(e=r,n=Ta(t,r))}if(n===1)throw n=Vi,On(t,0),en(t,e),We(t,le()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xn(t,De,At),We(t,le()),null}function Du(t,e){var n=j;j|=1;try{return t(e)}finally{j=n,j===0&&(Lr=le()+500,ks&&yn())}}function Fn(t){nn!==null&&nn.tag===0&&!(j&6)&&Er();var e=j;j|=1;var n=Je.transition,r=K;try{if(Je.transition=null,K=1,t)return t()}finally{K=r,Je.transition=n,j=e,!(j&6)&&yn()}}function zu(){Ge=dr.current,Z(dr)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f_(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(mu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ns();break;case 3:Pr(),Z(Ue),Z(Ce),xu();break;case 5:Iu(r);break;case 4:Pr();break;case 13:Z(ne);break;case 19:Z(ne);break;case 10:Eu(r.type._context);break;case 22:case 23:zu()}n=n.return}if(pe=t,ae=t=dn(t.current,null),Ee=Ge=e,ce=0,Vi=null,Mu=Fs=Un=0,De=Ei=null,Ln!==null){for(e=0;e<Ln.length;e++)if(n=Ln[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ln=null}return t}function xp(t,e){do{var n=ae;try{if(yu(),Uo.current=fs,cs){for(var r=re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cs=!1}if(zn=0,he=ue=re=null,vi=!1,Fi=0,Ru.current=null,n===null||n.return===null){ce=1,Vi=e,ae=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Ee,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=_f(s);if(_!==null){_.flags&=-257,vf(_,s,l,o,e),_.mode&1&&mf(o,c,e),e=_,u=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(u),e.updateQueue=v}else y.add(u);break e}else{if(!(e&1)){mf(o,c,e),Uu();break e}u=Error(S(426))}}else if(te&&l.mode&1){var T=_f(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),vf(T,s,l,o,e),_u(Cr(u,l));break e}}o=u=Cr(u,l),ce!==4&&(ce=2),Ei===null?Ei=[o]:Ei.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=ap(o,u,e);cf(o,g);break e;case 1:l=u;var p=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(cn===null||!cn.has(m)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=up(o,l,e);cf(o,E);break e}}o=o.return}while(o!==null)}Lp(n)}catch(I){e=I,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function Pp(){var t=ds.current;return ds.current=fs,t===null?fs:t}function Uu(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(Un&268435455)&&!(Fs&268435455)||en(pe,Ee)}function gs(t,e){var n=j;j|=2;var r=Pp();(pe!==t||Ee!==e)&&(At=null,On(t,e));do try{z_();break}catch(i){xp(t,i)}while(!0);if(yu(),j=n,ds.current=r,ae!==null)throw Error(S(261));return pe=null,Ee=0,ce}function z_(){for(;ae!==null;)Cp(ae)}function U_(){for(;ae!==null&&!a0();)Cp(ae)}function Cp(t){var e=Np(t.alternate,t,Ge);t.memoizedProps=t.pendingProps,e===null?Lp(t):ae=e,Ru.current=null}function Lp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N_(n,e),n!==null){n.flags&=32767,ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,ae=null;return}}else if(n=A_(n,e,Ge),n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);ce===0&&(ce=5)}function xn(t,e,n){var r=K,i=Je.transition;try{Je.transition=null,K=1,F_(t,e,n,r)}finally{Je.transition=i,K=r}return null}function F_(t,e,n,r){do Er();while(nn!==null);if(j&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(v0(t,o),t===pe&&(ae=pe=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Io||(Io=!0,Op(qo,function(){return Er(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Je.transition,Je.transition=null;var s=K;K=1;var l=j;j|=4,Ru.current=null,R_(t,n),Sp(n,t),i_(ta),Jo=!!ea,ta=ea=null,t.current=n,M_(n),u0(),j=l,K=s,Je.transition=o}else t.current=n;if(Io&&(Io=!1,nn=t,ps=i),o=t.pendingLanes,o===0&&(cn=null),d0(n.stateNode),We(t,le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hs)throw hs=!1,t=wa,wa=null,t;return ps&1&&t.tag!==0&&Er(),o=t.pendingLanes,o&1?t===Sa?wi++:(wi=0,Sa=t):wi=0,yn(),null}function Er(){if(nn!==null){var t=ah(ps),e=Je.transition,n=K;try{if(Je.transition=null,K=16>t?16:t,nn===null)var r=!1;else{if(t=nn,nn=null,ps=0,j&6)throw Error(S(331));var i=j;for(j|=4,C=t.current;C!==null;){var o=C,s=o.child;if(C.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(C=c;C!==null;){var f=C;switch(f.tag){case 0:case 11:case 15:yi(8,f,o)}var d=f.child;if(d!==null)d.return=f,C=d;else for(;C!==null;){f=C;var h=f.sibling,_=f.return;if(yp(f),f===c){C=null;break}if(h!==null){h.return=_,C=h;break}C=_}}}var y=o.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var T=v.sibling;v.sibling=null,v=T}while(v!==null)}}C=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,C=s;else e:for(;C!==null;){if(o=C,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yi(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,C=g;break e}C=o.return}}var p=t.current;for(C=p;C!==null;){s=C;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,C=m;else e:for(s=p;C!==null;){if(l=C,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Us(9,l)}}catch(I){oe(l,l.return,I)}if(l===s){C=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,C=E;break e}C=l.return}}if(j=i,yn(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(As,t)}catch{}r=!0}return r}finally{K=n,Je.transition=e}}return!1}function Of(t,e,n){e=Cr(n,e),e=ap(t,e,1),t=un(t,e,1),e=Oe(),t!==null&&(Ki(t,1,e),We(t,e))}function oe(t,e,n){if(t.tag===3)Of(t,t,n);else for(;e!==null;){if(e.tag===3){Of(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cn===null||!cn.has(r))){t=Cr(n,t),t=up(e,t,1),e=un(e,t,1),t=Oe(),e!==null&&(Ki(e,1,t),We(e,t));break}}e=e.return}}function W_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Oe(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(Ee&n)===n&&(ce===4||ce===3&&(Ee&130023424)===Ee&&500>le()-ku?On(t,0):Mu|=n),We(t,e)}function Ap(t,e){e===0&&(t.mode&1?(e=po,po<<=1,!(po&130023424)&&(po=4194304)):e=1);var n=Oe();t=Bt(t,e),t!==null&&(Ki(t,e,n),We(t,n))}function B_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ap(t,n)}function V_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),Ap(t,n)}var Np;Np=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ue.current)ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ze=!1,L_(t,e,n);ze=!!(t.flags&131072)}else ze=!1,te&&e.flags&1048576&&kh(e,os,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wo(t,e),t=e.pendingProps;var i=Tr(e,Ce.current);yr(e,n),i=Cu(null,e,r,t,i,n);var o=Lu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(r)?(o=!0,rs(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Su(e),i.updater=zs,e.stateNode=i,i._reactInternals=e,ca(e,r,t,n),e=ha(null,e,r,!0,o,n)):(e.tag=0,te&&o&&gu(e),Ae(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=j_(r),t=rt(r,t),i){case 0:e=da(null,e,r,t,n);break e;case 1:e=wf(null,e,r,t,n);break e;case 11:e=yf(null,e,r,t,n);break e;case 14:e=Ef(null,e,r,rt(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),da(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),wf(t,e,r,i,n);case 3:e:{if(hp(e),t===null)throw Error(S(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Bh(t,e),as(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Cr(Error(S(423)),e),e=Sf(t,e,r,n,i);break e}else if(r!==i){i=Cr(Error(S(424)),e),e=Sf(t,e,r,n,i);break e}else for(je=an(e.stateNode.containerInfo.firstChild),$e=e,te=!0,st=null,n=Fh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ir(),r===i){e=Vt(t,e,n);break e}Ae(t,e,r,n)}e=e.child}return e;case 5:return Vh(e),t===null&&la(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,na(r,i)?s=null:o!==null&&na(r,o)&&(e.flags|=32),dp(t,e),Ae(t,e,s,n),e.child;case 6:return t===null&&la(e),null;case 13:return pp(t,e,n);case 4:return Tu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xr(e,null,r,n):Ae(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),yf(t,e,r,i,n);case 7:return Ae(t,e,e.pendingProps,n),e.child;case 8:return Ae(t,e,e.pendingProps.children,n),e.child;case 12:return Ae(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Y(ss,r._currentValue),r._currentValue=s,o!==null)if(ht(o.value,s)){if(o.children===i.children&&!Ue.current){e=Vt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=kt(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),aa(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(S(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),aa(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ae(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,yr(e,n),i=Ze(i),r=r(i),e.flags|=1,Ae(t,e,r,n),e.child;case 14:return r=e.type,i=rt(r,e.pendingProps),i=rt(r.type,i),Ef(t,e,r,i,n);case 15:return cp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Wo(t,e),e.tag=1,Fe(r)?(t=!0,rs(e)):t=!1,yr(e,n),lp(e,r,i),ca(e,r,i,n),ha(null,e,r,!0,t,n);case 19:return gp(t,e,n);case 22:return fp(t,e,n)}throw Error(S(156,e.tag))};function Op(t,e){return ih(t,e)}function G_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,n,r){return new G_(t,e,n,r)}function Fu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j_(t){if(typeof t=="function")return Fu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ru)return 11;if(t===iu)return 14}return 2}function dn(t,e){var n=t.alternate;return n===null?(n=Xe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Go(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Fu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case nr:return Rn(n.children,i,o,e);case nu:s=8,i|=8;break;case kl:return t=Xe(12,n,e,i|2),t.elementType=kl,t.lanes=o,t;case Dl:return t=Xe(13,n,e,i),t.elementType=Dl,t.lanes=o,t;case zl:return t=Xe(19,n,e,i),t.elementType=zl,t.lanes=o,t;case Vd:return Ws(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wd:s=10;break e;case Bd:s=9;break e;case ru:s=11;break e;case iu:s=14;break e;case qt:s=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=Xe(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Rn(t,e,n,r){return t=Xe(7,t,r,e),t.lanes=n,t}function Ws(t,e,n,r){return t=Xe(22,t,r,e),t.elementType=Vd,t.lanes=n,t.stateNode={isHidden:!1},t}function Il(t,e,n){return t=Xe(6,t,null,e),t.lanes=n,t}function xl(t,e,n){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ol(0),this.expirationTimes=ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wu(t,e,n,r,i,o,s,l,u){return t=new $_(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Su(o),t}function H_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rp(t){if(!t)return pn;t=t._reactInternals;e:{if(Hn(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Fe(n))return Rh(t,n,e)}return e}function Mp(t,e,n,r,i,o,s,l,u){return t=Wu(n,r,!0,t,i,o,s,l,u),t.context=Rp(null),n=t.current,r=Oe(),i=fn(n),o=kt(r,i),o.callback=e??null,un(n,o,i),t.current.lanes=i,Ki(t,i,r),We(t,r),t}function Bs(t,e,n,r){var i=e.current,o=Oe(),s=fn(i);return n=Rp(n),e.context===null?e.context=n:e.pendingContext=n,e=kt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=un(i,e,s),t!==null&&(ct(t,i,s,o),zo(t,i,s)),s}function ms(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bu(t,e){Rf(t,e),(t=t.alternate)&&Rf(t,e)}function b_(){return null}var kp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vu(t){this._internalRoot=t}Vs.prototype.render=Vu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));Bs(t,e,null,null)};Vs.prototype.unmount=Vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fn(function(){Bs(null,t,null,null)}),e[Wt]=null}};function Vs(t){this._internalRoot=t}Vs.prototype.unstable_scheduleHydration=function(t){if(t){var e=fh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zt.length&&e!==0&&e<Zt[n].priority;n++);Zt.splice(n,0,t),n===0&&hh(t)}};function Gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function K_(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=ms(s);o.call(c)}}var s=Mp(e,r,t,0,null,!1,!1,"",Mf);return t._reactRootContainer=s,t[Wt]=s.current,Mi(t.nodeType===8?t.parentNode:t),Fn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ms(u);l.call(c)}}var u=Wu(t,0,!1,null,null,!1,!1,"",Mf);return t._reactRootContainer=u,t[Wt]=u.current,Mi(t.nodeType===8?t.parentNode:t),Fn(function(){Bs(e,u,n,r)}),u}function js(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=ms(s);l.call(u)}}Bs(e,s,t,i)}else s=K_(n,e,t,i,r);return ms(s)}uh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ui(e.pendingLanes);n!==0&&(lu(e,n|1),We(e,le()),!(j&6)&&(Lr=le()+500,yn()))}break;case 13:Fn(function(){var r=Bt(t,1);if(r!==null){var i=Oe();ct(r,t,1,i)}}),Bu(t,1)}};au=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var n=Oe();ct(e,t,134217728,n)}Bu(t,134217728)}};ch=function(t){if(t.tag===13){var e=fn(t),n=Bt(t,e);if(n!==null){var r=Oe();ct(n,t,e,r)}Bu(t,e)}};fh=function(){return K};dh=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};bl=function(t,e,n){switch(e){case"input":if(Wl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ms(r);if(!i)throw Error(S(90));jd(r),Wl(r,i)}}}break;case"textarea":Hd(t,n);break;case"select":e=n.value,e!=null&&gr(t,!!n.multiple,e,!1)}};Jd=Du;Zd=Fn;var Q_={usingClientEntryPoint:!1,Events:[Yi,sr,Ms,qd,Xd,Du]},ii={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y_={bundleType:ii.bundleType,version:ii.version,rendererPackageName:ii.rendererPackageName,rendererConfig:ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nh(t),t===null?null:t.stateNode},findFiberByHostInstance:ii.findFiberByHostInstance||b_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xo.isDisabled&&xo.supportsFiber)try{As=xo.inject(Y_),St=xo}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gu(e))throw Error(S(200));return H_(t,e,null,n)};Ke.createRoot=function(t,e){if(!Gu(t))throw Error(S(299));var n=!1,r="",i=kp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wu(t,1,!1,null,null,n,!1,r,i),t[Wt]=e.current,Mi(t.nodeType===8?t.parentNode:t),new Vu(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=nh(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return Fn(t)};Ke.hydrate=function(t,e,n){if(!Gs(e))throw Error(S(200));return js(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!Gu(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=kp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Mp(e,null,t,1,n??null,i,!1,o,s),t[Wt]=e.current,Mi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Vs(e)};Ke.render=function(t,e,n){if(!Gs(e))throw Error(S(200));return js(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!Gs(t))throw Error(S(40));return t._reactRootContainer?(Fn(function(){js(null,null,t,!1,function(){t._reactRootContainer=null,t[Wt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Du;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gs(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return js(t,e,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function Dp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dp)}catch(t){console.error(t)}}Dp(),Dd.exports=Ke;var q_=Dd.exports,kf=q_;Rl.createRoot=kf.createRoot,Rl.hydrateRoot=kf.hydrateRoot;const X_=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),J_=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),Z_=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),ev=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),tv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),nv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),rv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),iv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),ov=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),sv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),lv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),av=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),uv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),cv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),fv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),dv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),hv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),pv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),gv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"})),mv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M6.854 5.854l.353-.354-.707-.707-.354.353.708.708zM4.5 7.5l-.354-.354-.353.354.353.354L4.5 7.5zm1.646 2.354l.354.353.707-.707-.353-.354-.708.708zM7.5.5V0v.5zm7 7h.5-.5zm-14 0H1 .5zm7 7V14v.5zM6.146 5.146l-2 2 .708.708 2-2-.708-.708zm-2 2.708l2 2 .708-.708-2-2-.708.708zM4.5 8H11V7H4.5v1zm3-7A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zM1 7.5A6.5 6.5 0 017.5 1V0A7.5 7.5 0 000 7.5h1zM7.5 14A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zm0 1A7.5 7.5 0 0015 7.5h-1A6.5 6.5 0 017.5 14v1z",fill:"currentColor"})),_v=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M8.146 9.146l-.353.354.707.707.354-.353-.708-.708zM10.5 7.5l.354.354.353-.354-.353-.354-.354.354zM8.854 5.146L8.5 4.793l-.707.707.353.354.708-.708zm0 4.708l2-2-.708-.708-2 2 .708.708zm2-2.708l-2-2-.708.708 2 2 .708-.708zM10.5 7H4v1h6.5V7zm-3 7A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zM14 7.5A6.5 6.5 0 017.5 14v1A7.5 7.5 0 0015 7.5h-1zM7.5 1A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zm0-1A7.5 7.5 0 000 7.5h1A6.5 6.5 0 017.5 1V0z",fill:"currentColor"})),vv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"}),R.createElement("path",{d:"M 9.159 5.175 L 1.166 5.175 C 0.799 5.175 0.5 5.472 0.5 5.841 L 0.5 13.834 C 0.5 14.203 0.799 14.5 1.166 14.5 L 9.159 14.5 C 9.528 14.5 9.825 14.203 9.825 13.834 L 9.825 5.841 C 9.825 5.472 9.528 5.175 9.159 5.175 Z",stroke:"currentColor"})),yv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 7.5l-4 4m4-4l-4-4m4 4H3M1.5 1v13",stroke:"currentColor"}),R.createElement("path",{d:"M1.5 7.5l4-4m-4 4l4 4m-4-4H12m1.5 6.5V1",stroke:"currentColor"}));var _e=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.ArrowLeftCircle="ArrowLeftCircle",t.ArrowRightCircle="ArrowRightCircle",t.Measurement="Measurement",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t.Scale="Scale",t))(_e||{});const Ev={Line:X_,Square:J_,Circle:Z_,Direction:ev,VectorDocument:tv,LayersDifference:nv,AntiClockwise:av,Clockwise:uv,Github:cv,Crop:fv,Folder:dv,Save:pv,Svg:rv,Expand:hv,Image:gv,ArrowLeftCircle:mv,ArrowRightCircle:_v,Measurement:yv,SolidDown:iv,SolidUp:ov,SolidUpSmall:sv,SolidDownSmall:lv,Scale:vv},zp=({name:t,className:e})=>{const n=Ev[t];return k.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:k.jsx(n,{})})};var z=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.SCALE="SCALE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t.ROTATE="ROTATE",t.MEASUREMENT="MEASUREMENT",t))(z||{});const Q=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:o,className:s,iconClassname:l,style:u})=>k.jsx(k.Fragment,{children:k.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(s?" "+s:""),style:u,"data-active":i,onClick:r,title:e,children:[n&&k.jsx(zp,{name:n,className:l}),t&&k.jsx("span",{children:t}),o]})}),Pl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:o,children:s})=>{const[l,u]=R.useState(!1);return k.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[k.jsx(Q,{icon:n,label:t,title:e,"data-active":l,onClick:()=>u(!l),style:o}),k.jsx(zp,{name:_e.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&k.jsx("div",{className:"flex flex-row gap-1",onClick:()=>u(!1),children:s})]})},Up=!0,wv=!1,jo={CCW:-1,CW:1,NOT_ORIENTABLE:0},Sv=2*Math.PI,_s=1,Fp=0,mt=2,Tv=3,Iv=4,xv=1,Pv=2,ju=0,Si=1,wr=2;var vs=Object.freeze({__proto__:null,BOUNDARY:mt,CCW:Up,CONTAINS:Tv,CW:wv,END_VERTEX:wr,INSIDE:_s,INTERLACE:Iv,NOT_VERTEX:ju,ORIENTATION:jo,OUTSIDE:Fp,OVERLAP_OPPOSITE:Pv,OVERLAP_SAME:xv,PIx2:Sv,START_VERTEX:Si});let Pt=1e-6;function Wp(t){Pt=t}function Bp(){return Pt}const Cv=3;function xa(t){return t<Pt&&t>-Pt}function Wn(t,e){return t-e<Pt&&t-e>-Pt}function Vp(t,e){return t-e>Pt}function Lv(t,e){return t-e>-Pt}function Gp(t,e){return t-e<-Pt}function Av(t,e){return t-e<Pt}var Nv=Object.freeze({__proto__:null,DECIMALS:Cv,EQ:Wn,EQ_0:xa,GE:Lv,GT:Vp,LE:Av,LT:Gp,getTolerance:Bp,setTolerance:Wp});let a={Utils:Nv,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in vs)a[t]=vs[t];Object.defineProperty(a,"DP_TOL",{get:function(){return Bp()},set:function(t){Wp(t)}});class J{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}a.Errors=J;class $u{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,o=n||this.last,s=i;if(s===void 0)return r;do r.push(s),s=s.next;while(s!==o.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw J.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const Df={stroke:"black"};class Ov{constructor(e=Df){for(const n in e)this[n]=e[n];this.stroke=e.stroke??Df.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function bn(t){return new Ov(t).toAttributesString()}function jr(t,e){let n=[],[r,i,o]=t.standard,[s,l,u]=e.standard,c=r*l-i*s,f=o*l-i*u,d=r*u-o*s;if(!a.Utils.EQ_0(c)){let h,_;i===0?(h=o/r,_=d/c):l===0?(h=u/s,_=d/c):r===0?(h=f/c,_=o/i):s===0?(h=f/c,_=u/l):(h=f/c,_=d/c),n.push(new a.Point(h,_))}return n}function Kn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(a.Utils.EQ(i,e.r))n.push(r);else if(a.Utils.LT(i,e.r)){let o=Math.sqrt(e.r*e.r-i*i),s,l;s=t.norm.rotate90CCW().multiply(o),l=r.translate(s),n.push(l),s=t.norm.rotate90CW().multiply(o),l=r.translate(s),n.push(l)}return n}function Ar(t,e){let n=[];for(let r of e.toSegments()){let i=Xi(r,t);for(let o of i)Xp(o,n)||n.push(o)}return n}function $s(t,e){let n=[];if(Ar(t,e.box).length===0)return n;let r=new a.Circle(e.pc,e.r),i=Kn(t,r);for(let o of i)o.on(e)&&n.push(o);return n}function Xi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new a.Line(t.ps,t.pe);return jr(r,e)}function Hs(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let o=jr(r,i);o.length>0&&zf(o[0],t)&&zf(o[0],e)&&n.push(o[0])}return n}function zf(t,e){const n=e.box;return a.Utils.LE(t.x,n.xmax)&&a.Utils.GE(t.x,n.xmin)&&a.Utils.LE(t.y,n.ymax)&&a.Utils.GE(t.y,n.ymin)}function bs(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[o,s]=t.ps.distanceTo(e.pc);return a.Utils.EQ(o,e.r)&&n.push(t.ps),n}let r=new a.Line(t.ps,t.pe),i=Kn(r,e);for(let o of i)o.on(t)&&n.push(o);return n}function $r(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Circle(e.pc,e.r),o=Kn(r,i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Rv(t,e){let n=[];for(let r of e.toSegments()){let i=Hs(r,t);for(let o of i)n.push(o)}return n}function jp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new a.Vector(t.pc,e.pc),i=t.r,o=e.r;if(a.Utils.EQ_0(i)||a.Utils.EQ_0(o))return n;if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y)&&a.Utils.EQ(i,o))return n.push(t.pc.translate(-i,0)),n;let s=t.pc.distanceTo(e.pc)[0];if(a.Utils.GT(s,i+o)||a.Utils.LT(s,Math.abs(i-o)))return n;r.x/=s,r.y/=s;let l;if(a.Utils.EQ(s,i+o)||a.Utils.EQ(s,Math.abs(i-o)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let u=i*i/(2*s)-o*o/(2*s)+s/2,c=t.pc.translate(u*r.x,u*r.y),f=Math.sqrt(i*i-u*u);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Mv(t,e){let n=[];for(let r of e.toSegments()){let i=bs(r,t);for(let o of i)n.push(o)}return n}function $p(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&a.Utils.EQ(t.r,e.r)){let s;return s=t.start,s.on(e)&&n.push(s),s=t.end,s.on(e)&&n.push(s),s=e.start,s.on(t)&&n.push(s),s=e.end,s.on(t)&&n.push(s),n}let r=new a.Circle(t.pc,t.r),i=new a.Circle(e.pc,e.r),o=r.intersect(i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Hu(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&a.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new a.Circle(t.pc,t.r),o=jp(r,i);for(let s of o)s.on(t)&&n.push(s);return n}function kv(t,e){let n=[];for(let r of e.toSegments()){let i=$r(r,t);for(let o of i)n.push(o)}return n}function Hp(t,e){return t.isSegment?Hs(t.shape,e):$r(e,t.shape)}function bp(t,e){return t.isSegment?$r(t.shape,e):$p(t.shape,e)}function Kp(t,e){return t.isSegment?Xi(t.shape,e):$s(e,t.shape)}function Dv(t,e){return t.isSegment?Qu(e,t.shape):Yu(e,t.shape)}function zv(t,e){return t.isSegment?bs(t.shape,e):Hu(t.shape,e)}function bu(t,e){let n=[];for(let r of e.edges)for(let i of Hp(r,t))n.push(i);return n}function Ku(t,e){let n=[];for(let r of e.edges)for(let i of bp(r,t))n.push(i);return n}function Ji(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Kp(r,t))Xp(i,n)||n.push(i);return t.sortPoints(n)}function Qp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of zv(r,t))n.push(i);return n}function Yp(t,e){return t.isSegment?Hp(e,t.shape):t.isArc?bp(e,t.shape):t.isLine?Kp(e,t.shape):t.isRay?Dv(e,t.shape):[]}function qp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Yp(t,i)];return n}function Uv(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...qp(r,e)];return n}function Fv(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...qp(r,e)];return n}function Wv(t,e){return t instanceof a.Line?Ji(t,e):t instanceof a.Segment?bu(t,e):t instanceof a.Arc?Ku(t,e):[]}function Xp(t,e){return e.some(n=>n.equalTo(t))}function gn(t){return new a.Line(t.start,t.norm)}function Qu(t,e){return Xi(e,gn(t)).filter(n=>t.contains(n))}function Yu(t,e){return $s(gn(t),e).filter(n=>t.contains(n))}function Jp(t,e){return Kn(gn(t),e).filter(n=>t.contains(n))}function Bv(t,e){return Ar(gn(t),e).filter(n=>t.contains(n))}function Zp(t,e){return jr(gn(t),e).filter(n=>t.contains(n))}function Vv(t,e){return jr(gn(t),gn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function eg(t,e){return Ji(gn(t),e).filter(n=>t.contains(n))}function tg(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw J.UNSUPPORTED_SHAPE_TYPE}function Zi(t,e){let n=[];for(let r of e)n=[...n,...tg(r,r.shape)];return n}function Gv(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...tg(r,i)];return n}let Qn=class fi extends $u{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,o=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray||u instanceof a.Line,s=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray,l=u=>u instanceof a.Segment||u instanceof a.Arc;if(n=i===1&&o(r[0])||i>1&&s(r[0])&&s(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(u=>u instanceof a.Ray||u instanceof a.Line);for(let u of r){let c=new a.Edge(u);this.append(c)}this.setArcLength()}else throw a.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new fi(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return this.insert(i,o),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Line){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Circle){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Segment){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Multiline)return a.Distance.multiline2multiline(this,e);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof a.Multiline?Gv(this,e):Zi(e,this)}contains(e){if(e instanceof a.Point)return this.edges.some(n=>n.shape.contains(e));throw a.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new fi(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new a.Point){return new fi(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new a.Matrix){return new fi(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${bn({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};a.Multiline=Qn;const jv=(...t)=>new a.Multiline(...t);a.multiline=jv;function Nr(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let o=0;i[0]===null?o=0:i[1]===null?o=t.shape.length:o=i[0].length;let s=ju;Wn(o,0)&&(s|=Si),Wn(o,t.shape.length)&&(s|=wr);let l;o===1/0?l=i[0].coord(e):l=s&wr&&t.next&&t.next.arc_length===0?0:t.arc_length+o,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:s})}function Gi(t){t.int_points1_sorted=Jt(t.int_points1),t.int_points2_sorted=Jt(t.int_points2)}function Jt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort($v)}function $v(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function qu(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,o;for(let s=0;s<t.int_points1_sorted.length;s++)if(t.int_points1_sorted[s].id!==-1){n=t.int_points1_sorted[s],r=t.int_points2[n.id];for(let l=s+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!Wn(i.arc_length,n.arc_length));l++)i.id!==-1&&(o=t.int_points2[i.id],o.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&o.edge_before===r.edge_before&&o.edge_after===r.edge_after&&(i.id=-1,o.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let s=1;s<t.int_points2_sorted.length;s++){let l=t.int_points2_sorted[s];if(l.id===-1)continue;if(r.id===-1||!Wn(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let u=t.int_points1[l.id];u.edge_before===n.edge_before&&u.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(u.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(s=>s.id>=0),t.int_points2=t.int_points2.filter(s=>s.id>=0),t.int_points1.forEach((s,l)=>s.id=l),t.int_points2.forEach((s,l)=>s.id=l))}function Pa(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=mt),e.edge_after&&(e.edge_after.bvStart=mt)}function Ca(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function Hv(t){let e,n,r,i=t.int_points1.length;for(let o=0;o<i;o++){let s=t.int_points1_sorted[o];s.face!==e&&(n=o,e=s.face);let l=o,u=Or(t.int_points1_sorted,o,e),c;l+u<i&&t.int_points1_sorted[l+u].face===e?c=l+u:c=n;let f=Or(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[s.id].face){r=p;break}}if(r===null)continue;let d=s.edge_after,h=r.edge_before;if(!(d.bv===mt&&h.bv===mt)||d!==h)continue;let _=t.int_points2[s.id],y=t.int_points2[r.id],v=_.edge_after,T=y.edge_before;v.bv===mt&&T.bv===mt&&v===T||(_=t.int_points2[r.id],y=t.int_points2[s.id],v=_.edge_after,T=y.edge_before),v.bv===mt&&T.bv===mt&&v===T&&d.setOverlap(v)}}function Or(t,e,n){let r,i,o=1;if(t.length===1)return 1;r=t[e];for(let s=e+1;s<t.length&&!(r.face!==n||(i=t[s],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));s++)o++;return o}function Rr(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=ju,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=Si),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=wr),n.is_vertex&Si){n.edge_before=r.prev,r.prev&&(n.is_vertex=wr);continue}if(n.is_vertex&wr)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof Qn&&n.is_vertex&Si&&(n.edge_after=t.first)}}function Uf(t,e,n){const r=t.edge_before,i=e.edge_after,o=n.length;r.next=n[0],n[0].prev=r,n[o-1].next=i,i.prev=n[o-1]}const{INSIDE:yt,OUTSIDE:Et,BOUNDARY:de,OVERLAP_SAME:bv,OVERLAP_OPPOSITE:Kv}=vs,{NOT_VERTEX:eS,START_VERTEX:Ff,END_VERTEX:Wf}=vs,Ks=1,eo=2,Bn=3;function Qv(t,e){let[n,r]=to(t,e,Ks,!0);return n}function La(t,e){let r=e.clone().reverse(),[i,o]=to(t,r,Bn,!0);return i}function ng(t,e){let[n,r]=to(t,e,eo,!0);return n}function rg(t,e){let[n,r]=to(t,e,eo,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(l=>l.shape)];let o=[];for(let s of r.faces)o=[...o,...[...s.edges].map(l=>l.shape)];return[i,o]}function Aa(t,e){let[n,r]=to(t,e,Bn,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(s=>s.shape)];return i}function ig(t,e){let n=t.clone(),r=e.clone(),i=og(n,r);Gi(i),Rr(n,i.int_points1_sorted),Rr(r,i.int_points2_sorted),qu(i),Gi(i);let o=i.int_points1_sorted.map(l=>l.pt),s=i.int_points2_sorted.map(l=>l.pt);return[o,s]}function Yv(t,e,n,r){let i=Bf(t,n.int_points1),o=Bf(e,n.int_points2);for(Vf(i,e),Vf(o,t),Pa(n.int_points1),Pa(n.int_points2),Ca(n.int_points1,e),Ca(n.int_points2,t);Xv(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););Hv(n),Na(t,r,n.int_points1_sorted,!0),Na(e,r,n.int_points2_sorted,!1),Gf(t,i,r,!0),Gf(e,o,r,!1)}function qv(t,e,n,r){Jv(t,e,r,n.int_points2),Zv(t,e,n),Oa(t,n.int_points1),Oa(e,n.int_points2),Ra(t,n.int_points1,n.int_points2),Ra(t,n.int_points2,n.int_points1)}function to(t,e,n,r){let i=t.clone(),o=e.clone(),s=og(i,o);return Gi(s),Rr(i,s.int_points1_sorted),Rr(o,s.int_points2_sorted),qu(s),Gi(s),Yv(i,o,s,n),r&&qv(i,o,s,n),[i,o]}function og(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let o of i){let s=r.shape.intersect(o.shape);for(let l of s)Nr(r,l,n.int_points1),Nr(o,l,n.int_points2)}}return n}function Bf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Vf(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Xv(t,e,n,r,i,o){let s,l,u,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==s&&(l=d,s=h.face);let _=d,y=Or(r,d,s),v;_+y<c&&r[_+y].face===s?v=_+y:v=l;let T=Or(r,v,s);u=null;for(let m=v;m<v+T;m++){let E=r[m];if(E.face===s&&i[E.id].face===i[h.id].face){u=E;break}}if(u===null)continue;let g=h.edge_after,p=u.edge_before;if(g.bv===de&&p.bv!=de){g.bv=p.bv;continue}if(g.bv!=de&&p.bv===de){p.bv=g.bv;continue}if(g.bv===de&&p.bv===de&&g!=p||g.bv===yt&&p.bv===Et||g.bv===Et&&p.bv===yt){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===de&&p.bv===de&&g!=p){let m=g.next,E;for(;m!=p;){if(m.bv!=de){if(E===void 0)E=m.bv;else if(m.bv!=E)throw J.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}E!=null&&(g.bv=E,p.bv=E);continue}if(g.bv===yt&&p.bv===Et||g.bv===Et&&p.bv===yt){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[E,I]=m.shape.distanceTo(e);if(E<10*a.DP_TOL){Nr(m,I.ps,n);let P=n[n.length-1];if(P.is_vertex&Ff)P.edge_after=m,P.edge_before=m.prev,m.bvStart=de,m.bv=void 0,m.setInclusion(e);else if(P.is_vertex&Wf)P.edge_after=m.next,m.bvEnd=de,m.bv=void 0,m.setInclusion(e);else{let $=e.addVertex(P.pt,m);P.edge_before=$,P.edge_after=$.next,$.setInclusion(e),$.next.bvStart=de,$.next.bvEnd=void 0,$.next.bv=void 0,$.next.setInclusion(e)}let L=e.findEdgeByPoint(I.pe);Nr(L,I.pe,i);let O=i[i.length-1];if(O.is_vertex&Ff)O.edge_after=L,O.edge_before=L.prev;else if(O.is_vertex&Wf)O.edge_after=L.next;else{let $=i.find(Ve=>Ve.edge_after===L),M=e.addVertex(O.pt,L);O.edge_before=M,O.edge_after=M.next,$&&($.edge_after=M),M.bvStart=void 0,M.bvEnd=de,M.bv=void 0,M.setInclusion(t),M.next.bvStart=de,M.next.bvEnd=void 0,M.next.bv=void 0,M.next.setInclusion(t)}Gi(o),f=!0;break}}m=m.next}if(f)break;throw J.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function Na(t,e,n,r){if(!n)return;let i,o,s,l;for(let u=0;u<n.length;u++){if(s=n[u],s.face!==i&&(o=u,i=s.face),i.isEmpty())continue;let c=u,f=Or(n,u,i),d;c+f<n.length&&n[c+f].face===s.face?d=c+f:d=o,l=n[d];let h=d,_=Or(n,h,i),y=s.edge_after,v=l.edge_before;if(y.bv===yt&&v.bv===yt&&e===Ks||y.bv===Et&&v.bv===Et&&e===eo||(y.bv===Et||v.bv===Et)&&e===Bn&&!r||(y.bv===yt||v.bv===yt)&&e===Bn&&r||y.bv===de&&v.bv===de&&y.overlap&bv&&r||y.bv===de&&v.bv===de&&y.overlap&Kv){t.removeChain(i,y,v);for(let T=c;T<c+f;T++)n[T].edge_after=void 0;for(let T=h;T<h+_;T++)n[T].edge_before=void 0}u+=f-1}}function Jv(t,e,n,r){for(let i of e.faces){for(let o of i)t.edges.add(o);r.find(o=>o.face===i)===void 0&&t.addFace(i.first,i.last)}}function Zv(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],o=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&o.edge_before===void 0&&o.edge_after!==void 0&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before),o.edge_before!==void 0&&o.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(o.edge_before.next=i.edge_after,i.edge_after.prev=o.edge_before,o.edge_after=i.edge_after,i.edge_before=o.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let s of n.int_points1_sorted)s!==i&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(i.pt)&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before);if(o.edge_before!==void 0&&o.edge_after===void 0)for(let s of n.int_points2_sorted)s!==o&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(o.pt)&&(o.edge_before.next=s.edge_after,s.edge_after.prev=o.edge_before,o.edge_after=s.edge_after,s.edge_before=o.edge_before)}}function Oa(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Ra(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,o=r.edge_before;try{$u.testInfiniteLoop(i)}catch{throw J.CANNOT_COMPLETE_BOOLEAN_OPERATION}let s=t.addFace(i,o);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s)}}function Gf(t,e,n,r){for(let i of e){let o=i.first.bv;(n===Ks&&o===yt||n===Bn&&o===yt&&r||n===Bn&&o===Et&&!r||n===eo&&o===Et)&&t.deleteFace(i)}}var ey=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:eo,BOOLEAN_SUBTRACT:Bn,BOOLEAN_UNION:Ks,calculateIntersections:ig,innerClip:rg,intersect:ng,outerClip:Aa,removeNotRelevantChains:Na,removeOldFaces:Oa,restoreFaces:Ra,subtract:La,unify:Qv});const ty=RegExp("T.F..FFF.|T.F...F.."),ny=RegExp("T........|.T.......|...T.....|....T...."),ry=RegExp("FT.......|F..T.....|F...T...."),iy=RegExp("T.F..F..."),oy=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Hr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return ty.test(this.toString())}intersect(){return ny.test(this.toString())}touch(){return ry.test(this.toString())}inside(){return iy.test(this.toString())}covered(){return oy.test(this.toString())}}function Ti(t,e){let n,r=new a.Ray(e),i=new a.Line(r.pt,r.norm);const o=new a.Box(r.box.xmin-a.DP_TOL,r.box.ymin-a.DP_TOL,r.box.xmax,r.box.ymax+a.DP_TOL);if(t.box.not_intersect(o))return a.OUTSIDE;let s=t.edges.search(o);if(s.length===0)return a.OUTSIDE;for(let f of s)if(f.shape.contains(e))return a.BOUNDARY;let l=[...t.faces],u=[];for(let f of s)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return a.BOUNDARY;u.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}u.sort((f,d)=>Gp(f.pt.x,d.pt.x)?-1:Vp(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<u.length;f++){let d=u[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.prev===u[f-1].edge)continue;let h=d.edge.prev;for(;xa(h.length);)h=h.prev;let _=h.shape.tangentInEnd(),y=d.pt.translate(_),v=d.edge.shape.tangentInStart(),T=d.pt.translate(v),g=y.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.next===u[f-1].edge)continue;let h=d.edge.next;for(;xa(h.length);)h=h.next;let _=h.shape.tangentInStart(),y=d.pt.translate(_),v=d.edge.shape.tangentInEnd(),T=d.pt.translate(v),g=y.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof a.Segment)c++;else{let h=d.edge.shape.box;Wn(d.pt.y,h.ymin)||Wn(d.pt.y,h.ymax)||c++}}return n=c%2===1?_s:Fp,n}function sy(t,e){return br(t,e).equal()}function sg(t,e){return br(t,e).intersect()}function ly(t,e){return br(t,e).touch()}function ay(t,e){return!sg(t,e)}function lg(t,e){return br(t,e).inside()}function ag(t,e){return br(t,e).covered()}function uy(t,e){return lg(e,t)}function ug(t,e){return ag(e,t)}function br(t,e){if(t instanceof a.Line&&e instanceof a.Line)return cy(t,e);if(t instanceof a.Line&&e instanceof a.Circle)return fy(t,e);if(t instanceof a.Line&&e instanceof a.Box)return dy(t,e);if(t instanceof a.Line&&e instanceof a.Polygon)return hy(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&e instanceof a.Polygon)return jf(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&(e instanceof a.Circle||e instanceof a.Box))return jf(t,new a.Polygon(e));if(t instanceof a.Polygon&&e instanceof a.Polygon)return Po(t,e);if((t instanceof a.Circle||t instanceof a.Box)&&(e instanceof a.Circle||e instanceof a.Box))return Po(new a.Polygon(t),new a.Polygon(e));if((t instanceof a.Circle||t instanceof a.Box)&&e instanceof a.Polygon)return Po(new a.Polygon(t),e);if(t instanceof a.Polygon&&(e instanceof a.Circle||e instanceof a.Box))return Po(t,new a.Polygon(e))}function cy(t,e){let n=new Hr,r=jr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function fy(t,e){let n=new Hr,r=Kn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Qn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon([e.toArc()]).cutWithLine(t)}return n}function dy(t,e){let n=new Hr,r=Ar(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Qn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[s[1]],n.I2E=[s[0],s[2]],n.E2I=[e]):(n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon(e.toSegments()).cutWithLine(t))}return n}function hy(t,e){let n=new Hr,r=Ji(t,e),i=new Qn([t]),o=r.length>0?r.slice():t.sortPoints(r);return i.split(o),[...i].forEach(s=>s.setInclusion(e)),n.I2I=[...i].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...i].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...i].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.E2I=e.cutWithLine(t),n}function jf(t,e){let n=new Hr,r=Wv(t,e),i=r.length>0?r.slice():t.sortPoints(r),o=new Qn([t]);o.split(i),[...o].forEach(s=>s.setInclusion(e)),n.I2I=[...o].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...o].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...o].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let s of[t.start,t.end])switch(Ti(e,s)){case a.INSIDE:n.B2I.push(s);break;case a.BOUNDARY:n.B2B.push(s);break;case a.OUTSIDE:n.B2E.push(s);break}return n}function Po(t,e){let n=new Hr,[r,i]=ig(t,e),o=ng(t,e),s=La(t,e),l=La(e,t),[u,c]=rg(t,e),f=Aa(t,e),d=Aa(e,t);return n.I2I=o.isEmpty()?[]:[o],n.I2B=c,n.I2E=s.isEmpty()?[]:[s],n.B2I=u,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var Xu=Object.freeze({__proto__:null,contain:uy,cover:ug,covered:ag,disjoint:ay,equal:sy,inside:lg,intersect:sg,relate:br,touch:ly});class lt{constructor(e=1,n=0,r=0,i=1,o=0,s=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s}clone(){return new lt(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new lt(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw J.ILLEGAL_PARAMETERS;return this.multiply(new lt(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),o=Math.sin(e);return this.translate(n,r).multiply(new lt(i,o,-o,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new lt(e,0,0,n,0,0))}equalTo(e){return!(!a.Utils.EQ(this.tx,e.tx)||!a.Utils.EQ(this.ty,e.ty)||!a.Utils.EQ(this.a,e.a)||!a.Utils.EQ(this.b,e.b)||!a.Utils.EQ(this.c,e.c)||!a.Utils.EQ(this.d,e.d))}}a.Matrix=lt;const py=(...t)=>new a.Matrix(...t);a.matrix=py;const gy=class Ma{constructor(e,n){this.low=e,this.high=n}clone(){return new Ma(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new Ma(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},me=0,b=1;class Tn{constructor(e=void 0,n=void 0,r=null,i=null,o=null,s=b){if(this.left=r,this.right=i,this.parent=o,this.color=s,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,u]=e;l>u&&([l,u]=[u,l]),this.item.key=new gy(l,u)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===b}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class ji{constructor(){this.root=null,this.nil_node=new Tn}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new Tn(e,n,this.nil_node,this.nil_node,null,me);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new Tn(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new Tn(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new Tn(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(o=>n(o.item.value,o.item.key))}intersect_any(e){let n=new Tn(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new ji;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new Tn(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===me;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===me?(n.parent.color=b,r.color=b,n.parent.parent.color=me,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=b,n.parent.parent.color=me,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===me?(n.parent.color=b,r.color=b,n.parent.parent.color=me,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=b,n.parent.parent.color=me,this.rotate_left(n.parent.parent)));this.root.color=b}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===b&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===b;)n===n.parent.left?(r=n.parent.right,r.color===me&&(r.color=b,n.parent.color=me,this.rotate_left(n.parent),r=n.parent.right),r.left.color===b&&r.right.color===b?(r.color=me,n=n.parent):(r.right.color===b&&(r.color=me,r.left.color=b,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=b,r.right.color=b,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===me&&(r.color=b,n.parent.color=me,this.rotate_right(n.parent),r=n.parent.left),r.left.color===b&&r.right.color===b?(r.color=me,n=n.parent):(r.left.color===b&&(r.color=me,r.right.color=b,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=b,r.left.color=b,this.rotate_right(n.parent),n=this.root));n.color=b}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===me&&(n.left.color===b&&n.right.color===b||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===b&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class my extends Set{constructor(e){super(e),this.index=new ji,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,o=r||e.box,s=i||e;return super.add(s),this.size>n&&this.index.insert(o,s),this}delete(e){const{key:n,value:r}=e,i=n||e.box,o=r||e;let s=super.delete(o);return s&&this.index.remove(i,o),s}clear(){super.clear(),this.index=new ji}search(e){return this.index.search(e)}hit(e){let n=new a.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}a.PlanarSet=my;class En{get name(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new lt().translate(...e))}rotate(e,n=new a.Point){return this.transform(new lt().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new lt().scale(e,n))}transform(...e){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}}let w=class cg extends En{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw J.ILLEGAL_PARAMETERS}}get box(){return new a.Box(this.x,this.y,this.x,this.y)}clone(){return new a.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}lessThan(e){return!!(a.Utils.LT(this.y,e.y)||a.Utils.EQ(this.y,e.y)&&a.Utils.LT(this.x,e.x))}transform(e){return new a.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new a.Vector(this,e.pt);if(a.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new a.Vector(e.pt,this);return a.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof cg){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new a.Segment(this,e)]}if(e instanceof a.Line)return a.Distance.point2line(this,e);if(e instanceof a.Circle)return a.Distance.point2circle(this,e);if(e instanceof a.Segment)return a.Distance.point2segment(this,e);if(e instanceof a.Arc)return a.Distance.point2arc(this,e);if(e instanceof a.Polygon)return a.Distance.point2polygon(this,e);if(e instanceof a.PlanarSet)return a.Distance.shape2planarSet(this,e);if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}on(e){if(e instanceof a.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${bn({fill:"red",...e})} />`}};a.Point=w;const _y=(...t)=>new a.Point(...t);a.point=_y;let tt=class extends En{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof a.Point&&r instanceof a.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}multiply(e){return new a.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!a.Utils.EQ_0(this.length))return new a.Vector(this.x/this.length,this.y/this.length);throw J.ZERO_DIVISION}rotate(e,n=new a.Point){if(n.x===0&&n.y===0)return this.transform(new lt().rotate(e));throw J.OPERATION_IS_NOT_SUPPORTED}transform(e){return new a.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new a.Vector(-this.y,this.x)}rotate90CW(){return new a.Vector(this.y,-this.x)}invert(){return new a.Vector(-this.x,-this.y)}add(e){return new a.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new a.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};a.Vector=tt;const fg=(...t)=>new a.Vector(...t);a.vector=fg;let _t=class ka extends En{constructor(...e){if(super(),this.ps=new a.Point,this.pe=new a.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new a.Point(n[0],n[1]),this.pe=new a.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new a.Point(n.x,n.y),this.pe=new a.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof a.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof a.Point&&e[1]instanceof a.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new a.Point(e[0],e[1]),this.pe=new a.Point(e[2],e[3]);return}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new a.Vector(this.start,this.end).slope}get box(){return new a.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return a.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Xi(this,e);if(e instanceof a.Ray)return Qu(e,this);if(e instanceof a.Segment)return Hs(this,e);if(e instanceof a.Circle)return bs(this,e);if(e instanceof a.Box)return Rv(this,e);if(e instanceof a.Arc)return $r(this,e);if(e instanceof a.Polygon)return bu(this,e);if(e instanceof a.Multiline)return Zi(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.segment2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.segment2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2segment(this,e);return[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.segment2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}tangentInStart(){return new a.Vector(this.start,this.end).normalize()}tangentInEnd(){return new a.Vector(this.end,this.start).normalize()}reverse(){return new ka(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new a.Segment(this.start,e),new a.Segment(e,this.end)]}middle(){return new a.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new a.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=a.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new a.Matrix){return new ka(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new a.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${bn(e)} />`}};a.Segment=_t;const vy=(...t)=>new a.Segment(...t);a.segment=vy;let{vector:oi}=a,wt=class dg extends En{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new a.Point(n),this.norm=new a.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof a.Point&&r instanceof a.Point){this.pt=n,this.norm=dg.points2norm(n,r),this.norm.dot(oi(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Point&&r instanceof a.Vector){if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y))throw J.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(oi(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Vector&&r instanceof a.Point){if(a.Utils.EQ_0(n.x)&&a.Utils.EQ_0(n.y))throw J.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(oi(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new a.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(oi(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return a.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))}coord(e){return oi(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return jr(this,e);if(e instanceof a.Ray)return Zp(e,this);if(e instanceof a.Circle)return Kn(this,e);if(e instanceof a.Box)return Ar(this,e);if(e instanceof a.Segment)return Xi(e,this);if(e instanceof a.Arc)return $s(this,e);if(e instanceof a.Polygon)return Ji(this,e);if(e instanceof a.Multiline)return Zi(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof a.Point)return[new a.Ray(e,this.norm),new a.Ray(e,this.norm)];{let n=new a.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new a.Point){return new a.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=Ar(this,e);if(r.length===0)return"";let i=r[0],o=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return o===void 0&&(o=i),new a.Segment(i,o).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw J.ILLEGAL_PARAMETERS;return new a.Vector(e,n).normalize().rotate90CCW()}};a.Line=wt;const yy=(...t)=>new a.Line(...t);a.line=yy;let $o=class extends En{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new a.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new a.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new a.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof a.Point)return a.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof a.Segment)return a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Arc)return this.intersect(e).length===0&&a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Circle)return this.intersect(e).length===0&&a.Utils.LE(e.r,this.r)&&a.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new a.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw J.OPERATION_IS_NOT_SUPPORTED;return new a.Circle(this.pc,this.r*e)}transform(e=new a.Matrix){return new a.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Kn(e,this);if(e instanceof a.Ray)return Jp(e,this);if(e instanceof a.Segment)return bs(e,this);if(e instanceof a.Circle)return jp(e,this);if(e instanceof a.Box)return Mv(this,e);if(e instanceof a.Arc)return Hu(e,this);if(e instanceof a.Polygon)return Qp(this,e);if(e instanceof a.Multiline)return Zi(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.circle2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline){let[n,r]=a.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${bn({fill:"none",...e})} />`}};a.Circle=$o;const Ey=(...t)=>new a.Circle(...t);a.circle=Ey;class Da extends En{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=a.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:o,counterClockwise:s}=e[0];this.pc=new a.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=o,this.counterClockwise=s}else{let[n,r,i,o,s]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),o!==void 0&&(this.endAngle=o),s!==void 0&&(this.counterClockwise=s)}}clone(){return new a.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(a.Utils.EQ(this.startAngle,this.endAngle))return 0;if(a.Utils.EQ(Math.abs(this.startAngle-this.endAngle),a.PIx2))return a.PIx2;let e;return this.counterClockwise?e=a.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+a.PIx2:e=a.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+a.PIx2,a.Utils.GT(e,a.PIx2)&&(e-=a.PIx2),a.Utils.LT(e,0)&&(e+=a.PIx2),e}get start(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new a.Box);return n=n.merge(this.end.box),n}contains(e){if(!a.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new a.Vector(this.pc,e).slope,r=new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return a.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new a.Vector(this.pc,e).slope;return[new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new a.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new a.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new a.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return $s(e,this);if(e instanceof a.Ray)return Yu(e,this);if(e instanceof a.Circle)return Hu(this,e);if(e instanceof a.Segment)return $r(e,this);if(e instanceof a.Box)return kv(this,e);if(e instanceof a.Arc)return $p(this,e);if(e instanceof a.Polygon)return Ku(this,e);if(e instanceof a.Multiline)return Zi(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.arc2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.arc2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let o=0;o<4;o++)r[o].on(this)&&i.push(new a.Arc(this.pc,this.r,this.startAngle,n[o],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,u)=>l.length-u.length);for(let l=0;l<i.length;l++){let u=e.length>0?e[e.length-1]:void 0,c;u?c=new a.Arc(this.pc,this.r,u.endAngle,i[l].endAngle,this.counterClockwise):c=new a.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),a.Utils.EQ_0(c.length)||e.push(c.clone())}let o=e.length>0?e[e.length-1]:void 0,s;o?s=new a.Arc(this.pc,this.r,o.endAngle,this.endAngle,this.counterClockwise):s=new a.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!a.Utils.EQ_0(s.length)&&!a.Utils.EQ(s.sweep,2*Math.PI)&&e.push(s.clone())}return e}tangentInStart(){let e=new a.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new a.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new a.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new a.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),o=this.counterClockwise;return e.a*e.d<0&&(o=!o),a.Arc.arcSE(i,n,r,o)}static arcSE(e,n,r,i){let{vector:o}=a,s=o(e,n).slope,l=o(e,r).slope;a.Utils.EQ(s,l)&&(l+=2*Math.PI,i=!0);let u=o(e,n).length;return new a.Arc(e,u,s,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,o)=>i+o.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new a.Line(this.start,this.end),r=this.pc.leftTo(n),o=new a.Segment(this.start,this.end).definiteIntegral(e),s=this.circularSegmentArea();return r?o-s:o+s}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=a;return e.slice().sort((r,i)=>{let o=n(this.pc,r).slope,s=n(this.pc,i).slope;return o<s?-1:o>s?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return a.Utils.EQ(this.sweep,2*Math.PI)?new a.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${bn({fill:"none",...e})} />`}}a.Arc=Da;const wy=(...t)=>new a.Arc(...t);a.arc=wy;class Dt extends En{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new Dt(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new a.Point(this.xmin,this.ymin)}get high(){return new a.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new a.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Dt(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new a.Point(this.xmin,this.ymin),new a.Point(this.xmax,this.ymin),new a.Point(this.xmax,this.ymax),new a.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new a.Segment(e[0],e[1]),new a.Segment(e[1],e[2]),new a.Segment(e[2],e[3]),new a.Segment(e[3],e[0])]}rotate(e,n=new a.Point){throw J.OPERATION_IS_NOT_SUPPORTED}transform(e=new a.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new Dt)}contains(e){if(e instanceof a.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof a.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof a.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof a.Circle)return this.contains(e.box);if(e instanceof a.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>$r(n,e).length===0);if(e instanceof a.Line||e instanceof a.Ray)return!1;if(e instanceof a.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof a.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${bn({fill:"none",...e})} />`}}a.Box=Dt;const Sy=(...t)=>new a.Box(...t);a.box=Sy;class Ty{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof a.Segment}get isArc(){return this.shape instanceof a.Arc}get isLine(){return this.shape instanceof a.Line}get isRay(){return this.shape instanceof a.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof a.Line||this.shape instanceof a.Ray)return this.bv=a.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=Ti(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=Ti(e,this.end)),this.bvStart===a.OUTSIDE||this.bvEnd==a.OUTSIDE)this.bv=a.OUTSIDE;else if(this.bvStart===a.INSIDE||this.bvEnd==a.INSIDE)this.bv=a.INSIDE;else{let n=Ti(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof a.Segment&&i instanceof a.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=a.OVERLAP_OPPOSITE):(r instanceof a.Arc&&i instanceof a.Arc||r instanceof a.Segment&&i instanceof a.Arc||r instanceof a.Arc&&i instanceof a.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=a.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof a.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof a.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(a.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,o=new a.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),s=new a.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}
                    A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}a.Edge=Ty;class Iy extends $u{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class hr extends Iy{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof a.Point)){let i=hr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(s=>new a.Point(s[0],s[1])),o=hr.points2segments(i);this.shapes2face(e.edges,o)}else if(r.every(i=>i instanceof a.Segment||i instanceof a.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let o of r){let s;o.name==="segment"?s=new a.Segment(o):s=new a.Arc(o),i.push(s)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof hr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof a.Circle)this.shapes2face(e.edges,[n[0].toArc(Up)]);else if(n[0]instanceof a.Box){let r=n[0];this.shapes2face(e.edges,[new a.Segment(new a.Point(r.xmin,r.ymin),new a.Point(r.xmax,r.ymin)),new a.Segment(new a.Point(r.xmax,r.ymin),new a.Point(r.xmax,r.ymax)),new a.Segment(new a.Point(r.xmax,r.ymax),new a.Point(r.xmin,r.ymax)),new a.Segment(new a.Point(r.xmin,r.ymax),new a.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof a.Edge&&n[1]instanceof a.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new a.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new a.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new a.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();a.Utils.EQ_0(e)?this._orientation=jo.NOT_ORIENTABLE:a.Utils.LT(e,0)?this._orientation=jo.CCW:this._orientation=jo.CW}return this._orientation}isSimple(e){return hr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let o of e){let s=n.search(o.box);for(let l of s){if(o===l||l.face!==e||o.shape instanceof a.Segment&&l.shape instanceof a.Segment&&(o.next===l||o.prev===l))continue;let u=o.shape.intersect(l.shape);for(let c of u)if(!(c.equalTo(o.start)&&c.equalTo(l.end)&&l===o.prev)&&!(c.equalTo(o.end)&&c.equalTo(l.start)&&l===o.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new a.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}a.Face=hr;class Ju extends En{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof a.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof a.Vector){this.norm=e[1].clone();return}throw J.ILLEGAL_PARAMETERS}}clone(){return new Ju(this.pt,this.norm)}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new a.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))&&a.Utils.GE(n.cross(this.norm),0)}coord(e){return fg(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new a.Segment(this.pt,e),new a.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Segment)return Qu(this,e);if(e instanceof a.Arc)return Yu(this,e);if(e instanceof a.Line)return Zp(this,e);if(e instanceof a.Ray)return Vv(this,e);if(e instanceof a.Circle)return Jp(this,e);if(e instanceof a.Box)return Bv(this,e);if(e instanceof a.Polygon)return eg(this,e)}rotate(e,n=new a.Point){return new a.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new a.Line(this.pt,this.norm),i=Ar(r,e);return i=i.filter(s=>this.contains(s)),i.length===0||i.length===2?"":new a.Segment(this.pt,i[0]).svg(n)}}a.Ray=Ju;const xy=(...t)=>new a.Ray(...t);a.ray=xy;let Vn=class Zn{constructor(){this.faces=new a.PlanarSet,this.edges=new a.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof a.Circle||e[0]instanceof a.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new a.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new a.Face(this,i));else this.faces.add(new a.Face(this,r));else this.faces.add(new a.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new Zn;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new a.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return n.face.insert(i,o),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let s of e.edges)for(let l of n.edges){let u=Yp(s,l);for(let c of u)Nr(s,c,r.int_points1),Nr(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=Jt(r.int_points1),r.int_points2_sorted=Jt(r.int_points2),Rr(e,r.int_points1_sorted),Rr(n,r.int_points2_sorted),qu(r),r.int_points1_sorted=Jt(r.int_points1),r.int_points2_sorted=Jt(r.int_points2),Pa(r.int_points1),Ca(r.int_points1,n);for(let s of r.int_points1_sorted)s.edge_before&&s.edge_after&&s.edge_before.bv===s.edge_after.bv&&(r.int_points2[s.id]=-1,s.id=-1);if(r.int_points1=r.int_points1.filter(s=>s.id>=0),r.int_points2=r.int_points2.filter(s=>s.id>=0),r.int_points1.forEach((s,l)=>{s.id=l}),r.int_points2.forEach((s,l)=>{s.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=Jt(r.int_points1),r.int_points2_sorted=Jt(r.int_points2);let i,o;for(let s=1;s<r.int_points1_sorted.length;s++)if(o=r.int_points1_sorted[s],i=r.int_points1_sorted[s-1],o.edge_before&&o.edge_before.bv===_s){let l=i.edge_after,u=o.edge_before,c=e.getChain(l,u);Uf(r.int_points2[i.id],r.int_points2[o.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new a.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Uf(r.int_points2[o.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new Qn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,o)=>o.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let o=[...i.faces][0];if(o.orientation()!==n){for(let s of r)if(o.shapes.every(l=>s.contains(l))){s.addFace(o.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof a.Point){let n=Ti(this,e);return n===_s||n===mt}else return ug(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle||e instanceof a.Line||e instanceof a.Segment||e instanceof a.Arc){let[n,r]=a.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let n=[Number.POSITIVE_INFINITY,new a.Segment],r,i;for(let o of this.edges){let s=n[0];[r,i]=a.Distance.shape2planarSet(o.shape,e.edges,s),a.Utils.LT(r,s)&&(n=[r,i])}return n}}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Ji(e,this);if(e instanceof a.Ray)return eg(e,this);if(e instanceof a.Circle)return Qp(e,this);if(e instanceof a.Segment)return bu(e,this);if(e instanceof a.Arc)return Ku(e,this);if(e instanceof a.Polygon)return Fv(e,this);if(e instanceof a.Multiline)return Uv(e,this)}translate(e){let n=new Zn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new a.Point){let r=new Zn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.rotate(e,n)));return r}scale(e,n){let r=new Zn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.scale(e,n)));return r}transform(e=new a.Matrix){let n=new Zn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${bn({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};a.Polygon=Vn;const Py=(...t)=>new a.Polygon(...t);a.polygon=Py;const{Circle:Cl,Line:$f,Point:Hf,Vector:Co,Utils:Ll}=a;class Ii{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new Co(e.pc,n),i=e.r*e.r,o=r.dot(r);return Ll.EQ_0(o)?new Hf(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/o))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(Ll.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),o=new Co(e.pc,n.pc);o=o.normalize();let s=e.pc.translate(o.multiply(i));return new $f(s,o)}else{let i=new Co(e.pc,n.pc),o=e.r*e.r/(i.dot(i)-n.r*n.r),s=e.pc.translate(i.multiply(o)),l=Math.abs(o)*n.r;return new Cl(s,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(Ll.EQ_0(r))return n.clone();{let o=e.r*e.r/(2*r),s=new Co(e.pc,i.end);return s=s.multiply(o/r),new Cl(e.pc.translate(s),o)}}inverse(e){if(e instanceof Hf)return Ii.inversePoint(this.circle,e);if(e instanceof Cl)return Ii.inverseCircle(this.circle,e);if(e instanceof $f)return Ii.inverseLine(this.circle,e)}}a.Inversion=Ii;const Cy=t=>new a.Inversion(t);a.inversion=Cy;class x{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new a.Vector(e,r).length,new a.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(a.Utils.EQ_0(r))return[n.r,new a.Segment(e,n.toArc().start)];{let o=Math.abs(r-n.r),s=new a.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(s);return[o,new a.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return x.point2point(e,n.start);let r=new a.Vector(n.start,n.end),i=new a.Vector(n.start,e),o=new a.Vector(n.end,e),s=r.dot(i),l=-r.dot(o),u,c;if(a.Utils.GE(s,0)&&a.Utils.GE(l,0)){let f=n.tangentInStart();return u=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[u,new a.Segment(e,c)]}else return s<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new a.Circle(n.pc,n.r),i=[],o,s;return[o,s]=x.point2circle(e,r),s.end.on(n)&&i.push(x.point2circle(e,r)),i.push(x.point2point(e,n.start)),i.push(x.point2point(e,n.end)),x.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof a.Segment?x.point2segment(e,n.shape):x.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[];return i.push(x.point2line(e.start,n)),i.push(x.point2line(e.end,n)),x.sort(i),i[0]}static segment2segment(e,n){let r=Hs(e,n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[],o,s;return[o,s]=x.point2segment(n.start,e),i.push([o,s.reverse()]),[o,s]=x.point2segment(n.end,e),i.push([o,s.reverse()]),i.push(x.point2segment(e.start,n)),i.push(x.point2segment(e.end,n)),x.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),[o,s]=x.point2line(n.center,i);if(a.Utils.GE(o,n.r)&&s.end.on(e))return x.point2circle(s.end,n);{let[l,u]=x.point2circle(e.start,n),[c,f]=x.point2circle(e.end,n);return a.Utils.LT(l,c)?[l,u]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),o=new a.Circle(n.pc,n.r),[s,l]=x.point2line(o.center,i);if(a.Utils.GE(s,o.r)&&l.end.on(e)){let[d,h]=x.point2circle(l.end,o);if(h.end.on(n))return[d,h]}let u=[];u.push(x.point2arc(e.start,n)),u.push(x.point2arc(e.end,n));let c,f;return[c,f]=x.point2segment(n.start,e),u.push([c,f.reverse()]),[c,f]=x.point2segment(n.end,e),u.push([c,f.reverse()]),x.sort(u),u[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),o=n.toArc();return x.point2point(i.start,o.start)}else{let i=new a.Line(e.center,n.center),o=i.intersect(e),s=i.intersect(n),l=[];return l.push(x.point2point(o[0],s[0])),l.push(x.point2point(o[0],s[1])),l.push(x.point2point(o[1],s[0])),l.push(x.point2point(o[1],s[1])),x.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let[i,o]=x.point2line(e.center,n),[s,l]=x.point2circle(o.end,e);return l=l.reverse(),[s,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.point2line(i.center,n);if(a.Utils.GE(o,i.r)){let[l,u]=x.point2circle(s.end,i);if(u.end.on(e))return[l,u]}else{let l=[];return l.push(x.point2line(e.start,n)),l.push(x.point2line(e.end,n)),x.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.circle2circle(i,n);if(s.start.on(e))return[o,s];{let l=[];return l.push(x.point2circle(e.start,n)),l.push(x.point2circle(e.end,n)),x.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),o=new a.Circle(n.center,n.r),[s,l]=x.circle2circle(i,o);if(l.start.on(e)&&l.end.on(n))return[s,l];{let u=[],c,f;return[c,f]=x.point2arc(e.start,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(e.end,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(n.start,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2arc(n.end,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2point(e.start,n.start),u.push([c,f]),[c,f]=x.point2point(e.start,n.end),u.push([c,f]),[c,f]=x.point2point(e.end,n.start),u.push([c,f]),[c,f]=x.point2point(e.end,n.end),u.push([c,f]),x.sort(u),u[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=x.point2edge(e,i);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=e.distanceTo(i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e.edges)for(let o of n.edges){let[s,l]=i.shape.distanceTo(o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),o=r*r+i*i,s=e.merge(n),l=s.xmax-s.xmin,u=s.ymax-s.ymin,c=l*l+u*u;return[o,c]}static minmax_tree_process_level(e,n,r,i){let o,s;for(let f of n)[o,s]=x.box2box_minmax(e.box,f.item.key),f.item.value instanceof a.Edge?i.insert([o,s],f.item.value.shape):i.insert([o,s],f.item.value),a.Utils.LT(s,r)&&(r=s);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),u=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...u].filter(f=>{let[d,h]=x.box2box_minmax(e.box,f.max);return a.Utils.LE(d,r)});return r=x.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new ji,o=[n.index.root],s=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return s=x.minmax_tree_process_level(e,o,s,i),i}static minmax_tree_calc_distance(e,n,r){let i,o;if(n!=null&&!n.isNil()){if([i,o]=x.minmax_tree_calc_distance(e,n.left,r),o)return[i,o];if(a.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[s,l]=x.distance(e,n.item.value);return a.Utils.LT(s,i[0])&&(i=[s,l]),[i,o]=x.minmax_tree_calc_distance(e,n.right,i),[i,o]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new a.Segment],o=!1;if(n instanceof a.PlanarSet){let s=x.minmax_tree(e,n,r);[i,o]=x.minmax_tree_calc_distance(e,s.root,i)}return i}static sort(e){e.sort((n,r)=>a.Utils.LT(n[0],r[0])?-1:a.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n){let[o,s]=x.distance(e,i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e)for(let o of n){let[s,l]=x.distance(i.shape,o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}}a.Distance=x;const{Multiline:Ly,Point:hg,Segment:Ay,Polygon:pg}=a;function Zu(t){return new hg(t.split(" ").map(Number))}function gg(t){return t.split(", ").map(Zu)}function ec(t){const e=gg(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new Ay(e[r],e[r+1]));return new Ly(n)}function Ny(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(ec)}function mg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new pg;let r;return e.forEach((i,o)=>{let s=i.split(", ").map(u=>new hg(u.split(" ").map(Number)));const l=n.addFace(s);o===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function Oy(t){const n=t.split(/\)\), \(\(/).map(o=>"(("+o+"))").map(mg),r=new pg;return n.reduce((o,s)=>[...o,...s==null?void 0:s.faces],[]).forEach(o=>r.addFace([...o==null?void 0:o.shapes])),r}function Ry(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return mg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return Oy(e)}}function My(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Zu)}function ky(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(ec).reduce((n,r)=>[...n,...r],[])}function _g(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return Zu(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return gg(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return ec(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return Ny(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return Ry(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(_g).map(i=>i instanceof Array?i:[i]).reduce((i,o)=>[...i,...o],[])}else{if(vg(t))return My(t);if(yg(t))return ky(t)}}return[]}function vg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function yg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function Dy(t){return t.startsWith("POINT")||vg(t)||t.startsWith("LINESTRING")||yg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}a.isWktString=Dy;a.parseWKT=_g;a.BooleanOperations=ey;a.Relations=Xu;var F=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(F||{}),ys=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(ys||{}),Es=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(Es||{}),Pe=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(Pe||{});function zy(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function we(t){const e=[];for(const n of t)n&&e.push(n);return e}function Uy(t,e){let n=t[0],r=1/0;for(const i of t){const o=e(i);o<r&&(r=o,n=i)}return n}function Fy(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Qs(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const o=e[i],s=typeof o=="function",l=s?o(n):n[o],u=s?o(r):r[o],c=Fy(l,u,"asc");if(c!==0)return c}return 0})}function no(t,e){const n=[];for(const r of t)n.every(o=>!e(o,r))&&n.push(r);return n}function bf(){}function Wy(t,e=0){if(!Number.isInteger(e))throw new Error("Precision must be an integer.");const n=Math.pow(10,e);return Math.round(t*n)/n}function Kf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const By="[object RegExp]",Vy="[object String]",Gy="[object Number]",jy="[object Boolean]",Qf="[object Arguments]",$y="[object Symbol]",Hy="[object Date]",by="[object Map]",Ky="[object Set]",Qy="[object Array]",Yy="[object Function]",qy="[object ArrayBuffer]",Al="[object Object]",Xy="[object Error]",Jy="[object DataView]",Zy="[object Uint8Array]",eE="[object Uint8ClampedArray]",tE="[object Uint16Array]",nE="[object Uint32Array]",rE="[object BigUint64Array]",iE="[object Int8Array]",oE="[object Int16Array]",sE="[object Int32Array]",lE="[object BigInt64Array]",aE="[object Float32Array]",uE="[object Float64Array]";function Yf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function qf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function cE(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Nt(t,e)}return Nt(t,e)}function Nt(t,e,n){if(Object.is(t,e))return!0;let r=qf(t),i=qf(e);if(r===Qf&&(r=Al),i===Qf&&(i=Al),r!==i)return!1;switch(r){case Vy:return t.toString()===e.toString();case Gy:{const l=t.valueOf(),u=e.valueOf();return l===u||Number.isNaN(l)&&Number.isNaN(u)}case jy:case Hy:case $y:return Object.is(t.valueOf(),e.valueOf());case By:return t.source===e.source&&t.flags===e.flags;case Yy:return t===e}n=n??new Map;const o=n.get(t),s=n.get(e);if(o!=null&&s!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(r){case by:{if(t.size!==e.size)return!1;for(const[l,u]of t.entries())if(!e.has(l)||!Nt(u,e.get(l),n))return!1;return!0}case Ky:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),u=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=u.findIndex(h=>Nt(f,h,n));if(d===-1)return!1;u.splice(d,1)}return!0}case Qy:case Zy:case eE:case tE:case nE:case rE:case iE:case oE:case sE:case lE:case aE:case uE:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Nt(t[l],e[l],n))return!1;return!0}case qy:return t.byteLength!==e.byteLength?!1:Nt(new Uint8Array(t),new Uint8Array(e),n);case Jy:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Nt(t.buffer,e.buffer,n);case Xy:return t.name===e.name&&t.message===e.message;case Al:{if(!(Nt(t.constructor,e.constructor,n)||Kf(t)&&Kf(e)))return!1;const u=[...Object.keys(t),...Yf(t)],c=[...Object.keys(e),...Yf(e)];if(u.length!==c.length)return!1;for(let f=0;f<u.length;f++){const d=u[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const _=e[d];if(!Nt(h,_,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}let Eg=new w(0,0),wg=null,di=null,Sg=null,ro=[],Tg=[],io=[],Ig=!1,xg=[],Pg=[],Cg=!1,fE=[],Lg=45,za=null,Ua=null,Ag=null,Ng=null,Og=null,Rg=null,Mg=[],kg=0,Dg="#fff",zg=1;const tc=()=>Eg,dE=()=>wg,ee=()=>di,Ug=()=>Sg,Ne=()=>ro,zt=()=>io,hE=()=>Ig,pE=()=>xg,gE=()=>Pg,mE=()=>Cg,_E=()=>fE,Fg=()=>Lg,vE=()=>Ag,Ys=()=>Ng,nc=()=>Og,yE=()=>Rg,rc=()=>Mg,EE=()=>kg,Gt=()=>Dg,jt=()=>zg,It=()=>{if(!za)throw new Error("getScreenCanvasDrawController() returned null");return za},wE=()=>{if(!Ua)throw new Error("getInputController() returned null");return Ua},ic=()=>ro.filter(t=>io.includes(t.id)),SE=()=>ro.filter(t=>!io.includes(t.id)),Mr=t=>io.includes(t.id),oc=t=>Tg.includes(t.id),TE=t=>Eg=t,IE=t=>wg=t,kr=(t,e=!0)=>{var n;(n=ee())==null||n.stop(),di=t,di.subscribe(r=>{var o;const i=(o=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:o.instructions;Ug()!==i&&xE(i||null)}),di.start(),console.log("User clicked on tool: ",{activeTool:di.src.config.context.type}),e&&Mn(Pe.activeTool)},xE=t=>Sg=t,Kr=(t,e=!1)=>{e&&DE(Pe.entities,t),ro=t},Fa=t=>Tg=t,H=t=>io=t,sc=t=>Ig=t,lc=t=>xg=t,W=t=>Pg=t,be=t=>(Wg(null),Bg(null),lc([]),Cg=t),PE=(t,e=!0)=>{Lg=t,e&&Mn(Pe.activeTool)},CE=t=>za=t,LE=t=>Ua=t,ac=t=>Ag=t,Wg=t=>Ng=t,Bg=t=>Og=t,ge=t=>Rg=t,AE=t=>Mg=t,NE=t=>kg=t,OE=(t,e=!0)=>{Dg=t,e&&Mn(Pe.activeLineColor)},RE=(t,e=!0)=>{zg=t,e&&Mn(Pe.activeLineWidth)},$t=(t,e)=>{const n=t.map(i=>i.id),r=Ne().filter(i=>!n.includes(i.id));return Kr(r,e),r},Re=(t,e)=>{const n=[...Ne(),...t];return Kr(n,e),n},ME=[Pe.activeTool,Pe.angleStep,Pe.activeLineColor,Pe.activeLineWidth,Pe.screenZoom],kE=[Pe.entities],ws=zy();function DE(t,e){if(!kE.includes(t))return;const n=ws.peek();cE(e,n==null?void 0:n.value)||(console.log("Pushing undo state",t,e),ws.push({variable:t,value:e}))}function Vg(t){const e=t.variable,n=t.value;switch(e){case Pe.entities:ro=n;break}}function Gg(){const t=ws.undo();t&&Vg(t)}function jg(){const t=ws.redo();t&&Vg(t)}function Mn(t){ME.includes(t)&&window.dispatchEvent(new CustomEvent(Es.UPDATE_STATE))}var q=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t.Measurement="Measurement",t))(q||{});const Wa=1e-6,Lo=10,Ao=30,zE="#111",UE="#FFFF00",uc=15,FE=15,cc=15,N=15,fc=1e3,WE=3,Xf=20,Jf=20,BE=200,VE=20,Zf=7,GE=2,jE=20,$E=40,HE="#b6ff9a",bE="#6899f3",KE=1,QE=[5,5],$g="#999",Hg=1,bg=[5,5],YE=.1,Xn=20,qE=150,No=20,XE="#161616",JE="#FFF",ZE=16,e1="#999",t1=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"],Ba=Math.PI/180;function Be(t,e){return Math.abs(t.x-e.x)<Wa&&Math.abs(t.y-e.y)<Wa}function Kg(t,e,n){const r=ot.getAngle(e,n),i=t.map(o=>({point:o,angle:(new wt(e,o).slope-r+2*Math.PI)%(2*Math.PI)}));return Qs(i,[o=>o.angle]).map(o=>o.point)}function Yn(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}function xt(t,e,n){const i=new tt(e,t).scale(n-1,n-1);return new w(t.x+i.x,t.y+i.y)}class ot{constructor(e,n,r,i,o=!0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"arc");this.arc=new Da(e,n,r,i,o)}static getAngle(e,n){return new wt(e,n).slope}draw(e){var n,r;e.drawArc(this.arc.center,this.arc.r.valueOf(),((n=this.arc)==null?void 0:n.startAngle)||0,((r=this.arc)==null?void 0:r.endAngle)||2*Math.PI)}move(e,n){this.arc=this.arc.translate(e,n)}scale(e,n){const r=xt(this.arc.center,e,n);this.arc=new Da(r,this.arc.r.valueOf()*n,this.arc.startAngle,this.arc.endAngle,this.arc.counterClockwise)}rotate(e,n){this.arc=this.arc.rotate(n,e)}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:o}=this.arc;return new ot(e,n.valueOf(),r,i,o)}return this}intersectsWithBox(e){return this.arc.intersect(e).length>0}isContainedInBox(e){return e.contains(this.arc)}getBoundingBox(){return this.arc.box}getShape(){return this.arc}getSnapPoints(){return[{point:this.arc.center,type:F.CircleCenter},{point:this.arc.start,type:F.LineEndPoint},{point:this.arc.end,type:F.LineEndPoint}]}getIntersections(e){const n=e.getShape();return n?this.arc.intersect(n):[]}getFirstPoint(){return this.arc.center}distanceTo(e){return this.arc.distanceTo(e)}getSvgString(){return this.arc.svg({strokeWidth:this.lineWidth,stroke:Yn(this.lineColor)})||null}getType(){return q.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){const n=no([this.arc.start,this.arc.end,...e],Be),r=Kg(n,this.arc.center,this.arc.start),i=[];for(let o=0;o<r.length-1;o++){const s=r[o],l=r[o+1],u=ot.getAngle(this.arc.center,s),c=ot.getAngle(this.arc.center,l),f=new ot(this.arc.center,Number(this.arc.r),u,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:q.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==q.Arc)throw new Error("Invalid Entity type in JSON");const n=new w(e.shapeData.center.x,e.shapeData.center.y),r=new w(e.shapeData.start.x,e.shapeData.start.y),i=new w(e.shapeData.end.x,e.shapeData.end.y),o=Number(n.distanceTo(r)[0]),s=Number(ot.getAngle(n,r)),l=Number(ot.getAngle(n,i)),u=e.shapeData.counterClockwise,c=new ot(n,o,s,l,u);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class Dr{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"circle");e instanceof $o?this.circle=e:this.circle=new $o(e,n)}draw(e){e.drawArc(this.circle.center,this.circle.r,0,2*Math.PI)}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}scale(e,n){const r=xt(this.circle.center,e,n);this.circle=new $o(r,this.circle.r.valueOf()*n)}rotate(e,n){this.circle=this.circle.rotate(n,e)}clone(){return this.circle?new Dr(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){var e;return(e=this.circle)!=null&&e.center?[{point:this.circle.center,type:F.CircleCenter},{point:new w(this.circle.center.x+this.circle.r,this.circle.center.y),type:F.CircleCardinal},{point:new w(this.circle.center.x-this.circle.r,this.circle.center.y),type:F.CircleCardinal},{point:new w(this.circle.center.x,this.circle.center.y+this.circle.r),type:F.CircleCardinal},{point:new w(this.circle.center.x,this.circle.center.y-this.circle.r),type:F.CircleCardinal}]:[]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.circle.center}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle.svg({strokeWidth:this.lineWidth,stroke:Yn(this.lineColor)})||null}getType(){return q.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}async toJson(){var e;return this.circle?{id:this.id,type:q.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new w(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new Dr(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}function Ht(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}class ft{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"segment");e instanceof _t?this.segment=e:this.segment=new _t(e,n)}draw(e){const n=new w(this.segment.start.x,this.segment.start.y),r=new w(this.segment.end.x,this.segment.end.y);e.drawLine(n,r)}move(e,n){this.segment=this.segment.translate(e,n)}scale(e,n){const r=xt(this.segment.start,e,n),i=xt(this.segment.end,e,n);this.segment=new _t(r,i)}rotate(e,n){this.segment=this.segment.rotate(n,e)}clone(){return new ft(this.segment.clone())}intersectsWithBox(e){return this.segment.intersect(e).length>0}isContainedInBox(e){return e.contains(this.segment)}getBoundingBox(){return this.segment.box}getShape(){return this.segment}getSnapPoints(){return[{point:this.segment.start,type:F.LineEndPoint},{point:this.segment.end,type:F.LineEndPoint},{point:this.segment.middle(),type:F.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?this.segment.intersect(n):[]}getFirstPoint(){return this.segment.start}distanceTo(e){return this.segment.distanceTo(e)}getSvgString(){return this.segment.svg({strokeWidth:this.lineWidth,stroke:Yn(this.lineColor)})||null}getType(){return q.Line}containsPointOnShape(e){return this.segment.contains(e)}cutAtPoints(e){const n=no([this.segment.start,this.segment.end,...e],Be),r=Qs(n,[o=>Ht(this.segment.start,o)]),i=[];for(let o=0;o<r.length-1;o++)i.push(new ft(r[o],r[o+1]));return i}async toJson(){return{id:this.id,type:q.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}}static async fromJson(e){const n=new w(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new w(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new ft(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class Ss{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"point");e instanceof w?this.point=new w(e.x,e.y):this.point=new w(e,n)}draw(e){e.drawArc(this.point,5,0,Math.PI*2)}move(e,n){this.point=this.point.translate(e,n)}scale(e,n){this.point=xt(this.point,e,n)}rotate(e,n){this.point=this.point.rotate(n,e)}clone(){return new Ss(this.point.clone())}intersectsWithBox(){return!1}isContainedInBox(e){return e.contains(this.point)}getBoundingBox(){return this.point?new Dt(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return[{point:this.point,type:F.Point}]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point.distanceTo(e)}getSvgString(){return this.point.svg({strokeWidth:this.lineWidth,stroke:Yn(this.lineColor)})||null}getType(){return q.Point}containsPointOnShape(e){return this.point.equalTo(e)}async toJson(){return{id:this.id,type:q.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}}static async fromJson(e){const n=new w(e.shapeData.point.x,e.shapeData.point.y),r=new Ss(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function n1(t){return new Vn([new w(Math.min(t.low.x,t.high.x),Math.min(t.low.y,t.high.y)),new w(Math.min(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new w(Math.max(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new w(Math.max(t.low.x,t.high.x),Math.min(t.low.y,t.high.y))])}function dc(t,e){return new Vn([new w(Math.min(t.x,e.x),Math.min(t.y,e.y)),new w(Math.min(t.x,e.x),Math.max(t.y,e.y)),new w(Math.max(t.x,e.x),Math.max(t.y,e.y)),new w(Math.max(t.x,e.x),Math.min(t.y,e.y))])}function at(t){const e=[];return t.edges.forEach(n=>{e.push(n.shape)}),e}class bt{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"polygon");e instanceof Vn?this.polygon=e:this.polygon=dc(e,n)}draw(e){at(this.polygon).forEach(n=>{const r=new w(n.start.x,n.start.y),i=new w(n.end.x,n.end.y);e.drawLine(r,i)})}move(e,n){this.polygon=this.polygon.translate(new tt(e,n))}scale(e,n){const r=this.polygon.box.center,i=xt(r,e,n);this.polygon=this.polygon.translate(new tt(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e)}clone(){return new bt(this.polygon.clone())}intersectsWithBox(e){return Xu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=at(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_VALUE,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=at(this.polygon);return[{point:e[0],type:F.LineEndPoint},{point:e[1],type:F.LineEndPoint},{point:e[2],type:F.LineEndPoint},{point:e[3],type:F.LineEndPoint},{point:n[0].middle(),type:F.LineMidPoint},{point:n[1].middle(),type:F.LineMidPoint},{point:n[2].middle(),type:F.LineMidPoint},{point:n[3].middle(),type:F.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?at(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:Yn(this.lineColor)})}getType(){return q.Rectangle}containsPointOnShape(e){return at(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y}))}}}static async fromJson(e){const n=new Vn(e.shapeData.points.map(i=>new w(i.x,i.y))),r=new bt(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function r1(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,o=JSON.parse(i);o.entities||n(new Error("Invalid JSON file"));const s=we(o.entities.map(l=>{switch(l.type){case q.Arc:return ot.fromJson(l);case q.Circle:return Dr.fromJson(l);case q.Line:return ft.fromJson(l);case q.Point:return Ss.fromJson(l);case q.Rectangle:return bt.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));Kr(we(await Promise.all(s)),!0),e()}),r.readAsText(t,"utf-8")})}var Qg={exports:{}};(function(t,e){(function(n,r){r()})(qr,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){u(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof qr=="object"&&qr.global===qr?qr:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=s.URL||s.webkitURL,_=document.createElement("a");f=f||c.name||"download",_.download=f,_.rel="noopener",typeof c=="string"?(_.href=c,_.origin===location.origin?o(_):i(_.href)?r(c,f,d):o(_,_.target="_blank")):(_.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(_.href)},4e4),setTimeout(function(){o(_)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){o(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var _=c.type==="application/octet-stream",y=/constructor/i.test(s.HTMLElement)||s.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||_&&y||l)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var m=T.result;m=v?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},T.readAsDataURL(c)}else{var g=s.URL||s.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});s.saveAs=u.saveAs=u,t.exports=u})})(Qg);var hc=Qg.exports;async function i1(){const e=Ne().map(o=>o.toJson()),n={entities:we(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});hc.saveAs(i,"open-web-cad--drawing.json")}function Yg(t,e){let n=e.x,r=e.y,i=0,o=0;const s=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),o=Math.max(o,d.ymax))}),console.log("exporting svg",s);const l=i-n+Lo*2,u=o-r+Lo*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const _=d.translate(new tt(new w(n,r),new w(Lo,Lo))).svg({stroke:Yn(f.lineColor),strokeWidth:f.lineWidth});_&&s.push(_)}),{svgString:`
      <svg width="${l}" height="${u}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${u}" fill="white" />
        ${s.join("")}
      </svg>
    `,width:l,height:u}}function o1(){const t=Ne(),e=tc(),n=Yg(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});hc.saveAs(r,"open-web-cad--drawing.svg")}function s1(t,e,n,r){return new Promise((i,o)=>{const s=document.createElement("canvas"),l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const u=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);u.onload=()=>{s.width=e+r*2,s.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,s.width,s.height),l.drawImage(u,r,r),URL.revokeObjectURL(f),s.toBlob(d=>{d?i(d):o(new Error("Could not convert canvas to blob"))},"image/png")},u.src=f})}async function l1(){const t=Ne(),e=tc(),n=Yg(t,e),r=await s1(n.svgString,n.width,n.height,20);hc.saveAs(r,"open-web-cad--drawing.png")}function qg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function a1(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function u1(){const t=a1();if(t.__xstate__)return t.__xstate__}const c1=t=>{if(typeof window>"u")return;const e=u1();e&&e.register(t)};class ed{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Xg=".",f1="",Jg="",d1="#",h1="*",Zg="xstate.init",p1="xstate.error",Va="xstate.stop";function g1(t,e){return{type:`xstate.after.${t}.${e}`}}function Ga(t,e){return{type:`xstate.done.state.${t}`,output:e}}function m1(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function em(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function tm(t){return{type:Zg,input:t}}function Lt(t){setTimeout(()=>{throw t})}const _1=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nm(t,e){const n=td(t),r=td(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?nm(n[i],r[i]):!1)}function pc(t){if(im(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function td(t){if(Y1(t))return t.value;if(typeof t!="string")return t;const e=pc(t);return v1(e)}function v1(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function nd(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function rm(t){return im(t)?t:[t]}function rn(t){return t===void 0?[]:rm(t)}function ja(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function im(t){return Array.isArray(t)}function y1(t){return t.type.startsWith("xstate.error.actor")}function er(t){return rm(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function om(t){if(!(t===void 0||t===f1))return rn(t)}function $a(t,e,n){var o,s,l;const r=typeof t=="object",i=r?t:void 0;return{next:(o=r?t.next:t)==null?void 0:o.bind(i),error:(s=r?t.error:e)==null?void 0:s.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function rd(t,e){return`${e}.${t}`}function gc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,s=t.getStateNodeById(i).config.invoke;return(Array.isArray(s)?s[r]:s).src}function id(t,e){return`${t.sessionId}.${e}`}let E1=0;function w1(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,s={},{clock:l,logger:u}=e,c={schedule:(h,_,y,v,T=Math.random().toString(36).slice(2))=>{const g={source:h,target:_,event:y,delay:v,id:T,startedAt:Date.now()},p=id(h,T);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete s[p],delete d._snapshot._scheduledEvents[p],d._relay(h,_,y)},v);s[p]=m},cancel:(h,_)=>{const y=id(h,_),v=s[y];delete s[y],delete d._snapshot._scheduledEvents[y],v!==void 0&&l.clearTimeout(v)},cancelAll:h=>{for(const _ in d._snapshot._scheduledEvents){const y=d._snapshot._scheduledEvents[_];y.source===h&&c.cancel(h,y.id)}}},f=h=>{if(!o.size)return;const _={...h,rootId:t.sessionId};o.forEach(y=>{var v;return(v=y.next)==null?void 0:v.call(y,_)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${E1++}`,_register:(h,_)=>(n.set(h,_),h),_unregister:h=>{n.delete(h.sessionId);const _=i.get(h);_!==void 0&&(r.delete(_),i.delete(h))},get:h=>r.get(h),_set:(h,_)=>{const y=r.get(h);if(y&&y!==_)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,_),i.set(_,h)},inspect:h=>{const _=$a(h);return o.add(_),{unsubscribe(){o.delete(_)}}},_sendInspectionEvent:f,_relay:(h,_,y)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:_,event:y}),_._send(y)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const _ in h){const{source:y,target:v,event:T,delay:g,id:p}=h[_];c.schedule(y,v,T,g,p)}},_clock:l,_logger:u};return d}const mc=1;let Le=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const S1={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class Gn{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new ed(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Le.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...S1,...n},{clock:i,logger:o,parent:s,syncSnapshot:l,id:u,systemId:c,inspect:f}=r;this.system=s?s.system:w1(this,{clock:i,logger:o}),f&&!s&&this.system.inspect($a(f)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=s,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),_=this.eventListeners.get("*");if(!h&&!_)return;const y=new Set([...h?h.values():[],..._?_.values():[]]);for(const v of Array.from(y))v(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,o;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...e,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{(i=s.next)==null||i.call(s,e)}catch(l){Lt(l)}break;case"done":for(const s of this.observers)try{(o=s.next)==null||o.call(s,e)}catch(l){Lt(l)}this._stopProcedure(),this._complete(),this._doneEvent=m1(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var o;const i=$a(e,n,r);if(this._processingStatus!==Le.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(o=i.complete)==null||o.call(i)}catch(s){Lt(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)Lt(s);else try{i.error(s)}catch(l){Lt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Le.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Le.Running;const e=tm(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Va&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Le.Stopped?this:(this.mailbox.clear(),this._processingStatus===Le.NotStarted?(this._processingStatus=Le.Stopped,this):(this.mailbox.enqueue({type:Va}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){Lt(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Lt(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(o){Lt(o)}}this.observers.clear(),n&&Lt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,em(this.id,e))}_stopProcedure(){return this._processingStatus!==Le.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new ed(this._process.bind(this)),this._processingStatus=Le.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Le.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:c1)(this)}toJSON(){return{xstate$$type:mc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[_1](){return this}getSnapshot(){return this._snapshot}}function Ts(t,...[e]){return new Gn(t,e)}function T1(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,o]}function I1(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function x1(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=T1,e.execute=I1,e}function P1(t,e,n,r,{id:i,systemId:o,src:s,input:l,syncSnapshot:u}){const c=typeof s=="string"?gc(e.machine,s):s,f=typeof i=="function"?i(n):i;let d;return c&&(d=Ts(c,{id:f,src:s,parent:t.self,syncSnapshot:u,systemId:o,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[jn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function C1(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==Le.Stopped&&n.start()})}function L1(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(s,l){}return o.type="snapshot.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=P1,o.execute=C1,o}function A1(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,s=typeof o=="string"?e.children[o]:o;let l=e.children;return s&&(l={...l},delete l[s.id]),[jn(e,{children:l}),s]}function N1(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Le.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function sm(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=A1,e.execute=N1,e}function _c(t,e,n,r){const{machine:i}=r,o=typeof t=="function",s=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!s)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof s!="function")return _c(s,e,n,r);const l={context:e,event:n},u=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(r,l,s):s(l,u)}const vc=t=>t.type==="atomic"||t.type==="final";function zr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function oo(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function Is(t){const e=new Set(t),n=am(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))od(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of zr(r))if(i.type!=="history"&&!e.has(i)){const o=od(i);for(const s of o)e.add(s)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function lm(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(vc(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=lm(i,e);return r}function am(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function um(t,e){const n=Is(e);return lm(t,am(n))}function yc(t,e){return e.type==="compound"?zr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?zr(e).every(n=>yc(t,n)):e.type==="final"}const qs=t=>t[0]===d1;function O1(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===h1)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let s=0;s<i.length;s++){const l=i[s],u=o[s];if(l==="*")return s===i.length-1;if(l!==u)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function R1(t){const e=t.config.after;if(!e)return[];const n=(i,o)=>{const s=g1(i,t.id),l=s.type;return t.entry.push(iw(s,{id:l,delay:i})),t.exit.push(x1(l)),l};return Object.keys(e).flatMap((i,o)=>{const s=e[i],l=typeof s=="string"?{target:s}:s,u=Number.isNaN(+i)?i:+i,c=n(u);return rn(l).map(f=>({...f,event:c,delay:u}))}).map(i=>{const{delay:o}=i;return{...Pn(t,i.event,i),delay:o}})}function Pn(t,e,n){const r=om(n.target),i=n.reenter??!1,o=D1(t,r),s={...n,actions:rn(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...s,source:`#${t.id}`,target:o?o.map(l=>`#${l.id}`):void 0})};return s}function M1(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Jg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,er(r).map(i=>Pn(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,er(t.config.onDone).map(r=>Pn(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,er(n.onDone).map(i=>Pn(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,er(n.onError).map(i=>Pn(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,er(n.onSnapshot).map(i=>Pn(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function k1(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:rn(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function D1(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(qs(n))return t.machine.getStateNodeById(n);const r=n[0]===Xg;if(r&&!t.parent)return xs(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return xs(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function cm(t){const e=om(t.config.target);return e?{target:e.map(n=>typeof n=="string"?xs(t.parent,n):n)}:t.parent.initial}function Nn(t){return t.type==="history"}function od(t){const e=fm(t);for(const n of e)for(const r of oo(n,t))e.add(r);return e}function fm(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of zr(r))n(i)}}return n(t),e}function Ur(t,e){if(qs(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function xs(t,e){if(typeof e=="string"&&qs(e))try{return t.machine.getStateNodeById(e)}catch{}const n=pc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Ur(r,i)}return r}function Ps(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Ur(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const s=Ur(t,o);if(!s)return i;const l=Ps(s,e[o]);return i.concat(l)},[]))}function z1(t,e,n,r){const o=Ur(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function U1(t,e,n,r){const i=Object.keys(e),o=Ur(t,i[0]),s=Ec(o,e[i[0]],n,r);return!s||!s.length?t.next(n,r):s}function F1(t,e,n,r){const i=[];for(const o of Object.keys(e)){const s=e[o];if(!s)continue;const l=Ur(t,o),u=Ec(l,s,n,r);u&&i.push(...u)}return i.length?i:t.next(n,r)}function Ec(t,e,n,r){return typeof e=="string"?z1(t,e,n,r):Object.keys(e).length===1?U1(t,e,n,r):F1(t,e,n,r)}function W1(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function mn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function B1(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function dm(t,e,n){const r=new Set;for(const i of t){let o=!1;const s=new Set;for(const l of r)if(B1(Ha([i],e,n),Ha([l],e,n)))if(mn(i.source,l.source))s.add(l);else{o=!0;break}if(!o){for(const l of s)r.delete(l);r.add(i)}}return Array.from(r)}function V1(t){const[e,...n]=t;for(const r of oo(e,void 0))if(n.every(i=>mn(i,r)))return r}function wc(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(Nn(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of wc(cm(r),e))n.add(i);else n.add(r);return[...n]}function hm(t,e){const n=wc(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||mn(i,t.source)))return t.source;const r=V1(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Ha(t,e,n){var i;const r=new Set;for(const o of t)if((i=o.target)!=null&&i.length){const s=hm(o,n);o.reenter&&o.source===s&&r.add(s);for(const l of e)mn(l,s)&&r.add(l)}return[...r]}function G1(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function ba(t,e,n,r,i,o){if(!t.length)return e;const s=new Set(e._nodes);let l=e.historyValue;const u=dm(t,s,l);let c=e;i||([c,l]=b1(c,r,n,u,s,l,o)),c=Fr(c,r,n,u.flatMap(d=>d.actions),o),c=$1(c,r,n,u,s,o,l,i);const f=[...s];c.status==="done"&&(c=Fr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),o));try{return l===e.historyValue&&G1(e._nodes,s)?c:jn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function j1(t,e,n,r,i){if(r.output===void 0)return;const o=Ga(i.id,i.output!==void 0&&i.parent?ja(i.output,t.context,e,n.self):void 0);return ja(r.output,t.context,o,n.self)}function $1(t,e,n,r,i,o,s,l){let u=t;const c=new Set,f=new Set;H1(r,s,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((_,y)=>_.order-y.order)){i.add(h);const _=[];_.push(...h.entry);for(const y of h.invoke)_.push(L1(y.src,{...y,syncSnapshot:!!y.onSnapshot}));if(f.has(h)){const y=h.initial.actions;_.push(...y)}if(u=Fr(u,e,n,_,o,h.invoke.map(y=>y.id)),h.type==="final"){const y=h.parent;let v=(y==null?void 0:y.type)==="parallel"?y:y==null?void 0:y.parent,T=v||h;for((y==null?void 0:y.type)==="compound"&&o.push(Ga(y.id,h.output!==void 0?ja(h.output,u.context,e,n.self):void 0));(v==null?void 0:v.type)==="parallel"&&!d.has(v)&&yc(i,v);)d.add(v),o.push(Ga(v.id)),T=v,v=v.parent;if(v)continue;u=jn(u,{status:"done",output:j1(u,e,n,u.machine.root,T)})}}return u}function H1(t,e,n,r){for(const i of t){const o=hm(i,e);for(const l of i.target||[])!Nn(l)&&(i.source!==l||i.source!==o||i.reenter)&&(r.add(l),n.add(l)),pr(l,e,n,r);const s=wc(i,e);for(const l of s){const u=oo(l,o);(o==null?void 0:o.type)==="parallel"&&u.push(o),pm(r,e,n,u,!i.source.parent&&i.reenter?void 0:o)}}}function pr(t,e,n,r){var i;if(Nn(t))if(e[t.id]){const o=e[t.id];for(const s of o)r.add(s),pr(s,e,n,r);for(const s of o)Nl(s,t.parent,r,e,n)}else{const o=cm(t);for(const s of o.target)r.add(s),o===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),pr(s,e,n,r);for(const s of o.target)Nl(s,t.parent,r,e,n)}else if(t.type==="compound"){const[o]=t.initial.target;Nn(o)||(r.add(o),n.add(o)),pr(o,e,n,r),Nl(o,t,r,e,n)}else if(t.type==="parallel")for(const o of zr(t).filter(s=>!Nn(s)))[...r].some(s=>mn(s,o))||(Nn(o)||(r.add(o),n.add(o)),pr(o,e,n,r))}function pm(t,e,n,r,i){for(const o of r)if((!i||mn(o,i))&&t.add(o),o.type==="parallel")for(const s of zr(o).filter(l=>!Nn(l)))[...t].some(l=>mn(l,s))||(t.add(s),pr(s,e,n,t))}function Nl(t,e,n,r,i){pm(n,r,i,oo(t,e))}function b1(t,e,n,r,i,o,s){let l=t;const u=Ha(r,i,o);u.sort((f,d)=>d.order-f.order);let c;for(const f of u)for(const d of W1(f)){let h;d.history==="deep"?h=_=>vc(_)&&mn(_,f):h=_=>_.parent===f,c??(c={...o}),c[d.id]=Array.from(i).filter(h)}for(const f of u)l=Fr(l,e,n,[...f.exit,...f.invoke.map(d=>sm(d.id))],s),i.delete(f);return[l,c||o]}let sd=!1;function gm(t,e,n,r,i,o){const{machine:s}=t;let l=t;for(const c of r){let y=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:_}});try{sd=d,d(h,_)}finally{sd=!1}};var u=y;const f=typeof c=="function",d=f?c:s.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},_=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===Le.Running?y():n.defer(()=>{y()});continue}const v=d,[T,g,p]=v.resolve(n,l,h,_,d,i);l=T,"retryResolve"in v&&(o==null||o.push([v,g])),"execute"in v&&(n.self._processingStatus===Le.Running?v.execute(n,g):n.defer(v.execute.bind(null,n,g))),p&&(l=gm(l,e,n,p,i,o))}return l}function Fr(t,e,n,r,i,o){const s=o?[]:void 0,l=gm(t,e,n,r,{internalQueue:i,deferredActorIds:o},s);return s==null||s.forEach(([u,c])=>{u.retryResolve(n,l,c)}),l}function Ol(t,e,n,r=[]){let i=t;const o=[];function s(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),o.push(c)}if(e.type===Va)return i=jn(ld(i,e,n),{status:"stopped"}),s(i,e,[]),{snapshot:i,microstates:o};let l=e;if(l.type!==Zg){const c=l,f=y1(c),d=ad(c,i);if(f&&!d.length)return i=jn(t,{status:"error",error:c.error}),s(i,c,[]),{snapshot:i,microstates:o};i=ba(d,t,n,l,!1,r),s(i,c,d)}let u=!0;for(;i.status==="active";){let c=u?K1(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=ad(l,i)}i=ba(c,i,n,l,!1,r),u=i!==f,s(i,l,c)}return i.status!=="active"&&ld(i,l,n),{snapshot:i,microstates:o}}function ld(t,e,n){return Fr(t,e,n,Object.values(t.children).map(r=>sm(r)),[])}function ad(t,e){return e.machine.getTransitionData(e,t)}function K1(t,e){const n=new Set,r=t._nodes.filter(vc);for(const i of r)e:for(const o of[i].concat(oo(i,void 0)))if(o.always){for(const s of o.always)if(s.guard===void 0||_c(s.guard,t.context,e,t)){n.add(s);break e}}return dm(Array.from(n),new Set(t._nodes),t.historyValue)}function Q1(t,e){const n=Is(Ps(t,e));return um(t,[...n])}function Y1(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const q1=function(e){return nm(e,this.value)},X1=function(e){return this.tags.has(e)},J1=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},Z1=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:s,hasTag:l,matches:u,...c}=this;return{...c,tags:Array.from(n)}},ew=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Ho(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:um(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:q1,hasTag:X1,can:J1,getMeta:ew,toJSON:Z1}}function jn(t,e={}){return Ho({...t,...e},t.machine)}function tw(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:s,can:l,hasTag:u,matches:c,getMeta:f,toJSON:d,...h}=t,_={};for(const v in o){const T=o[v];_[v]={snapshot:T.getPersistedSnapshot(e),src:T.src,systemId:T._systemId,syncSnapshot:T._syncSnapshot}}return{...h,context:mm(s),children:_}}function mm(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:mc,id:r.id};else{const i=mm(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function nw(t,e,n,r,{event:i,id:o,delay:s},{internalQueue:l}){const u=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof s=="string"){const d=u&&u[s];f=typeof d=="function"?d(n,r):d}else f=typeof s=="function"?s(n,r):s;return typeof f!="number"&&l.push(c),[e,{event:c,id:o,delay:f}]}function rw(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function iw(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=nw,n.execute=rw,n}function ow(t,{machine:e,context:n},r,i){const o=(s,l={})=>{const{systemId:u,input:c}=l;if(typeof s=="string"){const f=gc(e,s);if(!f)throw new Error(`Actor logic '${s}' not implemented in machine '${e.id}'`);const d=Ts(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:s,systemId:u});return i[d.id]=d,d}else return Ts(s,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:s,systemId:u})};return(s,l)=>{const u=o(s,l);return i[u.id]=u,t.defer(()=>{u._processingStatus!==Le.Stopped&&u.start()}),u}}function sw(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},s={context:e.context,event:n.event,spawn:ow(t,e,n.event,o),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(s,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(s,r):f}const u=Object.assign({},e.context,l);return[jn(e,{context:u,children:Object.keys(o).length?{...e.children,...o}:e.children})]}function G(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=sw,e}let ud=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function lw(t,e,n,r,{to:i,event:o,id:s,delay:l},u){var y;const c=e.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);const f=typeof o=="function"?o(n,r):o;let d;if(typeof l=="string"){const v=c&&c[l];d=typeof v=="function"?v(n,r):v}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let _;if(typeof h=="string"){if(h===ud.Parent?_=t.self._parent:h===ud.Internal?_=t.self:h.startsWith("#_")?_=e.children[h.slice(2)]:_=(y=u.deferredActorIds)!=null&&y.includes(h)?h:e.children[h],!_)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else _=h||t.self;return[e,{to:_,event:f,id:s,delay:d}]}function aw(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function uw(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:o}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,o);return}t.system._relay(t.self,n,r.type===p1?em(t.self.id,r.data):r)})}function Ut(t,e,n){function r(i,o){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=lw,r.retryResolve=aw,r.execute=uw,r}const cd=new WeakMap;function Jn(t,e,n){let r=cd.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},cd.set(t,r)),r[e]}const cw={},si=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class Sc{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Xg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?nd(this.config.states,(r,i)=>new Sc(r,{_parent:this,_key:i,_machine:this.machine})):cw,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=rn(this.config.entry).slice(),this.exit=rn(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=rn(e.tags).slice()}_initialize(){this.transitions=M1(this),this.config.always&&(this.always=er(this.config.always).map(e=>Pn(this,Jg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(si),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(si),eventType:null})}:void 0,history:this.history,states:nd(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(si)})),entry:this.entry.map(si),exit:this.exit.map(si),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Jn(this,"invoke",()=>rn(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??rd(this.id,n),s=typeof r=="string"?r:`xstate.invoke.${rd(this.id,n)}`;return{...e,src:s,id:o,systemId:i,toJSON(){const{onDone:l,onError:u,...c}=e;return{...c,type:"xstate.invoke",src:s,id:o}}}}))}get on(){return Jn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return Jn(this,"delayedTransitions",()=>R1(this))}get initial(){return Jn(this,"initial",()=>k1(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const s=Jn(this,`candidates-${r}`,()=>O1(this,r));for(const l of s){const{guard:u}=l,c=e.context;let f=!1;try{f=!u||_c(u,c,n,e)}catch(d){const h=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),o=l;break}}return o?[o]:void 0}get events(){return Jn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const fw="#";class Tc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Sc(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new Tc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=Q1(this.root,e.value),r=Is(Ps(this.root,n));return Ho({_nodes:[...r],context:e.context||{},children:{},status:yc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return Ol(e,n,r).snapshot}microstep(e,n,r){return Ol(e,n,r).microstates}getTransitionData(e,n){return Ec(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=Ho({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Fr(o,n,e,[G(({spawn:l,event:u,self:c})=>i({spawn:l,input:u.input,self:c}))],r):o}getInitialSnapshot(e,n){const r=tm(n),i=[],o=this.getPreInitialState(e,r,i),s=ba([{target:[...fm(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:l}=Ol(s,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=pc(e),r=n.slice(1),i=qs(n[0])?n[0].slice(fw.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return xs(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return tw(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(u=>{const c=i[u],f=c.snapshot,d=c.src,h=typeof d=="string"?gc(this,d):d;if(!h)return;const _=Ts(h,{id:u,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[u]=_});const o=Ho({...e,children:r,_nodes:Array.from(Is(Ps(this.root,e.value)))},this);let s=new Set;function l(u,c){if(!s.has(u)){s.add(u);for(let f in u){const d=u[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===mc){u[f]=c[d.id];continue}l(d,c)}}}}return l(o.context,r),o}}function Ct(t,e){return new Tc(t,e)}function Wr(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const o=i.distanceTo(t);o&&o[0]<r[0]&&(r=o,n=i)}),{distance:r[0],segment:r[1],entity:n}}function dw(t,e){const n=Wr(e.worldMouseLocation,Ne());if(n&&n.distance<cc){const r=n.entity;return!e.holdingCtrl&&!e.holdingShift?H([r.id]):e.holdingCtrl?Mr(r)?H(zt().filter(i=>i!==r.id)):H([...zt(),r.id]):H([...zt(),r.id]),{...t,startPoint:null}}return{...t,startPoint:e.worldMouseLocation}}function hw(t,e,n){const r=new bt(t,e),i=_m(r,t),o=we(Ne().map(s=>{if(i){if(s.intersectsWithBox(r.getBoundingBox())||s.isContainedInBox(r.getBoundingBox()))return n&&Mr(s)?null:s.id}else if(s.isContainedInBox(r.getBoundingBox()))return n&&Mr(s)?null:s.id;return null}));H(o)}function pw(t,e){const n=new bt(t,e),r=_m(n,t);n.lineColor=r?HE:bE,n.lineWidth=KE,n.lineStyle=QE,W([n])}function _m(t,e){if(!t.getShape()||!e)return!1;const n=Math.min(...t.getShape().vertices.map(r=>r.x));return Math.abs(e.x-n)>Wa}const Kt=Ct({types:{},context:{startPoint:null,type:z.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{be(!1),W([]),H([])},HANDLE_FIRST_SELECT_POINT:G(({context:t,event:e})=>dw(t,e)),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");pw(t.startPoint,e.drawController.getWorldMouseLocation())},SELECT_ENTITIES_INSIDE_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");hw(t.startPoint,e.worldMouseLocation,e.holdingCtrl),W([])},DELETE_SELECTED_ENTITIES:()=>{Kr(SE(),!0),H([]),W([])},RESET_SELECTION:G(()=>(W([]),H([]),{startPoint:null}))}});var ye=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t.NUMBER_INPUT="NUMBER_INPUT",t.TEXT_INPUT="TEXT_INPUT",t.ABSOLUTE_POINT_INPUT="ABSOLUTE_POINT_INPUT",t.RELATIVE_POINT_INPUT="RELATIVE_POINT_INPUT",t))(ye||{});function dt(t,e){if(e.type==="MOUSE_CLICK")return e.worldMouseLocation;if(e.type==="NUMBER_INPUT"){if(!t)throw new Error("Cannot get relative point by distance if no start point is provided");const n=e.value,i=new tt(e.worldMouseLocation.x-t.x,e.worldMouseLocation.y-t.y).normalize();return t.translate(i.multiply(n))}else{if(e.type===ye.ABSOLUTE_POINT_INPUT)return e.value;if(e.type===ye.RELATIVE_POINT_INPUT){if(!t)throw new Error("Cannot get relative point by coordinates if no start point is provided");const n=e.value;return t.clone().translate(n.x,n.y)}else throw new Error("Received unexpected event type in DRAW_FINAL_LINE of LineEntity")}}var bo=(t=>(t.INIT="INIT",t.WAITING_FOR_START_POINT="WAITING_FOR_START_POINT",t.WAITING_FOR_END_POINT="WAITING_FOR_END_POINT",t))(bo||{});const gw=Ct({types:{},context:{startPoint:null,type:z.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"},ABSOLUTE_POINT_INPUT:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"},ESC:{actions:"SWITCH_TO_SELECT_TOOL"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},NUMBER_INPUT:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ABSOLUTE_POINT_INPUT:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},RELATIVE_POINT_INPUT:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"},ENTER:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:G(()=>(be(!0),H([]),W([]),ge(null),{startPoint:null})),RECORD_START_POINT:G(({event:t})=>{const e=dt(null,t);return ge(e),{startPoint:e}}),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new ft(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=Gt(),n.lineWidth=jt(),W([n])},DRAW_FINAL_LINE:G(({context:t,event:e})=>{if(!t.startPoint)throw new Error("Start point is not set during DRAW_FINAL_LINE in LineEntity");const n=dt(t.startPoint,e),r=new ft(t.startPoint,n);return r.lineColor=Gt(),r.lineWidth=jt(),Re([r],!0),W([new ft(n,n)]),ge(n),{startPoint:n}}),SWITCH_TO_SELECT_TOOL:()=>{kr(new Gn(Kt))}}}),mw=Ct({types:{},context:{startPoint:null,type:z.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"},ABSOLUTE_POINT_INPUT:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},NUMBER_INPUT:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ABSOLUTE_POINT_INPUT:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},RELATIVE_POINT_INPUT:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{be(!0),W([]),H([]),ge(null)},RECORD_START_POINT:G(({event:t})=>{const e=dt(null,t);return ge(e),{startPoint:e}}),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new bt(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=Gt(),n.lineWidth=jt(),W([n])},DRAW_FINAL_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw Error("Trying to DRAW_FINAL_RECTANGLE when startPoint is not defined in rectangle-tool");const n=dt(t.startPoint,e),r=new bt(t.startPoint,n);r.lineColor=Gt(),r.lineWidth=jt(),Re([r],!0)}}}),_w=Ct({types:{},context:{centerPoint:null,type:z.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"},ABSOLUTE_POINT_INPUT:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},NUMBER_INPUT:{actions:"DRAW_FINAL_CIRCLE",target:bo.INIT},ABSOLUTE_POINT_INPUT:{actions:"DRAW_FINAL_CIRCLE",target:bo.INIT},RELATIVE_POINT_INPUT:{actions:"DRAW_FINAL_CIRCLE",target:bo.INIT},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:G(()=>(be(!0),W([]),H([]),ge(null),{centerPoint:null})),RECORD_START_POINT:G(({event:t})=>{const e=dt(null,t);return ge(e),{centerPoint:e}}),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{const n=new Dr(t.centerPoint,Ht(e.drawController.getWorldMouseLocation(),t.centerPoint));n.lineColor=Gt(),n.lineWidth=jt(),W([n])},DRAW_FINAL_CIRCLE:G(({context:t,event:e})=>{if(!t.centerPoint)throw new Error("Trying to DRAW_FINAL_CIRCLE when centerPoint is not yet defined in circle tool");const n=dt(t.centerPoint,e),r=new Dr(t.centerPoint,Ht(n,t.centerPoint));return r.lineColor=Gt(),r.lineWidth=jt(),Re([r],!0),W([]),{centerPoint:null}})}});function vw(t,e,n,r){const i=Qs(no([e,...r,t,n],Be),[s=>Ht(e,s)]),o=i.findIndex(s=>Be(t,s));if(o===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[o-1]||e,i[o+1]||n]}function yw(t,e){const n=t.map(r=>({point:r,angle:new wt(e,r).slope}));return Qs(n,[r=>r.angle]).map(r=>r.point)}function Ew(t,e,n){const r=yw(no([...n,t],Be),e.getShape().center),i=r.findIndex(o=>Be(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function ww(t,e,n){const r=Kg(no([...n,t],Be),e.getShape().center,e.getShape().start),i=r.findIndex(o=>Be(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function fd(t,e){return we(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function dd(t,e,n){const r=t.getShape(),[i,o]=vw(e,r.start,r.end,n),l=t.cutAtPoints([i,o]).filter(u=>!u.containsPointOnShape(e));$t([t],!1),Re(l,!1)}function Sw(t,e,n){if(n.length===0){$t([t],!1);return}const[r,i]=Ew(e,t,n),o=t.getShape(),s=o.center,l=[r,i,e].map(d=>Math.atan2(d.y-s.y,d.x-s.x)),[u,c]=Tw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new ot(s,o.r,u,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),$t([t],!1),Re([f],!1)}function Tw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function Iw(t,e,n){const[r,i]=ww(e,t,n);if(Be(r,i)){$t([t],!0);return}t.cutAtPoints([r,i]).filter(o=>!o.containsPointOnShape(e)).forEach(o=>{Object.assign(o,{lineColor:t.lineColor,lineWidth:t.lineWidth}),Re([o],!1)}),$t([t],!1)}const xw=Ct({types:{},context:{startPoint:null,type:z.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:G(()=>(be(!1),W([]),H([]),{})),HANDLE_MOUSE_CLICK:G(({context:t,event:e})=>(Pw(e.worldMouseLocation),t))}});function Pw(t){const e=Wr(t,Ne());if(!e)return;const n=e.segment.start,r=fd(e.entity,Ne());switch(e.entity.getType()){case q.Line:{const o=e.entity;dd(o,n,r);break}case q.Circle:{const o=e.entity;Sw(o,n,r);break}case q.Arc:{const o=e.entity;Iw(o,n,r);break}case q.Rectangle:{const o=e.entity,l=at(o.getShape()).map(f=>new ft(f)),u=Wr(t,l);$t([o],!1),Re(l,!1);const c=fd(u.entity,Ne());dd(u.entity,n,c);break}case q.Image:}Kr(Ne(),!0)}function hd(t,e,n){t.forEach(r=>r.move(e,n))}const Cw=Ct({types:{},context:{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null,type:z.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>zt().length>0,target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>zt().length===0,target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:Kt,onDone:{actions:G(()=>({startPoint:null})),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Ut("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:Ut("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:Ut("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_ENTITIES"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:G(()=>(be(!1),W([]),H([]),ge(null),{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null})),ENABLE_HELPERS:()=>{be(!0)},RECORD_START_POINT:G(({event:t})=>(ge(t.worldMouseLocation),{startPoint:t.worldMouseLocation})),COPY_SELECTION_BEFORE_MOVE:G(({context:t})=>{const e=ic();return W(e),$t(e,!1),H([]),{startPoint:t.startPoint,originalSelectedEntities:we(e.map(n=>n.clone())),movedEntities:e}}),DRAW_TEMP_MOVE_ENTITIES:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawController.getWorldMouseLocation(),r=t.originalSelectedEntities.map(o=>o.clone());hd(r,n.x-t.startPoint.x,n.y-t.startPoint.y);const i=new ft(t.startPoint,n);i.lineColor=$g,i.lineWidth=Hg,i.lineStyle=bg,W([i,...r])},MOVE_SELECTION:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=e.worldMouseLocation;hd(t.originalSelectedEntities,n.x-t.startPoint.x,n.y-t.startPoint.y),Re(t.originalSelectedEntities,!0),W([]),H([])},DESELECT_ENTITIES:G(()=>(W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:G(({context:t})=>(Re(t.originalSelectedEntities,!1),W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),...Kt.implementations.actions}});class $i{constructor(e,n,r,i=0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"imageElement");D(this,"polygon");D(this,"angle");this.imageElement=e,n instanceof Vn?this.polygon=n:this.polygon=dc(n,r),r instanceof w?this.angle=i:this.angle=r}draw(e){at(this.polygon).forEach(i=>{e.drawLine(i.start,i.end)});const n=this.polygon.box.width,r=this.polygon.box.height;e.drawImage(this.imageElement,this.polygon.box.xmin,this.polygon.box.ymin,n,r,this.angle)}move(e,n){this.polygon=this.polygon.translate(new tt(e,n))}scale(e,n){const r=this.polygon.box.center,i=xt(r,e,n);this.polygon=this.polygon.translate(new tt(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e),this.angle+=n}clone(){const e=document.createElement("img");return e.src=this.imageElement.src,new $i(e,this.polygon.clone())}intersectsWithBox(e){return Xu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=at(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=at(this.polygon);return[{point:e[0],type:F.LineEndPoint},{point:e[1],type:F.LineEndPoint},{point:e[2],type:F.LineEndPoint},{point:e[3],type:F.LineEndPoint},{point:n[0].middle(),type:F.LineMidPoint},{point:n[1].middle(),type:F.LineMidPoint},{point:n[2].middle(),type:F.LineMidPoint},{point:n[3].middle(),type:F.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?at(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:Yn(this.lineColor)})}getType(){return q.Image}containsPointOnShape(e){return at(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y})),imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new Vn(e.shapeData.points.map(o=>new w(o.x,o.y))),r=new Image;r.src=e.shapeData.imageData;const i=new $i(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function pd(t,e,n,r){const i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y);if(i===0||o===0)return null;const s=t/e,l=i/o;if(s<l){const u=Math.abs(o*s),c=n.x<r.x?n.x:n.x-u,f=n.y<r.y?n.y:n.y-o;return new Dt(c,f,c+u,f+o)}else{const u=Math.abs(i/s),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-u;return new Dt(c,f,c+i,f+u)}}const vm=Ct({types:{},context:{type:z.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[ye.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{actions:"SWITCH_TO_SELECT_TOOL"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"},ABSOLUTE_POINT_INPUT:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},NUMBER_INPUT:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},ABSOLUTE_POINT_INPUT:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},RELATIVE_POINT_INPUT:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},ESC:{actions:"SWITCH_TO_SELECT_TOOL"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:G(()=>(be(!0),W([]),H([]),ge(null),{startPoint:null,imageElement:null})),STORE_IMAGE_DATA:G(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:G(({context:t,event:e})=>{const n=dt(null,e);return ge(n),{...t,startPoint:n}}),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(Be(t.startPoint,e.drawController.getWorldMouseLocation()))return;const n=dt(t.startPoint,e),r=pd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,n);if(!r)return;const i=new $i(t.imageElement,r.low,r.high,0),o=new bt(dc(t.startPoint,n));W([i]),lc([o])},DRAW_FINAL_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=pd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldMouseLocation);if(!n)return;const r=new $i(t.imageElement,n1(n));Re([r],!0)},SWITCH_TO_SELECT_TOOL:()=>{kr(new Gn(Kt))}}});function gd(t,e,n,r){const i=Ht(e,r)/Ht(e,n);t.forEach(o=>o.scale(e,i))}const Lw=Ct({types:{},context:{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[],type:z.SCALE},initial:"INIT",states:{INIT:{description:"Initializing the scale tool",always:{actions:"INIT_SCALE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>zt().length>0,target:"WAITING_FOR_BASE_VECTOR_START_POINT"},{guard:()=>zt().length===0,target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to scale",meta:{instructions:"Select what you want to scale, then ENTER"},invoke:{id:"selectToolInsideTheScaleTool",src:Kt,onDone:{actions:G(()=>({baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]})),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Ut("selectToolInsideTheScaleTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_SCALE_TOOL"]},ENTER:{actions:Ut("selectToolInsideTheScaleTool",({event:t})=>t)},DRAW:{actions:Ut("selectToolInsideTheScaleTool",({event:t})=>t)}}},WAITING_FOR_BASE_VECTOR_START_POINT:{description:"Select the origin of the scale operation",meta:{instructions:"Select the origin of the scale operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_START_POINT"],target:"WAITING_FOR_BASE_VECTOR_END_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_BASE_VECTOR_END_POINT:{description:"Select the end of the base scale line",meta:{instructions:"Select the end of the base scale line"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_END_POINT","COPY_SELECTION_BEFORE_SCALE"],target:"WAITING_FOR_SCALE_VECTOR_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_SCALE_VECTOR_END_POINT:{description:"Select the end of the scale line",meta:{instructions:"Select the end of the scale line"},on:{DRAW:{actions:["DRAW_TEMP_SCALE_ENTITIES"]},MOUSE_CLICK:{actions:["SCALE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_SCALE_TOOL:()=>{be(!1),W([]),H([]),ge(null)},ENABLE_HELPERS:()=>{be(!0)},RECORD_BASE_VECTOR_START_POINT:G(({context:t,event:e})=>(ge(e.worldMouseLocation),{...t,baseVectorStartPoint:e.worldMouseLocation})),RECORD_BASE_VECTOR_END_POINT:G(({context:t,event:e})=>({...t,baseVectorEndPoint:e.worldMouseLocation})),COPY_SELECTION_BEFORE_SCALE:G(({context:t})=>{const e=ic();return W(e),$t(e,!1),H([]),{...t,originalSelectedEntities:we(e.map(n=>n.clone()))}}),DRAW_TEMP_SCALE_ENTITIES:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling draw temp scale entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=we(t.originalSelectedEntities.map(i=>i.clone()));gd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),W(r)},SCALE_SELECTION:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling scale selection without some scale vector endpoints");const n=e.worldMouseLocation,r=we(t.originalSelectedEntities.map(i=>i.clone()));gd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),Re(r,!0),W([]),H([])},DESELECT_ENTITIES:G(()=>(W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:G(({context:t})=>(Re(t.originalSelectedEntities,!1),W([]),W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),...Kt.implementations.actions}});function md(t,e,n,r){const i=new wt(e,r).slope-new wt(e,n).slope;t.forEach(o=>o.rotate(e,i))}const Aw=Ct({types:{},context:{rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[],type:z.ROTATE},initial:"INIT",states:{INIT:{description:"Initializing the rotate tool",always:{actions:"INIT_ROTATE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>zt().length>0,target:"WAITING_FOR_ROTATION_ORIGIN"},{guard:()=>zt().length===0,target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to rotate",meta:{instructions:"Select what you want to rotate, then ENTER"},invoke:{id:"selectToolInsideTheRotateTool",src:Kt,onDone:{actions:G(({context:t})=>({...t})),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Ut("selectToolInsideTheRotateTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_ROTATE_TOOL"]},ENTER:{actions:Ut("selectToolInsideTheRotateTool",({event:t})=>t)},DRAW:{actions:Ut("selectToolInsideTheRotateTool",({event:t})=>t)}}},WAITING_FOR_ROTATION_ORIGIN:{description:"Select the origin of the rotate operation",meta:{instructions:"Select the origin of the rotate operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ORIGIN"],target:"WAITING_FOR_ANGLE_START_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_START_POINT:{description:"Select the end of the base rotate line",meta:{instructions:"Select the end of the base rotate line"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ANGLE_START_POINT","COPY_SELECTION_BEFORE_ROTATE"],target:"WAITING_FOR_ANGLE_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_END_POINT:{description:"Select the end of the rotate line",meta:{instructions:"Select the end of the rotate line"},on:{DRAW:{actions:["DRAW_TEMP_ROTATE_ENTITIES"]},MOUSE_CLICK:{actions:["ROTATE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_ROTATE_TOOL:()=>{be(!1),W([]),H([]),ge(null)},ENABLE_HELPERS:()=>{be(!0)},RECORD_ROTATION_ORIGIN:G(({context:t,event:e})=>(ge(e.worldMouseLocation),{...t,rotationOrigin:e.worldMouseLocation})),RECORD_ROTATION_ANGLE_START_POINT:G(({context:t,event:e})=>({...t,angleStartPoint:e.worldMouseLocation})),COPY_SELECTION_BEFORE_ROTATE:G(({context:t})=>{const e=ic();return W(e),$t(e,!1),H([]),{...t,originalSelectedEntities:we(e.map(n=>n.clone()))}}),DRAW_TEMP_ROTATE_ENTITIES:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling draw temp rotate entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=we(t.originalSelectedEntities.map(i=>i.clone()));md(r,t.rotationOrigin,t.angleStartPoint,n),W(r)},ROTATE_SELECTION:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling rotate selection without some rotate vector endpoints");const n=e.worldMouseLocation,r=we(t.originalSelectedEntities.map(i=>i.clone()));md(r,t.rotationOrigin,t.angleStartPoint,n),Re(r,!0),W([]),H([])},DESELECT_ENTITIES:G(({context:t})=>(W([]),H([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]})),RESTORE_ORIGINAL_ENTITIES:G(({context:t})=>(Re(t.originalSelectedEntities,!1),W([]),H([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]})),...Kt.implementations.actions}});function _d(t=[]){let e=t[0],n;for(const r of t)(n==null||r>n)&&(n=r,e=r);return e}function vd(t=[]){let e=t[0],n;for(const r of t)(n==null||r<n)&&(n=r,e=r);return e}class Hi{constructor(e,n,r){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"startPoint");D(this,"endPoint");D(this,"offsetPoint");this.startPoint=e,this.endPoint=n,this.offsetPoint=r}getDrawPoints(){const e=new wt(this.startPoint,this.endPoint),[,n]=this.offsetPoint.distanceTo(e),r=n.end;let i;Be(r,this.offsetPoint)?i=e.norm:i=new tt(r,this.offsetPoint);const o=i.normalize(),s=this.startPoint.clone().translate(i),l=this.endPoint.clone().translate(i),u=this.startPoint.clone().translate(o.multiply(Jf)),c=this.endPoint.clone().translate(o.multiply(Jf)),f=s.clone().translate(o.multiply(Xf)),d=l.clone().translate(o.multiply(Xf)),_=new w((s.x+l.x)/2,(s.y+l.y)/2).clone().translate(o.multiply(jE));return{offsetStartPoint:s,offsetEndPoint:l,offsetStartPointExtend:f,offsetEndPointExtend:d,offsetStartPointMargin:u,offsetEndPointMargin:c,midpointMeasurementLineOffset:_,normalUnit:o}}draw(e){if(Be(this.startPoint,this.endPoint))return;const n=this.getDrawPoints();if(!n)return;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u,midpointMeasurementLineOffset:c,normalUnit:f}=n;e.drawArrowHead(r,i),e.drawArrowHead(i,r),e.drawLine(r,i),e.drawLine(l,o),e.drawLine(u,s);const d=Wy(Ht(this.startPoint,this.endPoint),GE);e.drawText(String(d),c,{textAlign:"center",textDirection:f.rotate90CCW(),fontSize:$E})}move(e,n){this.startPoint=this.startPoint.translate(e,n),this.endPoint=this.endPoint.translate(e,n),this.offsetPoint=this.offsetPoint.translate(e,n)}scale(e,n){this.startPoint=xt(this.startPoint,e,n),this.endPoint=xt(this.endPoint,e,n),this.offsetPoint=xt(this.offsetPoint,e,n)}rotate(e,n){this.startPoint=this.startPoint.rotate(n,e),this.endPoint=this.endPoint.rotate(n,e),this.offsetPoint=this.offsetPoint.rotate(n,e)}clone(){return new Hi(this.startPoint.clone(),this.endPoint.clone(),this.offsetPoint.clone())}intersectsWithBox(e){const n=this.getDrawPoints(),r=[new _t(n.offsetStartPoint,n.offsetEndPoint),new _t(n.offsetStartPointMargin,n.offsetStartPointExtend),new _t(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(i.intersect(e).length>0||e.contains(i))return!0;return!1}isContainedInBox(e){const n=this.getDrawPoints(),r=[new _t(n.offsetStartPoint,n.offsetEndPoint),new _t(n.offsetStartPointMargin,n.offsetStartPointExtend),new _t(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(!e.contains(i))return!1;return!0}getBoundingBox(){const e=this.getDrawPoints();if(!e)return null;const n=[e.offsetStartPointMargin,e.offsetStartPointExtend,e.offsetEndPointMargin,e.offsetEndPointExtend];return new Dt(vd(n.map(r=>r.x)),vd(n.map(r=>r.y)),_d(n.map(r=>r.x)),_d(n.map(r=>r.y)))}getShape(){return null}getSnapPoints(){return[]}getIntersections(){return[]}getFirstPoint(){return this.startPoint}distanceTo(e){const n=this.getDrawPoints();if(!n)return null;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u}=n,f=new wt(r,i).distanceTo(e),h=new wt(l,o).distanceTo(e),y=new wt(u,s).distanceTo(e);return Uy([f,h,y],v=>v[0])}getSvgString(){throw new Error("getSvgString for MeasurementEntity not yet implemented")}getType(){return q.Measurement}containsPointOnShape(e){throw new Error("containsPointOnShape for MeasurementEntity not yet implemented")}async toJson(){return{id:this.id,type:q.Measurement,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.startPoint.x,y:this.startPoint.y},endPoint:{x:this.endPoint.x,y:this.endPoint.y},offsetPoint:{x:this.offsetPoint.x,y:this.offsetPoint.y}}}}static async fromJson(e){const n=new w(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new w(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new w(e.shapeData.offsetPoint.x,e.shapeData.offsetPoint.y),o=new Hi(n,r,i);return o.id=e.id,o.lineColor=e.lineColor,o.lineWidth=e.lineWidth,o}}const Nw=Ct({types:{},context:{startPoint:null,endPoint:null,type:z.MEASUREMENT},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_MEASUREMENT_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the measurement",meta:{instructions:"Select the start point of the measurement"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"},ABSOLUTE_POINT_INPUT:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the measurement",meta:{instructions:"Select the end point of the measurement"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},NUMBER_INPUT:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},ABSOLUTE_POINT_INPUT:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},RELATIVE_POINT_INPUT:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},ESC:{target:"INIT"}}},WAITING_FOR_OFFSET:{description:"Select the offset to display the measurement at",meta:{instructions:"Select the offset to display the measurement at"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},NUMBER_INPUT:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},ABSOLUTE_POINT_INPUT:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},RELATIVE_POINT_INPUT:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_MEASUREMENT_TOOL:G(()=>(be(!0),H([]),W([]),ge(null),{startPoint:null,endPoint:null})),RECORD_START_POINT:G(({event:t})=>{const e=dt(null,t);return ge(e),{startPoint:e}}),RECORD_END_POINT:G(({context:t,event:e})=>{const n=dt(t.startPoint,e);return ge(n),{...t,endPoint:n}}),DRAW_TEMP_MEASUREMENT:({context:t,event:e})=>{const n=t.startPoint;let r,i;if(t.endPoint)r=t.endPoint,i=e.drawController.getWorldMouseLocation();else{if(r=e.drawController.getWorldMouseLocation(),Be(n,r))return;const s=new tt(n,r).rotate(-90*Ba).normalize();i=n.clone().translate(s.multiply(BE))}const o=new Hi(t.startPoint,r,i);o.lineColor=Gt(),o.lineWidth=jt(),W([o])},DRAW_FINAL_MEASUREMENT:({context:t,event:e})=>{const n=dt(t.endPoint,e),r=new Hi(t.startPoint,t.endPoint,n);r.lineColor=Gt(),r.lineWidth=jt(),Re([r],!0)}}}),Cs={[z.LINE]:gw,[z.RECTANGLE]:mw,[z.CIRCLE]:_w,[z.SELECT]:Kt,[z.ERASER]:xw,[z.MOVE]:Cw,[z.SCALE]:Lw,[z.ROTATE]:Aw,[z.IMAGE_IMPORT]:vm,[z.MEASUREMENT]:Nw};function Ow(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const Rw=()=>{const[t,e]=R.useState(z.LINE),[n,r]=R.useState(45),[i,o]=R.useState("#FFF"),[s,l]=R.useState(1),[u,c]=R.useState(1),f=R.useCallback(()=>{var v,T;e((T=(v=ee())==null?void 0:v.getSnapshot())==null?void 0:T.context.type),r(Fg()),o(Gt()),l(jt()),c(It().getScreenScale())},[]),d=v=>{v.ctrlKey&&v.preventDefault()};R.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(Es.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(Es.UPDATE_STATE,f)}),[f]);const h=R.useCallback(v=>{var g;(g=ee())==null||g.stop();const T=new Gn(Cs[v]);kr(T,!1),e(v)},[]),_=R.useCallback(v=>{r(v),PE(v,!1)},[]),y=R.useCallback(()=>{It().setScreenScale(1),It().setScreenOffset(new w(0,0))},[]);return k.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[k.jsx(Q,{title:"Select (s)",icon:_e.Direction,onClick:()=>{h(z.SELECT)},active:t===z.SELECT}),k.jsx(Q,{title:"Line (l)",icon:_e.Line,onClick:()=>{h(z.LINE)},active:t===z.LINE}),k.jsx(Q,{title:"Rectangle (r)",icon:_e.Square,onClick:()=>{h(z.RECTANGLE)},active:t===z.RECTANGLE}),k.jsx(Q,{title:"Circle (c)",icon:_e.Circle,onClick:()=>{h(z.CIRCLE)},active:t===z.CIRCLE}),k.jsx(Q,{className:"mt-2",title:"Move",icon:_e.Expand,iconClassname:"transform rotate-45",onClick:()=>h(z.MOVE),active:t===z.MOVE}),k.jsx(Q,{title:"Scale",icon:_e.Scale,onClick:()=>h(z.SCALE),active:t===z.SCALE}),k.jsx(Q,{title:"Rotate",icon:_e.Clockwise,onClick:()=>h(z.ROTATE),active:t===z.ROTATE}),k.jsx(Q,{className:"mt-2",title:"Add measurements",icon:_e.Measurement,onClick:()=>h(z.MEASUREMENT),active:t===z.MEASUREMENT}),k.jsx(Q,{className:"mt-2",title:"Undo (ctrl + z)",icon:_e.ArrowLeftCircle,onClick:()=>Gg()}),k.jsx(Q,{title:"Redo (ctrl + shift + z)",icon:_e.ArrowRightCircle,onClick:()=>jg()}),k.jsx(Q,{className:"mt-2",title:"Delete segments",icon:_e.Crop,onClick:()=>h(z.ERASER),active:t===z.ERASER}),k.jsx(Pl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:t1.map(v=>k.jsx(Q,{title:"Change line color",style:{backgroundColor:v},active:v===i,onClick:()=>OE(v)},"line-color--"+v))}),k.jsx(Pl,{title:"Line width",label:String(s)+"px",children:qg(9).map(v=>{const T=v+1;return k.jsx(Q,{title:"Change line width",label:String(T)+"px",active:T===s,onClick:()=>RE(T)},"line-width--"+T)})}),k.jsxs(Pl,{title:"Snap angles",label:n+"°",children:[k.jsx(Q,{title:"Add guide every 5 degrees",label:"5°",onClick:()=>_(5),active:n===5}),k.jsx(Q,{title:"Add guide every 15 degrees",label:"15°",onClick:()=>_(15),active:n===15}),k.jsx(Q,{title:"Add guide every 30 degrees",label:"30°",onClick:()=>_(30),active:n===30}),k.jsx(Q,{title:"Add guide every 45 degrees",label:"45°",onClick:()=>_(45),active:n===45}),k.jsx(Q,{title:"Add guide every 90 degrees",label:"90°",onClick:()=>_(90),active:n===90})]}),k.jsx(Q,{title:"Zoom level",label:(u*100).toFixed(0)+"%",onClick:y}),k.jsx(Q,{className:"relative mt-2",title:"Import image into the current drawing",icon:_e.Image,onClick:bf,children:k.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async v=>{var p;const T=await Ow((p=v.target.files)==null?void 0:p[0]),g=new Gn(vm);g.start(),g.send({type:ye.FILE_SELECTED,image:T}),kr(g),v.target.files=null}})}),k.jsx(Q,{className:"relative",title:"Load from JSON file",icon:_e.Folder,onClick:bf,children:k.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async v=>{var T;await r1((T=v.target.files)==null?void 0:T[0]),v.target.files=null}})}),k.jsx(Q,{title:"Save to JSON file",icon:_e.Save,onClick:()=>i1()}),k.jsx(Q,{title:"Export to SVG file",label:"SVG",onClick:()=>o1()}),k.jsx(Q,{title:"Export to PNG file",label:"PNG",onClick:()=>l1()}),k.jsx(Q,{className:"mt-2",title:"Github",icon:_e.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function Mw(){return k.jsx("div",{children:k.jsx(Rw,{})})}function yd(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const o=t[i];e.push(...r.getIntersections(o))}}return e}function Ka(t,e){let n=null,r=1/0;return t.forEach(i=>{const o=Ht(i.point,e);o<r&&(r=o,n=i)}),{distance:r,snapPoint:n}}function Qa(t,e,n){const{distance:r,snapPoint:i}=Ka(t.filter(l=>l.type!==F.AngleGuide),e);if(r<n)return i;const{distance:o,snapPoint:s}=Ka(t.filter(l=>l.type===F.AngleGuide),e);return o<n?s:null}function kw(t,e){return qg(180/e,n=>{const i=n*e*(Math.PI/180),o=t.x+Math.cos(i),s=t.y+Math.sin(i);return new ft(new w(t.x-1e4*(o-t.x),t.y-1e4*(s-t.y)),new w(t.x+1e4*(o-t.x),t.y+1e4*(s-t.y)))})}function Dw(t,e,n,r,i){let o=null,s=null;const l=[],u=[];e.forEach(_=>{const y=kw(_,r),v=Wr(n,y);v.distance<FE&&(u.push(v.entity),l.push({point:v.segment.start,type:F.AngleGuide}))});const c=[...t.flatMap(_=>_.getSnapPoints()),...yd(we(t)).map(_=>({point:_,type:F.Intersection}))],f=Qa(c,n,i);f&&(o=f);const d=[...l,...yd([...we(t),...u]).map(_=>({point:_,type:F.Intersection}))],h=Qa(d,n,i);return h&&(s=h),{angleGuides:u,entitySnapPoint:o,angleSnapPoint:s}}function Ed(t,e){e.forEach(n=>{t.setLineStyles(oc(n),Mr(n),n.lineColor,n.lineWidth,[]),n.draw(t)})}function zw(t,e){e.forEach(n=>{t.setLineStyles(oc(n),Mr(n),"#FF5500",1,[]),n.draw(t)})}function Uw(t,e,n){if(!e)return;const r=e.point,i=t.worldToScreen(r);switch(t.setLineStyles(!1,!1,UE,1,[]),n&&(t.screenDrawLine(new w(i.x-N/2,i.y),new w(i.x+N/2,i.y)),t.screenDrawLine(new w(i.x,i.y-N/2),new w(i.x,i.y+N/2))),e.type){case F.LineEndPoint:t.screenDrawLine(new w(i.x-N/2,i.y-N/2),new w(i.x+N/2,i.y-N/2)),t.screenDrawLine(new w(i.x+N/2,i.y-N/2),new w(i.x+N/2,i.y+N/2)),t.screenDrawLine(new w(i.x-N/2,i.y+N/2),new w(i.x+N/2,i.y+N/2)),t.screenDrawLine(new w(i.x-N/2,i.y-N/2),new w(i.x-N/2,i.y+N/2));break;case F.LineMidPoint:t.screenDrawLine(new w(i.x,i.y-N/2),new w(i.x-N/2,i.y+N/2)),t.screenDrawLine(new w(i.x-N/2,i.y+N/2),new w(i.x+N/2,i.y+N/2)),t.screenDrawLine(new w(i.x+N/2,i.y+N/2),new w(i.x,i.y-N/2));break;case F.AngleGuide:t.screenDrawLine(new w(i.x-N/2,i.y-N/2),new w(i.x+N/2,i.y-N/2)),t.screenDrawLine(new w(i.x+N/2,i.y-N/2),new w(i.x-N/2,i.y+N/2)),t.screenDrawLine(new w(i.x-N/2,i.y+N/2),new w(i.x+N/2,i.y+N/2)),t.screenDrawLine(new w(i.x+N/2,i.y+N/2),new w(i.x-N/2,i.y-N/2));break;case F.Intersection:t.screenDrawLine(new w(i.x-N/2,i.y-N/2),new w(i.x+N/2,i.y+N/2)),t.screenDrawLine(new w(i.x+N/2,i.y-N/2),new w(i.x-N/2,i.y+N/2));break;case F.CircleCenter:t.drawArc(i,N/2,0,2*Math.PI);break;case F.CircleCardinal:t.screenDrawLine(new w(i.x,i.y-N/2),new w(i.x-N/2,i.y)),t.screenDrawLine(new w(i.x-N/2,i.y),new w(i.x,i.y+N/2)),t.screenDrawLine(new w(i.x,i.y+N/2),new w(i.x+N/2,i.y)),t.screenDrawLine(new w(i.x+N/2,i.y),new w(i.x,i.y-N/2));break}}function Fw(t,e){e.forEach(n=>{t.setLineStyles(oc(n),Mr(n),$g,Hg,bg),n.draw(t)})}function Ww(t,e){if(!e)return;t.setLineStyles(!1,!1,"#FFF",1,[]);const n=t.getScreenMouseLocation();t.screenDrawLine(new w(n.x,n.y-Ao),new w(n.x,n.y+Ao)),t.screenDrawLine(new w(n.x-Ao,n.y),new w(n.x+Ao,n.y))}function Bw(t){t.clearCanvas(),Fw(t,pE()),Ed(t,gE()),Ed(t,Ne()),zw(t,_E());const{snapPoint:e}=Ka(we([Ys(),nc()]),t.getWorldMouseLocation()),n=!!e&&rc().some(r=>r.milliSecondsHovered>fc&&Be(r.snapPoint.point,e.point));Uw(t,e,n),Ww(t,hE()),wE().draw(t)}function Vw(t,e,n,r,i){if(!t)return;const o=e.at(-1);let s;o?Ht(t.point,o.snapPoint.point)<r?s=[...e.slice(0,e.length-1),{...o,milliSecondsHovered:o.milliSecondsHovered+i}]:o.milliSecondsHovered>=fc?s=[...e,{snapPoint:t,milliSecondsHovered:i}]:s=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:s=[{snapPoint:t,milliSecondsHovered:i}];const l=s.slice(0,WE);n(l)}class Gw{constructor(e,n){D(this,"screenOffset",new w(0,0));D(this,"screenScale",1);D(this,"screenMouseLocation");this.context=e,this.canvasSize=n,this.screenMouseLocation=new w(n.x/2,n.y/2),this.setScreenOffset(new w(0,-n.y))}getScreenScale(){return this.screenScale}setScreenScale(e){this.screenScale=e,Mn(Pe.screenZoom)}getScreenOffset(){return this.screenOffset}setScreenOffset(e){this.screenOffset=e,Mn(Pe.screenOffset)}getScreenMouseLocation(){return this.screenMouseLocation}setScreenMouseLocation(e){this.screenMouseLocation=e,Mn(Pe.screenMouseLocation)}getWorldMouseLocation(){return this.screenToWorld(this.screenMouseLocation)}panScreen(e,n){this.screenOffset=new w(this.screenOffset.x-e/this.screenScale,this.screenOffset.y-n/this.screenScale)}zoomScreen(e){const n=this.getWorldMouseLocation(),r=this.getScreenScale()*(1-YE*(e/Math.abs(e)));this.setScreenScale(r);const i=this.getWorldMouseLocation();this.screenOffset=new w(this.screenOffset.x+(n.x-i.x),this.screenOffset.y+(n.y-i.y))}setLineStyles(e,n,r,i,o=[]){this.context.strokeStyle=r,this.context.lineWidth=i,this.context.setLineDash(o),e&&(this.context.lineWidth=i+1),n&&this.context.setLineDash([5,5])}clearCanvas(){var e,n;this.canvasSize!==null&&this.context&&(this.context.fillStyle=zE,this.context.fillRect(0,0,(e=this.canvasSize)==null?void 0:e.x,(n=this.canvasSize)==null?void 0:n.y))}drawLine(e,n){const[r,i]=this.worldsToScreens([e,n]);this.screenDrawLine(r,i)}screenDrawLine(e,n){this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(n.x,n.y),this.context.stroke()}drawArc(e,n,r,i){const o=this.worldToScreen(e),s=n*this.screenScale;this.context.beginPath(),this.context.arc(o.x,o.y,s,r,i),this.context.stroke()}drawArrowHead(e,n){const i=new tt(n,e).normalize(),o=n.clone().translate(i.multiply(VE*this.screenScale)),s=i.rotate(90*Ba),l=i.rotate(-90*Ba),u=o.clone().translate(s.multiply(Zf*this.screenScale)),c=o.clone().translate(l.multiply(Zf*this.screenScale)),[f,d,h]=this.worldsToScreens([n,u,c]);this.context.beginPath(),this.context.moveTo(f.x,f.y),this.context.lineTo(d.x,d.y),this.context.lineTo(h.x,h.y),this.context.lineTo(f.x,f.y),this.context.fillStyle="#FFF",this.context.stroke(),this.context.fill()}drawText(e,n,r={}){const i=this.worldToScreen(n);this.drawTextScreen(e,i,{...r,fontSize:r.fontSize?r.fontSize*this.screenScale:void 0})}drawTextScreen(e,n,r={}){const i={textDirection:new tt(1,0),textAlign:"center",textColor:"#FFF",fontSize:ZE,fontFamily:"sans-serif",...r};this.context.save(),this.context.translate(n.x,n.y);const o=Math.atan2(i.textDirection.y,i.textDirection.x);this.context.rotate(o),this.context.font=`${i.fontSize}px ${i.fontFamily}`,this.context.textAlign=i.textAlign,this.context.fillStyle=i.textColor,this.context.fillText(e,0,0),this.context.restore()}drawImage(e,n,r,i,o,s){const[l,u]=this.worldsToScreens([new w(n,r),new w(i,o)]),c=l.x,f=l.y,d=u.x,h=u.y,_=c+d/2,y=f+h/2;this.context.translate(_,y),this.context.rotate(s),this.context.drawImage(e,-d/2,-h/2,d,h),this.context.rotate(-s),this.context.translate(-_,-y)}worldToScreen(e){return new w((e.x-this.screenOffset.x)*this.screenScale,(e.y-this.screenOffset.y)*this.screenScale)}worldsToScreens(e){return e.map(this.worldToScreen.bind(this))}screenToWorld(e){return new w(e.x/this.screenScale+this.screenOffset.x,e.y/this.screenScale+this.screenOffset.y)}screensToWorlds(e){return e.map(this.screenToWorld.bind(this))}fillRectScreen(e,n,r,i,o){this.context.fillStyle=o,this.context.fillRect(e,n,r,i)}}const jw=/^[0-9]+([.][0-9]+)?$/,wd=/^([0-9]+([.][0-9]+)?)\s*,\s*([0-9]+([.][0-9]+)?)$/,Sd=/^@([0-9]+([.][0-9]+)?)\s*,\s*([0-9]+([.][0-9]+)?)$/;class $w{constructor(){D(this,"text","");document.addEventListener("keydown",e=>{this.handleKeyStroke(e)}),document.addEventListener("mouseup",e=>{this.handleMouseUp(e)}),document.addEventListener("contextmenu",e=>{e.preventDefault()})}draw(e){const n=e.getScreenMouseLocation();e.fillRectScreen(n.x+Xn,n.y+Xn,qE,No,XE),e.drawTextScreen(this.text,new w(n.x+Xn+2,n.y+Xn+No-2),{textAlign:"left",textColor:JE,fontSize:18});const r=this.getToolNamesFromPrefixText(),i=Ug(),o=[];i&&o.push(i),r.length&&o.push(...r),this.drawListBelowInputField(e,o)}handleMouseUp(e){e.button===2&&(e.preventDefault(),e.stopPropagation(),this.handleEnterKey())}handleKeyStroke(e){var n,r;e.preventDefault(),e.stopPropagation(),e.ctrlKey&&e.key==="v"||(e.ctrlKey&&!e.shiftKey&&e.key==="z"?this.handleUndo(e):e.ctrlKey&&e.shiftKey&&e.key==="z"?this.handleRedo(e):e.ctrlKey&&e.key==="y"?this.handleRedo(e):e.key==="Backspace"?(e.preventDefault(),this.text=this.text.slice(0,this.text.length-1)):e.key==="Delete"?(e.preventDefault(),(n=ee())==null||n.send({type:ye.DELETE})):e.key==="Escape"?this.handleEscapeKey():e.key==="Enter"?this.handleEnterKey():((r=e.key)==null?void 0:r.length)===1&&(this.text+=e.key.toUpperCase()))}handleEscapeKey(){var e;this.text===""?(e=ee())==null||e.send({type:ye.ESC}):this.text=""}getToolNamesFromPrefixText(){return this.text===""?[]:Object.keys(Cs).filter(e=>e.startsWith(this.text.toUpperCase()))||null}handleEnterKey(){var e,n,r,i,o,s,l,u,c;if(this.text==="")console.log("ENTER: ",{text:this.text,activeTool:ee()}),(e=ee())==null||e.send({type:ye.ENTER});else if(this.getToolNamesFromPrefixText()[0]){const f=this.getToolNamesFromPrefixText()[0];(n=ee())==null||n.stop();const d=new Gn(Cs[f]);kr(d),console.log("SWITCH TO TOOL: ",{toolName:f,activeTool:((r=ee())==null?void 0:r.src).config.context.type}),this.text=""}else if(jw.test(this.text))console.log(" NUMBER_INPUT: ",{text:this.text,activeTool:ee()}),(s=ee())==null||s.send({type:ye.NUMBER_INPUT,value:parseFloat(this.text),worldMouseLocation:((i=nc())==null?void 0:i.point)||((o=Ys())==null?void 0:o.point)||It().getWorldMouseLocation()}),this.text="";else if(wd.test(this.text)){console.log("ABSOLUTE_POINT_INPUT: ",{text:this.text,activeTool:ee()});const f=wd.exec(this.text);if(!f)return;const d=parseFloat(f[1]),h=parseFloat(f[3]);(l=ee())==null||l.send({type:ye.ABSOLUTE_POINT_INPUT,value:new w(d,-h)}),this.text=""}else if(Sd.test(this.text)){console.log("RELATIVE_POINT_INPUT: ",{text:this.text,activeTool:ee()});const f=Sd.exec(this.text);if(!f)return;const d=parseFloat(f[1]),h=parseFloat(f[3]);(u=ee())==null||u.send({type:ye.RELATIVE_POINT_INPUT,value:new w(d,-h)}),this.text=""}else console.log("TEXT_INPUT: ",{text:this.text,activeTool:ee()}),(c=ee())==null||c.send({type:ye.TEXT_INPUT,value:this.text}),this.text=""}handleUndo(e){var n;e.preventDefault(),Gg(),W([]),H([]),(n=ee())==null||n.send({type:ye.ESC})}handleRedo(e){var n;e.preventDefault(),jg(),W([]),H([]),(n=ee())==null||n.send({type:ye.ESC})}drawListBelowInputField(e,n){const r=e.getScreenMouseLocation(),i=r.y+Xn+No*2+2,o=No;n.forEach((s,l)=>{e.drawTextScreen(s,new w(r.x+Xn+2,i+l*o),{textAlign:"left",textColor:e1,fontSize:18})})}}Rl.createRoot(document.getElementById("root")).render(k.jsx(Wm.StrictMode,{children:k.jsx(Mw,{})}));function Hw(){sc(!0)}function bw(t){var i,o;sc(!0);const e=new w(t.clientX,t.clientY),n=It();n.setScreenMouseLocation(e);const r=vE();if(r&&(n.panScreen(e.x-r.x,e.y-r.y),ac(e)),Xw(),((o=(i=ee())==null?void 0:i.getSnapshot())==null?void 0:o.context.type)===z.SELECT){const s=Wr(n.screenToWorld(e),Ne());s.distance<cc?Fa([s.entity.id]):Fa([])}}function Kw(){sc(!1)}function Qw(t){It().zoomScreen(t.deltaY)}function Yw(t){t.button===ys.Middle&&ac(new w(t.clientX,t.clientY))}function qw(t){if(t.button===ys.Middle&&ac(null),t.button===ys.Left){const e=It(),n=Qa(we([Ys(),nc()]),e.getWorldMouseLocation(),uc/e.getScreenScale()),r=It().screenToWorld(new w(t.clientX,t.clientY)),i=n?n.point:r,o=ee();o==null||o.send({type:ye.MOUSE_CLICK,worldMouseLocation:i,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function Xw(){const t=Fg(),e=It(),n=Ne(),r=e.getScreenScale(),i=e.getWorldMouseLocation(),l=rc().filter(u=>u.milliSecondsHovered>fc).map(u=>u.snapPoint.point);if(mE()){const{angleGuides:u,entitySnapPoint:c,angleSnapPoint:f}=Dw(n,we([yE(),...l]),i,t,uc/r);lc(u),Wg(c),Bg(f)}}function ym(t,e){var i,o,s,l,u;const n=EE(),r=e-n;if(NE(e),(i=ee())!=null&&i.getSnapshot().can({type:ye.DRAW})&&((o=ee())==null||o.send({type:ye.DRAW,drawController:t})),((u=(l=(s=ee())==null?void 0:s.getSnapshot())==null?void 0:l.context)==null?void 0:u.type)===z.SELECT){const c=It();if(!c)throw new Error("getScreenCanvasDrawController() returned null");const{distance:f,entity:d}=Wr(c.getWorldMouseLocation(),Ne());f<cc&&Fa([d.id])}Vw(Ys(),rc(),AE,uc/t.getScreenScale(),r),Bw(t),requestAnimationFrame(c=>{ym(t,c)})}function Td(){TE(new w(window.innerWidth,window.innerHeight));const t=dE();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function Jw(){const t=document.getElementsByTagName("canvas")[0];if(t){IE(t),t.addEventListener("mousedown",Yw),t.addEventListener("mousemove",bw),t.addEventListener("mouseup",qw),t.addEventListener("wheel",Qw),t.addEventListener("mouseout",Kw),t.addEventListener("mouseenter",Hw),window.addEventListener("resize",Td);const e=new $w;LE(e),Td();const n=t.getContext("2d");if(!n)return;Kr([],!0);const r=new Gw(n,tc());CE(r),ym(r,0);const i=new Gn(Cs[z.LINE]);i.start(),kr(i)}}document.addEventListener("DOMContentLoaded",()=>{Jw()});
