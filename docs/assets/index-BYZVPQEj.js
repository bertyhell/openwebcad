var ym=Object.defineProperty;var _m=(t,e,n)=>e in t?ym(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>_m(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gd={exports:{}},ws={},md={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=Symbol.for("react.element"),wm=Symbol.for("react.portal"),Sm=Symbol.for("react.fragment"),Tm=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Pm=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Om=Symbol.for("react.lazy"),yc=Symbol.iterator;function Nm(t){return t===null||typeof t!="object"?null:(t=yc&&t[yc]||t["@@iterator"],typeof t=="function"?t:null)}var vd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yd=Object.assign,_d={};function Wr(t,e,n){this.props=t,this.context=e,this.refs=_d,this.updater=n||vd}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ed(){}Ed.prototype=Wr.prototype;function ja(t,e,n){this.props=t,this.context=e,this.refs=_d,this.updater=n||vd}var $a=ja.prototype=new Ed;$a.constructor=ja;yd($a,Wr.prototype);$a.isPureReactComponent=!0;var _c=Array.isArray,wd=Object.prototype.hasOwnProperty,Ga={current:null},Sd={key:!0,ref:!0,__self:!0,__source:!0};function Td(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)wd.call(e,r)&&!Sd.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Gi,type:t,key:o,ref:s,props:i,_owner:Ga.current}}function km(t,e){return{$$typeof:Gi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ha(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gi}function Rm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ec=/\/+/g;function Ks(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rm(""+t.key):e.toString(36)}function Po(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Gi:case wm:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ks(s,0):r,_c(i)?(n="",t!=null&&(n=t.replace(Ec,"$&/")+"/"),Po(i,e,n,"",function(c){return c})):i!=null&&(Ha(i)&&(i=km(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ec,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",_c(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Ks(o,l);s+=Po(o,e,n,u,i)}else if(u=Nm(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Ks(o,l++),s+=Po(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function oo(t,e,n){if(t==null)return t;var r=[],i=0;return Po(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Mm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Re={current:null},Lo={transition:null},Dm={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Lo,ReactCurrentOwner:Ga};function Id(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:oo,forEach:function(t,e,n){oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oo(t,function(){e++}),e},toArray:function(t){return oo(t,function(e){return e})||[]},only:function(t){if(!Ha(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=Wr;V.Fragment=Sm;V.Profiler=Im;V.PureComponent=ja;V.StrictMode=Tm;V.Suspense=Lm;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dm;V.act=Id;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yd({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ga.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)wd.call(e,u)&&!Sd.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Gi,type:t.type,key:i,ref:o,props:r,_owner:s}};V.createContext=function(t){return t={$$typeof:Cm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xm,_context:t},t.Consumer=t};V.createElement=Td;V.createFactory=function(t){var e=Td.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Pm,render:t}};V.isValidElement=Ha;V.lazy=function(t){return{$$typeof:Om,_payload:{_status:-1,_result:t},_init:Mm}};V.memo=function(t,e){return{$$typeof:Am,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Lo.transition;Lo.transition={};try{t()}finally{Lo.transition=e}};V.unstable_act=Id;V.useCallback=function(t,e){return Re.current.useCallback(t,e)};V.useContext=function(t){return Re.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Re.current.useDeferredValue(t)};V.useEffect=function(t,e){return Re.current.useEffect(t,e)};V.useId=function(){return Re.current.useId()};V.useImperativeHandle=function(t,e,n){return Re.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Re.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Re.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Re.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Re.current.useReducer(t,e,n)};V.useRef=function(t){return Re.current.useRef(t)};V.useState=function(t){return Re.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Re.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Re.current.useTransition()};V.version="18.3.1";md.exports=V;var k=md.exports;const zm=Em(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=k,Um=Symbol.for("react.element"),Wm=Symbol.for("react.fragment"),Bm=Object.prototype.hasOwnProperty,Vm=Fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jm={key:!0,ref:!0,__self:!0,__source:!0};function xd(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Bm.call(e,r)&&!jm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Um,type:t,key:o,ref:s,props:i,_owner:Vm.current}}ws.Fragment=Wm;ws.jsx=xd;ws.jsxs=xd;gd.exports=ws;var M=gd.exports,Cl={},Cd={exports:{}},be={},Pd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,F){var B=A.length;A.push(F);e:for(;0<B;){var oe=B-1>>>1,ce=A[oe];if(0<i(ce,F))A[oe]=F,A[B]=ce,B=oe;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var F=A[0],B=A.pop();if(B!==F){A[0]=B;e:for(var oe=0,ce=A.length,ro=ce>>>1;oe<ro;){var Tn=2*(oe+1)-1,Qs=A[Tn],In=Tn+1,io=A[In];if(0>i(Qs,B))In<ce&&0>i(io,Qs)?(A[oe]=io,A[In]=B,oe=In):(A[oe]=Qs,A[Tn]=B,oe=Tn);else if(In<ce&&0>i(io,B))A[oe]=io,A[In]=B,oe=In;else break e}}return F}function i(A,F){var B=A.sortIndex-F.sortIndex;return B!==0?B:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,v=!1,_=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=A)r(c),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(c)}}function E(A){if(y=!1,m(A),!_)if(n(u)!==null)_=!0,Hs(I);else{var F=n(c);F!==null&&bs(E,F.startTime-A)}}function I(A,F){_=!1,y&&(y=!1,g(N),N=-1),v=!0;var B=h;try{for(m(F),d=n(u);d!==null&&(!(d.expirationTime>F)||A&&!Be());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var ce=oe(d.expirationTime<=F);F=t.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(u)&&r(u),m(F)}else r(u);d=n(u)}if(d!==null)var ro=!0;else{var Tn=n(c);Tn!==null&&bs(E,Tn.startTime-F),ro=!1}return ro}finally{d=null,h=B,v=!1}}var C=!1,L=null,N=-1,G=5,R=-1;function Be(){return!(t.unstable_now()-R<G)}function br(){if(L!==null){var A=t.unstable_now();R=A;var F=!0;try{F=L(!0,A)}finally{F?Qr():(C=!1,L=null)}}else C=!1}var Qr;if(typeof p=="function")Qr=function(){p(br)};else if(typeof MessageChannel<"u"){var vc=new MessageChannel,vm=vc.port2;vc.port1.onmessage=br,Qr=function(){vm.postMessage(null)}}else Qr=function(){T(br,0)};function Hs(A){L=A,C||(C=!0,Qr())}function bs(A,F){N=T(function(){A(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,Hs(I))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var B=h;h=F;try{return A()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=h;h=A;try{return F()}finally{h=B}},t.unstable_scheduleCallback=function(A,F,B){var oe=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?oe+B:oe):B=oe,A){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=B+ce,A={id:f++,callback:F,priorityLevel:A,startTime:B,expirationTime:ce,sortIndex:-1},B>oe?(A.sortIndex=B,e(c,A),n(u)===null&&A===n(c)&&(y?(g(N),N=-1):y=!0,bs(E,B-oe))):(A.sortIndex=ce,e(u,A),_||v||(_=!0,Hs(I))),A},t.unstable_shouldYield=Be,t.unstable_wrapCallback=function(A){var F=h;return function(){var B=h;h=F;try{return A.apply(this,arguments)}finally{h=B}}}})(Ld);Pd.exports=Ld;var $m=Pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm=k,Ge=$m;function w(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ad=new Set,Si={};function $n(t,e){wr(t,e),wr(t+"Capture",e)}function wr(t,e){for(Si[t]=e,t=0;t<e.length;t++)Ad.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=Object.prototype.hasOwnProperty,Hm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wc={},Sc={};function bm(t){return Pl.call(Sc,t)?!0:Pl.call(wc,t)?!1:Hm.test(t)?Sc[t]=!0:(wc[t]=!0,!1)}function Qm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Km(t,e,n,r){if(e===null||typeof e>"u"||Qm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Me(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){we[t]=new Me(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];we[e]=new Me(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){we[t]=new Me(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){we[t]=new Me(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){we[t]=new Me(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){we[t]=new Me(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){we[t]=new Me(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){we[t]=new Me(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){we[t]=new Me(t,5,!1,t.toLowerCase(),null,!1,!1)});var ba=/[\-:]([a-z])/g;function Qa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ba,Qa);we[e]=new Me(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ba,Qa);we[e]=new Me(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ba,Qa);we[e]=new Me(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){we[t]=new Me(t,1,!1,t.toLowerCase(),null,!1,!1)});we.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){we[t]=new Me(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ka(t,e,n,r){var i=we.hasOwnProperty(e)?we[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Km(e,n,i,r)&&(n=null),r||i===null?bm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yt=Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Zn=Symbol.for("react.portal"),er=Symbol.for("react.fragment"),Ya=Symbol.for("react.strict_mode"),Ll=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Nd=Symbol.for("react.context"),qa=Symbol.for("react.forward_ref"),Al=Symbol.for("react.suspense"),Ol=Symbol.for("react.suspense_list"),Ja=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),kd=Symbol.for("react.offscreen"),Tc=Symbol.iterator;function Yr(t){return t===null||typeof t!="object"?null:(t=Tc&&t[Tc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,Ys;function oi(t){if(Ys===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ys=e&&e[1]||""}return`
`+Ys+t}var qs=!1;function Js(t,e){if(!t||qs)return"";qs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{qs=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oi(t):""}function Ym(t){switch(t.tag){case 5:return oi(t.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 2:case 15:return t=Js(t.type,!1),t;case 11:return t=Js(t.type.render,!1),t;case 1:return t=Js(t.type,!0),t;default:return""}}function Nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case er:return"Fragment";case Zn:return"Portal";case Ll:return"Profiler";case Ya:return"StrictMode";case Al:return"Suspense";case Ol:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nd:return(t.displayName||"Context")+".Consumer";case Od:return(t._context.displayName||"Context")+".Provider";case qa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ja:return e=t.displayName||null,e!==null?e:Nl(t.type)||"Memo";case Jt:e=t._payload,t=t._init;try{return Nl(t(e))}catch{}}return null}function qm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(e);case 8:return e===Ya?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jm(t){var e=Rd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lo(t){t._valueTracker||(t._valueTracker=Jm(t))}function Md(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $o(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kl(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ic(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dd(t,e){e=e.checked,e!=null&&Ka(t,"checked",e,!1)}function Rl(t,e){Dd(t,e);var n=pn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ml(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ml(t,e.type,pn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ml(t,e,n){(e!=="number"||$o(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var si=Array.isArray;function pr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Dl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(w(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(w(92));if(si(n)){if(1<n.length)throw Error(w(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pn(n)}}function zd(t,e){var n=pn(e.value),r=pn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ao,Ud=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ao=ao||document.createElement("div"),ao.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ao.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ti(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xm=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(t){Xm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ci[e]=ci[t]})});function Wd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ci.hasOwnProperty(t)&&ci[t]?(""+e).trim():e+"px"}function Bd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Wd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Zm=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fl(t,e){if(e){if(Zm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(w(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(w(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(w(61))}if(e.style!=null&&typeof e.style!="object")throw Error(w(62))}}function Ul(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=null;function Xa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bl=null,gr=null,mr=null;function Lc(t){if(t=Qi(t)){if(typeof Bl!="function")throw Error(w(280));var e=t.stateNode;e&&(e=Cs(e),Bl(t.stateNode,t.type,e))}}function Vd(t){gr?mr?mr.push(t):mr=[t]:gr=t}function jd(){if(gr){var t=gr,e=mr;if(mr=gr=null,Lc(t),e)for(t=0;t<e.length;t++)Lc(e[t])}}function $d(t,e){return t(e)}function Gd(){}var Xs=!1;function Hd(t,e,n){if(Xs)return t(e,n);Xs=!0;try{return $d(t,e,n)}finally{Xs=!1,(gr!==null||mr!==null)&&(Gd(),jd())}}function Ii(t,e){var n=t.stateNode;if(n===null)return null;var r=Cs(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(w(231,e,typeof n));return n}var Vl=!1;if(Wt)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Vl=!1}function e0(t,e,n,r,i,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var fi=!1,Go=null,Ho=!1,jl=null,t0={onError:function(t){fi=!0,Go=t}};function n0(t,e,n,r,i,o,s,l,u){fi=!1,Go=null,e0.apply(t0,arguments)}function r0(t,e,n,r,i,o,s,l,u){if(n0.apply(this,arguments),fi){if(fi){var c=Go;fi=!1,Go=null}else throw Error(w(198));Ho||(Ho=!0,jl=c)}}function Gn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ac(t){if(Gn(t)!==t)throw Error(w(188))}function i0(t){var e=t.alternate;if(!e){if(e=Gn(t),e===null)throw Error(w(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ac(i),t;if(o===r)return Ac(i),e;o=o.sibling}throw Error(w(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(w(189))}}if(n.alternate!==r)throw Error(w(190))}if(n.tag!==3)throw Error(w(188));return n.stateNode.current===n?t:e}function Qd(t){return t=i0(t),t!==null?Kd(t):null}function Kd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kd(t);if(e!==null)return e;t=t.sibling}return null}var Yd=Ge.unstable_scheduleCallback,Oc=Ge.unstable_cancelCallback,o0=Ge.unstable_shouldYield,s0=Ge.unstable_requestPaint,se=Ge.unstable_now,l0=Ge.unstable_getCurrentPriorityLevel,Za=Ge.unstable_ImmediatePriority,qd=Ge.unstable_UserBlockingPriority,bo=Ge.unstable_NormalPriority,a0=Ge.unstable_LowPriority,Jd=Ge.unstable_IdlePriority,Ss=null,St=null;function u0(t){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Ss,t,void 0,(t.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:d0,c0=Math.log,f0=Math.LN2;function d0(t){return t>>>=0,t===0?32:31-(c0(t)/f0|0)|0}var uo=64,co=4194304;function li(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=li(l):(o&=s,o!==0&&(r=li(o)))}else s=n&~i,s!==0?r=li(s):o!==0&&(r=li(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-at(e),i=1<<n,r|=t[n],e&=~i;return r}function h0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-at(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=h0(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function $l(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xd(){var t=uo;return uo<<=1,!(uo&4194240)&&(uo=64),t}function Zs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-at(e),t[e]=n}function g0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-at(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function eu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-at(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Q=0;function Zd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eh,tu,th,nh,rh,Gl=!1,fo=[],sn=null,ln=null,an=null,xi=new Map,Ci=new Map,en=[],m0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nc(t,e){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(e.pointerId)}}function Jr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Qi(e),e!==null&&tu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function v0(t,e,n,r,i){switch(e){case"focusin":return sn=Jr(sn,t,e,n,r,i),!0;case"dragenter":return ln=Jr(ln,t,e,n,r,i),!0;case"mouseover":return an=Jr(an,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return xi.set(o,Jr(xi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ci.set(o,Jr(Ci.get(o)||null,t,e,n,r,i)),!0}return!1}function ih(t){var e=An(t.target);if(e!==null){var n=Gn(e);if(n!==null){if(e=n.tag,e===13){if(e=bd(n),e!==null){t.blockedOn=e,rh(t.priority,function(){th(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ao(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wl=r,n.target.dispatchEvent(r),Wl=null}else return e=Qi(n),e!==null&&tu(e),t.blockedOn=n,!1;e.shift()}return!0}function kc(t,e,n){Ao(t)&&n.delete(e)}function y0(){Gl=!1,sn!==null&&Ao(sn)&&(sn=null),ln!==null&&Ao(ln)&&(ln=null),an!==null&&Ao(an)&&(an=null),xi.forEach(kc),Ci.forEach(kc)}function Xr(t,e){t.blockedOn===e&&(t.blockedOn=null,Gl||(Gl=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,y0)))}function Pi(t){function e(i){return Xr(i,t)}if(0<fo.length){Xr(fo[0],t);for(var n=1;n<fo.length;n++){var r=fo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sn!==null&&Xr(sn,t),ln!==null&&Xr(ln,t),an!==null&&Xr(an,t),xi.forEach(e),Ci.forEach(e),n=0;n<en.length;n++)r=en[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)ih(n),n.blockedOn===null&&en.shift()}var vr=Yt.ReactCurrentBatchConfig,Ko=!0;function _0(t,e,n,r){var i=Q,o=vr.transition;vr.transition=null;try{Q=1,nu(t,e,n,r)}finally{Q=i,vr.transition=o}}function E0(t,e,n,r){var i=Q,o=vr.transition;vr.transition=null;try{Q=4,nu(t,e,n,r)}finally{Q=i,vr.transition=o}}function nu(t,e,n,r){if(Ko){var i=Hl(t,e,n,r);if(i===null)ul(t,e,r,Yo,n),Nc(t,r);else if(v0(i,t,e,n,r))r.stopPropagation();else if(Nc(t,r),e&4&&-1<m0.indexOf(t)){for(;i!==null;){var o=Qi(i);if(o!==null&&eh(o),o=Hl(t,e,n,r),o===null&&ul(t,e,r,Yo,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ul(t,e,r,null,n)}}var Yo=null;function Hl(t,e,n,r){if(Yo=null,t=Xa(r),t=An(t),t!==null)if(e=Gn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yo=t,null}function oh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l0()){case Za:return 1;case qd:return 4;case bo:case a0:return 16;case Jd:return 536870912;default:return 16}default:return 16}}var nn=null,ru=null,Oo=null;function sh(){if(Oo)return Oo;var t,e=ru,n=e.length,r,i="value"in nn?nn.value:nn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Oo=i.slice(t,1<r?1-r:void 0)}function No(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ho(){return!0}function Rc(){return!1}function Qe(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ho:Rc,this.isPropagationStopped=Rc,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),e}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iu=Qe(Br),bi=re({},Br,{view:0,detail:0}),w0=Qe(bi),el,tl,Zr,Ts=re({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zr&&(Zr&&t.type==="mousemove"?(el=t.screenX-Zr.screenX,tl=t.screenY-Zr.screenY):tl=el=0,Zr=t),el)},movementY:function(t){return"movementY"in t?t.movementY:tl}}),Mc=Qe(Ts),S0=re({},Ts,{dataTransfer:0}),T0=Qe(S0),I0=re({},bi,{relatedTarget:0}),nl=Qe(I0),x0=re({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),C0=Qe(x0),P0=re({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),L0=Qe(P0),A0=re({},Br,{data:0}),Dc=Qe(A0),O0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k0[t])?!!e[t]:!1}function ou(){return R0}var M0=re({},bi,{key:function(t){if(t.key){var e=O0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=No(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(t){return t.type==="keypress"?No(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?No(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D0=Qe(M0),z0=re({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=Qe(z0),F0=re({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),U0=Qe(F0),W0=re({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=Qe(W0),V0=re({},Ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=Qe(V0),$0=[9,13,27,32],su=Wt&&"CompositionEvent"in window,di=null;Wt&&"documentMode"in document&&(di=document.documentMode);var G0=Wt&&"TextEvent"in window&&!di,lh=Wt&&(!su||di&&8<di&&11>=di),Fc=" ",Uc=!1;function ah(t,e){switch(t){case"keyup":return $0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tr=!1;function H0(t,e){switch(t){case"compositionend":return uh(e);case"keypress":return e.which!==32?null:(Uc=!0,Fc);case"textInput":return t=e.data,t===Fc&&Uc?null:t;default:return null}}function b0(t,e){if(tr)return t==="compositionend"||!su&&ah(t,e)?(t=sh(),Oo=ru=nn=null,tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lh&&e.locale!=="ko"?null:e.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q0[t.type]:e==="textarea"}function ch(t,e,n,r){Vd(r),e=qo(e,"onChange"),0<e.length&&(n=new iu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hi=null,Li=null;function K0(t){wh(t,0)}function Is(t){var e=ir(t);if(Md(e))return t}function Y0(t,e){if(t==="change")return e}var fh=!1;if(Wt){var rl;if(Wt){var il="oninput"in document;if(!il){var Bc=document.createElement("div");Bc.setAttribute("oninput","return;"),il=typeof Bc.oninput=="function"}rl=il}else rl=!1;fh=rl&&(!document.documentMode||9<document.documentMode)}function Vc(){hi&&(hi.detachEvent("onpropertychange",dh),Li=hi=null)}function dh(t){if(t.propertyName==="value"&&Is(Li)){var e=[];ch(e,Li,t,Xa(t)),Hd(K0,e)}}function q0(t,e,n){t==="focusin"?(Vc(),hi=e,Li=n,hi.attachEvent("onpropertychange",dh)):t==="focusout"&&Vc()}function J0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Is(Li)}function X0(t,e){if(t==="click")return Is(e)}function Z0(t,e){if(t==="input"||t==="change")return Is(e)}function ev(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ft=typeof Object.is=="function"?Object.is:ev;function Ai(t,e){if(ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pl.call(e,i)||!ft(t[i],e[i]))return!1}return!0}function jc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $c(t,e){var n=jc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jc(n)}}function hh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ph(){for(var t=window,e=$o();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$o(t.document)}return e}function lu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tv(t){var e=ph(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hh(n.ownerDocument.documentElement,n)){if(r!==null&&lu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=$c(n,o);var s=$c(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nv=Wt&&"documentMode"in document&&11>=document.documentMode,nr=null,bl=null,pi=null,Ql=!1;function Gc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ql||nr==null||nr!==$o(r)||(r=nr,"selectionStart"in r&&lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pi&&Ai(pi,r)||(pi=r,r=qo(bl,"onSelect"),0<r.length&&(e=new iu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nr)))}function po(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rr={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},ol={},gh={};Wt&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function xs(t){if(ol[t])return ol[t];if(!rr[t])return t;var e=rr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gh)return ol[t]=e[n];return t}var mh=xs("animationend"),vh=xs("animationiteration"),yh=xs("animationstart"),_h=xs("transitionend"),Eh=new Map,Hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(t,e){Eh.set(t,e),$n(e,[t])}for(var sl=0;sl<Hc.length;sl++){var ll=Hc[sl],rv=ll.toLowerCase(),iv=ll[0].toUpperCase()+ll.slice(1);_n(rv,"on"+iv)}_n(mh,"onAnimationEnd");_n(vh,"onAnimationIteration");_n(yh,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(_h,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$n("onBeforeInput",["compositionend","keypress","textInput","paste"]);$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ov=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function bc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,r0(r,e,void 0,t),t.currentTarget=null}function wh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;bc(i,l,c),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;bc(i,l,c),o=u}}}if(Ho)throw t=jl,Ho=!1,jl=null,t}function J(t,e){var n=e[Xl];n===void 0&&(n=e[Xl]=new Set);var r=t+"__bubble";n.has(r)||(Sh(e,t,2,!1),n.add(r))}function al(t,e,n){var r=0;e&&(r|=4),Sh(n,t,r,e)}var go="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){if(!t[go]){t[go]=!0,Ad.forEach(function(n){n!=="selectionchange"&&(ov.has(n)||al(n,!1,t),al(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[go]||(e[go]=!0,al("selectionchange",!1,e))}}function Sh(t,e,n,r){switch(oh(e)){case 1:var i=_0;break;case 4:i=E0;break;default:i=nu}n=i.bind(null,e,n,t),i=void 0,!Vl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ul(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=An(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Hd(function(){var c=o,f=Xa(n),d=[];e:{var h=Eh.get(t);if(h!==void 0){var v=iu,_=t;switch(t){case"keypress":if(No(n)===0)break e;case"keydown":case"keyup":v=D0;break;case"focusin":_="focus",v=nl;break;case"focusout":_="blur",v=nl;break;case"beforeblur":case"afterblur":v=nl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=T0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=U0;break;case mh:case vh:case yh:v=C0;break;case _h:v=B0;break;case"scroll":v=w0;break;case"wheel":v=j0;break;case"copy":case"cut":case"paste":v=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zc}var y=(e&4)!==0,T=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=c,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Ii(p,g),E!=null&&y.push(Ni(p,E,m)))),T)break;p=p.return}0<y.length&&(h=new v(h,_,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==Wl&&(_=n.relatedTarget||n.fromElement)&&(An(_)||_[Bt]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?An(_):null,_!==null&&(T=Gn(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(y=Mc,E="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=zc,E="onPointerLeave",g="onPointerEnter",p="pointer"),T=v==null?h:ir(v),m=_==null?h:ir(_),h=new y(E,p+"leave",v,n,f),h.target=T,h.relatedTarget=m,E=null,An(f)===c&&(y=new y(g,p+"enter",_,n,f),y.target=m,y.relatedTarget=T,E=y),T=E,v&&_)t:{for(y=v,g=_,p=0,m=y;m;m=Yn(m))p++;for(m=0,E=g;E;E=Yn(E))m++;for(;0<p-m;)y=Yn(y),p--;for(;0<m-p;)g=Yn(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Yn(y),g=Yn(g)}y=null}else y=null;v!==null&&Qc(d,h,v,y,!1),_!==null&&T!==null&&Qc(d,T,_,y,!0)}}e:{if(h=c?ir(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var I=Y0;else if(Wc(h))if(fh)I=Z0;else{I=J0;var C=q0}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=X0);if(I&&(I=I(t,c))){ch(d,I,n,f);break e}C&&C(t,h,c),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Ml(h,"number",h.value)}switch(C=c?ir(c):window,t){case"focusin":(Wc(C)||C.contentEditable==="true")&&(nr=C,bl=c,pi=null);break;case"focusout":pi=bl=nr=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Gc(d,n,f);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":Gc(d,n,f)}var L;if(su)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else tr?ah(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(lh&&n.locale!=="ko"&&(tr||N!=="onCompositionStart"?N==="onCompositionEnd"&&tr&&(L=sh()):(nn=f,ru="value"in nn?nn.value:nn.textContent,tr=!0)),C=qo(c,N),0<C.length&&(N=new Dc(N,t,null,n,f),d.push({event:N,listeners:C}),L?N.data=L:(L=uh(n),L!==null&&(N.data=L)))),(L=G0?H0(t,n):b0(t,n))&&(c=qo(c,"onBeforeInput"),0<c.length&&(f=new Dc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=L))}wh(d,e)})}function Ni(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ii(t,n),o!=null&&r.unshift(Ni(t,o,i)),o=Ii(t,e),o!=null&&r.push(Ni(t,o,i))),t=t.return}return r}function Yn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qc(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ii(n,o),u!=null&&s.unshift(Ni(n,u,l))):i||(u=Ii(n,o),u!=null&&s.push(Ni(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var sv=/\r\n?/g,lv=/\u0000|\uFFFD/g;function Kc(t){return(typeof t=="string"?t:""+t).replace(sv,`
`).replace(lv,"")}function mo(t,e,n){if(e=Kc(e),Kc(t)!==e&&n)throw Error(w(425))}function Jo(){}var Kl=null,Yl=null;function ql(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,av=typeof clearTimeout=="function"?clearTimeout:void 0,Yc=typeof Promise=="function"?Promise:void 0,uv=typeof queueMicrotask=="function"?queueMicrotask:typeof Yc<"u"?function(t){return Yc.resolve(null).then(t).catch(cv)}:Jl;function cv(t){setTimeout(function(){throw t})}function cl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pi(e)}function un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),vt="__reactFiber$"+Vr,ki="__reactProps$"+Vr,Bt="__reactContainer$"+Vr,Xl="__reactEvents$"+Vr,fv="__reactListeners$"+Vr,dv="__reactHandles$"+Vr;function An(t){var e=t[vt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bt]||n[vt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qc(t);t!==null;){if(n=t[vt])return n;t=qc(t)}return e}t=n,n=t.parentNode}return null}function Qi(t){return t=t[vt]||t[Bt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ir(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(w(33))}function Cs(t){return t[ki]||null}var Zl=[],or=-1;function En(t){return{current:t}}function Z(t){0>or||(t.current=Zl[or],Zl[or]=null,or--)}function Y(t,e){or++,Zl[or]=t.current,t.current=e}var gn={},Ce=En(gn),Fe=En(!1),Dn=gn;function Sr(t,e){var n=t.type.contextTypes;if(!n)return gn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(t){return t=t.childContextTypes,t!=null}function Xo(){Z(Fe),Z(Ce)}function Jc(t,e,n){if(Ce.current!==gn)throw Error(w(168));Y(Ce,e),Y(Fe,n)}function Th(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(w(108,qm(t)||"Unknown",i));return re({},n,r)}function Zo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gn,Dn=Ce.current,Y(Ce,t),Y(Fe,Fe.current),!0}function Xc(t,e,n){var r=t.stateNode;if(!r)throw Error(w(169));n?(t=Th(t,e,Dn),r.__reactInternalMemoizedMergedChildContext=t,Z(Fe),Z(Ce),Y(Ce,t)):Z(Fe),Y(Fe,n)}var Nt=null,Ps=!1,fl=!1;function Ih(t){Nt===null?Nt=[t]:Nt.push(t)}function hv(t){Ps=!0,Ih(t)}function wn(){if(!fl&&Nt!==null){fl=!0;var t=0,e=Q;try{var n=Nt;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nt=null,Ps=!1}catch(i){throw Nt!==null&&(Nt=Nt.slice(t+1)),Yd(Za,wn),i}finally{Q=e,fl=!1}}return null}var sr=[],lr=0,es=null,ts=0,Ke=[],Ye=0,zn=null,Rt=1,Mt="";function Cn(t,e){sr[lr++]=ts,sr[lr++]=es,es=t,ts=e}function xh(t,e,n){Ke[Ye++]=Rt,Ke[Ye++]=Mt,Ke[Ye++]=zn,zn=t;var r=Rt;t=Mt;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Rt=1<<32-at(e)+i|n<<i|r,Mt=o+t}else Rt=1<<o|n<<i|r,Mt=t}function au(t){t.return!==null&&(Cn(t,1),xh(t,1,0))}function uu(t){for(;t===es;)es=sr[--lr],sr[lr]=null,ts=sr[--lr],sr[lr]=null;for(;t===zn;)zn=Ke[--Ye],Ke[Ye]=null,Mt=Ke[--Ye],Ke[Ye]=null,Rt=Ke[--Ye],Ke[Ye]=null}var $e=null,je=null,ee=!1,it=null;function Ch(t,e){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$e=t,je=un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$e=t,je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zn!==null?{id:Rt,overflow:Mt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$e=t,je=null,!0):!1;default:return!1}}function ea(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ta(t){if(ee){var e=je;if(e){var n=e;if(!Zc(t,e)){if(ea(t))throw Error(w(418));e=un(n.nextSibling);var r=$e;e&&Zc(t,e)?Ch(r,n):(t.flags=t.flags&-4097|2,ee=!1,$e=t)}}else{if(ea(t))throw Error(w(418));t.flags=t.flags&-4097|2,ee=!1,$e=t}}}function ef(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$e=t}function vo(t){if(t!==$e)return!1;if(!ee)return ef(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ql(t.type,t.memoizedProps)),e&&(e=je)){if(ea(t))throw Ph(),Error(w(418));for(;e;)Ch(t,e),e=un(e.nextSibling)}if(ef(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){je=un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}je=null}}else je=$e?un(t.stateNode.nextSibling):null;return!0}function Ph(){for(var t=je;t;)t=un(t.nextSibling)}function Tr(){je=$e=null,ee=!1}function cu(t){it===null?it=[t]:it.push(t)}var pv=Yt.ReactCurrentBatchConfig;function ei(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(w(309));var r=n.stateNode}if(!r)throw Error(w(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(w(284));if(!n._owner)throw Error(w(290,t))}return t}function yo(t,e){throw t=Object.prototype.toString.call(e),Error(w(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tf(t){var e=t._init;return e(t._payload)}function Lh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=hn(g,p),g.index=0,g.sibling=null,g}function o(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,E){return p===null||p.tag!==6?(p=yl(m,g.mode,E),p.return=g,p):(p=i(p,m),p.return=g,p)}function u(g,p,m,E){var I=m.type;return I===er?f(g,p,m.props.children,E,m.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Jt&&tf(I)===p.type)?(E=i(p,m.props),E.ref=ei(g,p,m),E.return=g,E):(E=Uo(m.type,m.key,m.props,null,g.mode,E),E.ref=ei(g,p,m),E.return=g,E)}function c(g,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=_l(m,g.mode,E),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,E,I){return p===null||p.tag!==7?(p=Mn(m,g.mode,E,I),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=yl(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case so:return m=Uo(p.type,p.key,p.props,null,g.mode,m),m.ref=ei(g,null,p),m.return=g,m;case Zn:return p=_l(p,g.mode,m),p.return=g,p;case Jt:var E=p._init;return d(g,E(p._payload),m)}if(si(p)||Yr(p))return p=Mn(p,g.mode,m,null),p.return=g,p;yo(g,p)}return null}function h(g,p,m,E){var I=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return I!==null?null:l(g,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case so:return m.key===I?u(g,p,m,E):null;case Zn:return m.key===I?c(g,p,m,E):null;case Jt:return I=m._init,h(g,p,I(m._payload),E)}if(si(m)||Yr(m))return I!==null?null:f(g,p,m,E,null);yo(g,m)}return null}function v(g,p,m,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,l(p,g,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case so:return g=g.get(E.key===null?m:E.key)||null,u(p,g,E,I);case Zn:return g=g.get(E.key===null?m:E.key)||null,c(p,g,E,I);case Jt:var C=E._init;return v(g,p,m,C(E._payload),I)}if(si(E)||Yr(E))return g=g.get(m)||null,f(p,g,E,I,null);yo(p,E)}return null}function _(g,p,m,E){for(var I=null,C=null,L=p,N=p=0,G=null;L!==null&&N<m.length;N++){L.index>N?(G=L,L=null):G=L.sibling;var R=h(g,L,m[N],E);if(R===null){L===null&&(L=G);break}t&&L&&R.alternate===null&&e(g,L),p=o(R,p,N),C===null?I=R:C.sibling=R,C=R,L=G}if(N===m.length)return n(g,L),ee&&Cn(g,N),I;if(L===null){for(;N<m.length;N++)L=d(g,m[N],E),L!==null&&(p=o(L,p,N),C===null?I=L:C.sibling=L,C=L);return ee&&Cn(g,N),I}for(L=r(g,L);N<m.length;N++)G=v(L,g,N,m[N],E),G!==null&&(t&&G.alternate!==null&&L.delete(G.key===null?N:G.key),p=o(G,p,N),C===null?I=G:C.sibling=G,C=G);return t&&L.forEach(function(Be){return e(g,Be)}),ee&&Cn(g,N),I}function y(g,p,m,E){var I=Yr(m);if(typeof I!="function")throw Error(w(150));if(m=I.call(m),m==null)throw Error(w(151));for(var C=I=null,L=p,N=p=0,G=null,R=m.next();L!==null&&!R.done;N++,R=m.next()){L.index>N?(G=L,L=null):G=L.sibling;var Be=h(g,L,R.value,E);if(Be===null){L===null&&(L=G);break}t&&L&&Be.alternate===null&&e(g,L),p=o(Be,p,N),C===null?I=Be:C.sibling=Be,C=Be,L=G}if(R.done)return n(g,L),ee&&Cn(g,N),I;if(L===null){for(;!R.done;N++,R=m.next())R=d(g,R.value,E),R!==null&&(p=o(R,p,N),C===null?I=R:C.sibling=R,C=R);return ee&&Cn(g,N),I}for(L=r(g,L);!R.done;N++,R=m.next())R=v(L,g,N,R.value,E),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?N:R.key),p=o(R,p,N),C===null?I=R:C.sibling=R,C=R);return t&&L.forEach(function(br){return e(g,br)}),ee&&Cn(g,N),I}function T(g,p,m,E){if(typeof m=="object"&&m!==null&&m.type===er&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case so:e:{for(var I=m.key,C=p;C!==null;){if(C.key===I){if(I=m.type,I===er){if(C.tag===7){n(g,C.sibling),p=i(C,m.props.children),p.return=g,g=p;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Jt&&tf(I)===C.type){n(g,C.sibling),p=i(C,m.props),p.ref=ei(g,C,m),p.return=g,g=p;break e}n(g,C);break}else e(g,C);C=C.sibling}m.type===er?(p=Mn(m.props.children,g.mode,E,m.key),p.return=g,g=p):(E=Uo(m.type,m.key,m.props,null,g.mode,E),E.ref=ei(g,p,m),E.return=g,g=E)}return s(g);case Zn:e:{for(C=m.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=_l(m,g.mode,E),p.return=g,g=p}return s(g);case Jt:return C=m._init,T(g,p,C(m._payload),E)}if(si(m))return _(g,p,m,E);if(Yr(m))return y(g,p,m,E);yo(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=yl(m,g.mode,E),p.return=g,g=p),s(g)):n(g,p)}return T}var Ir=Lh(!0),Ah=Lh(!1),ns=En(null),rs=null,ar=null,fu=null;function du(){fu=ar=rs=null}function hu(t){var e=ns.current;Z(ns),t._currentValue=e}function na(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yr(t,e){rs=t,fu=ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ze=!0),t.firstContext=null)}function Xe(t){var e=t._currentValue;if(fu!==t)if(t={context:t,memoizedValue:e,next:null},ar===null){if(rs===null)throw Error(w(308));ar=t,rs.dependencies={lanes:0,firstContext:t}}else ar=ar.next=t;return e}var On=null;function pu(t){On===null?On=[t]:On.push(t)}function Oh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xt=!1;function gu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vt(t,n)}return i=r.interleaved,i===null?(e.next=e,pu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vt(t,n)}function ko(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,eu(t,n)}}function nf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function is(t,e,n,r){var i=t.updateQueue;Xt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var d=i.baseState;s=0,f=c=u=null,l=o;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(v,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(v,d,h):_,h==null)break e;d=re({},d,h);break e;case 2:Xt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,u=d):f=f.next=v,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Un|=s,t.lanes=s,t.memoizedState=d}}function rf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(w(191,i));i.call(r)}}}var Ki={},Tt=En(Ki),Ri=En(Ki),Mi=En(Ki);function Nn(t){if(t===Ki)throw Error(w(174));return t}function mu(t,e){switch(Y(Mi,e),Y(Ri,t),Y(Tt,Ki),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zl(e,t)}Z(Tt),Y(Tt,e)}function xr(){Z(Tt),Z(Ri),Z(Mi)}function kh(t){Nn(Mi.current);var e=Nn(Tt.current),n=zl(e,t.type);e!==n&&(Y(Ri,t),Y(Tt,n))}function vu(t){Ri.current===t&&(Z(Tt),Z(Ri))}var te=En(0);function os(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dl=[];function yu(){for(var t=0;t<dl.length;t++)dl[t]._workInProgressVersionPrimary=null;dl.length=0}var Ro=Yt.ReactCurrentDispatcher,hl=Yt.ReactCurrentBatchConfig,Fn=0,ne=null,ae=null,de=null,ss=!1,gi=!1,Di=0,gv=0;function Se(){throw Error(w(321))}function _u(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ft(t[n],e[n]))return!1;return!0}function Eu(t,e,n,r,i,o){if(Fn=o,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ro.current=t===null||t.memoizedState===null?_v:Ev,t=n(r,i),gi){o=0;do{if(gi=!1,Di=0,25<=o)throw Error(w(301));o+=1,de=ae=null,e.updateQueue=null,Ro.current=wv,t=n(r,i)}while(gi)}if(Ro.current=ls,e=ae!==null&&ae.next!==null,Fn=0,de=ae=ne=null,ss=!1,e)throw Error(w(300));return t}function wu(){var t=Di!==0;return Di=0,t}function pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ne.memoizedState=de=t:de=de.next=t,de}function Ze(){if(ae===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=de===null?ne.memoizedState:de.next;if(e!==null)de=e,ae=t;else{if(t===null)throw Error(w(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},de===null?ne.memoizedState=de=t:de=de.next=t}return de}function zi(t,e){return typeof e=="function"?e(t):e}function pl(t){var e=Ze(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var r=ae,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((Fn&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,s=r):u=u.next=d,ne.lanes|=f,Un|=f}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=l,ft(r,e.memoizedState)||(ze=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ne.lanes|=o,Un|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gl(t){var e=Ze(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);ft(o,e.memoizedState)||(ze=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Rh(){}function Mh(t,e){var n=ne,r=Ze(),i=e(),o=!ft(r.memoizedState,i);if(o&&(r.memoizedState=i,ze=!0),r=r.queue,Su(Fh.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,Fi(9,zh.bind(null,n,r,i,e),void 0,null),he===null)throw Error(w(349));Fn&30||Dh(n,e,i)}return i}function Dh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zh(t,e,n,r){e.value=n,e.getSnapshot=r,Uh(e)&&Wh(t)}function Fh(t,e,n){return n(function(){Uh(e)&&Wh(t)})}function Uh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ft(t,n)}catch{return!0}}function Wh(t){var e=Vt(t,1);e!==null&&ut(e,t,1,-1)}function of(t){var e=pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},e.queue=t,t=t.dispatch=yv.bind(null,ne,t),[e.memoizedState,t]}function Fi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bh(){return Ze().memoizedState}function Mo(t,e,n,r){var i=pt();ne.flags|=t,i.memoizedState=Fi(1|e,n,void 0,r===void 0?null:r)}function Ls(t,e,n,r){var i=Ze();r=r===void 0?null:r;var o=void 0;if(ae!==null){var s=ae.memoizedState;if(o=s.destroy,r!==null&&_u(r,s.deps)){i.memoizedState=Fi(e,n,o,r);return}}ne.flags|=t,i.memoizedState=Fi(1|e,n,o,r)}function sf(t,e){return Mo(8390656,8,t,e)}function Su(t,e){return Ls(2048,8,t,e)}function Vh(t,e){return Ls(4,2,t,e)}function jh(t,e){return Ls(4,4,t,e)}function $h(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gh(t,e,n){return n=n!=null?n.concat([t]):null,Ls(4,4,$h.bind(null,e,t),n)}function Tu(){}function Hh(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_u(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bh(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_u(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qh(t,e,n){return Fn&21?(ft(n,e)||(n=Xd(),ne.lanes|=n,Un|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ze=!0),t.memoizedState=n)}function mv(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=hl.transition;hl.transition={};try{t(!1),e()}finally{Q=n,hl.transition=r}}function Kh(){return Ze().memoizedState}function vv(t,e,n){var r=dn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yh(t))qh(e,n);else if(n=Oh(t,e,n,r),n!==null){var i=Ne();ut(n,t,r,i),Jh(n,e,r)}}function yv(t,e,n){var r=dn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yh(t))qh(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,ft(l,s)){var u=e.interleaved;u===null?(i.next=i,pu(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Oh(t,e,i,r),n!==null&&(i=Ne(),ut(n,t,r,i),Jh(n,e,r))}}function Yh(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function qh(t,e){gi=ss=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,eu(t,n)}}var ls={readContext:Xe,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},_v={readContext:Xe,useCallback:function(t,e){return pt().memoizedState=[t,e===void 0?null:e],t},useContext:Xe,useEffect:sf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mo(4194308,4,$h.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mo(4,2,t,e)},useMemo:function(t,e){var n=pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vv.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=pt();return t={current:t},e.memoizedState=t},useState:of,useDebugValue:Tu,useDeferredValue:function(t){return pt().memoizedState=t},useTransition:function(){var t=of(!1),e=t[0];return t=mv.bind(null,t[1]),pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=pt();if(ee){if(n===void 0)throw Error(w(407));n=n()}else{if(n=e(),he===null)throw Error(w(349));Fn&30||Dh(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,sf(Fh.bind(null,r,o,t),[t]),r.flags|=2048,Fi(9,zh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=pt(),e=he.identifierPrefix;if(ee){var n=Mt,r=Rt;n=(r&~(1<<32-at(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Di++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ev={readContext:Xe,useCallback:Hh,useContext:Xe,useEffect:Su,useImperativeHandle:Gh,useInsertionEffect:Vh,useLayoutEffect:jh,useMemo:bh,useReducer:pl,useRef:Bh,useState:function(){return pl(zi)},useDebugValue:Tu,useDeferredValue:function(t){var e=Ze();return Qh(e,ae.memoizedState,t)},useTransition:function(){var t=pl(zi)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Rh,useSyncExternalStore:Mh,useId:Kh,unstable_isNewReconciler:!1},wv={readContext:Xe,useCallback:Hh,useContext:Xe,useEffect:Su,useImperativeHandle:Gh,useInsertionEffect:Vh,useLayoutEffect:jh,useMemo:bh,useReducer:gl,useRef:Bh,useState:function(){return gl(zi)},useDebugValue:Tu,useDeferredValue:function(t){var e=Ze();return ae===null?e.memoizedState=t:Qh(e,ae.memoizedState,t)},useTransition:function(){var t=gl(zi)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Rh,useSyncExternalStore:Mh,useId:Kh,unstable_isNewReconciler:!1};function tt(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ra(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var As={isMounted:function(t){return(t=t._reactInternals)?Gn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=dn(t),o=Dt(r,i);o.payload=e,n!=null&&(o.callback=n),e=cn(t,o,i),e!==null&&(ut(e,t,i,r),ko(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=dn(t),o=Dt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=cn(t,o,i),e!==null&&(ut(e,t,i,r),ko(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=dn(t),i=Dt(n,r);i.tag=2,e!=null&&(i.callback=e),e=cn(t,i,r),e!==null&&(ut(e,t,r,n),ko(e,t,r))}};function lf(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ai(n,r)||!Ai(i,o):!0}function Xh(t,e,n){var r=!1,i=gn,o=e.contextType;return typeof o=="object"&&o!==null?o=Xe(o):(i=Ue(e)?Dn:Ce.current,r=e.contextTypes,o=(r=r!=null)?Sr(t,i):gn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=As,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function af(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&As.enqueueReplaceState(e,e.state,null)}function ia(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gu(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Xe(o):(o=Ue(e)?Dn:Ce.current,i.context=Sr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ra(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&As.enqueueReplaceState(i,i.state,null),is(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,e){try{var n="",r=e;do n+=Ym(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ml(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sv=typeof WeakMap=="function"?WeakMap:Map;function Zh(t,e,n){n=Dt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){us||(us=!0,ga=r),oa(t,e)},n}function ep(t,e,n){n=Dt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){oa(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){oa(t,e),typeof r!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function uf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zv.bind(null,t,e,n),e.then(t,t))}function cf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ff(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dt(-1,1),e.tag=2,cn(n,e,1))),n.lanes|=1),t)}var Tv=Yt.ReactCurrentOwner,ze=!1;function Le(t,e,n,r){e.child=t===null?Ah(e,null,n,r):Ir(e,t.child,n,r)}function df(t,e,n,r,i){n=n.render;var o=e.ref;return yr(e,i),r=Eu(t,e,n,r,o,i),n=wu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jt(t,e,i)):(ee&&n&&au(e),e.flags|=1,Le(t,e,r,i),e.child)}function hf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Nu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,tp(t,e,o,r,i)):(t=Uo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ai,n(s,r)&&t.ref===e.ref)return jt(t,e,i)}return e.flags|=1,t=hn(o,r),t.ref=e.ref,t.return=e,e.child=t}function tp(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ai(o,r)&&t.ref===e.ref)if(ze=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ze=!0);else return e.lanes=t.lanes,jt(t,e,i)}return sa(t,e,n,r,i)}function np(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(cr,Ve),Ve|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(cr,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Y(cr,Ve),Ve|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Y(cr,Ve),Ve|=r;return Le(t,e,i,n),e.child}function rp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sa(t,e,n,r,i){var o=Ue(n)?Dn:Ce.current;return o=Sr(e,o),yr(e,i),n=Eu(t,e,n,r,o,i),r=wu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jt(t,e,i)):(ee&&r&&au(e),e.flags|=1,Le(t,e,n,i),e.child)}function pf(t,e,n,r,i){if(Ue(n)){var o=!0;Zo(e)}else o=!1;if(yr(e,i),e.stateNode===null)Do(t,e),Xh(e,n,r),ia(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xe(c):(c=Ue(n)?Dn:Ce.current,c=Sr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==c)&&af(e,s,r,c),Xt=!1;var h=e.memoizedState;s.state=h,is(e,r,s,i),u=e.memoizedState,l!==r||h!==u||Fe.current||Xt?(typeof f=="function"&&(ra(e,n,f,r),u=e.memoizedState),(l=Xt||lf(e,n,l,r,h,u,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Nh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:tt(e.type,l),s.props=c,d=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xe(u):(u=Ue(n)?Dn:Ce.current,u=Sr(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==u)&&af(e,s,r,u),Xt=!1,h=e.memoizedState,s.state=h,is(e,r,s,i);var _=e.memoizedState;l!==d||h!==_||Fe.current||Xt?(typeof v=="function"&&(ra(e,n,v,r),_=e.memoizedState),(c=Xt||lf(e,n,c,r,h,_,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return la(t,e,n,r,o,i)}function la(t,e,n,r,i,o){rp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Xc(e,n,!1),jt(t,e,o);r=e.stateNode,Tv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ir(e,t.child,null,o),e.child=Ir(e,null,l,o)):Le(t,e,l,o),e.memoizedState=r.state,i&&Xc(e,n,!0),e.child}function ip(t){var e=t.stateNode;e.pendingContext?Jc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jc(t,e.context,!1),mu(t,e.containerInfo)}function gf(t,e,n,r,i){return Tr(),cu(i),e.flags|=256,Le(t,e,n,r),e.child}var aa={dehydrated:null,treeContext:null,retryLane:0};function ua(t){return{baseLanes:t,cachePool:null,transitions:null}}function op(t,e,n){var r=e.pendingProps,i=te.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(te,i&1),t===null)return ta(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ks(s,r,0,null),t=Mn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ua(n),e.memoizedState=aa,t):Iu(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Iv(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=hn(l,o):(o=Mn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ua(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=aa,r}return o=t.child,t=o.sibling,r=hn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iu(t,e){return e=ks({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _o(t,e,n,r){return r!==null&&cu(r),Ir(e,t.child,null,n),t=Iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Iv(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=ml(Error(w(422))),_o(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ks({mode:"visible",children:r.children},i,0,null),o=Mn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ir(e,t.child,null,s),e.child.memoizedState=ua(s),e.memoizedState=aa,o);if(!(e.mode&1))return _o(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(w(419)),r=ml(o,r,void 0),_o(t,e,s,r)}if(l=(s&t.childLanes)!==0,ze||l){if(r=he,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Vt(t,i),ut(r,t,i,-1))}return Ou(),r=ml(Error(w(421))),_o(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Fv.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,je=un(i.nextSibling),$e=e,ee=!0,it=null,t!==null&&(Ke[Ye++]=Rt,Ke[Ye++]=Mt,Ke[Ye++]=zn,Rt=t.id,Mt=t.overflow,zn=e),e=Iu(e,r.children),e.flags|=4096,e)}function mf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),na(t.return,e,n)}function vl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function sp(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Le(t,e,r.children,n),r=te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mf(t,n,e);else if(t.tag===19)mf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&os(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&os(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vl(e,!0,n,null,o);break;case"together":vl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Do(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Un|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(w(153));if(e.child!==null){for(t=e.child,n=hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xv(t,e,n){switch(e.tag){case 3:ip(e),Tr();break;case 5:kh(e);break;case 1:Ue(e.type)&&Zo(e);break;case 4:mu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Y(ns,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?op(t,e,n):(Y(te,te.current&1),t=jt(t,e,n),t!==null?t.sibling:null);Y(te,te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(te,te.current),r)break;return null;case 22:case 23:return e.lanes=0,np(t,e,n)}return jt(t,e,n)}var lp,ca,ap,up;lp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ca=function(){};ap=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nn(Tt.current);var o=null;switch(n){case"input":i=kl(t,i),r=kl(t,r),o=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),o=[];break;case"textarea":i=Dl(t,i),r=Dl(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jo)}Fl(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Si.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Si.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&J("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};up=function(t,e,n,r){n!==r&&(e.flags|=4)};function ti(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Cv(t,e,n){var r=e.pendingProps;switch(uu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return Ue(e.type)&&Xo(),Te(e),null;case 3:return r=e.stateNode,xr(),Z(Fe),Z(Ce),yu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,it!==null&&(ya(it),it=null))),ca(t,e),Te(e),null;case 5:vu(e);var i=Nn(Mi.current);if(n=e.type,t!==null&&e.stateNode!=null)ap(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(w(166));return Te(e),null}if(t=Nn(Tt.current),vo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[vt]=e,r[ki]=o,t=(e.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(i=0;i<ai.length;i++)J(ai[i],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":Ic(r,o),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},J("invalid",r);break;case"textarea":Cc(r,o),J("invalid",r)}Fl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&mo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&mo(r.textContent,l,t),i=["children",""+l]):Si.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&J("scroll",r)}switch(n){case"input":lo(r),xc(r,o,!0);break;case"textarea":lo(r),Pc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Jo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[vt]=e,t[ki]=r,lp(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ul(n,r),n){case"dialog":J("cancel",t),J("close",t),i=r;break;case"iframe":case"object":case"embed":J("load",t),i=r;break;case"video":case"audio":for(i=0;i<ai.length;i++)J(ai[i],t);i=r;break;case"source":J("error",t),i=r;break;case"img":case"image":case"link":J("error",t),J("load",t),i=r;break;case"details":J("toggle",t),i=r;break;case"input":Ic(t,r),i=kl(t,r),J("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),J("invalid",t);break;case"textarea":Cc(t,r),i=Dl(t,r),J("invalid",t);break;default:i=r}Fl(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Bd(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ud(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ti(t,u):typeof u=="number"&&Ti(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Si.hasOwnProperty(o)?u!=null&&o==="onScroll"&&J("scroll",t):u!=null&&Ka(t,o,u,s))}switch(n){case"input":lo(t),xc(t,r,!1);break;case"textarea":lo(t),Pc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?pr(t,!!r.multiple,o,!1):r.defaultValue!=null&&pr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Jo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)up(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(w(166));if(n=Nn(Mi.current),Nn(Tt.current),vo(e)){if(r=e.stateNode,n=e.memoizedProps,r[vt]=e,(o=r.nodeValue!==n)&&(t=$e,t!==null))switch(t.tag){case 3:mo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vt]=e,e.stateNode=r}return Te(e),null;case 13:if(Z(te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&je!==null&&e.mode&1&&!(e.flags&128))Ph(),Tr(),e.flags|=98560,o=!1;else if(o=vo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(w(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(w(317));o[vt]=e}else Tr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),o=!1}else it!==null&&(ya(it),it=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?ue===0&&(ue=3):Ou())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return xr(),ca(t,e),t===null&&Oi(e.stateNode.containerInfo),Te(e),null;case 10:return hu(e.type._context),Te(e),null;case 17:return Ue(e.type)&&Xo(),Te(e),null;case 19:if(Z(te),o=e.memoizedState,o===null)return Te(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ti(o,!1);else{if(ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=os(t),s!==null){for(e.flags|=128,ti(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(te,te.current&1|2),e.child}t=t.sibling}o.tail!==null&&se()>Pr&&(e.flags|=128,r=!0,ti(o,!1),e.lanes=4194304)}else{if(!r)if(t=os(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ti(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ee)return Te(e),null}else 2*se()-o.renderingStartTime>Pr&&n!==1073741824&&(e.flags|=128,r=!0,ti(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=se(),e.sibling=null,n=te.current,Y(te,r?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return Au(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ve&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(w(156,e.tag))}function Pv(t,e){switch(uu(e),e.tag){case 1:return Ue(e.type)&&Xo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xr(),Z(Fe),Z(Ce),yu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vu(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(w(340));Tr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return xr(),null;case 10:return hu(e.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var Eo=!1,Ie=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,P=null;function ur(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(t,e,r)}else n.current=null}function fa(t,e,n){try{n()}catch(r){ie(t,e,r)}}var vf=!1;function Av(t,e){if(Kl=Ko,t=ph(),lu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(u=s),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yl={focusedElem:t,selectionRange:n},Ko=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,T=_.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:tt(e.type,y),T);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(w(163))}}catch(E){ie(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return _=vf,vf=!1,_}function mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&fa(e,n,o)}i=i.next}while(i!==r)}}function Os(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function da(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cp(t){var e=t.alternate;e!==null&&(t.alternate=null,cp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vt],delete e[ki],delete e[Xl],delete e[fv],delete e[dv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fp(t){return t.tag===5||t.tag===3||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ha(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jo));else if(r!==4&&(t=t.child,t!==null))for(ha(t,e,n),t=t.sibling;t!==null;)ha(t,e,n),t=t.sibling}function pa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pa(t,e,n),t=t.sibling;t!==null;)pa(t,e,n),t=t.sibling}var ve=null,nt=!1;function qt(t,e,n){for(n=n.child;n!==null;)dp(t,e,n),n=n.sibling}function dp(t,e,n){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Ss,n)}catch{}switch(n.tag){case 5:Ie||ur(n,e);case 6:var r=ve,i=nt;ve=null,qt(t,e,n),ve=r,nt=i,ve!==null&&(nt?(t=ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ve.removeChild(n.stateNode));break;case 18:ve!==null&&(nt?(t=ve,n=n.stateNode,t.nodeType===8?cl(t.parentNode,n):t.nodeType===1&&cl(t,n),Pi(t)):cl(ve,n.stateNode));break;case 4:r=ve,i=nt,ve=n.stateNode.containerInfo,nt=!0,qt(t,e,n),ve=r,nt=i;break;case 0:case 11:case 14:case 15:if(!Ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&fa(n,e,s),i=i.next}while(i!==r)}qt(t,e,n);break;case 1:if(!Ie&&(ur(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ie(n,e,l)}qt(t,e,n);break;case 21:qt(t,e,n);break;case 22:n.mode&1?(Ie=(r=Ie)||n.memoizedState!==null,qt(t,e,n),Ie=r):qt(t,e,n);break;default:qt(t,e,n)}}function _f(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Lv),e.forEach(function(r){var i=Uv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,nt=!1;break e;case 3:ve=l.stateNode.containerInfo,nt=!0;break e;case 4:ve=l.stateNode.containerInfo,nt=!0;break e}l=l.return}if(ve===null)throw Error(w(160));dp(o,s,i),ve=null,nt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ie(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hp(e,t),e=e.sibling}function hp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(et(e,t),ht(t),r&4){try{mi(3,t,t.return),Os(3,t)}catch(y){ie(t,t.return,y)}try{mi(5,t,t.return)}catch(y){ie(t,t.return,y)}}break;case 1:et(e,t),ht(t),r&512&&n!==null&&ur(n,n.return);break;case 5:if(et(e,t),ht(t),r&512&&n!==null&&ur(n,n.return),t.flags&32){var i=t.stateNode;try{Ti(i,"")}catch(y){ie(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Dd(i,o),Ul(l,s);var c=Ul(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];f==="style"?Bd(i,d):f==="dangerouslySetInnerHTML"?Ud(i,d):f==="children"?Ti(i,d):Ka(i,f,d,c)}switch(l){case"input":Rl(i,o);break;case"textarea":zd(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?pr(i,!!o.multiple,v,!1):h!==!!o.multiple&&(o.defaultValue!=null?pr(i,!!o.multiple,o.defaultValue,!0):pr(i,!!o.multiple,o.multiple?[]:"",!1))}i[ki]=o}catch(y){ie(t,t.return,y)}}break;case 6:if(et(e,t),ht(t),r&4){if(t.stateNode===null)throw Error(w(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){ie(t,t.return,y)}}break;case 3:if(et(e,t),ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pi(e.containerInfo)}catch(y){ie(t,t.return,y)}break;case 4:et(e,t),ht(t);break;case 13:et(e,t),ht(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Pu=se())),r&4&&_f(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ie=(c=Ie)||f,et(e,t),Ie=c):et(e,t),ht(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(P=t,f=t.child;f!==null;){for(d=P=f;P!==null;){switch(h=P,v=h.child,h.tag){case 0:case 11:case 14:case 15:mi(4,h,h.return);break;case 1:ur(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){ie(r,n,y)}}break;case 5:ur(h,h.return);break;case 22:if(h.memoizedState!==null){wf(d);continue}}v!==null?(v.return=h,P=v):wf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Wd("display",s))}catch(y){ie(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){ie(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:et(e,t),ht(t),r&4&&_f(t);break;case 21:break;default:et(e,t),ht(t)}}function ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fp(n)){var r=n;break e}n=n.return}throw Error(w(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ti(i,""),r.flags&=-33);var o=yf(t);pa(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=yf(t);ha(t,l,s);break;default:throw Error(w(161))}}catch(u){ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ov(t,e,n){P=t,pp(t)}function pp(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var i=P,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Eo;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ie;l=Eo;var c=Ie;if(Eo=s,(Ie=u)&&!c)for(P=i;P!==null;)s=P,u=s.child,s.tag===22&&s.memoizedState!==null?Sf(i):u!==null?(u.return=s,P=u):Sf(i);for(;o!==null;)P=o,pp(o),o=o.sibling;P=i,Eo=l,Ie=c}Ef(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,P=o):Ef(t)}}function Ef(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||Os(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ie)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&rf(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rf(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Pi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(w(163))}Ie||e.flags&512&&da(e)}catch(h){ie(e,e.return,h)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function wf(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function Sf(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Os(4,e)}catch(u){ie(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ie(e,i,u)}}var o=e.return;try{da(e)}catch(u){ie(e,o,u)}break;case 5:var s=e.return;try{da(e)}catch(u){ie(e,s,u)}}}catch(u){ie(e,e.return,u)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var Nv=Math.ceil,as=Yt.ReactCurrentDispatcher,xu=Yt.ReactCurrentOwner,Je=Yt.ReactCurrentBatchConfig,$=0,he=null,le=null,ye=0,Ve=0,cr=En(0),ue=0,Ui=null,Un=0,Ns=0,Cu=0,vi=null,De=null,Pu=0,Pr=1/0,At=null,us=!1,ga=null,fn=null,wo=!1,rn=null,cs=0,yi=0,ma=null,zo=-1,Fo=0;function Ne(){return $&6?se():zo!==-1?zo:zo=se()}function dn(t){return t.mode&1?$&2&&ye!==0?ye&-ye:pv.transition!==null?(Fo===0&&(Fo=Xd()),Fo):(t=Q,t!==0||(t=window.event,t=t===void 0?16:oh(t.type)),t):1}function ut(t,e,n,r){if(50<yi)throw yi=0,ma=null,Error(w(185));Hi(t,n,r),(!($&2)||t!==he)&&(t===he&&(!($&2)&&(Ns|=n),ue===4&&tn(t,ye)),We(t,r),n===1&&$===0&&!(e.mode&1)&&(Pr=se()+500,Ps&&wn()))}function We(t,e){var n=t.callbackNode;p0(t,e);var r=Qo(t,t===he?ye:0);if(r===0)n!==null&&Oc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Oc(n),e===1)t.tag===0?hv(Tf.bind(null,t)):Ih(Tf.bind(null,t)),uv(function(){!($&6)&&wn()}),n=null;else{switch(Zd(r)){case 1:n=Za;break;case 4:n=qd;break;case 16:n=bo;break;case 536870912:n=Jd;break;default:n=bo}n=Sp(n,gp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gp(t,e){if(zo=-1,Fo=0,$&6)throw Error(w(327));var n=t.callbackNode;if(_r()&&t.callbackNode!==n)return null;var r=Qo(t,t===he?ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fs(t,r);else{e=r;var i=$;$|=2;var o=vp();(he!==t||ye!==e)&&(At=null,Pr=se()+500,Rn(t,e));do try{Mv();break}catch(l){mp(t,l)}while(!0);du(),as.current=o,$=i,le!==null?e=0:(he=null,ye=0,e=ue)}if(e!==0){if(e===2&&(i=$l(t),i!==0&&(r=i,e=va(t,i))),e===1)throw n=Ui,Rn(t,0),tn(t,r),We(t,se()),n;if(e===6)tn(t,r);else{if(i=t.current.alternate,!(r&30)&&!kv(i)&&(e=fs(t,r),e===2&&(o=$l(t),o!==0&&(r=o,e=va(t,o))),e===1))throw n=Ui,Rn(t,0),tn(t,r),We(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(w(345));case 2:Pn(t,De,At);break;case 3:if(tn(t,r),(r&130023424)===r&&(e=Pu+500-se(),10<e)){if(Qo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jl(Pn.bind(null,t,De,At),e);break}Pn(t,De,At);break;case 4:if(tn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-at(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nv(r/1960))-r,10<r){t.timeoutHandle=Jl(Pn.bind(null,t,De,At),r);break}Pn(t,De,At);break;case 5:Pn(t,De,At);break;default:throw Error(w(329))}}}return We(t,se()),t.callbackNode===n?gp.bind(null,t):null}function va(t,e){var n=vi;return t.current.memoizedState.isDehydrated&&(Rn(t,e).flags|=256),t=fs(t,e),t!==2&&(e=De,De=n,e!==null&&ya(e)),t}function ya(t){De===null?De=t:De.push.apply(De,t)}function kv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ft(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tn(t,e){for(e&=~Cu,e&=~Ns,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-at(e),r=1<<n;t[n]=-1,e&=~r}}function Tf(t){if($&6)throw Error(w(327));_r();var e=Qo(t,0);if(!(e&1))return We(t,se()),null;var n=fs(t,e);if(t.tag!==0&&n===2){var r=$l(t);r!==0&&(e=r,n=va(t,r))}if(n===1)throw n=Ui,Rn(t,0),tn(t,e),We(t,se()),n;if(n===6)throw Error(w(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pn(t,De,At),We(t,se()),null}function Lu(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(Pr=se()+500,Ps&&wn())}}function Wn(t){rn!==null&&rn.tag===0&&!($&6)&&_r();var e=$;$|=1;var n=Je.transition,r=Q;try{if(Je.transition=null,Q=1,t)return t()}finally{Q=r,Je.transition=n,$=e,!($&6)&&wn()}}function Au(){Ve=cr.current,Z(cr)}function Rn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,av(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(uu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xo();break;case 3:xr(),Z(Fe),Z(Ce),yu();break;case 5:vu(r);break;case 4:xr();break;case 13:Z(te);break;case 19:Z(te);break;case 10:hu(r.type._context);break;case 22:case 23:Au()}n=n.return}if(he=t,le=t=hn(t.current,null),ye=Ve=e,ue=0,Ui=null,Cu=Ns=Un=0,De=vi=null,On!==null){for(e=0;e<On.length;e++)if(n=On[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}On=null}return t}function mp(t,e){do{var n=le;try{if(du(),Ro.current=ls,ss){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ss=!1}if(Fn=0,de=ae=ne=null,gi=!1,Di=0,xu.current=null,n===null||n.return===null){ue=1,Ui=e,le=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=ye,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=cf(s);if(v!==null){v.flags&=-257,ff(v,s,l,o,e),v.mode&1&&uf(o,c,e),e=v,u=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(u),e.updateQueue=y}else _.add(u);break e}else{if(!(e&1)){uf(o,c,e),Ou();break e}u=Error(w(426))}}else if(ee&&l.mode&1){var T=cf(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),ff(T,s,l,o,e),cu(Cr(u,l));break e}}o=u=Cr(u,l),ue!==4&&(ue=2),vi===null?vi=[o]:vi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=Zh(o,u,e);nf(o,g);break e;case 1:l=u;var p=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(fn===null||!fn.has(m)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=ep(o,l,e);nf(o,E);break e}}o=o.return}while(o!==null)}_p(n)}catch(I){e=I,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function vp(){var t=as.current;return as.current=ls,t===null?ls:t}function Ou(){(ue===0||ue===3||ue===2)&&(ue=4),he===null||!(Un&268435455)&&!(Ns&268435455)||tn(he,ye)}function fs(t,e){var n=$;$|=2;var r=vp();(he!==t||ye!==e)&&(At=null,Rn(t,e));do try{Rv();break}catch(i){mp(t,i)}while(!0);if(du(),$=n,as.current=r,le!==null)throw Error(w(261));return he=null,ye=0,ue}function Rv(){for(;le!==null;)yp(le)}function Mv(){for(;le!==null&&!o0();)yp(le)}function yp(t){var e=wp(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?_p(t):le=e,xu.current=null}function _p(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Pv(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ue=6,le=null;return}}else if(n=Cv(n,e,Ve),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);ue===0&&(ue=5)}function Pn(t,e,n){var r=Q,i=Je.transition;try{Je.transition=null,Q=1,Dv(t,e,n,r)}finally{Je.transition=i,Q=r}return null}function Dv(t,e,n,r){do _r();while(rn!==null);if($&6)throw Error(w(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(w(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(g0(t,o),t===he&&(le=he=null,ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wo||(wo=!0,Sp(bo,function(){return _r(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Je.transition,Je.transition=null;var s=Q;Q=1;var l=$;$|=4,xu.current=null,Av(t,n),hp(n,t),tv(Yl),Ko=!!Kl,Yl=Kl=null,t.current=n,Ov(n),s0(),$=l,Q=s,Je.transition=o}else t.current=n;if(wo&&(wo=!1,rn=t,cs=i),o=t.pendingLanes,o===0&&(fn=null),u0(n.stateNode),We(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(us)throw us=!1,t=ga,ga=null,t;return cs&1&&t.tag!==0&&_r(),o=t.pendingLanes,o&1?t===ma?yi++:(yi=0,ma=t):yi=0,wn(),null}function _r(){if(rn!==null){var t=Zd(cs),e=Je.transition,n=Q;try{if(Je.transition=null,Q=16>t?16:t,rn===null)var r=!1;else{if(t=rn,rn=null,cs=0,$&6)throw Error(w(331));var i=$;for($|=4,P=t.current;P!==null;){var o=P,s=o.child;if(P.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(P=c;P!==null;){var f=P;switch(f.tag){case 0:case 11:case 15:mi(8,f,o)}var d=f.child;if(d!==null)d.return=f,P=d;else for(;P!==null;){f=P;var h=f.sibling,v=f.return;if(cp(f),f===c){P=null;break}if(h!==null){h.return=v,P=h;break}P=v}}}var _=o.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}P=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,P=s;else e:for(;P!==null;){if(o=P,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mi(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,P=g;break e}P=o.return}}var p=t.current;for(P=p;P!==null;){s=P;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,P=m;else e:for(s=p;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Os(9,l)}}catch(I){ie(l,l.return,I)}if(l===s){P=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,P=E;break e}P=l.return}}if($=i,wn(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Ss,t)}catch{}r=!0}return r}finally{Q=n,Je.transition=e}}return!1}function If(t,e,n){e=Cr(n,e),e=Zh(t,e,1),t=cn(t,e,1),e=Ne(),t!==null&&(Hi(t,1,e),We(t,e))}function ie(t,e,n){if(t.tag===3)If(t,t,n);else for(;e!==null;){if(e.tag===3){If(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fn===null||!fn.has(r))){t=Cr(n,t),t=ep(e,t,1),e=cn(e,t,1),t=Ne(),e!==null&&(Hi(e,1,t),We(e,t));break}}e=e.return}}function zv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(ye&n)===n&&(ue===4||ue===3&&(ye&130023424)===ye&&500>se()-Pu?Rn(t,0):Cu|=n),We(t,e)}function Ep(t,e){e===0&&(t.mode&1?(e=co,co<<=1,!(co&130023424)&&(co=4194304)):e=1);var n=Ne();t=Vt(t,e),t!==null&&(Hi(t,e,n),We(t,n))}function Fv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ep(t,n)}function Uv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(w(314))}r!==null&&r.delete(e),Ep(t,n)}var wp;wp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fe.current)ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ze=!1,xv(t,e,n);ze=!!(t.flags&131072)}else ze=!1,ee&&e.flags&1048576&&xh(e,ts,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Do(t,e),t=e.pendingProps;var i=Sr(e,Ce.current);yr(e,n),i=Eu(null,e,r,t,i,n);var o=wu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(o=!0,Zo(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gu(e),i.updater=As,e.stateNode=i,i._reactInternals=e,ia(e,r,t,n),e=la(null,e,r,!0,o,n)):(e.tag=0,ee&&o&&au(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Do(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Bv(r),t=tt(r,t),i){case 0:e=sa(null,e,r,t,n);break e;case 1:e=pf(null,e,r,t,n);break e;case 11:e=df(null,e,r,t,n);break e;case 14:e=hf(null,e,r,tt(r.type,t),n);break e}throw Error(w(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),sa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),pf(t,e,r,i,n);case 3:e:{if(ip(e),t===null)throw Error(w(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Nh(t,e),is(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Cr(Error(w(423)),e),e=gf(t,e,r,n,i);break e}else if(r!==i){i=Cr(Error(w(424)),e),e=gf(t,e,r,n,i);break e}else for(je=un(e.stateNode.containerInfo.firstChild),$e=e,ee=!0,it=null,n=Ah(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tr(),r===i){e=jt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return kh(e),t===null&&ta(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,ql(r,i)?s=null:o!==null&&ql(r,o)&&(e.flags|=32),rp(t,e),Le(t,e,s,n),e.child;case 6:return t===null&&ta(e),null;case 13:return op(t,e,n);case 4:return mu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ir(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),df(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Y(ns,r._currentValue),r._currentValue=s,o!==null)if(ft(o.value,s)){if(o.children===i.children&&!Fe.current){e=jt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Dt(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),na(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(w(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),na(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,yr(e,n),i=Xe(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=tt(r,e.pendingProps),i=tt(r.type,i),hf(t,e,r,i,n);case 15:return tp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Do(t,e),e.tag=1,Ue(r)?(t=!0,Zo(e)):t=!1,yr(e,n),Xh(e,r,i),ia(e,r,i,n),la(null,e,r,!0,t,n);case 19:return sp(t,e,n);case 22:return np(t,e,n)}throw Error(w(156,e.tag))};function Sp(t,e){return Yd(t,e)}function Wv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,n,r){return new Wv(t,e,n,r)}function Nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bv(t){if(typeof t=="function")return Nu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qa)return 11;if(t===Ja)return 14}return 2}function hn(t,e){var n=t.alternate;return n===null?(n=qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uo(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Nu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case er:return Mn(n.children,i,o,e);case Ya:s=8,i|=8;break;case Ll:return t=qe(12,n,e,i|2),t.elementType=Ll,t.lanes=o,t;case Al:return t=qe(13,n,e,i),t.elementType=Al,t.lanes=o,t;case Ol:return t=qe(19,n,e,i),t.elementType=Ol,t.lanes=o,t;case kd:return ks(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Od:s=10;break e;case Nd:s=9;break e;case qa:s=11;break e;case Ja:s=14;break e;case Jt:s=16,r=null;break e}throw Error(w(130,t==null?t:typeof t,""))}return e=qe(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Mn(t,e,n,r){return t=qe(7,t,r,e),t.lanes=n,t}function ks(t,e,n,r){return t=qe(22,t,r,e),t.elementType=kd,t.lanes=n,t.stateNode={isHidden:!1},t}function yl(t,e,n){return t=qe(6,t,null,e),t.lanes=n,t}function _l(t,e,n){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zs(0),this.expirationTimes=Zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zs(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ku(t,e,n,r,i,o,s,l,u){return t=new Vv(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=qe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gu(o),t}function jv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tp(t){if(!t)return gn;t=t._reactInternals;e:{if(Gn(t)!==t||t.tag!==1)throw Error(w(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(w(171))}if(t.tag===1){var n=t.type;if(Ue(n))return Th(t,n,e)}return e}function Ip(t,e,n,r,i,o,s,l,u){return t=ku(n,r,!0,t,i,o,s,l,u),t.context=Tp(null),n=t.current,r=Ne(),i=dn(n),o=Dt(r,i),o.callback=e??null,cn(n,o,i),t.current.lanes=i,Hi(t,i,r),We(t,r),t}function Rs(t,e,n,r){var i=e.current,o=Ne(),s=dn(i);return n=Tp(n),e.context===null?e.context=n:e.pendingContext=n,e=Dt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cn(i,e,s),t!==null&&(ut(t,i,s,o),ko(t,i,s)),s}function ds(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ru(t,e){xf(t,e),(t=t.alternate)&&xf(t,e)}function $v(){return null}var xp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mu(t){this._internalRoot=t}Ms.prototype.render=Mu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(w(409));Rs(t,e,null,null)};Ms.prototype.unmount=Mu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wn(function(){Rs(null,t,null,null)}),e[Bt]=null}};function Ms(t){this._internalRoot=t}Ms.prototype.unstable_scheduleHydration=function(t){if(t){var e=nh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<en.length&&e!==0&&e<en[n].priority;n++);en.splice(n,0,t),n===0&&ih(t)}};function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ds(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cf(){}function Gv(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=ds(s);o.call(c)}}var s=Ip(e,r,t,0,null,!1,!1,"",Cf);return t._reactRootContainer=s,t[Bt]=s.current,Oi(t.nodeType===8?t.parentNode:t),Wn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ds(u);l.call(c)}}var u=ku(t,0,!1,null,null,!1,!1,"",Cf);return t._reactRootContainer=u,t[Bt]=u.current,Oi(t.nodeType===8?t.parentNode:t),Wn(function(){Rs(e,u,n,r)}),u}function zs(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=ds(s);l.call(u)}}Rs(e,s,t,i)}else s=Gv(n,e,t,i,r);return ds(s)}eh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=li(e.pendingLanes);n!==0&&(eu(e,n|1),We(e,se()),!($&6)&&(Pr=se()+500,wn()))}break;case 13:Wn(function(){var r=Vt(t,1);if(r!==null){var i=Ne();ut(r,t,1,i)}}),Ru(t,1)}};tu=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=Ne();ut(e,t,134217728,n)}Ru(t,134217728)}};th=function(t){if(t.tag===13){var e=dn(t),n=Vt(t,e);if(n!==null){var r=Ne();ut(n,t,e,r)}Ru(t,e)}};nh=function(){return Q};rh=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};Bl=function(t,e,n){switch(e){case"input":if(Rl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cs(r);if(!i)throw Error(w(90));Md(r),Rl(r,i)}}}break;case"textarea":zd(t,n);break;case"select":e=n.value,e!=null&&pr(t,!!n.multiple,e,!1)}};$d=Lu;Gd=Wn;var Hv={usingClientEntryPoint:!1,Events:[Qi,ir,Cs,Vd,jd,Lu]},ni={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bv={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qd(t),t===null?null:t.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||$v,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{Ss=So.inject(bv),St=So}catch{}}be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hv;be.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Du(e))throw Error(w(200));return jv(t,e,null,n)};be.createRoot=function(t,e){if(!Du(t))throw Error(w(299));var n=!1,r="",i=xp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ku(t,1,!1,null,null,n,!1,r,i),t[Bt]=e.current,Oi(t.nodeType===8?t.parentNode:t),new Mu(e)};be.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(w(188)):(t=Object.keys(t).join(","),Error(w(268,t)));return t=Qd(e),t=t===null?null:t.stateNode,t};be.flushSync=function(t){return Wn(t)};be.hydrate=function(t,e,n){if(!Ds(e))throw Error(w(200));return zs(null,t,e,!0,n)};be.hydrateRoot=function(t,e,n){if(!Du(t))throw Error(w(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=xp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Ip(e,null,t,1,n??null,i,!1,o,s),t[Bt]=e.current,Oi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ms(e)};be.render=function(t,e,n){if(!Ds(e))throw Error(w(200));return zs(null,t,e,!1,n)};be.unmountComponentAtNode=function(t){if(!Ds(t))throw Error(w(40));return t._reactRootContainer?(Wn(function(){zs(null,null,t,!1,function(){t._reactRootContainer=null,t[Bt]=null})}),!0):!1};be.unstable_batchedUpdates=Lu;be.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ds(n))throw Error(w(200));if(t==null||t._reactInternals===void 0)throw Error(w(38));return zs(t,e,n,!1,r)};be.version="18.3.1-next-f1338f8080-20240426";function Cp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cp)}catch(t){console.error(t)}}Cp(),Cd.exports=be;var Qv=Cd.exports,Pf=Qv;Cl.createRoot=Pf.createRoot,Cl.hydrateRoot=Pf.hydrateRoot;const Kv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),Yv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),qv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),Jv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),Xv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),Zv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),ey=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),ty=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),ny=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),ry=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),iy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),oy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),sy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),ly=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),ay=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),uy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),cy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),fy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),dy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"})),hy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M6.854 5.854l.353-.354-.707-.707-.354.353.708.708zM4.5 7.5l-.354-.354-.353.354.353.354L4.5 7.5zm1.646 2.354l.354.353.707-.707-.353-.354-.708.708zM7.5.5V0v.5zm7 7h.5-.5zm-14 0H1 .5zm7 7V14v.5zM6.146 5.146l-2 2 .708.708 2-2-.708-.708zm-2 2.708l2 2 .708-.708-2-2-.708.708zM4.5 8H11V7H4.5v1zm3-7A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zM1 7.5A6.5 6.5 0 017.5 1V0A7.5 7.5 0 000 7.5h1zM7.5 14A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zm0 1A7.5 7.5 0 0015 7.5h-1A6.5 6.5 0 017.5 14v1z",fill:"currentColor"})),py=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M8.146 9.146l-.353.354.707.707.354-.353-.708-.708zM10.5 7.5l.354.354.353-.354-.353-.354-.354.354zM8.854 5.146L8.5 4.793l-.707.707.353.354.708-.708zm0 4.708l2-2-.708-.708-2 2 .708.708zm2-2.708l-2-2-.708.708 2 2 .708-.708zM10.5 7H4v1h6.5V7zm-3 7A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zM14 7.5A6.5 6.5 0 017.5 14v1A7.5 7.5 0 0015 7.5h-1zM7.5 1A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zm0-1A7.5 7.5 0 000 7.5h1A6.5 6.5 0 017.5 1V0z",fill:"currentColor"})),gy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"}),k.createElement("path",{d:"M 9.159 5.175 L 1.166 5.175 C 0.799 5.175 0.5 5.472 0.5 5.841 L 0.5 13.834 C 0.5 14.203 0.799 14.5 1.166 14.5 L 9.159 14.5 C 9.528 14.5 9.825 14.203 9.825 13.834 L 9.825 5.841 C 9.825 5.472 9.528 5.175 9.159 5.175 Z",stroke:"currentColor"})),my=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 7.5l-4 4m4-4l-4-4m4 4H3M1.5 1v13",stroke:"currentColor"}),k.createElement("path",{d:"M1.5 7.5l4-4m-4 4l4 4m-4-4H12m1.5 6.5V1",stroke:"currentColor"}));var me=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.ArrowLeftCircle="ArrowLeftCircle",t.ArrowRightCircle="ArrowRightCircle",t.Measurement="Measurement",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t.Scale="Scale",t))(me||{});const vy={Line:Kv,Square:Yv,Circle:qv,Direction:Jv,VectorDocument:Xv,LayersDifference:Zv,AntiClockwise:oy,Clockwise:sy,Github:ly,Crop:ay,Folder:uy,Save:fy,Svg:ey,Expand:cy,Image:dy,ArrowLeftCircle:hy,ArrowRightCircle:py,Measurement:my,SolidDown:ty,SolidUp:ny,SolidUpSmall:ry,SolidDownSmall:iy,Scale:gy},Pp=({name:t,className:e})=>{const n=vy[t];return M.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:M.jsx(n,{})})};var z=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.SCALE="SCALE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t.ROTATE="ROTATE",t.MEASUREMENT="MEASUREMENT",t))(z||{});const K=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:o,className:s,iconClassname:l,style:u})=>M.jsx(M.Fragment,{children:M.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(s?" "+s:""),style:u,"data-active":i,onClick:r,title:e,children:[n&&M.jsx(Pp,{name:n,className:l}),t&&M.jsx("span",{children:t}),o]})}),El=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:o,children:s})=>{const[l,u]=k.useState(!1);return M.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[M.jsx(K,{icon:n,label:t,title:e,"data-active":l,onClick:()=>u(!l),style:o}),M.jsx(Pp,{name:me.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&M.jsx("div",{className:"flex flex-row gap-1",onClick:()=>u(!1),children:s})]})},Lp=!0,yy=!1,Wo={CCW:-1,CW:1,NOT_ORIENTABLE:0},_y=2*Math.PI,hs=1,Ap=0,gt=2,Ey=3,wy=4,Sy=1,Ty=2,zu=0,_i=1,Er=2;var ps=Object.freeze({__proto__:null,BOUNDARY:gt,CCW:Lp,CONTAINS:Ey,CW:yy,END_VERTEX:Er,INSIDE:hs,INTERLACE:wy,NOT_VERTEX:zu,ORIENTATION:Wo,OUTSIDE:Ap,OVERLAP_OPPOSITE:Ty,OVERLAP_SAME:Sy,PIx2:_y,START_VERTEX:_i});let xt=1e-6;function Op(t){xt=t}function Np(){return xt}const Iy=3;function _a(t){return t<xt&&t>-xt}function Bn(t,e){return t-e<xt&&t-e>-xt}function kp(t,e){return t-e>xt}function xy(t,e){return t-e>-xt}function Rp(t,e){return t-e<-xt}function Cy(t,e){return t-e<xt}var Py=Object.freeze({__proto__:null,DECIMALS:Iy,EQ:Bn,EQ_0:_a,GE:xy,GT:kp,LE:Cy,LT:Rp,getTolerance:Np,setTolerance:Op});let a={Utils:Py,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in ps)a[t]=ps[t];Object.defineProperty(a,"DP_TOL",{get:function(){return Np()},set:function(t){Op(t)}});class X{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}a.Errors=X;class Fu{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,o=n||this.last,s=i;if(s===void 0)return r;do r.push(s),s=s.next;while(s!==o.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw X.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const Lf={stroke:"black"};class Ly{constructor(e=Lf){for(const n in e)this[n]=e[n];this.stroke=e.stroke??Lf.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function Hn(t){return new Ly(t).toAttributesString()}function jr(t,e){let n=[],[r,i,o]=t.standard,[s,l,u]=e.standard,c=r*l-i*s,f=o*l-i*u,d=r*u-o*s;if(!a.Utils.EQ_0(c)){let h,v;i===0?(h=o/r,v=d/c):l===0?(h=u/s,v=d/c):r===0?(h=f/c,v=o/i):s===0?(h=f/c,v=u/l):(h=f/c,v=d/c),n.push(new a.Point(h,v))}return n}function bn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(a.Utils.EQ(i,e.r))n.push(r);else if(a.Utils.LT(i,e.r)){let o=Math.sqrt(e.r*e.r-i*i),s,l;s=t.norm.rotate90CCW().multiply(o),l=r.translate(s),n.push(l),s=t.norm.rotate90CW().multiply(o),l=r.translate(s),n.push(l)}return n}function Lr(t,e){let n=[];for(let r of e.toSegments()){let i=Yi(r,t);for(let o of i)jp(o,n)||n.push(o)}return n}function Fs(t,e){let n=[];if(Lr(t,e.box).length===0)return n;let r=new a.Circle(e.pc,e.r),i=bn(t,r);for(let o of i)o.on(e)&&n.push(o);return n}function Yi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new a.Line(t.ps,t.pe);return jr(r,e)}function Us(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let o=jr(r,i);o.length>0&&Af(o[0],t)&&Af(o[0],e)&&n.push(o[0])}return n}function Af(t,e){const n=e.box;return a.Utils.LE(t.x,n.xmax)&&a.Utils.GE(t.x,n.xmin)&&a.Utils.LE(t.y,n.ymax)&&a.Utils.GE(t.y,n.ymin)}function Ws(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[o,s]=t.ps.distanceTo(e.pc);return a.Utils.EQ(o,e.r)&&n.push(t.ps),n}let r=new a.Line(t.ps,t.pe),i=bn(r,e);for(let o of i)o.on(t)&&n.push(o);return n}function $r(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Circle(e.pc,e.r),o=bn(r,i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Ay(t,e){let n=[];for(let r of e.toSegments()){let i=Us(r,t);for(let o of i)n.push(o)}return n}function Mp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new a.Vector(t.pc,e.pc),i=t.r,o=e.r;if(a.Utils.EQ_0(i)||a.Utils.EQ_0(o))return n;if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y)&&a.Utils.EQ(i,o))return n.push(t.pc.translate(-i,0)),n;let s=t.pc.distanceTo(e.pc)[0];if(a.Utils.GT(s,i+o)||a.Utils.LT(s,Math.abs(i-o)))return n;r.x/=s,r.y/=s;let l;if(a.Utils.EQ(s,i+o)||a.Utils.EQ(s,Math.abs(i-o)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let u=i*i/(2*s)-o*o/(2*s)+s/2,c=t.pc.translate(u*r.x,u*r.y),f=Math.sqrt(i*i-u*u);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Oy(t,e){let n=[];for(let r of e.toSegments()){let i=Ws(r,t);for(let o of i)n.push(o)}return n}function Dp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&a.Utils.EQ(t.r,e.r)){let s;return s=t.start,s.on(e)&&n.push(s),s=t.end,s.on(e)&&n.push(s),s=e.start,s.on(t)&&n.push(s),s=e.end,s.on(t)&&n.push(s),n}let r=new a.Circle(t.pc,t.r),i=new a.Circle(e.pc,e.r),o=r.intersect(i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Uu(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&a.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new a.Circle(t.pc,t.r),o=Mp(r,i);for(let s of o)s.on(t)&&n.push(s);return n}function Ny(t,e){let n=[];for(let r of e.toSegments()){let i=$r(r,t);for(let o of i)n.push(o)}return n}function zp(t,e){return t.isSegment?Us(t.shape,e):$r(e,t.shape)}function Fp(t,e){return t.isSegment?$r(t.shape,e):Dp(t.shape,e)}function Up(t,e){return t.isSegment?Yi(t.shape,e):Fs(e,t.shape)}function ky(t,e){return t.isSegment?Vu(e,t.shape):ju(e,t.shape)}function Ry(t,e){return t.isSegment?Ws(t.shape,e):Uu(t.shape,e)}function Wu(t,e){let n=[];for(let r of e.edges)for(let i of zp(r,t))n.push(i);return n}function Bu(t,e){let n=[];for(let r of e.edges)for(let i of Fp(r,t))n.push(i);return n}function qi(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Up(r,t))jp(i,n)||n.push(i);return t.sortPoints(n)}function Wp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Ry(r,t))n.push(i);return n}function Bp(t,e){return t.isSegment?zp(e,t.shape):t.isArc?Fp(e,t.shape):t.isLine?Up(e,t.shape):t.isRay?ky(e,t.shape):[]}function Vp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Bp(t,i)];return n}function My(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...Vp(r,e)];return n}function Dy(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...Vp(r,e)];return n}function zy(t,e){return t instanceof a.Line?qi(t,e):t instanceof a.Segment?Wu(t,e):t instanceof a.Arc?Bu(t,e):[]}function jp(t,e){return e.some(n=>n.equalTo(t))}function mn(t){return new a.Line(t.start,t.norm)}function Vu(t,e){return Yi(e,mn(t)).filter(n=>t.contains(n))}function ju(t,e){return Fs(mn(t),e).filter(n=>t.contains(n))}function $p(t,e){return bn(mn(t),e).filter(n=>t.contains(n))}function Fy(t,e){return Lr(mn(t),e).filter(n=>t.contains(n))}function Gp(t,e){return jr(mn(t),e).filter(n=>t.contains(n))}function Uy(t,e){return jr(mn(t),mn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function Hp(t,e){return qi(mn(t),e).filter(n=>t.contains(n))}function bp(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw X.UNSUPPORTED_SHAPE_TYPE}function Ji(t,e){let n=[];for(let r of e)n=[...n,...bp(r,r.shape)];return n}function Wy(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...bp(r,i)];return n}let Qn=class ui extends Fu{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,o=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray||u instanceof a.Line,s=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray,l=u=>u instanceof a.Segment||u instanceof a.Arc;if(n=i===1&&o(r[0])||i>1&&s(r[0])&&s(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(u=>u instanceof a.Ray||u instanceof a.Line);for(let u of r){let c=new a.Edge(u);this.append(c)}this.setArcLength()}else throw a.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new ui(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return this.insert(i,o),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Line){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Circle){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Segment){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Multiline)return a.Distance.multiline2multiline(this,e);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof a.Multiline?Wy(this,e):Ji(e,this)}contains(e){if(e instanceof a.Point)return this.edges.some(n=>n.shape.contains(e));throw a.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new ui(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new a.Point){return new ui(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new a.Matrix){return new ui(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${Hn({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};a.Multiline=Qn;const By=(...t)=>new a.Multiline(...t);a.multiline=By;function Ar(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let o=0;i[0]===null?o=0:i[1]===null?o=t.shape.length:o=i[0].length;let s=zu;Bn(o,0)&&(s|=_i),Bn(o,t.shape.length)&&(s|=Er);let l;o===1/0?l=i[0].coord(e):l=s&Er&&t.next&&t.next.arc_length===0?0:t.arc_length+o,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:s})}function Wi(t){t.int_points1_sorted=Zt(t.int_points1),t.int_points2_sorted=Zt(t.int_points2)}function Zt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(Vy)}function Vy(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function $u(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,o;for(let s=0;s<t.int_points1_sorted.length;s++)if(t.int_points1_sorted[s].id!==-1){n=t.int_points1_sorted[s],r=t.int_points2[n.id];for(let l=s+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!Bn(i.arc_length,n.arc_length));l++)i.id!==-1&&(o=t.int_points2[i.id],o.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&o.edge_before===r.edge_before&&o.edge_after===r.edge_after&&(i.id=-1,o.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let s=1;s<t.int_points2_sorted.length;s++){let l=t.int_points2_sorted[s];if(l.id===-1)continue;if(r.id===-1||!Bn(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let u=t.int_points1[l.id];u.edge_before===n.edge_before&&u.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(u.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(s=>s.id>=0),t.int_points2=t.int_points2.filter(s=>s.id>=0),t.int_points1.forEach((s,l)=>s.id=l),t.int_points2.forEach((s,l)=>s.id=l))}function Ea(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=gt),e.edge_after&&(e.edge_after.bvStart=gt)}function wa(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function jy(t){let e,n,r,i=t.int_points1.length;for(let o=0;o<i;o++){let s=t.int_points1_sorted[o];s.face!==e&&(n=o,e=s.face);let l=o,u=Or(t.int_points1_sorted,o,e),c;l+u<i&&t.int_points1_sorted[l+u].face===e?c=l+u:c=n;let f=Or(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[s.id].face){r=p;break}}if(r===null)continue;let d=s.edge_after,h=r.edge_before;if(!(d.bv===gt&&h.bv===gt)||d!==h)continue;let v=t.int_points2[s.id],_=t.int_points2[r.id],y=v.edge_after,T=_.edge_before;y.bv===gt&&T.bv===gt&&y===T||(v=t.int_points2[r.id],_=t.int_points2[s.id],y=v.edge_after,T=_.edge_before),y.bv===gt&&T.bv===gt&&y===T&&d.setOverlap(y)}}function Or(t,e,n){let r,i,o=1;if(t.length===1)return 1;r=t[e];for(let s=e+1;s<t.length&&!(r.face!==n||(i=t[s],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));s++)o++;return o}function Nr(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=zu,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=_i),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=Er),n.is_vertex&_i){n.edge_before=r.prev,r.prev&&(n.is_vertex=Er);continue}if(n.is_vertex&Er)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof Qn&&n.is_vertex&_i&&(n.edge_after=t.first)}}function Of(t,e,n){const r=t.edge_before,i=e.edge_after,o=n.length;r.next=n[0],n[0].prev=r,n[o-1].next=i,i.prev=n[o-1]}const{INSIDE:_t,OUTSIDE:Et,BOUNDARY:fe,OVERLAP_SAME:$y,OVERLAP_OPPOSITE:Gy}=ps,{NOT_VERTEX:Vw,START_VERTEX:Nf,END_VERTEX:kf}=ps,Bs=1,Xi=2,Vn=3;function Hy(t,e){let[n,r]=Zi(t,e,Bs,!0);return n}function Sa(t,e){let r=e.clone().reverse(),[i,o]=Zi(t,r,Vn,!0);return i}function Qp(t,e){let[n,r]=Zi(t,e,Xi,!0);return n}function Kp(t,e){let[n,r]=Zi(t,e,Xi,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(l=>l.shape)];let o=[];for(let s of r.faces)o=[...o,...[...s.edges].map(l=>l.shape)];return[i,o]}function Ta(t,e){let[n,r]=Zi(t,e,Vn,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(s=>s.shape)];return i}function Yp(t,e){let n=t.clone(),r=e.clone(),i=qp(n,r);Wi(i),Nr(n,i.int_points1_sorted),Nr(r,i.int_points2_sorted),$u(i),Wi(i);let o=i.int_points1_sorted.map(l=>l.pt),s=i.int_points2_sorted.map(l=>l.pt);return[o,s]}function by(t,e,n,r){let i=Rf(t,n.int_points1),o=Rf(e,n.int_points2);for(Mf(i,e),Mf(o,t),Ea(n.int_points1),Ea(n.int_points2),wa(n.int_points1,e),wa(n.int_points2,t);Ky(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););jy(n),Ia(t,r,n.int_points1_sorted,!0),Ia(e,r,n.int_points2_sorted,!1),Df(t,i,r,!0),Df(e,o,r,!1)}function Qy(t,e,n,r){Yy(t,e,r,n.int_points2),qy(t,e,n),xa(t,n.int_points1),xa(e,n.int_points2),Ca(t,n.int_points1,n.int_points2),Ca(t,n.int_points2,n.int_points1)}function Zi(t,e,n,r){let i=t.clone(),o=e.clone(),s=qp(i,o);return Wi(s),Nr(i,s.int_points1_sorted),Nr(o,s.int_points2_sorted),$u(s),Wi(s),by(i,o,s,n),r&&Qy(i,o,s,n),[i,o]}function qp(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let o of i){let s=r.shape.intersect(o.shape);for(let l of s)Ar(r,l,n.int_points1),Ar(o,l,n.int_points2)}}return n}function Rf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Mf(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Ky(t,e,n,r,i,o){let s,l,u,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==s&&(l=d,s=h.face);let v=d,_=Or(r,d,s),y;v+_<c&&r[v+_].face===s?y=v+_:y=l;let T=Or(r,y,s);u=null;for(let m=y;m<y+T;m++){let E=r[m];if(E.face===s&&i[E.id].face===i[h.id].face){u=E;break}}if(u===null)continue;let g=h.edge_after,p=u.edge_before;if(g.bv===fe&&p.bv!=fe){g.bv=p.bv;continue}if(g.bv!=fe&&p.bv===fe){p.bv=g.bv;continue}if(g.bv===fe&&p.bv===fe&&g!=p||g.bv===_t&&p.bv===Et||g.bv===Et&&p.bv===_t){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===fe&&p.bv===fe&&g!=p){let m=g.next,E;for(;m!=p;){if(m.bv!=fe){if(E===void 0)E=m.bv;else if(m.bv!=E)throw X.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}E!=null&&(g.bv=E,p.bv=E);continue}if(g.bv===_t&&p.bv===Et||g.bv===Et&&p.bv===_t){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[E,I]=m.shape.distanceTo(e);if(E<10*a.DP_TOL){Ar(m,I.ps,n);let C=n[n.length-1];if(C.is_vertex&Nf)C.edge_after=m,C.edge_before=m.prev,m.bvStart=fe,m.bv=void 0,m.setInclusion(e);else if(C.is_vertex&kf)C.edge_after=m.next,m.bvEnd=fe,m.bv=void 0,m.setInclusion(e);else{let G=e.addVertex(C.pt,m);C.edge_before=G,C.edge_after=G.next,G.setInclusion(e),G.next.bvStart=fe,G.next.bvEnd=void 0,G.next.bv=void 0,G.next.setInclusion(e)}let L=e.findEdgeByPoint(I.pe);Ar(L,I.pe,i);let N=i[i.length-1];if(N.is_vertex&Nf)N.edge_after=L,N.edge_before=L.prev;else if(N.is_vertex&kf)N.edge_after=L.next;else{let G=i.find(Be=>Be.edge_after===L),R=e.addVertex(N.pt,L);N.edge_before=R,N.edge_after=R.next,G&&(G.edge_after=R),R.bvStart=void 0,R.bvEnd=fe,R.bv=void 0,R.setInclusion(t),R.next.bvStart=fe,R.next.bvEnd=void 0,R.next.bv=void 0,R.next.setInclusion(t)}Wi(o),f=!0;break}}m=m.next}if(f)break;throw X.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function Ia(t,e,n,r){if(!n)return;let i,o,s,l;for(let u=0;u<n.length;u++){if(s=n[u],s.face!==i&&(o=u,i=s.face),i.isEmpty())continue;let c=u,f=Or(n,u,i),d;c+f<n.length&&n[c+f].face===s.face?d=c+f:d=o,l=n[d];let h=d,v=Or(n,h,i),_=s.edge_after,y=l.edge_before;if(_.bv===_t&&y.bv===_t&&e===Bs||_.bv===Et&&y.bv===Et&&e===Xi||(_.bv===Et||y.bv===Et)&&e===Vn&&!r||(_.bv===_t||y.bv===_t)&&e===Vn&&r||_.bv===fe&&y.bv===fe&&_.overlap&$y&&r||_.bv===fe&&y.bv===fe&&_.overlap&Gy){t.removeChain(i,_,y);for(let T=c;T<c+f;T++)n[T].edge_after=void 0;for(let T=h;T<h+v;T++)n[T].edge_before=void 0}u+=f-1}}function Yy(t,e,n,r){for(let i of e.faces){for(let o of i)t.edges.add(o);r.find(o=>o.face===i)===void 0&&t.addFace(i.first,i.last)}}function qy(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],o=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&o.edge_before===void 0&&o.edge_after!==void 0&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before),o.edge_before!==void 0&&o.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(o.edge_before.next=i.edge_after,i.edge_after.prev=o.edge_before,o.edge_after=i.edge_after,i.edge_before=o.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let s of n.int_points1_sorted)s!==i&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(i.pt)&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before);if(o.edge_before!==void 0&&o.edge_after===void 0)for(let s of n.int_points2_sorted)s!==o&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(o.pt)&&(o.edge_before.next=s.edge_after,s.edge_after.prev=o.edge_before,o.edge_after=s.edge_after,s.edge_before=o.edge_before)}}function xa(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Ca(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,o=r.edge_before;try{Fu.testInfiniteLoop(i)}catch{throw X.CANNOT_COMPLETE_BOOLEAN_OPERATION}let s=t.addFace(i,o);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s)}}function Df(t,e,n,r){for(let i of e){let o=i.first.bv;(n===Bs&&o===_t||n===Vn&&o===_t&&r||n===Vn&&o===Et&&!r||n===Xi&&o===Et)&&t.deleteFace(i)}}var Jy=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:Xi,BOOLEAN_SUBTRACT:Vn,BOOLEAN_UNION:Bs,calculateIntersections:Yp,innerClip:Kp,intersect:Qp,outerClip:Ta,removeNotRelevantChains:Ia,removeOldFaces:xa,restoreFaces:Ca,subtract:Sa,unify:Hy});const Xy=RegExp("T.F..FFF.|T.F...F.."),Zy=RegExp("T........|.T.......|...T.....|....T...."),e1=RegExp("FT.......|F..T.....|F...T...."),t1=RegExp("T.F..F..."),n1=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Gr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return Xy.test(this.toString())}intersect(){return Zy.test(this.toString())}touch(){return e1.test(this.toString())}inside(){return t1.test(this.toString())}covered(){return n1.test(this.toString())}}function Ei(t,e){let n,r=new a.Ray(e),i=new a.Line(r.pt,r.norm);const o=new a.Box(r.box.xmin-a.DP_TOL,r.box.ymin-a.DP_TOL,r.box.xmax,r.box.ymax+a.DP_TOL);if(t.box.not_intersect(o))return a.OUTSIDE;let s=t.edges.search(o);if(s.length===0)return a.OUTSIDE;for(let f of s)if(f.shape.contains(e))return a.BOUNDARY;let l=[...t.faces],u=[];for(let f of s)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return a.BOUNDARY;u.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}u.sort((f,d)=>Rp(f.pt.x,d.pt.x)?-1:kp(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<u.length;f++){let d=u[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.prev===u[f-1].edge)continue;let h=d.edge.prev;for(;_a(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),_=d.pt.translate(v),y=d.edge.shape.tangentInStart(),T=d.pt.translate(y),g=_.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.next===u[f-1].edge)continue;let h=d.edge.next;for(;_a(h.length);)h=h.next;let v=h.shape.tangentInStart(),_=d.pt.translate(v),y=d.edge.shape.tangentInEnd(),T=d.pt.translate(y),g=_.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof a.Segment)c++;else{let h=d.edge.shape.box;Bn(d.pt.y,h.ymin)||Bn(d.pt.y,h.ymax)||c++}}return n=c%2===1?hs:Ap,n}function r1(t,e){return Hr(t,e).equal()}function Jp(t,e){return Hr(t,e).intersect()}function i1(t,e){return Hr(t,e).touch()}function o1(t,e){return!Jp(t,e)}function Xp(t,e){return Hr(t,e).inside()}function Zp(t,e){return Hr(t,e).covered()}function s1(t,e){return Xp(e,t)}function eg(t,e){return Zp(e,t)}function Hr(t,e){if(t instanceof a.Line&&e instanceof a.Line)return l1(t,e);if(t instanceof a.Line&&e instanceof a.Circle)return a1(t,e);if(t instanceof a.Line&&e instanceof a.Box)return u1(t,e);if(t instanceof a.Line&&e instanceof a.Polygon)return c1(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&e instanceof a.Polygon)return zf(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&(e instanceof a.Circle||e instanceof a.Box))return zf(t,new a.Polygon(e));if(t instanceof a.Polygon&&e instanceof a.Polygon)return To(t,e);if((t instanceof a.Circle||t instanceof a.Box)&&(e instanceof a.Circle||e instanceof a.Box))return To(new a.Polygon(t),new a.Polygon(e));if((t instanceof a.Circle||t instanceof a.Box)&&e instanceof a.Polygon)return To(new a.Polygon(t),e);if(t instanceof a.Polygon&&(e instanceof a.Circle||e instanceof a.Box))return To(t,new a.Polygon(e))}function l1(t,e){let n=new Gr,r=jr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function a1(t,e){let n=new Gr,r=bn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Qn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon([e.toArc()]).cutWithLine(t)}return n}function u1(t,e){let n=new Gr,r=Lr(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Qn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[s[1]],n.I2E=[s[0],s[2]],n.E2I=[e]):(n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon(e.toSegments()).cutWithLine(t))}return n}function c1(t,e){let n=new Gr,r=qi(t,e),i=new Qn([t]),o=r.length>0?r.slice():t.sortPoints(r);return i.split(o),[...i].forEach(s=>s.setInclusion(e)),n.I2I=[...i].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...i].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...i].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.E2I=e.cutWithLine(t),n}function zf(t,e){let n=new Gr,r=zy(t,e),i=r.length>0?r.slice():t.sortPoints(r),o=new Qn([t]);o.split(i),[...o].forEach(s=>s.setInclusion(e)),n.I2I=[...o].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...o].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...o].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let s of[t.start,t.end])switch(Ei(e,s)){case a.INSIDE:n.B2I.push(s);break;case a.BOUNDARY:n.B2B.push(s);break;case a.OUTSIDE:n.B2E.push(s);break}return n}function To(t,e){let n=new Gr,[r,i]=Yp(t,e),o=Qp(t,e),s=Sa(t,e),l=Sa(e,t),[u,c]=Kp(t,e),f=Ta(t,e),d=Ta(e,t);return n.I2I=o.isEmpty()?[]:[o],n.I2B=c,n.I2E=s.isEmpty()?[]:[s],n.B2I=u,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var Gu=Object.freeze({__proto__:null,contain:s1,cover:eg,covered:Zp,disjoint:o1,equal:r1,inside:Xp,intersect:Jp,relate:Hr,touch:i1});class ot{constructor(e=1,n=0,r=0,i=1,o=0,s=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s}clone(){return new ot(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new ot(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw X.ILLEGAL_PARAMETERS;return this.multiply(new ot(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),o=Math.sin(e);return this.translate(n,r).multiply(new ot(i,o,-o,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new ot(e,0,0,n,0,0))}equalTo(e){return!(!a.Utils.EQ(this.tx,e.tx)||!a.Utils.EQ(this.ty,e.ty)||!a.Utils.EQ(this.a,e.a)||!a.Utils.EQ(this.b,e.b)||!a.Utils.EQ(this.c,e.c)||!a.Utils.EQ(this.d,e.d))}}a.Matrix=ot;const f1=(...t)=>new a.Matrix(...t);a.matrix=f1;const d1=class Pa{constructor(e,n){this.low=e,this.high=n}clone(){return new Pa(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new Pa(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},ge=0,b=1;class xn{constructor(e=void 0,n=void 0,r=null,i=null,o=null,s=b){if(this.left=r,this.right=i,this.parent=o,this.color=s,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,u]=e;l>u&&([l,u]=[u,l]),this.item.key=new d1(l,u)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===b}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class Bi{constructor(){this.root=null,this.nil_node=new xn}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new xn(e,n,this.nil_node,this.nil_node,null,ge);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new xn(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new xn(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new xn(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(o=>n(o.item.value,o.item.key))}intersect_any(e){let n=new xn(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new Bi;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new xn(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===ge;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===ge?(n.parent.color=b,r.color=b,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=b,n.parent.parent.color=ge,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===ge?(n.parent.color=b,r.color=b,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=b,n.parent.parent.color=ge,this.rotate_left(n.parent.parent)));this.root.color=b}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===b&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===b;)n===n.parent.left?(r=n.parent.right,r.color===ge&&(r.color=b,n.parent.color=ge,this.rotate_left(n.parent),r=n.parent.right),r.left.color===b&&r.right.color===b?(r.color=ge,n=n.parent):(r.right.color===b&&(r.color=ge,r.left.color=b,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=b,r.right.color=b,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===ge&&(r.color=b,n.parent.color=ge,this.rotate_right(n.parent),r=n.parent.left),r.left.color===b&&r.right.color===b?(r.color=ge,n=n.parent):(r.left.color===b&&(r.color=ge,r.right.color=b,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=b,r.left.color=b,this.rotate_right(n.parent),n=this.root));n.color=b}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===ge&&(n.left.color===b&&n.right.color===b||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===b&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class h1 extends Set{constructor(e){super(e),this.index=new Bi,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,o=r||e.box,s=i||e;return super.add(s),this.size>n&&this.index.insert(o,s),this}delete(e){const{key:n,value:r}=e,i=n||e.box,o=r||e;let s=super.delete(o);return s&&this.index.remove(i,o),s}clear(){super.clear(),this.index=new Bi}search(e){return this.index.search(e)}hit(e){let n=new a.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}a.PlanarSet=h1;class Sn{get name(){throw X.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw X.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw X.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new ot().translate(...e))}rotate(e,n=new a.Point){return this.transform(new ot().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new ot().scale(e,n))}transform(...e){throw X.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw X.CANNOT_INVOKE_ABSTRACT_METHOD}}let S=class tg extends Sn{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw X.ILLEGAL_PARAMETERS}}get box(){return new a.Box(this.x,this.y,this.x,this.y)}clone(){return new a.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}lessThan(e){return!!(a.Utils.LT(this.y,e.y)||a.Utils.EQ(this.y,e.y)&&a.Utils.LT(this.x,e.x))}transform(e){return new a.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new a.Vector(this,e.pt);if(a.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new a.Vector(e.pt,this);return a.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof tg){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new a.Segment(this,e)]}if(e instanceof a.Line)return a.Distance.point2line(this,e);if(e instanceof a.Circle)return a.Distance.point2circle(this,e);if(e instanceof a.Segment)return a.Distance.point2segment(this,e);if(e instanceof a.Arc)return a.Distance.point2arc(this,e);if(e instanceof a.Polygon)return a.Distance.point2polygon(this,e);if(e instanceof a.PlanarSet)return a.Distance.shape2planarSet(this,e);if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}on(e){if(e instanceof a.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${Hn({fill:"red",...e})} />`}};a.Point=S;const p1=(...t)=>new a.Point(...t);a.point=p1;let Ct=class extends Sn{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof a.Point&&r instanceof a.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw X.ILLEGAL_PARAMETERS}}clone(){return new a.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}multiply(e){return new a.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!a.Utils.EQ_0(this.length))return new a.Vector(this.x/this.length,this.y/this.length);throw X.ZERO_DIVISION}rotate(e,n=new a.Point){if(n.x===0&&n.y===0)return this.transform(new ot().rotate(e));throw X.OPERATION_IS_NOT_SUPPORTED}transform(e){return new a.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new a.Vector(-this.y,this.x)}rotate90CW(){return new a.Vector(this.y,-this.x)}invert(){return new a.Vector(-this.x,-this.y)}add(e){return new a.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new a.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};a.Vector=Ct;const ng=(...t)=>new a.Vector(...t);a.vector=ng;let mt=class La extends Sn{constructor(...e){if(super(),this.ps=new a.Point,this.pe=new a.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new a.Point(n[0],n[1]),this.pe=new a.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new a.Point(n.x,n.y),this.pe=new a.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof a.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof a.Point&&e[1]instanceof a.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new a.Point(e[0],e[1]),this.pe=new a.Point(e[2],e[3]);return}throw X.ILLEGAL_PARAMETERS}}clone(){return new a.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new a.Vector(this.start,this.end).slope}get box(){return new a.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return a.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Yi(this,e);if(e instanceof a.Ray)return Vu(e,this);if(e instanceof a.Segment)return Us(this,e);if(e instanceof a.Circle)return Ws(this,e);if(e instanceof a.Box)return Ay(this,e);if(e instanceof a.Arc)return $r(this,e);if(e instanceof a.Polygon)return Wu(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.segment2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.segment2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2segment(this,e);return[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.segment2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}tangentInStart(){return new a.Vector(this.start,this.end).normalize()}tangentInEnd(){return new a.Vector(this.end,this.start).normalize()}reverse(){return new La(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new a.Segment(this.start,e),new a.Segment(e,this.end)]}middle(){return new a.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new a.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=a.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new a.Matrix){return new La(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new a.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${Hn(e)} />`}};a.Segment=mt;const g1=(...t)=>new a.Segment(...t);a.segment=g1;let{vector:ri}=a,wt=class rg extends Sn{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new a.Point(n),this.norm=new a.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof a.Point&&r instanceof a.Point){this.pt=n,this.norm=rg.points2norm(n,r),this.norm.dot(ri(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Point&&r instanceof a.Vector){if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y))throw X.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(ri(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Vector&&r instanceof a.Point){if(a.Utils.EQ_0(n.x)&&a.Utils.EQ_0(n.y))throw X.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(ri(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw X.ILLEGAL_PARAMETERS}}clone(){return new a.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new a.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(ri(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return a.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))}coord(e){return ri(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return jr(this,e);if(e instanceof a.Ray)return Gp(e,this);if(e instanceof a.Circle)return bn(this,e);if(e instanceof a.Box)return Lr(this,e);if(e instanceof a.Segment)return Yi(e,this);if(e instanceof a.Arc)return Fs(this,e);if(e instanceof a.Polygon)return qi(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof a.Point)return[new a.Ray(e,this.norm),new a.Ray(e,this.norm)];{let n=new a.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new a.Point){return new a.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=Lr(this,e);if(r.length===0)return"";let i=r[0],o=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return o===void 0&&(o=i),new a.Segment(i,o).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw X.ILLEGAL_PARAMETERS;return new a.Vector(e,n).normalize().rotate90CCW()}};a.Line=wt;const m1=(...t)=>new a.Line(...t);a.line=m1;let Bo=class extends Sn{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new a.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new a.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new a.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof a.Point)return a.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof a.Segment)return a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Arc)return this.intersect(e).length===0&&a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Circle)return this.intersect(e).length===0&&a.Utils.LE(e.r,this.r)&&a.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new a.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw X.OPERATION_IS_NOT_SUPPORTED;return new a.Circle(this.pc,this.r*e)}transform(e=new a.Matrix){return new a.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return bn(e,this);if(e instanceof a.Ray)return $p(e,this);if(e instanceof a.Segment)return Ws(e,this);if(e instanceof a.Circle)return Mp(e,this);if(e instanceof a.Box)return Oy(this,e);if(e instanceof a.Arc)return Uu(e,this);if(e instanceof a.Polygon)return Wp(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.circle2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline){let[n,r]=a.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${Hn({fill:"none",...e})} />`}};a.Circle=Bo;const v1=(...t)=>new a.Circle(...t);a.circle=v1;class Aa extends Sn{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=a.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:o,counterClockwise:s}=e[0];this.pc=new a.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=o,this.counterClockwise=s}else{let[n,r,i,o,s]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),o!==void 0&&(this.endAngle=o),s!==void 0&&(this.counterClockwise=s)}}clone(){return new a.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(a.Utils.EQ(this.startAngle,this.endAngle))return 0;if(a.Utils.EQ(Math.abs(this.startAngle-this.endAngle),a.PIx2))return a.PIx2;let e;return this.counterClockwise?e=a.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+a.PIx2:e=a.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+a.PIx2,a.Utils.GT(e,a.PIx2)&&(e-=a.PIx2),a.Utils.LT(e,0)&&(e+=a.PIx2),e}get start(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new a.Box);return n=n.merge(this.end.box),n}contains(e){if(!a.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new a.Vector(this.pc,e).slope,r=new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return a.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new a.Vector(this.pc,e).slope;return[new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new a.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new a.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new a.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Fs(e,this);if(e instanceof a.Ray)return ju(e,this);if(e instanceof a.Circle)return Uu(this,e);if(e instanceof a.Segment)return $r(e,this);if(e instanceof a.Box)return Ny(this,e);if(e instanceof a.Arc)return Dp(this,e);if(e instanceof a.Polygon)return Bu(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.arc2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.arc2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let o=0;o<4;o++)r[o].on(this)&&i.push(new a.Arc(this.pc,this.r,this.startAngle,n[o],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,u)=>l.length-u.length);for(let l=0;l<i.length;l++){let u=e.length>0?e[e.length-1]:void 0,c;u?c=new a.Arc(this.pc,this.r,u.endAngle,i[l].endAngle,this.counterClockwise):c=new a.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),a.Utils.EQ_0(c.length)||e.push(c.clone())}let o=e.length>0?e[e.length-1]:void 0,s;o?s=new a.Arc(this.pc,this.r,o.endAngle,this.endAngle,this.counterClockwise):s=new a.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!a.Utils.EQ_0(s.length)&&!a.Utils.EQ(s.sweep,2*Math.PI)&&e.push(s.clone())}return e}tangentInStart(){let e=new a.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new a.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new a.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new a.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),o=this.counterClockwise;return e.a*e.d<0&&(o=!o),a.Arc.arcSE(i,n,r,o)}static arcSE(e,n,r,i){let{vector:o}=a,s=o(e,n).slope,l=o(e,r).slope;a.Utils.EQ(s,l)&&(l+=2*Math.PI,i=!0);let u=o(e,n).length;return new a.Arc(e,u,s,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,o)=>i+o.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new a.Line(this.start,this.end),r=this.pc.leftTo(n),o=new a.Segment(this.start,this.end).definiteIntegral(e),s=this.circularSegmentArea();return r?o-s:o+s}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=a;return e.slice().sort((r,i)=>{let o=n(this.pc,r).slope,s=n(this.pc,i).slope;return o<s?-1:o>s?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return a.Utils.EQ(this.sweep,2*Math.PI)?new a.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${Hn({fill:"none",...e})} />`}}a.Arc=Aa;const y1=(...t)=>new a.Arc(...t);a.arc=y1;class zt extends Sn{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new zt(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new a.Point(this.xmin,this.ymin)}get high(){return new a.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new a.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new zt(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new a.Point(this.xmin,this.ymin),new a.Point(this.xmax,this.ymin),new a.Point(this.xmax,this.ymax),new a.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new a.Segment(e[0],e[1]),new a.Segment(e[1],e[2]),new a.Segment(e[2],e[3]),new a.Segment(e[3],e[0])]}rotate(e,n=new a.Point){throw X.OPERATION_IS_NOT_SUPPORTED}transform(e=new a.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new zt)}contains(e){if(e instanceof a.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof a.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof a.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof a.Circle)return this.contains(e.box);if(e instanceof a.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>$r(n,e).length===0);if(e instanceof a.Line||e instanceof a.Ray)return!1;if(e instanceof a.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof a.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${Hn({fill:"none",...e})} />`}}a.Box=zt;const _1=(...t)=>new a.Box(...t);a.box=_1;class E1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof a.Segment}get isArc(){return this.shape instanceof a.Arc}get isLine(){return this.shape instanceof a.Line}get isRay(){return this.shape instanceof a.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof a.Line||this.shape instanceof a.Ray)return this.bv=a.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=Ei(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=Ei(e,this.end)),this.bvStart===a.OUTSIDE||this.bvEnd==a.OUTSIDE)this.bv=a.OUTSIDE;else if(this.bvStart===a.INSIDE||this.bvEnd==a.INSIDE)this.bv=a.INSIDE;else{let n=Ei(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof a.Segment&&i instanceof a.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=a.OVERLAP_OPPOSITE):(r instanceof a.Arc&&i instanceof a.Arc||r instanceof a.Segment&&i instanceof a.Arc||r instanceof a.Arc&&i instanceof a.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=a.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof a.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof a.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(a.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,o=new a.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),s=new a.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}
                    A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}a.Edge=E1;class w1 extends Fu{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class fr extends w1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof a.Point)){let i=fr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(s=>new a.Point(s[0],s[1])),o=fr.points2segments(i);this.shapes2face(e.edges,o)}else if(r.every(i=>i instanceof a.Segment||i instanceof a.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let o of r){let s;o.name==="segment"?s=new a.Segment(o):s=new a.Arc(o),i.push(s)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof fr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof a.Circle)this.shapes2face(e.edges,[n[0].toArc(Lp)]);else if(n[0]instanceof a.Box){let r=n[0];this.shapes2face(e.edges,[new a.Segment(new a.Point(r.xmin,r.ymin),new a.Point(r.xmax,r.ymin)),new a.Segment(new a.Point(r.xmax,r.ymin),new a.Point(r.xmax,r.ymax)),new a.Segment(new a.Point(r.xmax,r.ymax),new a.Point(r.xmin,r.ymax)),new a.Segment(new a.Point(r.xmin,r.ymax),new a.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof a.Edge&&n[1]instanceof a.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new a.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new a.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new a.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();a.Utils.EQ_0(e)?this._orientation=Wo.NOT_ORIENTABLE:a.Utils.LT(e,0)?this._orientation=Wo.CCW:this._orientation=Wo.CW}return this._orientation}isSimple(e){return fr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let o of e){let s=n.search(o.box);for(let l of s){if(o===l||l.face!==e||o.shape instanceof a.Segment&&l.shape instanceof a.Segment&&(o.next===l||o.prev===l))continue;let u=o.shape.intersect(l.shape);for(let c of u)if(!(c.equalTo(o.start)&&c.equalTo(l.end)&&l===o.prev)&&!(c.equalTo(o.end)&&c.equalTo(l.start)&&l===o.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new a.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}a.Face=fr;class Hu extends Sn{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof a.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof a.Vector){this.norm=e[1].clone();return}throw X.ILLEGAL_PARAMETERS}}clone(){return new Hu(this.pt,this.norm)}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new a.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))&&a.Utils.GE(n.cross(this.norm),0)}coord(e){return ng(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new a.Segment(this.pt,e),new a.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Segment)return Vu(this,e);if(e instanceof a.Arc)return ju(this,e);if(e instanceof a.Line)return Gp(this,e);if(e instanceof a.Ray)return Uy(this,e);if(e instanceof a.Circle)return $p(this,e);if(e instanceof a.Box)return Fy(this,e);if(e instanceof a.Polygon)return Hp(this,e)}rotate(e,n=new a.Point){return new a.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new a.Line(this.pt,this.norm),i=Lr(r,e);return i=i.filter(s=>this.contains(s)),i.length===0||i.length===2?"":new a.Segment(this.pt,i[0]).svg(n)}}a.Ray=Hu;const S1=(...t)=>new a.Ray(...t);a.ray=S1;let vn=class Jn{constructor(){this.faces=new a.PlanarSet,this.edges=new a.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof a.Circle||e[0]instanceof a.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new a.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new a.Face(this,i));else this.faces.add(new a.Face(this,r));else this.faces.add(new a.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new Jn;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new a.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return n.face.insert(i,o),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let s of e.edges)for(let l of n.edges){let u=Bp(s,l);for(let c of u)Ar(s,c,r.int_points1),Ar(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=Zt(r.int_points1),r.int_points2_sorted=Zt(r.int_points2),Nr(e,r.int_points1_sorted),Nr(n,r.int_points2_sorted),$u(r),r.int_points1_sorted=Zt(r.int_points1),r.int_points2_sorted=Zt(r.int_points2),Ea(r.int_points1),wa(r.int_points1,n);for(let s of r.int_points1_sorted)s.edge_before&&s.edge_after&&s.edge_before.bv===s.edge_after.bv&&(r.int_points2[s.id]=-1,s.id=-1);if(r.int_points1=r.int_points1.filter(s=>s.id>=0),r.int_points2=r.int_points2.filter(s=>s.id>=0),r.int_points1.forEach((s,l)=>{s.id=l}),r.int_points2.forEach((s,l)=>{s.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=Zt(r.int_points1),r.int_points2_sorted=Zt(r.int_points2);let i,o;for(let s=1;s<r.int_points1_sorted.length;s++)if(o=r.int_points1_sorted[s],i=r.int_points1_sorted[s-1],o.edge_before&&o.edge_before.bv===hs){let l=i.edge_after,u=o.edge_before,c=e.getChain(l,u);Of(r.int_points2[i.id],r.int_points2[o.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new a.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Of(r.int_points2[o.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new Qn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,o)=>o.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let o=[...i.faces][0];if(o.orientation()!==n){for(let s of r)if(o.shapes.every(l=>s.contains(l))){s.addFace(o.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof a.Point){let n=Ei(this,e);return n===hs||n===gt}else return eg(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle||e instanceof a.Line||e instanceof a.Segment||e instanceof a.Arc){let[n,r]=a.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let n=[Number.POSITIVE_INFINITY,new a.Segment],r,i;for(let o of this.edges){let s=n[0];[r,i]=a.Distance.shape2planarSet(o.shape,e.edges,s),a.Utils.LT(r,s)&&(n=[r,i])}return n}}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return qi(e,this);if(e instanceof a.Ray)return Hp(e,this);if(e instanceof a.Circle)return Wp(e,this);if(e instanceof a.Segment)return Wu(e,this);if(e instanceof a.Arc)return Bu(e,this);if(e instanceof a.Polygon)return Dy(e,this);if(e instanceof a.Multiline)return My(e,this)}translate(e){let n=new Jn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new a.Point){let r=new Jn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.rotate(e,n)));return r}scale(e,n){let r=new Jn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.scale(e,n)));return r}transform(e=new a.Matrix){let n=new Jn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${Hn({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};a.Polygon=vn;const T1=(...t)=>new a.Polygon(...t);a.polygon=T1;const{Circle:wl,Line:Ff,Point:Uf,Vector:Io,Utils:Sl}=a;class wi{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new Io(e.pc,n),i=e.r*e.r,o=r.dot(r);return Sl.EQ_0(o)?new Uf(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/o))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(Sl.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),o=new Io(e.pc,n.pc);o=o.normalize();let s=e.pc.translate(o.multiply(i));return new Ff(s,o)}else{let i=new Io(e.pc,n.pc),o=e.r*e.r/(i.dot(i)-n.r*n.r),s=e.pc.translate(i.multiply(o)),l=Math.abs(o)*n.r;return new wl(s,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(Sl.EQ_0(r))return n.clone();{let o=e.r*e.r/(2*r),s=new Io(e.pc,i.end);return s=s.multiply(o/r),new wl(e.pc.translate(s),o)}}inverse(e){if(e instanceof Uf)return wi.inversePoint(this.circle,e);if(e instanceof wl)return wi.inverseCircle(this.circle,e);if(e instanceof Ff)return wi.inverseLine(this.circle,e)}}a.Inversion=wi;const I1=t=>new a.Inversion(t);a.inversion=I1;class x{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new a.Vector(e,r).length,new a.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(a.Utils.EQ_0(r))return[n.r,new a.Segment(e,n.toArc().start)];{let o=Math.abs(r-n.r),s=new a.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(s);return[o,new a.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return x.point2point(e,n.start);let r=new a.Vector(n.start,n.end),i=new a.Vector(n.start,e),o=new a.Vector(n.end,e),s=r.dot(i),l=-r.dot(o),u,c;if(a.Utils.GE(s,0)&&a.Utils.GE(l,0)){let f=n.tangentInStart();return u=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[u,new a.Segment(e,c)]}else return s<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new a.Circle(n.pc,n.r),i=[],o,s;return[o,s]=x.point2circle(e,r),s.end.on(n)&&i.push(x.point2circle(e,r)),i.push(x.point2point(e,n.start)),i.push(x.point2point(e,n.end)),x.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof a.Segment?x.point2segment(e,n.shape):x.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[];return i.push(x.point2line(e.start,n)),i.push(x.point2line(e.end,n)),x.sort(i),i[0]}static segment2segment(e,n){let r=Us(e,n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[],o,s;return[o,s]=x.point2segment(n.start,e),i.push([o,s.reverse()]),[o,s]=x.point2segment(n.end,e),i.push([o,s.reverse()]),i.push(x.point2segment(e.start,n)),i.push(x.point2segment(e.end,n)),x.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),[o,s]=x.point2line(n.center,i);if(a.Utils.GE(o,n.r)&&s.end.on(e))return x.point2circle(s.end,n);{let[l,u]=x.point2circle(e.start,n),[c,f]=x.point2circle(e.end,n);return a.Utils.LT(l,c)?[l,u]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),o=new a.Circle(n.pc,n.r),[s,l]=x.point2line(o.center,i);if(a.Utils.GE(s,o.r)&&l.end.on(e)){let[d,h]=x.point2circle(l.end,o);if(h.end.on(n))return[d,h]}let u=[];u.push(x.point2arc(e.start,n)),u.push(x.point2arc(e.end,n));let c,f;return[c,f]=x.point2segment(n.start,e),u.push([c,f.reverse()]),[c,f]=x.point2segment(n.end,e),u.push([c,f.reverse()]),x.sort(u),u[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),o=n.toArc();return x.point2point(i.start,o.start)}else{let i=new a.Line(e.center,n.center),o=i.intersect(e),s=i.intersect(n),l=[];return l.push(x.point2point(o[0],s[0])),l.push(x.point2point(o[0],s[1])),l.push(x.point2point(o[1],s[0])),l.push(x.point2point(o[1],s[1])),x.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let[i,o]=x.point2line(e.center,n),[s,l]=x.point2circle(o.end,e);return l=l.reverse(),[s,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.point2line(i.center,n);if(a.Utils.GE(o,i.r)){let[l,u]=x.point2circle(s.end,i);if(u.end.on(e))return[l,u]}else{let l=[];return l.push(x.point2line(e.start,n)),l.push(x.point2line(e.end,n)),x.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.circle2circle(i,n);if(s.start.on(e))return[o,s];{let l=[];return l.push(x.point2circle(e.start,n)),l.push(x.point2circle(e.end,n)),x.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),o=new a.Circle(n.center,n.r),[s,l]=x.circle2circle(i,o);if(l.start.on(e)&&l.end.on(n))return[s,l];{let u=[],c,f;return[c,f]=x.point2arc(e.start,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(e.end,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(n.start,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2arc(n.end,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2point(e.start,n.start),u.push([c,f]),[c,f]=x.point2point(e.start,n.end),u.push([c,f]),[c,f]=x.point2point(e.end,n.start),u.push([c,f]),[c,f]=x.point2point(e.end,n.end),u.push([c,f]),x.sort(u),u[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=x.point2edge(e,i);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=e.distanceTo(i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e.edges)for(let o of n.edges){let[s,l]=i.shape.distanceTo(o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),o=r*r+i*i,s=e.merge(n),l=s.xmax-s.xmin,u=s.ymax-s.ymin,c=l*l+u*u;return[o,c]}static minmax_tree_process_level(e,n,r,i){let o,s;for(let f of n)[o,s]=x.box2box_minmax(e.box,f.item.key),f.item.value instanceof a.Edge?i.insert([o,s],f.item.value.shape):i.insert([o,s],f.item.value),a.Utils.LT(s,r)&&(r=s);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),u=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...u].filter(f=>{let[d,h]=x.box2box_minmax(e.box,f.max);return a.Utils.LE(d,r)});return r=x.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new Bi,o=[n.index.root],s=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return s=x.minmax_tree_process_level(e,o,s,i),i}static minmax_tree_calc_distance(e,n,r){let i,o;if(n!=null&&!n.isNil()){if([i,o]=x.minmax_tree_calc_distance(e,n.left,r),o)return[i,o];if(a.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[s,l]=x.distance(e,n.item.value);return a.Utils.LT(s,i[0])&&(i=[s,l]),[i,o]=x.minmax_tree_calc_distance(e,n.right,i),[i,o]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new a.Segment],o=!1;if(n instanceof a.PlanarSet){let s=x.minmax_tree(e,n,r);[i,o]=x.minmax_tree_calc_distance(e,s.root,i)}return i}static sort(e){e.sort((n,r)=>a.Utils.LT(n[0],r[0])?-1:a.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n){let[o,s]=x.distance(e,i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e)for(let o of n){let[s,l]=x.distance(i.shape,o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}}a.Distance=x;const{Multiline:x1,Point:ig,Segment:C1,Polygon:og}=a;function bu(t){return new ig(t.split(" ").map(Number))}function sg(t){return t.split(", ").map(bu)}function Qu(t){const e=sg(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new C1(e[r],e[r+1]));return new x1(n)}function P1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(Qu)}function lg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new og;let r;return e.forEach((i,o)=>{let s=i.split(", ").map(u=>new ig(u.split(" ").map(Number)));const l=n.addFace(s);o===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function L1(t){const n=t.split(/\)\), \(\(/).map(o=>"(("+o+"))").map(lg),r=new og;return n.reduce((o,s)=>[...o,...s==null?void 0:s.faces],[]).forEach(o=>r.addFace([...o==null?void 0:o.shapes])),r}function A1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return lg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return L1(e)}}function O1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(bu)}function N1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Qu).reduce((n,r)=>[...n,...r],[])}function ag(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return bu(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return sg(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return Qu(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return P1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return A1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(ag).map(i=>i instanceof Array?i:[i]).reduce((i,o)=>[...i,...o],[])}else{if(ug(t))return O1(t);if(cg(t))return N1(t)}}return[]}function ug(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function cg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function k1(t){return t.startsWith("POINT")||ug(t)||t.startsWith("LINESTRING")||cg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}a.isWktString=k1;a.parseWKT=ag;a.BooleanOperations=Jy;a.Relations=Gu;var U=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(U||{}),gs=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(gs||{}),ms=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(ms||{}),Ae=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(Ae||{});function R1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function _e(t){const e=[];for(const n of t)n&&e.push(n);return e}function M1(t,e){let n=t[0],r=1/0;for(const i of t){const o=e(i);o<r&&(r=o,n=i)}return n}function D1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Vs(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const o=e[i],s=typeof o=="function",l=s?o(n):n[o],u=s?o(r):r[o],c=D1(l,u,"asc");if(c!==0)return c}return 0})}function eo(t,e){const n=[];for(const r of t)n.every(o=>!e(o,r))&&n.push(r);return n}function Wf(){}function z1(t,e=0){if(!Number.isInteger(e))throw new Error("Precision must be an integer.");const n=Math.pow(10,e);return Math.round(t*n)/n}function Bf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const F1="[object RegExp]",U1="[object String]",W1="[object Number]",B1="[object Boolean]",Vf="[object Arguments]",V1="[object Symbol]",j1="[object Date]",$1="[object Map]",G1="[object Set]",H1="[object Array]",b1="[object Function]",Q1="[object ArrayBuffer]",Tl="[object Object]",K1="[object Error]",Y1="[object DataView]",q1="[object Uint8Array]",J1="[object Uint8ClampedArray]",X1="[object Uint16Array]",Z1="[object Uint32Array]",e_="[object BigUint64Array]",t_="[object Int8Array]",n_="[object Int16Array]",r_="[object Int32Array]",i_="[object BigInt64Array]",o_="[object Float32Array]",s_="[object Float64Array]";function jf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function $f(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function l_(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ot(t,e)}return Ot(t,e)}function Ot(t,e,n){if(Object.is(t,e))return!0;let r=$f(t),i=$f(e);if(r===Vf&&(r=Tl),i===Vf&&(i=Tl),r!==i)return!1;switch(r){case U1:return t.toString()===e.toString();case W1:{const l=t.valueOf(),u=e.valueOf();return l===u||Number.isNaN(l)&&Number.isNaN(u)}case B1:case j1:case V1:return Object.is(t.valueOf(),e.valueOf());case F1:return t.source===e.source&&t.flags===e.flags;case b1:return t===e}n=n??new Map;const o=n.get(t),s=n.get(e);if(o!=null&&s!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(r){case $1:{if(t.size!==e.size)return!1;for(const[l,u]of t.entries())if(!e.has(l)||!Ot(u,e.get(l),n))return!1;return!0}case G1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),u=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=u.findIndex(h=>Ot(f,h,n));if(d===-1)return!1;u.splice(d,1)}return!0}case H1:case q1:case J1:case X1:case Z1:case e_:case t_:case n_:case r_:case i_:case o_:case s_:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Ot(t[l],e[l],n))return!1;return!0}case Q1:return t.byteLength!==e.byteLength?!1:Ot(new Uint8Array(t),new Uint8Array(e),n);case Y1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ot(t.buffer,e.buffer,n);case K1:return t.name===e.name&&t.message===e.message;case Tl:{if(!(Ot(t.constructor,e.constructor,n)||Bf(t)&&Bf(e)))return!1;const u=[...Object.keys(t),...jf(t)],c=[...Object.keys(e),...jf(e)];if(u.length!==c.length)return!1;for(let f=0;f<u.length;f++){const d=u[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!Ot(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}let fg=new S(0,0),dg=null,Vo=null,hg=null,kr=[],pg=[],to=[],gg=!1,mg=[],vg=[],yg=!1,_g=[],Eg=45,Oa=null,wg=null,Sg=null,Tg=null,Ig=null,xg=[],Cg=0,Pg="#fff",Lg=1;const Ku=()=>fg,a_=()=>dg,xe=()=>Vo,u_=()=>hg,Ee=()=>kr,Oe=()=>to,c_=()=>gg,f_=()=>mg,d_=()=>vg,h_=()=>yg,p_=()=>_g,Ag=()=>Eg,g_=()=>wg,Yu=()=>Sg,Og=()=>Tg,m_=()=>Ig,qu=()=>xg,v_=()=>Cg,$t=()=>Pg,Gt=()=>Lg,Ft=()=>{if(!Oa)throw new Error("getScreenCanvasDrawController() returned null");return Oa},Ju=()=>kr.filter(t=>to.includes(t.id)),y_=()=>kr.filter(t=>!to.includes(t.id)),Rr=t=>to.includes(t.id),Xu=t=>pg.includes(t.id),__=t=>fg=t,E_=t=>dg=t,kt=(t,e=!0)=>{var n;(n=xe())==null||n.stop(),Vo=t,Vo.subscribe(r=>{var o;const i=(o=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:o.instructions;u_()!==i&&(w_(i||null),i&&(document.getElementById("toolInstructions").innerText=i,console.log("STATE: "+i)))}),Vo.start(),e&&$s(Ae.activeTool)},w_=t=>hg=t,js=t=>{k_(Ae.entities,kr),kr=t},Na=t=>pg=t,H=t=>to=t,Zu=t=>gg=t,ec=t=>mg=t,W=t=>vg=t,He=t=>(console.log("setShouldDrawHelpers",t),Ng(null),kg(null),ec([]),yg=t),S_=t=>_g=t,T_=(t,e=!0)=>{Eg=t,e&&$s(Ae.activeTool)},I_=t=>Oa=t,tc=t=>wg=t,Ng=t=>Sg=t,kg=t=>Tg=t,pe=t=>Ig=t,x_=t=>xg=t,C_=t=>Cg=t,P_=(t,e=!0)=>{Pg=t,e&&$s(Ae.activeLineColor)},L_=(t,e=!0)=>{Lg=t,e&&$s(Ae.activeLineWidth)},Ht=(...t)=>{const e=t.map(r=>r.id),n=Ee().filter(r=>!e.includes(r.id));return js(n),n},ke=(...t)=>{const e=[...Ee(),...t];return js(e),e},A_=[Ae.activeTool,Ae.angleStep,Ae.activeLineColor,Ae.activeLineWidth,Ae.screenZoom],O_=[Ae.entities],N_=[],dr=R1();function k_(t,e){if(!O_.includes(t))return;const n=dr.peek();if(!l_(e,n==null?void 0:n.value)){if(t!==Ae.activeEntity&&dr.clear(Ae.activeEntity),N_.includes(t)&&(n==null?void 0:n.variable)===t){dr.replace({variable:t,value:e});return}dr.push({variable:t,value:e})}}function Rg(t){const e=t.variable,n=t.value;switch(e){case Ae.entities:kr=n;break}}function Mg(){const t=dr.undo();t&&Rg(t)}function Dg(){const t=dr.redo();t&&Rg(t)}function $s(t){A_.includes(t)&&window.dispatchEvent(new CustomEvent(ms.UPDATE_STATE))}var q=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t.Measurement="Measurement",t))(q||{});const ka=1e-6,xo=10,Co=30,R_="#111",M_="#FFFF00",nc=15,D_=15,rc=15,O=15,ic=1e3,z_=3,Gf=20,Hf=20,F_=200,U_=20,bf=7,W_=2,B_=20,V_=40,j_="#b6ff9a",$_="#6899f3",G_=1,H_=[5,5],zg="#999",Fg=1,Ug=[5,5],b_=.1,Q_=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"],Ra=Math.PI/180;function dt(t,e){return Math.abs(t.x-e.x)<ka&&Math.abs(t.y-e.y)<ka}function Wg(t,e,n){const r=rt.getAngle(e,n),i=t.map(o=>({point:o,angle:(new wt(e,o).slope-r+2*Math.PI)%(2*Math.PI)}));return Vs(i,[o=>o.angle]).map(o=>o.point)}function Kn(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}function It(t,e,n){const i=new Ct(e,t).scale(n-1,n-1);return new S(t.x+i.x,t.y+i.y)}class rt{constructor(e,n,r,i,o=!0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"arc");this.arc=new Aa(e,n,r,i,o)}static getAngle(e,n){return new wt(e,n).slope}draw(e){var n,r;e.drawArc(this.arc.center,this.arc.r.valueOf(),((n=this.arc)==null?void 0:n.startAngle)||0,((r=this.arc)==null?void 0:r.endAngle)||2*Math.PI)}move(e,n){this.arc=this.arc.translate(e,n)}scale(e,n){const r=It(this.arc.center,e,n);this.arc=new Aa(r,this.arc.r.valueOf()*n,this.arc.startAngle,this.arc.endAngle,this.arc.counterClockwise)}rotate(e,n){this.arc=this.arc.rotate(n,e)}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:o}=this.arc;return new rt(e,n.valueOf(),r,i,o)}return this}intersectsWithBox(e){return this.arc.intersect(e).length>0}isContainedInBox(e){return e.contains(this.arc)}getBoundingBox(){return this.arc.box}getShape(){return this.arc}getSnapPoints(){return[{point:this.arc.center,type:U.CircleCenter},{point:this.arc.start,type:U.LineEndPoint},{point:this.arc.end,type:U.LineEndPoint}]}getIntersections(e){const n=e.getShape();return n?this.arc.intersect(n):[]}getFirstPoint(){return this.arc.center}distanceTo(e){return this.arc.distanceTo(e)}getSvgString(){return this.arc.svg({strokeWidth:this.lineWidth,stroke:Kn(this.lineColor)})||null}getType(){return q.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){const n=eo([this.arc.start,this.arc.end,...e],dt),r=Wg(n,this.arc.center,this.arc.start),i=[];for(let o=0;o<r.length-1;o++){const s=r[o],l=r[o+1],u=rt.getAngle(this.arc.center,s),c=rt.getAngle(this.arc.center,l),f=new rt(this.arc.center,Number(this.arc.r),u,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:q.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==q.Arc)throw new Error("Invalid Entity type in JSON");const n=new S(e.shapeData.center.x,e.shapeData.center.y),r=new S(e.shapeData.start.x,e.shapeData.start.y),i=new S(e.shapeData.end.x,e.shapeData.end.y),o=Number(n.distanceTo(r)[0]),s=Number(rt.getAngle(n,r)),l=Number(rt.getAngle(n,i)),u=e.shapeData.counterClockwise,c=new rt(n,o,s,l,u);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class Mr{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"circle");e instanceof Bo?this.circle=e:this.circle=new Bo(e,n)}draw(e){e.drawArc(this.circle.center,this.circle.r,0,2*Math.PI)}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}scale(e,n){const r=It(this.circle.center,e,n);this.circle=new Bo(r,this.circle.r.valueOf()*n)}rotate(e,n){this.circle=this.circle.rotate(n,e)}clone(){return this.circle?new Mr(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){var e;return(e=this.circle)!=null&&e.center?[{point:this.circle.center,type:U.CircleCenter},{point:new S(this.circle.center.x+this.circle.r,this.circle.center.y),type:U.CircleCardinal},{point:new S(this.circle.center.x-this.circle.r,this.circle.center.y),type:U.CircleCardinal},{point:new S(this.circle.center.x,this.circle.center.y+this.circle.r),type:U.CircleCardinal},{point:new S(this.circle.center.x,this.circle.center.y-this.circle.r),type:U.CircleCardinal}]:[]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.circle.center}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle.svg({strokeWidth:this.lineWidth,stroke:Kn(this.lineColor)})||null}getType(){return q.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}async toJson(){var e;return this.circle?{id:this.id,type:q.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new S(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new Mr(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}function bt(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}class ct{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"segment");e instanceof mt?this.segment=e:this.segment=new mt(e,n)}draw(e){const n=new S(this.segment.start.x,this.segment.start.y),r=new S(this.segment.end.x,this.segment.end.y);e.drawLine(n,r)}move(e,n){this.segment=this.segment.translate(e,n)}scale(e,n){const r=It(this.segment.start,e,n),i=It(this.segment.end,e,n);this.segment=new mt(r,i)}rotate(e,n){this.segment=this.segment.rotate(n,e)}clone(){return new ct(this.segment.clone())}intersectsWithBox(e){return this.segment.intersect(e).length>0}isContainedInBox(e){return e.contains(this.segment)}getBoundingBox(){return this.segment.box}getShape(){return this.segment}getSnapPoints(){return[{point:this.segment.start,type:U.LineEndPoint},{point:this.segment.end,type:U.LineEndPoint},{point:this.segment.middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?this.segment.intersect(n):[]}getFirstPoint(){return this.segment.start}distanceTo(e){return this.segment.distanceTo(e)}getSvgString(){return this.segment.svg({strokeWidth:this.lineWidth,stroke:Kn(this.lineColor)})||null}getType(){return q.Line}containsPointOnShape(e){return this.segment.contains(e)}cutAtPoints(e){const n=eo([this.segment.start,this.segment.end,...e],dt),r=Vs(n,[o=>bt(this.segment.start,o)]),i=[];for(let o=0;o<r.length-1;o++)i.push(new ct(r[o],r[o+1]));return i}async toJson(){return{id:this.id,type:q.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}}static async fromJson(e){const n=new S(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new S(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new ct(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class Vi{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"point");e instanceof S?this.point=new S(e.x,e.y):this.point=new S(e,n)}draw(e){e.drawArc(this.point,5,0,Math.PI*2)}move(e,n){this.point=this.point.translate(e,n)}scale(e,n){this.point=It(this.point,e,n)}rotate(e,n){this.point=this.point.rotate(n,e)}clone(){return new Vi(this.point.clone())}intersectsWithBox(){return!1}isContainedInBox(e){return e.contains(this.point)}getBoundingBox(){return this.point?new zt(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return[{point:this.point,type:U.Point}]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point.distanceTo(e)}getSvgString(){return this.point.svg({strokeWidth:this.lineWidth,stroke:Kn(this.lineColor)})||null}getType(){return q.Point}containsPointOnShape(e){return this.point.equalTo(e)}async toJson(){return{id:this.id,type:q.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}}static async fromJson(e){const n=new S(e.shapeData.point.x,e.shapeData.point.y),r=new Vi(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function K_(t){return new vn([new S(Math.min(t.low.x,t.high.x),Math.min(t.low.y,t.high.y)),new S(Math.min(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new S(Math.max(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new S(Math.max(t.low.x,t.high.x),Math.min(t.low.y,t.high.y))])}function oc(t,e){return new vn([new S(Math.min(t.x,e.x),Math.min(t.y,e.y)),new S(Math.min(t.x,e.x),Math.max(t.y,e.y)),new S(Math.max(t.x,e.x),Math.max(t.y,e.y)),new S(Math.max(t.x,e.x),Math.min(t.y,e.y))])}function st(t){const e=[];return t.edges.forEach(n=>{e.push(n.shape)}),e}class Qt{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"polygon");e instanceof vn?this.polygon=e:this.polygon=oc(e,n)}draw(e){st(this.polygon).forEach(n=>{const r=new S(n.start.x,n.start.y),i=new S(n.end.x,n.end.y);e.drawLine(r,i)})}move(e,n){this.polygon=this.polygon.translate(new Ct(e,n))}scale(e,n){const r=this.polygon.box.center,i=It(r,e,n);this.polygon=this.polygon.translate(new Ct(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e)}clone(){return new Qt(this.polygon.clone())}intersectsWithBox(e){return Gu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=st(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_VALUE,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=st(this.polygon);return[{point:e[0],type:U.LineEndPoint},{point:e[1],type:U.LineEndPoint},{point:e[2],type:U.LineEndPoint},{point:e[3],type:U.LineEndPoint},{point:n[0].middle(),type:U.LineMidPoint},{point:n[1].middle(),type:U.LineMidPoint},{point:n[2].middle(),type:U.LineMidPoint},{point:n[3].middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?st(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:Kn(this.lineColor)})}getType(){return q.Rectangle}containsPointOnShape(e){return st(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y}))}}}static async fromJson(e){const n=new vn(e.shapeData.points.map(i=>new S(i.x,i.y))),r=new Qt(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function Y_(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,o=JSON.parse(i);o.entities||n(new Error("Invalid JSON file"));const s=_e(o.entities.map(l=>{switch(l.type){case q.Arc:return rt.fromJson(l);case q.Circle:return Mr.fromJson(l);case q.Line:return ct.fromJson(l);case q.Point:return Vi.fromJson(l);case q.Rectangle:return Qt.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));js(_e(await Promise.all(s))),e()}),r.readAsText(t,"utf-8")})}var Bg={exports:{}};(function(t,e){(function(n,r){r()})(Kr,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){u(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Kr=="object"&&Kr.global===Kr?Kr:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=s.URL||s.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?o(v):i(v.href)?r(c,f,d):o(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){o(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",_=/constructor/i.test(s.HTMLElement)||s.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&_||l)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var m=T.result;m=y?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},T.readAsDataURL(c)}else{var g=s.URL||s.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});s.saveAs=u.saveAs=u,t.exports=u})})(Bg);var sc=Bg.exports;async function q_(){const e=Ee().map(o=>o.toJson()),n={entities:_e(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});sc.saveAs(i,"open-web-cad--drawing.json")}function Vg(t,e){let n=e.x,r=e.y,i=0,o=0;const s=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),o=Math.max(o,d.ymax))}),console.log("exporting svg",s);const l=i-n+xo*2,u=o-r+xo*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new Ct(new S(n,r),new S(xo,xo))).svg({stroke:Kn(f.lineColor),strokeWidth:f.lineWidth});v&&s.push(v)}),{svgString:`
      <svg width="${l}" height="${u}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${u}" fill="white" />
        ${s.join("")}
      </svg>
    `,width:l,height:u}}function J_(){const t=Ee(),e=Ku(),n=Vg(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});sc.saveAs(r,"open-web-cad--drawing.svg")}function X_(t,e,n,r){return new Promise((i,o)=>{const s=document.createElement("canvas"),l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const u=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);u.onload=()=>{s.width=e+r*2,s.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,s.width,s.height),l.drawImage(u,r,r),URL.revokeObjectURL(f),s.toBlob(d=>{d?i(d):o(new Error("Could not convert canvas to blob"))},"image/png")},u.src=f})}async function Z_(){const t=Ee(),e=Ku(),n=Vg(t,e),r=await X_(n.svgString,n.width,n.height,20);sc.saveAs(r,"open-web-cad--drawing.png")}function jg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function eE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function tE(){const t=eE();if(t.__xstate__)return t.__xstate__}const nE=t=>{if(typeof window>"u")return;const e=tE();e&&e.register(t)};class Qf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const $g=".",rE="",Gg="",iE="#",oE="*",Hg="xstate.init",sE="xstate.error",Ma="xstate.stop";function lE(t,e){return{type:`xstate.after.${t}.${e}`}}function Da(t,e){return{type:`xstate.done.state.${t}`,output:e}}function aE(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function bg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Qg(t){return{type:Hg,input:t}}function Lt(t){setTimeout(()=>{throw t})}const uE=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kg(t,e){const n=Kf(t),r=Kf(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?Kg(n[i],r[i]):!1)}function lc(t){if(qg(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Kf(t){if(VE(t))return t.value;if(typeof t!="string")return t;const e=lc(t);return cE(e)}function cE(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function Yf(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function Yg(t){return qg(t)?t:[t]}function on(t){return t===void 0?[]:Yg(t)}function za(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function qg(t){return Array.isArray(t)}function fE(t){return t.type.startsWith("xstate.error.actor")}function Xn(t){return Yg(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function Jg(t){if(!(t===void 0||t===rE))return on(t)}function Fa(t,e,n){var o,s,l;const r=typeof t=="object",i=r?t:void 0;return{next:(o=r?t.next:t)==null?void 0:o.bind(i),error:(s=r?t.error:e)==null?void 0:s.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function qf(t,e){return`${e}.${t}`}function ac(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,s=t.getStateNodeById(i).config.invoke;return(Array.isArray(s)?s[r]:s).src}function Jf(t,e){return`${t.sessionId}.${e}`}let dE=0;function hE(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,s={},{clock:l,logger:u}=e,c={schedule:(h,v,_,y,T=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:_,delay:y,id:T,startedAt:Date.now()},p=Jf(h,T);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete s[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,_)},y);s[p]=m},cancel:(h,v)=>{const _=Jf(h,v),y=s[_];delete s[_],delete d._snapshot._scheduledEvents[_],y!==void 0&&l.clearTimeout(y)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===h&&c.cancel(h,_.id)}}},f=h=>{if(!o.size)return;const v={...h,rootId:t.sessionId};o.forEach(_=>{var y;return(y=_.next)==null?void 0:y.call(_,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${dE++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const _=r.get(h);if(_&&_!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=Fa(h);return o.add(v),{unsubscribe(){o.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:_}),v._send(_)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:_,target:y,event:T,delay:g,id:p}=h[v];c.schedule(_,y,T,g,p)}},_clock:l,_logger:u};return d}const uc=1;let Pe=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const pE={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class yt{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Qf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Pe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...pE,...n},{clock:i,logger:o,parent:s,syncSnapshot:l,id:u,systemId:c,inspect:f}=r;this.system=s?s.system:hE(this,{clock:i,logger:o}),f&&!s&&this.system.inspect(Fa(f)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=s,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const _=new Set([...h?h.values():[],...v?v.values():[]]);for(const y of Array.from(_))y(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,o;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...e,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{(i=s.next)==null||i.call(s,e)}catch(l){Lt(l)}break;case"done":for(const s of this.observers)try{(o=s.next)==null||o.call(s,e)}catch(l){Lt(l)}this._stopProcedure(),this._complete(),this._doneEvent=aE(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var o;const i=Fa(e,n,r);if(this._processingStatus!==Pe.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(o=i.complete)==null||o.call(i)}catch(s){Lt(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)Lt(s);else try{i.error(s)}catch(l){Lt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Pe.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Pe.Running;const e=Qg(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Ma&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Pe.Stopped?this:(this.mailbox.clear(),this._processingStatus===Pe.NotStarted?(this._processingStatus=Pe.Stopped,this):(this.mailbox.enqueue({type:Ma}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){Lt(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Lt(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(o){Lt(o)}}this.observers.clear(),n&&Lt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,bg(this.id,e))}_stopProcedure(){return this._processingStatus!==Pe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Qf(this._process.bind(this)),this._processingStatus=Pe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Pe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:nE)(this)}toJSON(){return{xstate$$type:uc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[uE](){return this}getSnapshot(){return this._snapshot}}function vs(t,...[e]){return new yt(t,e)}function gE(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,o]}function mE(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function vE(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=gE,e.execute=mE,e}function yE(t,e,n,r,{id:i,systemId:o,src:s,input:l,syncSnapshot:u}){const c=typeof s=="string"?ac(e.machine,s):s,f=typeof i=="function"?i(n):i;let d;return c&&(d=vs(c,{id:f,src:s,parent:t.self,syncSnapshot:u,systemId:o,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[jn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function _E(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==Pe.Stopped&&n.start()})}function EE(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(s,l){}return o.type="snapshot.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=yE,o.execute=_E,o}function wE(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,s=typeof o=="string"?e.children[o]:o;let l=e.children;return s&&(l={...l},delete l[s.id]),[jn(e,{children:l}),s]}function SE(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Pe.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function Xg(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=wE,e.execute=SE,e}function cc(t,e,n,r){const{machine:i}=r,o=typeof t=="function",s=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!s)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof s!="function")return cc(s,e,n,r);const l={context:e,event:n},u=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(r,l,s):s(l,u)}const fc=t=>t.type==="atomic"||t.type==="final";function Dr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function no(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function ys(t){const e=new Set(t),n=em(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))Xf(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of Dr(r))if(i.type!=="history"&&!e.has(i)){const o=Xf(i);for(const s of o)e.add(s)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function Zg(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(fc(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=Zg(i,e);return r}function em(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function tm(t,e){const n=ys(e);return Zg(t,em(n))}function dc(t,e){return e.type==="compound"?Dr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?Dr(e).every(n=>dc(t,n)):e.type==="final"}const Gs=t=>t[0]===iE;function TE(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===oE)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let s=0;s<i.length;s++){const l=i[s],u=o[s];if(l==="*")return s===i.length-1;if(l!==u)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function IE(t){const e=t.config.after;if(!e)return[];const n=(i,o)=>{const s=lE(i,t.id),l=s.type;return t.entry.push(qE(s,{id:l,delay:i})),t.exit.push(vE(l)),l};return Object.keys(e).flatMap((i,o)=>{const s=e[i],l=typeof s=="string"?{target:s}:s,u=Number.isNaN(+i)?i:+i,c=n(u);return on(l).map(f=>({...f,event:c,delay:u}))}).map(i=>{const{delay:o}=i;return{...Ln(t,i.event,i),delay:o}})}function Ln(t,e,n){const r=Jg(n.target),i=n.reenter??!1,o=PE(t,r),s={...n,actions:on(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...s,source:`#${t.id}`,target:o?o.map(l=>`#${l.id}`):void 0})};return s}function xE(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Gg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Xn(r).map(i=>Ln(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Xn(t.config.onDone).map(r=>Ln(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Xn(n.onDone).map(i=>Ln(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Xn(n.onError).map(i=>Ln(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Xn(n.onSnapshot).map(i=>Ln(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function CE(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:on(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function PE(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(Gs(n))return t.machine.getStateNodeById(n);const r=n[0]===$g;if(r&&!t.parent)return _s(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return _s(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function nm(t){const e=Jg(t.config.target);return e?{target:e.map(n=>typeof n=="string"?_s(t.parent,n):n)}:t.parent.initial}function kn(t){return t.type==="history"}function Xf(t){const e=rm(t);for(const n of e)for(const r of no(n,t))e.add(r);return e}function rm(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of Dr(r))n(i)}}return n(t),e}function zr(t,e){if(Gs(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function _s(t,e){if(typeof e=="string"&&Gs(e))try{return t.machine.getStateNodeById(e)}catch{}const n=lc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=zr(r,i)}return r}function Es(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>zr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const s=zr(t,o);if(!s)return i;const l=Es(s,e[o]);return i.concat(l)},[]))}function LE(t,e,n,r){const o=zr(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function AE(t,e,n,r){const i=Object.keys(e),o=zr(t,i[0]),s=hc(o,e[i[0]],n,r);return!s||!s.length?t.next(n,r):s}function OE(t,e,n,r){const i=[];for(const o of Object.keys(e)){const s=e[o];if(!s)continue;const l=zr(t,o),u=hc(l,s,n,r);u&&i.push(...u)}return i.length?i:t.next(n,r)}function hc(t,e,n,r){return typeof e=="string"?LE(t,e,n,r):Object.keys(e).length===1?AE(t,e,n,r):OE(t,e,n,r)}function NE(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function yn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function kE(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function im(t,e,n){const r=new Set;for(const i of t){let o=!1;const s=new Set;for(const l of r)if(kE(Ua([i],e,n),Ua([l],e,n)))if(yn(i.source,l.source))s.add(l);else{o=!0;break}if(!o){for(const l of s)r.delete(l);r.add(i)}}return Array.from(r)}function RE(t){const[e,...n]=t;for(const r of no(e,void 0))if(n.every(i=>yn(i,r)))return r}function pc(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(kn(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of pc(nm(r),e))n.add(i);else n.add(r);return[...n]}function om(t,e){const n=pc(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||yn(i,t.source)))return t.source;const r=RE(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Ua(t,e,n){var i;const r=new Set;for(const o of t)if((i=o.target)!=null&&i.length){const s=om(o,n);o.reenter&&o.source===s&&r.add(s);for(const l of e)yn(l,s)&&r.add(l)}return[...r]}function ME(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Wa(t,e,n,r,i,o){if(!t.length)return e;const s=new Set(e._nodes);let l=e.historyValue;const u=im(t,s,l);let c=e;i||([c,l]=UE(c,r,n,u,s,l,o)),c=Fr(c,r,n,u.flatMap(d=>d.actions),o),c=zE(c,r,n,u,s,o,l,i);const f=[...s];c.status==="done"&&(c=Fr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),o));try{return l===e.historyValue&&ME(e._nodes,s)?c:jn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function DE(t,e,n,r,i){if(r.output===void 0)return;const o=Da(i.id,i.output!==void 0&&i.parent?za(i.output,t.context,e,n.self):void 0);return za(r.output,t.context,o,n.self)}function zE(t,e,n,r,i,o,s,l){let u=t;const c=new Set,f=new Set;FE(r,s,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,_)=>v.order-_.order)){i.add(h);const v=[];v.push(...h.entry);for(const _ of h.invoke)v.push(EE(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;v.push(..._)}if(u=Fr(u,e,n,v,o,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let y=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,T=y||h;for((_==null?void 0:_.type)==="compound"&&o.push(Da(_.id,h.output!==void 0?za(h.output,u.context,e,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!d.has(y)&&dc(i,y);)d.add(y),o.push(Da(y.id)),T=y,y=y.parent;if(y)continue;u=jn(u,{status:"done",output:DE(u,e,n,u.machine.root,T)})}}return u}function FE(t,e,n,r){for(const i of t){const o=om(i,e);for(const l of i.target||[])!kn(l)&&(i.source!==l||i.source!==o||i.reenter)&&(r.add(l),n.add(l)),hr(l,e,n,r);const s=pc(i,e);for(const l of s){const u=no(l,o);(o==null?void 0:o.type)==="parallel"&&u.push(o),sm(r,e,n,u,!i.source.parent&&i.reenter?void 0:o)}}}function hr(t,e,n,r){var i;if(kn(t))if(e[t.id]){const o=e[t.id];for(const s of o)r.add(s),hr(s,e,n,r);for(const s of o)Il(s,t.parent,r,e,n)}else{const o=nm(t);for(const s of o.target)r.add(s),o===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),hr(s,e,n,r);for(const s of o.target)Il(s,t.parent,r,e,n)}else if(t.type==="compound"){const[o]=t.initial.target;kn(o)||(r.add(o),n.add(o)),hr(o,e,n,r),Il(o,t,r,e,n)}else if(t.type==="parallel")for(const o of Dr(t).filter(s=>!kn(s)))[...r].some(s=>yn(s,o))||(kn(o)||(r.add(o),n.add(o)),hr(o,e,n,r))}function sm(t,e,n,r,i){for(const o of r)if((!i||yn(o,i))&&t.add(o),o.type==="parallel")for(const s of Dr(o).filter(l=>!kn(l)))[...t].some(l=>yn(l,s))||(t.add(s),hr(s,e,n,t))}function Il(t,e,n,r,i){sm(n,r,i,no(t,e))}function UE(t,e,n,r,i,o,s){let l=t;const u=Ua(r,i,o);u.sort((f,d)=>d.order-f.order);let c;for(const f of u)for(const d of NE(f)){let h;d.history==="deep"?h=v=>fc(v)&&yn(v,f):h=v=>v.parent===f,c??(c={...o}),c[d.id]=Array.from(i).filter(h)}for(const f of u)l=Fr(l,e,n,[...f.exit,...f.invoke.map(d=>Xg(d.id))],s),i.delete(f);return[l,c||o]}let Zf=!1;function lm(t,e,n,r,i,o){const{machine:s}=t;let l=t;for(const c of r){let _=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{Zf=d,d(h,v)}finally{Zf=!1}};var u=_;const f=typeof c=="function",d=f?c:s.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===Pe.Running?_():n.defer(()=>{_()});continue}const y=d,[T,g,p]=y.resolve(n,l,h,v,d,i);l=T,"retryResolve"in y&&(o==null||o.push([y,g])),"execute"in y&&(n.self._processingStatus===Pe.Running?y.execute(n,g):n.defer(y.execute.bind(null,n,g))),p&&(l=lm(l,e,n,p,i,o))}return l}function Fr(t,e,n,r,i,o){const s=o?[]:void 0,l=lm(t,e,n,r,{internalQueue:i,deferredActorIds:o},s);return s==null||s.forEach(([u,c])=>{u.retryResolve(n,l,c)}),l}function xl(t,e,n,r=[]){let i=t;const o=[];function s(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),o.push(c)}if(e.type===Ma)return i=jn(ed(i,e,n),{status:"stopped"}),s(i,e,[]),{snapshot:i,microstates:o};let l=e;if(l.type!==Hg){const c=l,f=fE(c),d=td(c,i);if(f&&!d.length)return i=jn(t,{status:"error",error:c.error}),s(i,c,[]),{snapshot:i,microstates:o};i=Wa(d,t,n,l,!1,r),s(i,c,d)}let u=!0;for(;i.status==="active";){let c=u?WE(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=td(l,i)}i=Wa(c,i,n,l,!1,r),u=i!==f,s(i,l,c)}return i.status!=="active"&&ed(i,l,n),{snapshot:i,microstates:o}}function ed(t,e,n){return Fr(t,e,n,Object.values(t.children).map(r=>Xg(r)),[])}function td(t,e){return e.machine.getTransitionData(e,t)}function WE(t,e){const n=new Set,r=t._nodes.filter(fc);for(const i of r)e:for(const o of[i].concat(no(i,void 0)))if(o.always){for(const s of o.always)if(s.guard===void 0||cc(s.guard,t.context,e,t)){n.add(s);break e}}return im(Array.from(n),new Set(t._nodes),t.historyValue)}function BE(t,e){const n=ys(Es(t,e));return tm(t,[...n])}function VE(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const jE=function(e){return Kg(e,this.value)},$E=function(e){return this.tags.has(e)},GE=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},HE=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:s,hasTag:l,matches:u,...c}=this;return{...c,tags:Array.from(n)}},bE=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function jo(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:tm(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:jE,hasTag:$E,can:GE,getMeta:bE,toJSON:HE}}function jn(t,e={}){return jo({...t,...e},t.machine)}function QE(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:s,can:l,hasTag:u,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const y in o){const T=o[y];v[y]={snapshot:T.getPersistedSnapshot(e),src:T.src,systemId:T._systemId,syncSnapshot:T._syncSnapshot}}return{...h,context:am(s),children:v}}function am(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:uc,id:r.id};else{const i=am(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function KE(t,e,n,r,{event:i,id:o,delay:s},{internalQueue:l}){const u=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof s=="string"){const d=u&&u[s];f=typeof d=="function"?d(n,r):d}else f=typeof s=="function"?s(n,r):s;return typeof f!="number"&&l.push(c),[e,{event:c,id:o,delay:f}]}function YE(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function qE(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=KE,n.execute=YE,n}function JE(t,{machine:e,context:n},r,i){const o=(s,l={})=>{const{systemId:u,input:c}=l;if(typeof s=="string"){const f=ac(e,s);if(!f)throw new Error(`Actor logic '${s}' not implemented in machine '${e.id}'`);const d=vs(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:s,systemId:u});return i[d.id]=d,d}else return vs(s,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:s,systemId:u})};return(s,l)=>{const u=o(s,l);return i[u.id]=u,t.defer(()=>{u._processingStatus!==Pe.Stopped&&u.start()}),u}}function XE(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},s={context:e.context,event:n.event,spawn:JE(t,e,n.event,o),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(s,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(s,r):f}const u=Object.assign({},e.context,l);return[jn(e,{context:u,children:Object.keys(o).length?{...e.children,...o}:e.children})]}function j(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=XE,e}let nd=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function ZE(t,e,n,r,{to:i,event:o,id:s,delay:l},u){var _;const c=e.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);const f=typeof o=="function"?o(n,r):o;let d;if(typeof l=="string"){const y=c&&c[l];d=typeof y=="function"?y(n,r):y}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===nd.Parent?v=t.self._parent:h===nd.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(_=u.deferredActorIds)!=null&&_.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:s,delay:d}]}function ew(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function tw(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:o}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,o);return}t.system._relay(t.self,n,r.type===sE?bg(t.self.id,r.data):r)})}function Ut(t,e,n){function r(i,o){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=ZE,r.retryResolve=ew,r.execute=tw,r}const rd=new WeakMap;function qn(t,e,n){let r=rd.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},rd.set(t,r)),r[e]}const nw={},ii=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class gc{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join($g),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Yf(this.config.states,(r,i)=>new gc(r,{_parent:this,_key:i,_machine:this.machine})):nw,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=on(this.config.entry).slice(),this.exit=on(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=on(e.tags).slice()}_initialize(){this.transitions=xE(this),this.config.always&&(this.always=Xn(this.config.always).map(e=>Ln(this,Gg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(ii),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(ii),eventType:null})}:void 0,history:this.history,states:Yf(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(ii)})),entry:this.entry.map(ii),exit:this.exit.map(ii),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return qn(this,"invoke",()=>on(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??qf(this.id,n),s=typeof r=="string"?r:`xstate.invoke.${qf(this.id,n)}`;return{...e,src:s,id:o,systemId:i,toJSON(){const{onDone:l,onError:u,...c}=e;return{...c,type:"xstate.invoke",src:s,id:o}}}}))}get on(){return qn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return qn(this,"delayedTransitions",()=>IE(this))}get initial(){return qn(this,"initial",()=>CE(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const s=qn(this,`candidates-${r}`,()=>TE(this,r));for(const l of s){const{guard:u}=l,c=e.context;let f=!1;try{f=!u||cc(u,c,n,e)}catch(d){const h=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),o=l;break}}return o?[o]:void 0}get events(){return qn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const rw="#";class mc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new gc(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new mc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=BE(this.root,e.value),r=ys(Es(this.root,n));return jo({_nodes:[...r],context:e.context||{},children:{},status:dc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return xl(e,n,r).snapshot}microstep(e,n,r){return xl(e,n,r).microstates}getTransitionData(e,n){return hc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=jo({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Fr(o,n,e,[j(({spawn:l,event:u,self:c})=>i({spawn:l,input:u.input,self:c}))],r):o}getInitialSnapshot(e,n){const r=Qg(n),i=[],o=this.getPreInitialState(e,r,i),s=Wa([{target:[...rm(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:l}=xl(s,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=lc(e),r=n.slice(1),i=Gs(n[0])?n[0].slice(rw.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return _s(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return QE(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(u=>{const c=i[u],f=c.snapshot,d=c.src,h=typeof d=="string"?ac(this,d):d;if(!h)return;const v=vs(h,{id:u,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[u]=v});const o=jo({...e,children:r,_nodes:Array.from(ys(Es(this.root,e.value)))},this);let s=new Set;function l(u,c){if(!s.has(u)){s.add(u);for(let f in u){const d=u[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===uc){u[f]=c[d.id];continue}l(d,c)}}}}return l(o.context,r),o}}function Pt(t,e){return new mc(t,e)}const um=Pt({types:{},context:{startPoint:null,type:z.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:j(()=>(He(!0),H([]),W([]),pe(null),{startPoint:null})),RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new ct(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=$t(),n.lineWidth=Gt(),W([n])},DRAW_FINAL_LINE:j(({context:t,event:e})=>{console.log("drawFinalLine",{context:t,event:e});const n=e.worldClickPoint,r=new ct(t.startPoint,n);return r.lineColor=$t(),r.lineWidth=Gt(),ke(r),W([new ct(n,n)]),pe(n),{startPoint:n}})}}),cm=Pt({types:{},context:{startPoint:null,type:z.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{He(!0),W([]),H([]),pe(null)},RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new Qt(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=$t(),n.lineWidth=Gt(),W([n])},DRAW_FINAL_RECTANGLE:({context:t,event:e})=>{const n=e.worldClickPoint,r=new Qt(t.startPoint,n);r.lineColor=$t(),r.lineWidth=Gt(),ke(r)}}}),fm=Pt({types:{},context:{centerPoint:null,type:z.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:j(()=>(console.log("activate circle tool"),He(!0),W([]),H([]),pe(null),{centerPoint:null})),RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{centerPoint:t.worldClickPoint})),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new Mr(t.centerPoint,bt(e.drawController.getWorldMouseLocation(),t.centerPoint));n.lineColor=$t(),n.lineWidth=Gt(),W([n])},DRAW_FINAL_CIRCLE:j(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new Mr(t.centerPoint,bt(n,t.centerPoint));return r.lineColor=$t(),r.lineWidth=Gt(),ke(r),W([]),{centerPoint:null}})}});function Ur(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const o=i.distanceTo(t);o&&o[0]<r[0]&&(r=o,n=i)}),{distance:r[0],segment:r[1],entity:n}}function iw(t,e){const n=Ur(e.worldClickPoint,Ee());if(n&&n.distance<rc){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?H([r.id]):e.holdingCtrl?Rr(r)?H(Oe().filter(i=>i!==r.id)):H([...Oe(),r.id]):H([...Oe(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function ow(t,e,n){const r=new Qt(t,e);console.log("Finish selection: ",r);const i=dm(r,t),o=_e(Ee().map(s=>{if(i){if(s.intersectsWithBox(r.getBoundingBox())||s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id}else if(s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id;return null}));H(o)}function sw(t,e){const n=new Qt(t,e),r=dm(n,t);n.lineColor=r?j_:$_,n.lineWidth=G_,n.lineStyle=H_,W([n])}function dm(t,e){if(!t.getShape()||!e)return!1;const n=Math.min(...t.getShape().vertices.map(r=>r.x));return Math.abs(e.x-n)>ka}const Kt=Pt({types:{},context:{startPoint:null,type:z.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),He(!1),W([]),H([])},HANDLE_FIRST_SELECT_POINT:j(({context:t,event:e})=>(console.log("handle first select point"),iw(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");sw(t.startPoint,e.drawController.getWorldMouseLocation())},SELECT_ENTITIES_INSIDE_RECTANGLE:({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");ow(t.startPoint,e.worldClickPoint,e.holdingCtrl),W([])},DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),js(y_()),H([]),W([])},RESET_SELECTION:j(()=>(W([]),H([]),{startPoint:null}))}});function lw(t,e,n,r){const i=Vs(eo([e,...r,t,n],dt),[s=>bt(e,s)]),o=i.findIndex(s=>dt(t,s));if(o===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[o-1]||e,i[o+1]||n]}function aw(t,e){const n=t.map(r=>({point:r,angle:new wt(e,r).slope}));return Vs(n,[r=>r.angle]).map(r=>r.point)}function uw(t,e,n){const r=aw(eo([...n,t],dt),e.getShape().center),i=r.findIndex(o=>dt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function cw(t,e,n){const r=Wg(eo([...n,t],dt),e.getShape().center,e.getShape().start),i=r.findIndex(o=>dt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function id(t,e){return _e(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function od(t,e,n){const r=t.getShape(),[i,o]=lw(e,r.start,r.end,n);S_([i,o].map(u=>new Vi(u)));const l=t.cutAtPoints([i,o]).filter(u=>!u.containsPointOnShape(e));Ht(t),ke(...l)}function fw(t,e,n){if(n.length===0){Ht(t);return}const[r,i]=uw(e,t,n),o=t.getShape(),s=o.center,l=[r,i,e].map(d=>Math.atan2(d.y-s.y,d.x-s.x)),[u,c]=dw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new rt(s,o.r,u,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),Ht(t),ke(f)}function dw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function hw(t,e,n){const[r,i]=cw(e,t,n);if(dt(r,i)){Ht(t);return}Ht(t),t.cutAtPoints([r,i]).filter(o=>!o.containsPointOnShape(e)).forEach(o=>{Object.assign(o,{lineColor:t.lineColor,lineWidth:t.lineWidth}),ke(o)})}const pw=Pt({types:{},context:{startPoint:null,type:z.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:j(()=>(console.log("activate eraser tool"),He(!1),W([]),H([]),{})),HANDLE_MOUSE_CLICK:j(({context:t,event:e})=>(gw(e.worldClickPoint),t))}});function gw(t){const e=Ur(t,Ee());if(!e)return;const n=e.segment.start,r=id(e.entity,Ee());switch(e.entity.getType()){case q.Line:{const o=e.entity;od(o,n,r);break}case q.Circle:{const o=e.entity;fw(o,n,r);break}case q.Arc:{const o=e.entity;hw(o,n,r);break}case q.Rectangle:{const o=e.entity,l=st(o.getShape()).map(f=>new ct(f)),u=Ur(t,l);Ht(o),ke(...l);const c=id(u.entity,Ee());od(u.entity,n,c);break}case q.Image:}}function sd(t,e,n){t.forEach(r=>r.move(e,n))}const hm=Pt({types:{},context:{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null,type:z.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Oe().length>0),Oe().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Oe().length===0),Oe().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:Kt,onDone:{actions:j(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=xe())==null?void 0:t.getSnapshot()),{startPoint:null}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Ut("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:Ut("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:Ut("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_ENTITIES"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:j(()=>(console.log("activate move tool"),He(!1),W([]),H([]),pe(null),{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null})),ENABLE_HELPERS:()=>{He(!0)},RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),COPY_SELECTION_BEFORE_MOVE:j(({context:t})=>{const e=Ju();return W(e),Ht(...e),H([]),{startPoint:t.startPoint,originalSelectedEntities:_e(e.map(n=>n.clone())),movedEntities:e}}),DRAW_TEMP_MOVE_ENTITIES:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawController.getWorldMouseLocation(),r=new ct(t.startPoint,n);r.lineColor=zg,r.lineWidth=Fg,r.lineStyle=Ug,W([r]),sd(t.originalSelectedEntities.map(i=>i.clone()),n.x-t.startPoint.x,n.y-t.startPoint.y)},MOVE_SELECTION:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=e.worldClickPoint;sd(t.originalSelectedEntities,n.x-t.startPoint.x,n.y-t.startPoint.y),ke(...t.originalSelectedEntities),W([]),H([])},DESELECT_ENTITIES:j(()=>(W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=Ee();return console.log({entities:e}),ke(...t.originalSelectedEntities),W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Kt.implementations.actions}});var lt=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t))(lt||{});class ji{constructor(e,n,r,i=0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"imageElement");D(this,"polygon");D(this,"angle");this.imageElement=e,n instanceof vn?this.polygon=n:this.polygon=oc(n,r),r instanceof S?this.angle=i:this.angle=r}draw(e){st(this.polygon).forEach(i=>{e.drawLine(i.start,i.end)});const n=this.polygon.box.width,r=this.polygon.box.height;e.drawImage(this.imageElement,this.polygon.box.xmin,this.polygon.box.ymin,n,r,this.angle)}move(e,n){this.polygon=this.polygon.translate(new Ct(e,n))}scale(e,n){const r=this.polygon.box.center,i=It(r,e,n);this.polygon=this.polygon.translate(new Ct(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e),this.angle+=n}clone(){const e=document.createElement("img");return e.src=this.imageElement.src,new ji(e,this.polygon.clone())}intersectsWithBox(e){return Gu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=st(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=st(this.polygon);return[{point:e[0],type:U.LineEndPoint},{point:e[1],type:U.LineEndPoint},{point:e[2],type:U.LineEndPoint},{point:e[3],type:U.LineEndPoint},{point:n[0].middle(),type:U.LineMidPoint},{point:n[1].middle(),type:U.LineMidPoint},{point:n[2].middle(),type:U.LineMidPoint},{point:n[3].middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?st(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:Kn(this.lineColor)})}getType(){return q.Image}containsPointOnShape(e){return st(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y})),imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new vn(e.shapeData.points.map(o=>new S(o.x,o.y))),r=new Image;r.src=e.shapeData.imageData;const i=new ji(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function ld(t,e,n,r){const i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y);if(i===0||o===0)return null;const s=t/e,l=i/o;if(s<l){const u=Math.abs(o*s),c=n.x<r.x?n.x:n.x-u,f=n.y<r.y?n.y:n.y-o;return new zt(c,f,c+u,f+o)}else{const u=Math.abs(i/s),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-u;return new zt(c,f,c+i,f+u)}}const pm=Pt({types:{},context:{type:z.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[lt.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{target:"INIT"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},ESC:{target:"INIT"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:j(()=>(He(!0),W([]),H([]),pe(null),{startPoint:null,imageElement:null})),STORE_IMAGE_DATA:j(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,startPoint:e.worldClickPoint})),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!ld(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.drawController.getWorldMouseLocation()))return;const r=new ji(t.imageElement,new vn),i=new Qt(oc(t.startPoint,e.drawController.getWorldMouseLocation()));W([r]),ec([i])},DRAW_FINAL_IMAGE_IMPORT:({context:t,event:e})=>{if(console.log("drawFinalImageImport",{context:t,event:e}),!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=ld(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldClickPoint);if(!n)return;const r=new ji(t.imageElement,K_(n));ke(r)},SWITCH_TO_SELECT_TOOL:()=>{kt(new yt(Kt))}}});function ad(t,e,n,r){const i=bt(e,r)/bt(e,n);t.forEach(o=>o.scale(e,i))}const mw=Pt({types:{},context:{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[],type:z.SCALE},initial:"INIT",states:{INIT:{description:"Initializing the scale tool",always:{actions:"INIT_SCALE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Oe().length>0),Oe().length>0),target:"WAITING_FOR_BASE_VECTOR_START_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Oe().length===0),Oe().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to scale",meta:{instructions:"Select what you want to scale, then ENTER"},invoke:{id:"selectToolInsideTheScaleTool",src:Kt,onDone:{actions:j(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=xe())==null?void 0:t.getSnapshot()),{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Ut("selectToolInsideTheScaleTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_SCALE_TOOL"]},ENTER:{actions:Ut("selectToolInsideTheScaleTool",({event:t})=>t)},DRAW:{actions:Ut("selectToolInsideTheScaleTool",({event:t})=>t)}}},WAITING_FOR_BASE_VECTOR_START_POINT:{description:"Select the origin of the scale operation",meta:{instructions:"Select the origin of the scale operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_START_POINT"],target:"WAITING_FOR_BASE_VECTOR_END_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_BASE_VECTOR_END_POINT:{description:"Select the end of the base scale line",meta:{instructions:"Select the end of the base scale line"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_END_POINT","COPY_SELECTION_BEFORE_SCALE"],target:"WAITING_FOR_SCALE_VECTOR_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_SCALE_VECTOR_END_POINT:{description:"Select the end of the scale line",meta:{instructions:"Select the end of the scale line"},on:{DRAW:{actions:["DRAW_TEMP_SCALE_ENTITIES"]},MOUSE_CLICK:{actions:["SCALE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_SCALE_TOOL:()=>{console.log("activate scale tool"),He(!1),W([]),H([]),pe(null)},ENABLE_HELPERS:()=>{He(!0)},RECORD_BASE_VECTOR_START_POINT:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,baseVectorStartPoint:e.worldClickPoint})),RECORD_BASE_VECTOR_END_POINT:j(({context:t,event:e})=>({...t,baseVectorEndPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_SCALE:j(({context:t})=>{const e=Ju();return W(e),Ht(...e),H([]),{...t,originalSelectedEntities:_e(e.map(n=>n.clone()))}}),DRAW_TEMP_SCALE_ENTITIES:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling draw temp scale entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=_e(t.originalSelectedEntities.map(i=>i.clone()));ad(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),W(r)},SCALE_SELECTION:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling scale selection without some scale vector endpoints");const n=e.worldClickPoint,r=_e(t.originalSelectedEntities.map(i=>i.clone()));ad(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),ke(...r),W([]),H([])},DESELECT_ENTITIES:j(()=>(W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=Ee();return console.log({entities:e}),ke(...t.originalSelectedEntities),W([]),W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Kt.implementations.actions}});function ud(t,e,n,r){const i=new wt(e,r).slope-new wt(e,n).slope;t.forEach(o=>o.rotate(e,i))}const vw=Pt({types:{},context:{rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[],type:z.ROTATE},initial:"INIT",states:{INIT:{description:"Initializing the rotate tool",always:{actions:"INIT_ROTATE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Oe().length>0),Oe().length>0),target:"WAITING_FOR_ROTATION_ORIGIN"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Oe().length===0),Oe().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to rotate",meta:{instructions:"Select what you want to rotate, then ENTER"},invoke:{id:"selectToolInsideTheRotateTool",src:Kt,onDone:{actions:j(({context:t})=>{var e;return console.log("select tool finished selection"),console.log("actor: ",(e=xe())==null?void 0:e.getSnapshot()),{...t}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Ut("selectToolInsideTheRotateTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_ROTATE_TOOL"]},ENTER:{actions:Ut("selectToolInsideTheRotateTool",({event:t})=>t)},DRAW:{actions:Ut("selectToolInsideTheRotateTool",({event:t})=>t)}}},WAITING_FOR_ROTATION_ORIGIN:{description:"Select the origin of the rotate operation",meta:{instructions:"Select the origin of the rotate operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ORIGIN"],target:"WAITING_FOR_ANGLE_START_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_START_POINT:{description:"Select the end of the base rotate line",meta:{instructions:"Select the end of the base rotate line"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ANGLE_START_POINT","COPY_SELECTION_BEFORE_ROTATE"],target:"WAITING_FOR_ANGLE_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_END_POINT:{description:"Select the end of the rotate line",meta:{instructions:"Select the end of the rotate line"},on:{DRAW:{actions:["DRAW_TEMP_ROTATE_ENTITIES"]},MOUSE_CLICK:{actions:["ROTATE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_ROTATE_TOOL:()=>{console.log("activate rotate tool"),He(!1),W([]),H([]),pe(null)},ENABLE_HELPERS:()=>{He(!0)},RECORD_ROTATION_ORIGIN:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,rotationOrigin:e.worldClickPoint})),RECORD_ROTATION_ANGLE_START_POINT:j(({context:t,event:e})=>({...t,angleStartPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_ROTATE:j(({context:t})=>{const e=Ju();return W(e),Ht(...e),H([]),{...t,originalSelectedEntities:_e(e.map(n=>n.clone()))}}),DRAW_TEMP_ROTATE_ENTITIES:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling draw temp rotate entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=_e(t.originalSelectedEntities.map(i=>i.clone()));ud(r,t.rotationOrigin,t.angleStartPoint,n),W(r)},ROTATE_SELECTION:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling rotate selection without some rotate vector endpoints");const n=e.worldClickPoint,r=_e(t.originalSelectedEntities.map(i=>i.clone()));ud(r,t.rotationOrigin,t.angleStartPoint,n),ke(...r),W([]),H([])},DESELECT_ENTITIES:j(({context:t})=>(W([]),H([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=Ee();return console.log({entities:e}),ke(...t.originalSelectedEntities),W([]),H([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]}}),...Kt.implementations.actions}});function cd(t=[]){let e=t[0],n;for(const r of t)(n==null||r>n)&&(n=r,e=r);return e}function fd(t=[]){let e=t[0],n;for(const r of t)(n==null||r<n)&&(n=r,e=r);return e}class $i{constructor(e,n,r){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"startPoint");D(this,"endPoint");D(this,"offsetPoint");this.startPoint=e,this.endPoint=n,this.offsetPoint=r}getDrawPoints(){const e=new wt(this.startPoint,this.endPoint),[,n]=this.offsetPoint.distanceTo(e),r=n.end;let i;dt(r,this.offsetPoint)?i=e.norm:i=new Ct(r,this.offsetPoint);const o=i.normalize(),s=this.startPoint.clone().translate(i),l=this.endPoint.clone().translate(i),u=this.startPoint.clone().translate(o.multiply(Hf)),c=this.endPoint.clone().translate(o.multiply(Hf)),f=s.clone().translate(o.multiply(Gf)),d=l.clone().translate(o.multiply(Gf)),v=new S((s.x+l.x)/2,(s.y+l.y)/2).clone().translate(o.multiply(B_));return{offsetStartPoint:s,offsetEndPoint:l,offsetStartPointExtend:f,offsetEndPointExtend:d,offsetStartPointMargin:u,offsetEndPointMargin:c,midpointMeasurementLineOffset:v,normalUnit:o}}draw(e){const n=this.getDrawPoints();if(!n)return;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u,midpointMeasurementLineOffset:c,normalUnit:f}=n;e.drawArrowHead(r,i),e.drawArrowHead(i,r),e.drawLine(r,i),e.drawLine(l,o),e.drawLine(u,s);const d=z1(bt(this.startPoint,this.endPoint),W_);e.drawText(String(d),c,f.rotate90CCW())}move(e,n){this.startPoint=this.startPoint.translate(e,n),this.endPoint=this.endPoint.translate(e,n),this.offsetPoint=this.offsetPoint.translate(e,n)}scale(e,n){this.startPoint=It(this.startPoint,e,n),this.endPoint=It(this.endPoint,e,n),this.offsetPoint=It(this.offsetPoint,e,n)}rotate(e,n){this.startPoint=this.startPoint.rotate(n,e),this.endPoint=this.endPoint.rotate(n,e),this.offsetPoint=this.offsetPoint.rotate(n,e)}clone(){return new $i(this.startPoint.clone(),this.endPoint.clone(),this.offsetPoint.clone())}intersectsWithBox(e){const n=this.getDrawPoints(),r=[new mt(n.offsetStartPoint,n.offsetEndPoint),new mt(n.offsetStartPointMargin,n.offsetStartPointExtend),new mt(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(i.intersect(e).length>0||e.contains(i))return!0;return!1}isContainedInBox(e){const n=this.getDrawPoints(),r=[new mt(n.offsetStartPoint,n.offsetEndPoint),new mt(n.offsetStartPointMargin,n.offsetStartPointExtend),new mt(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(!e.contains(i))return!1;return!0}getBoundingBox(){const e=this.getDrawPoints();if(!e)return null;const n=[e.offsetStartPointMargin,e.offsetStartPointExtend,e.offsetEndPointMargin,e.offsetEndPointExtend];return new zt(fd(n.map(r=>r.x)),fd(n.map(r=>r.y)),cd(n.map(r=>r.x)),cd(n.map(r=>r.y)))}getShape(){return null}getSnapPoints(){return[]}getIntersections(){return[]}getFirstPoint(){return this.startPoint}distanceTo(e){const n=this.getDrawPoints();if(!n)return null;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u}=n,f=new wt(r,i).distanceTo(e),h=new wt(l,o).distanceTo(e),_=new wt(u,s).distanceTo(e);return M1([f,h,_],y=>y[0])}getSvgString(){throw new Error("getSvgString for MeasurementEntity not yet implemented")}getType(){return q.Measurement}containsPointOnShape(e){throw new Error("containsPointOnShape for MeasurementEntity not yet implemented")}async toJson(){return{id:this.id,type:q.Measurement,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.startPoint.x,y:this.startPoint.y},endPoint:{x:this.endPoint.x,y:this.endPoint.y},offsetPoint:{x:this.offsetPoint.x,y:this.offsetPoint.y}}}}static async fromJson(e){const n=new S(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new S(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new S(e.shapeData.offsetPoint.x,e.shapeData.offsetPoint.y),o=new $i(n,r,i);return o.id=e.id,o.lineColor=e.lineColor,o.lineWidth=e.lineWidth,o}}const yw=Pt({types:{},context:{startPoint:null,endPoint:null,type:z.MEASUREMENT},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_MEASUREMENT_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the measurement",meta:{instructions:"Select the start point of the measurement"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the measurement",meta:{instructions:"Select the end point of the measurement"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},ESC:{target:"INIT"}}},WAITING_FOR_OFFSET:{description:"Select the offset to display the measurement at",meta:{instructions:"Select the offset to display the measurement at"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_MEASUREMENT_TOOL:j(()=>(He(!0),H([]),W([]),pe(null),{startPoint:null})),RECORD_START_POINT:j(({event:t})=>(pe(t.worldClickPoint),{startPoint:t.worldClickPoint})),RECORD_END_POINT:j(({context:t,event:e})=>(pe(e.worldClickPoint),{...t,endPoint:e.worldClickPoint})),DRAW_TEMP_MEASUREMENT:({context:t,event:e})=>{const n=t.startPoint;let r,i;if(t.endPoint)r=t.endPoint,i=e.drawController.getWorldMouseLocation();else{r=e.drawController.getWorldMouseLocation();const s=new Ct(n,r).rotate(-90*Ra).normalize();i=n.clone().translate(s.multiply(F_))}const o=new $i(t.startPoint,r,i);o.lineColor=$t(),o.lineWidth=Gt(),W([o])},DRAW_FINAL_MEASUREMENT:({context:t,event:e})=>{console.log("drawFinalMeasurement",{context:t,event:e});const n=e.worldClickPoint,r=new $i(t.startPoint,t.endPoint,n);r.lineColor=$t(),r.lineWidth=Gt(),ke(r)}}}),gm={[z.LINE]:um,[z.RECTANGLE]:cm,[z.CIRCLE]:fm,[z.SELECT]:Kt,[z.ERASER]:pw,[z.MOVE]:hm,[z.SCALE]:mw,[z.ROTATE]:vw,[z.IMAGE_IMPORT]:pm,[z.MEASUREMENT]:yw};function _w(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const Ew=()=>{const[t,e]=k.useState(z.LINE),[n,r]=k.useState(45),[i,o]=k.useState("#FFF"),[s,l]=k.useState(1),[u,c]=k.useState(1),f=k.useCallback(()=>{var y,T;e((T=(y=xe())==null?void 0:y.getSnapshot())==null?void 0:T.context.type),r(Ag()),o($t()),l(Gt()),c(Ft().getScreenScale())},[]),d=y=>{y.ctrlKey&&y.preventDefault()};k.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(ms.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(ms.UPDATE_STATE,f)}),[f]);const h=k.useCallback(y=>{var g;(g=xe())==null||g.stop();const T=new yt(gm[y]);kt(T),e(y)},[]),v=k.useCallback(y=>{r(y),T_(y,!1)},[]),_=k.useCallback(()=>{Ft().setScreenScale(1),Ft().setScreenOffset(new S(0,0))},[]);return M.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[M.jsx(K,{title:"Select (s)",icon:me.Direction,onClick:()=>{h(z.SELECT)},active:t===z.SELECT}),M.jsx(K,{title:"Line (l)",icon:me.Line,onClick:()=>{h(z.LINE)},active:t===z.LINE}),M.jsx(K,{title:"Rectangle (r)",icon:me.Square,onClick:()=>{h(z.RECTANGLE)},active:t===z.RECTANGLE}),M.jsx(K,{title:"Circle (c)",icon:me.Circle,onClick:()=>{h(z.CIRCLE)},active:t===z.CIRCLE}),M.jsx(K,{className:"mt-2",title:"Move",icon:me.Expand,iconClassname:"transform rotate-45",onClick:()=>h(z.MOVE),active:t===z.MOVE}),M.jsx(K,{title:"Scale",icon:me.Scale,onClick:()=>h(z.SCALE),active:t===z.SCALE}),M.jsx(K,{title:"Rotate",icon:me.Clockwise,onClick:()=>h(z.ROTATE),active:t===z.ROTATE}),M.jsx(K,{className:"mt-2",title:"Add measurements",icon:me.Measurement,onClick:()=>h(z.MEASUREMENT),active:t===z.MEASUREMENT}),M.jsx(K,{className:"mt-2",title:"Undo (ctrl + z)",icon:me.ArrowLeftCircle,onClick:()=>Mg()}),M.jsx(K,{title:"Redo (ctrl + shift + z)",icon:me.ArrowRightCircle,onClick:()=>Dg()}),M.jsx(K,{className:"mt-2",title:"Delete segments",icon:me.Crop,onClick:()=>h(z.ERASER),active:t===z.ERASER}),M.jsx(El,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:Q_.map(y=>M.jsx(K,{title:"Change line color",style:{backgroundColor:y},active:y===i,onClick:()=>P_(y)},"line-color--"+y))}),M.jsx(El,{title:"Line width",label:String(s)+"px",children:jg(9).map(y=>{const T=y+1;return M.jsx(K,{title:"Change line width",label:String(T)+"px",active:T===s,onClick:()=>L_(T)},"line-width--"+T)})}),M.jsxs(El,{title:"Snap angles",label:n+"°",children:[M.jsx(K,{title:"Add guide every 5 degrees",label:"5°",onClick:()=>v(5),active:n===5}),M.jsx(K,{title:"Add guide every 15 degrees",label:"15°",onClick:()=>v(15),active:n===15}),M.jsx(K,{title:"Add guide every 30 degrees",label:"30°",onClick:()=>v(30),active:n===30}),M.jsx(K,{title:"Add guide every 45 degrees",label:"45°",onClick:()=>v(45),active:n===45}),M.jsx(K,{title:"Add guide every 90 degrees",label:"90°",onClick:()=>v(90),active:n===90})]}),M.jsx(K,{title:"Zoom level",label:(u*100).toFixed(0)+"%",onClick:_}),M.jsx(K,{className:"relative mt-2",title:"Import image into the current drawing",icon:me.Image,onClick:Wf,children:M.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async y=>{var p;const T=await _w((p=y.target.files)==null?void 0:p[0]),g=new yt(pm);g.start(),g.send({type:lt.FILE_SELECTED,image:T}),kt(g),y.target.files=null}})}),M.jsx(K,{className:"relative",title:"Load from JSON file",icon:me.Folder,onClick:Wf,children:M.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async y=>{var T;await Y_((T=y.target.files)==null?void 0:T[0]),y.target.files=null}})}),M.jsx(K,{title:"Save to JSON file",icon:me.Save,onClick:()=>q_()}),M.jsx(K,{title:"Export to SVG file",label:"SVG",onClick:()=>J_()}),M.jsx(K,{title:"Export to PNG file",label:"PNG",onClick:()=>Z_()}),M.jsx(K,{className:"mt-2",title:"Github",icon:me.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function ww(){return M.jsx("div",{children:M.jsx(Ew,{})})}function dd(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const o=t[i];e.push(...r.getIntersections(o))}}return e}function Ba(t,e){let n=null,r=1/0;return t.forEach(i=>{const o=bt(i.point,e);o<r&&(r=o,n=i)}),{distance:r,snapPoint:n}}function Va(t,e,n){const{distance:r,snapPoint:i}=Ba(t.filter(l=>l.type!==U.AngleGuide),e);if(r<n)return i;const{distance:o,snapPoint:s}=Ba(t.filter(l=>l.type===U.AngleGuide),e);return o<n?s:null}function Sw(t,e){return jg(180/e,n=>{const i=n*e*(Math.PI/180),o=t.x+Math.cos(i),s=t.y+Math.sin(i);return new ct(new S(t.x-1e4*(o-t.x),t.y-1e4*(s-t.y)),new S(t.x+1e4*(o-t.x),t.y+1e4*(s-t.y)))})}function Tw(t,e,n,r,i){let o=null,s=null;const l=[],u=[];e.forEach(v=>{const _=Sw(v,r),y=Ur(n,_);y.distance<D_&&(u.push(y.entity),l.push({point:y.segment.start,type:U.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...dd(_e(t)).map(v=>({point:v,type:U.Intersection}))],f=Va(c,n,i);f&&(o=f);const d=[...l,...dd([..._e(t),...u]).map(v=>({point:v,type:U.Intersection}))],h=Va(d,n,i);return h&&(s=h),{angleGuides:u,entitySnapPoint:o,angleSnapPoint:s}}function hd(t,e){e.forEach(n=>{t.setLineStyles(Xu(n),Rr(n),n.lineColor,n.lineWidth,[]),n.draw(t)})}function Iw(t,e){e.forEach(n=>{t.setLineStyles(Xu(n),Rr(n),"#FF5500",1,[]),n.draw(t)})}function xw(t,e,n){if(!e)return;const r=e.point;switch(t.setLineStyles(!1,!1,M_,1,[]),n&&(t.drawLine(new S(r.x-O/2,r.y),new S(r.x+O/2,r.y)),t.drawLine(new S(r.x,r.y-O/2),new S(r.x,r.y+O/2))),e.type){case U.LineEndPoint:t.drawLine(new S(r.x-O/2,r.y-O/2),new S(r.x+O/2,r.y-O/2)),t.drawLine(new S(r.x+O/2,r.y-O/2),new S(r.x+O/2,r.y+O/2)),t.drawLine(new S(r.x-O/2,r.y+O/2),new S(r.x+O/2,r.y+O/2)),t.drawLine(new S(r.x-O/2,r.y-O/2),new S(r.x-O/2,r.y+O/2));break;case U.LineMidPoint:t.drawLine(new S(r.x,r.y-O/2),new S(r.x-O/2,r.y+O/2)),t.drawLine(new S(r.x-O/2,r.y+O/2),new S(r.x+O/2,r.y+O/2)),t.drawLine(new S(r.x+O/2,r.y+O/2),new S(r.x,r.y-O/2));break;case U.AngleGuide:t.drawLine(new S(r.x-O/2,r.y-O/2),new S(r.x+O/2,r.y-O/2)),t.drawLine(new S(r.x+O/2,r.y-O/2),new S(r.x-O/2,r.y+O/2)),t.drawLine(new S(r.x-O/2,r.y+O/2),new S(r.x+O/2,r.y+O/2)),t.drawLine(new S(r.x+O/2,r.y+O/2),new S(r.x-O/2,r.y-O/2));break;case U.Intersection:t.drawLine(new S(r.x-O/2,r.y-O/2),new S(r.x+O/2,r.y+O/2)),t.drawLine(new S(r.x+O/2,r.y-O/2),new S(r.x-O/2,r.y+O/2));break;case U.CircleCenter:t.drawArc(r,O/2,0,2*Math.PI);break;case U.CircleCardinal:t.drawLine(new S(r.x,r.y-O/2),new S(r.x-O/2,r.y)),t.drawLine(new S(r.x-O/2,r.y),new S(r.x,r.y+O/2)),t.drawLine(new S(r.x,r.y+O/2),new S(r.x+O/2,r.y)),t.drawLine(new S(r.x+O/2,r.y),new S(r.x,r.y-O/2));break}}function Cw(t,e){e.forEach(n=>{t.setLineStyles(Xu(n),Rr(n),zg,Fg,Ug),n.draw(t)})}function Pw(t,e){e&&(t.setLineStyles(!1,!1,"#FFF",1,[]),t.drawLine(new S(t.getScreenMouseLocation().x,t.getScreenMouseLocation().y-Co),new S(t.getScreenMouseLocation().x,t.getScreenMouseLocation().y+Co)),t.drawLine(new S(t.getScreenMouseLocation().x-Co,t.getScreenMouseLocation().y),new S(t.getScreenMouseLocation().x+Co,t.getScreenMouseLocation().y)))}function Lw(t){t.clearCanvas(),Cw(t,f_()),hd(t,d_()),hd(t,Ee()),Iw(t,p_());const{snapPoint:e}=Ba(_e([Yu(),Og()]),t.getWorldMouseLocation()),n=!!e&&qu().some(r=>r.milliSecondsHovered>ic&&dt(r.snapPoint.point,e.point));xw(t,e,n),Pw(t,c_())}function Aw(t,e,n,r,i){if(!t)return;const o=e.at(-1);let s;o?bt(t.point,o.snapPoint.point)<r?s=[...e.slice(0,e.length-1),{...o,milliSecondsHovered:o.milliSecondsHovered+i}]:o.milliSecondsHovered>=ic?s=[...e,{snapPoint:t,milliSecondsHovered:i}]:s=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:s=[{snapPoint:t,milliSecondsHovered:i}];const l=s.slice(0,z_);n(l)}class Ow{constructor(e,n){D(this,"screenOffset",new S(0,0));D(this,"screenScale",1);D(this,"screenMouseLocation");this.context=e,this.canvasSize=n,this.screenMouseLocation=new S(n.x/2,n.y/2)}getScreenScale(){return this.screenScale}setScreenScale(e){this.screenScale=e}getScreenOffset(){return this.screenOffset}setScreenOffset(e){this.screenOffset=e}getScreenMouseLocation(){return this.screenMouseLocation}setScreenMouseLocation(e){this.screenMouseLocation=e}getWorldMouseLocation(){return this.screenToWorld(this.screenMouseLocation)}setLineStyles(e,n,r,i,o=[]){this.context.strokeStyle=r,this.context.lineWidth=i,this.context.setLineDash(o),e&&(this.context.lineWidth=i+1),n&&this.context.setLineDash([5,5])}clearCanvas(){var e,n;this.canvasSize!==null&&this.context&&(this.context.fillStyle=R_,this.context.fillRect(0,0,(e=this.canvasSize)==null?void 0:e.x,(n=this.canvasSize)==null?void 0:n.y))}drawLine(e,n){const[r,i]=this.worldsToScreens([e,n]);this.context.beginPath(),this.context.moveTo(r.x,r.y),this.context.lineTo(i.x,i.y),this.context.stroke()}drawArc(e,n,r,i){const o=this.worldToScreen(e),s=n*this.screenScale;this.context.beginPath(),this.context.arc(o.x,o.y,s,r,i),this.context.stroke()}drawArrowHead(e,n){const i=new Ct(n,e).normalize(),o=n.clone().translate(i.multiply(U_*this.screenScale)),s=i.rotate(90*Ra),l=i.rotate(-90*Ra),u=o.clone().translate(s.multiply(bf*this.screenScale)),c=o.clone().translate(l.multiply(bf*this.screenScale)),[f,d,h]=this.worldsToScreens([n,u,c]);this.context.beginPath(),this.context.moveTo(f.x,f.y),this.context.lineTo(d.x,d.y),this.context.lineTo(h.x,h.y),this.context.lineTo(f.x,f.y),this.context.fillStyle="#FFF",this.context.stroke(),this.context.fill()}drawText(e,n,r){const i=this.worldToScreen(n);this.context.save(),this.context.translate(i.x,i.y);const o=Math.atan2(r.y,r.x);this.context.rotate(o),this.context.font=`${V_*this.screenScale}px sans-serif`,this.context.textAlign="center",this.context.fillText(e,0,0),this.context.restore()}drawImage(e,n,r,i,o,s){const l=n+i/2,u=r+o/2;this.context.translate(l,u),this.context.rotate(s),this.context.drawImage(e,-i/2,-o/2,i,o),this.context.rotate(-s),this.context.translate(-l,-u)}worldToScreen(e){return new S((e.x-this.screenOffset.x)*this.screenScale,(e.y-this.screenOffset.y)*this.screenScale)}worldsToScreens(e){return e.map(this.worldToScreen.bind(this))}screenToWorld(e){return new S(e.x/this.screenScale+this.screenOffset.x,e.y/this.screenScale+this.screenOffset.y)}screensToWorlds(e){return e.map(this.screenToWorld.bind(this))}panScreen(e,n){this.screenOffset=new S(this.screenOffset.x-e/this.screenScale,this.screenOffset.y-n/this.screenScale)}zoomScreen(e){const n=this.getWorldMouseLocation(),r=this.getScreenScale()*(1-b_*(e/Math.abs(e)));this.setScreenScale(r);const i=this.getWorldMouseLocation();this.panScreen(n.x-i.x,n.y-i.y)}}Cl.createRoot(document.getElementById("root")).render(M.jsx(zm.StrictMode,{children:M.jsx(ww,{})}));function Nw(){Zu(!0)}function kw(t){var i,o;Zu(!0);const e=new S(t.clientX,t.clientY),n=Ft();n.setScreenMouseLocation(e);const r=g_();if(r&&(n.panScreen(t.clientX-r.x,t.clientY-r.y),tc(e)),Uw(),((o=(i=xe())==null?void 0:i.getSnapshot())==null?void 0:o.context.type)===z.SELECT){const s=Ur(n.screenToWorld(e),Ee());s.distance<rc?Na([s.entity.id]):Na([])}}function Rw(){Zu(!1)}function Mw(t){Ft().zoomScreen(t.deltaY)}function Dw(t){t.button===gs.Middle&&tc(new S(t.clientX,t.clientY))}function zw(t){if(t.button===gs.Middle&&tc(null),t.button===gs.Left){const e=Ft(),n=Va(_e([Yu(),Og()]),e.getWorldMouseLocation(),nc/e.getScreenScale()),r=Ft().screenToWorld(new S(t.clientX,t.clientY)),i=n?n.point:r,o=xe();o==null||o.send({type:lt.MOUSE_CLICK,worldClickPoint:i,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function Fw(t){var e,n,r,i,o;t.key==="Escape"?(t.preventDefault(),(e=xe())==null||e.send({type:lt.ESC})):t.key==="Enter"?(t.preventDefault(),(n=xe())==null||n.send({type:lt.ENTER})):t.key==="Delete"?(t.preventDefault(),(r=xe())==null||r.send({type:lt.DELETE})):t.key==="z"&&t.ctrlKey&&!t.shiftKey?(t.preventDefault(),Mg(),W([]),H([]),(i=xe())==null||i.send({type:lt.ESC})):t.key==="z"&&t.ctrlKey&&t.shiftKey?(t.preventDefault(),Dg(),W([]),H([]),(o=xe())==null||o.send({type:lt.ESC})):t.key==="l"?(t.preventDefault(),kt(new yt(um))):t.key==="c"?(t.preventDefault(),kt(new yt(fm))):t.key==="r"?(t.preventDefault(),kt(new yt(cm))):t.key==="s"?(t.preventDefault(),kt(new yt(Kt))):t.key==="m"&&(t.preventDefault(),kt(new yt(hm)))}function Uw(){const t=Ag(),e=Ft(),n=Ee(),r=e.getScreenScale(),i=e.getWorldMouseLocation(),l=qu().filter(u=>u.milliSecondsHovered>ic).map(u=>u.snapPoint.point);if(h_()){const{angleGuides:u,entitySnapPoint:c,angleSnapPoint:f}=Tw(n,_e([m_(),...l]),i,t,nc/r);ec(u),Ng(c),kg(f)}}function mm(t,e){var i,o,s,l,u;const n=v_(),r=e-n;if(C_(e),(i=xe())!=null&&i.getSnapshot().can({type:lt.DRAW})&&((o=xe())==null||o.send({type:lt.DRAW,drawController:t})),((u=(l=(s=xe())==null?void 0:s.getSnapshot())==null?void 0:l.context)==null?void 0:u.type)===z.SELECT){const c=Ft();if(!c)throw new Error("getScreenCanvasDrawController() returned null");const{distance:f,entity:d}=Ur(c.getWorldMouseLocation(),Ee());f<rc&&Na([d.id])}Aw(Yu(),qu(),x_,nc/t.getScreenScale(),r),Lw(t),requestAnimationFrame(c=>{mm(t,c)})}function pd(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),__(new S(window.innerWidth,window.innerHeight));const t=a_();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function Ww(){const t=document.getElementsByTagName("canvas")[0];if(t){E_(t),t.addEventListener("mousedown",Dw),t.addEventListener("mousemove",kw),t.addEventListener("mouseup",zw),t.addEventListener("wheel",Mw),t.addEventListener("mouseout",Rw),t.addEventListener("mouseenter",Nw),document.addEventListener("keyup",Fw),window.addEventListener("resize",pd),pd();const e=t.getContext("2d");if(!e)return;const n=new Ow(e,Ku());I_(n),mm(n,0);const r=new yt(gm[z.LINE]);r.start(),kt(r)}}document.addEventListener("DOMContentLoaded",()=>{Ww()});
