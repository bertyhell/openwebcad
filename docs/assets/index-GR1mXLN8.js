var _m=Object.defineProperty;var Em=(t,e,n)=>e in t?_m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>Em(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sd={exports:{}},Cs={},Td={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),Sm=Symbol.for("react.portal"),Tm=Symbol.for("react.fragment"),Im=Symbol.for("react.strict_mode"),xm=Symbol.for("react.profiler"),Cm=Symbol.for("react.provider"),Pm=Symbol.for("react.context"),Lm=Symbol.for("react.forward_ref"),Am=Symbol.for("react.suspense"),Om=Symbol.for("react.memo"),Nm=Symbol.for("react.lazy"),Tc=Symbol.iterator;function Rm(t){return t===null||typeof t!="object"?null:(t=Tc&&t[Tc]||t["@@iterator"],typeof t=="function"?t:null)}var Id={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xd=Object.assign,Cd={};function Wr(t,e,n){this.props=t,this.context=e,this.refs=Cd,this.updater=n||Id}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pd(){}Pd.prototype=Wr.prototype;function Qa(t,e,n){this.props=t,this.context=e,this.refs=Cd,this.updater=n||Id}var Ya=Qa.prototype=new Pd;Ya.constructor=Qa;xd(Ya,Wr.prototype);Ya.isPureReactComponent=!0;var Ic=Array.isArray,Ld=Object.prototype.hasOwnProperty,qa={current:null},Ad={key:!0,ref:!0,__self:!0,__source:!0};function Od(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Ld.call(e,r)&&!Ad.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Hi,type:t,key:o,ref:s,props:i,_owner:qa.current}}function km(t,e){return{$$typeof:Hi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xa(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hi}function Mm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xc=/\/+/g;function Zs(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mm(""+t.key):e.toString(36)}function Ao(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hi:case Sm:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Zs(s,0):r,Ic(i)?(n="",t!=null&&(n=t.replace(xc,"$&/")+"/"),Ao(i,e,n,"",function(c){return c})):i!=null&&(Xa(i)&&(i=km(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(xc,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Ic(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Zs(o,l);s+=Ao(o,e,n,u,i)}else if(u=Rm(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Zs(o,l++),s+=Ao(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function so(t,e,n){if(t==null)return t;var r=[],i=0;return Ao(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Dm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},Oo={transition:null},zm={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Oo,ReactCurrentOwner:qa};function Nd(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:so,forEach:function(t,e,n){so(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return so(t,function(){e++}),e},toArray:function(t){return so(t,function(e){return e})||[]},only:function(t){if(!Xa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=Wr;V.Fragment=Tm;V.Profiler=xm;V.PureComponent=Qa;V.StrictMode=Im;V.Suspense=Am;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zm;V.act=Nd;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xd({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=qa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ld.call(e,u)&&!Ad.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Hi,type:t.type,key:i,ref:o,props:r,_owner:s}};V.createContext=function(t){return t={$$typeof:Pm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Cm,_context:t},t.Consumer=t};V.createElement=Od;V.createFactory=function(t){var e=Od.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Lm,render:t}};V.isValidElement=Xa;V.lazy=function(t){return{$$typeof:Nm,_payload:{_status:-1,_result:t},_init:Dm}};V.memo=function(t,e){return{$$typeof:Om,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Oo.transition;Oo.transition={};try{t()}finally{Oo.transition=e}};V.unstable_act=Nd;V.useCallback=function(t,e){return Me.current.useCallback(t,e)};V.useContext=function(t){return Me.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};V.useEffect=function(t,e){return Me.current.useEffect(t,e)};V.useId=function(){return Me.current.useId()};V.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Me.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};V.useRef=function(t){return Me.current.useRef(t)};V.useState=function(t){return Me.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Me.current.useTransition()};V.version="18.3.1";Td.exports=V;var R=Td.exports;const Fm=wm(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=R,Wm=Symbol.for("react.element"),Bm=Symbol.for("react.fragment"),Vm=Object.prototype.hasOwnProperty,jm=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$m={key:!0,ref:!0,__self:!0,__source:!0};function Rd(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Vm.call(e,r)&&!$m.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wm,type:t,key:o,ref:s,props:i,_owner:jm.current}}Cs.Fragment=Bm;Cs.jsx=Rd;Cs.jsxs=Rd;Sd.exports=Cs;var M=Sd.exports,Nl={},kd={exports:{}},Ke={},Md={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,F){var B=A.length;A.push(F);e:for(;0<B;){var oe=B-1>>>1,fe=A[oe];if(0<i(fe,F))A[oe]=F,A[B]=fe,B=oe;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var F=A[0],B=A.pop();if(B!==F){A[0]=B;e:for(var oe=0,fe=A.length,io=fe>>>1;oe<io;){var wn=2*(oe+1)-1,Js=A[wn],Sn=wn+1,oo=A[Sn];if(0>i(Js,B))Sn<fe&&0>i(oo,Js)?(A[oe]=oo,A[Sn]=B,oe=Sn):(A[oe]=Js,A[wn]=B,oe=wn);else if(Sn<fe&&0>i(oo,B))A[oe]=oo,A[Sn]=B,oe=Sn;else break e}}return F}function i(A,F){var B=A.sortIndex-F.sortIndex;return B!==0?B:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,v=!1,_=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=A)r(c),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(c)}}function E(A){if(y=!1,m(A),!_)if(n(u)!==null)_=!0,qs(I);else{var F=n(c);F!==null&&Xs(E,F.startTime-A)}}function I(A,F){_=!1,y&&(y=!1,g(N),N=-1),v=!0;var B=h;try{for(m(F),d=n(u);d!==null&&(!(d.expirationTime>F)||A&&!Ve());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var fe=oe(d.expirationTime<=F);F=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(u)&&r(u),m(F)}else r(u);d=n(u)}if(d!==null)var io=!0;else{var wn=n(c);wn!==null&&Xs(E,wn.startTime-F),io=!1}return io}finally{d=null,h=B,v=!1}}var C=!1,L=null,N=-1,G=5,k=-1;function Ve(){return!(t.unstable_now()-k<G)}function br(){if(L!==null){var A=t.unstable_now();k=A;var F=!0;try{F=L(!0,A)}finally{F?Kr():(C=!1,L=null)}}else C=!1}var Kr;if(typeof p=="function")Kr=function(){p(br)};else if(typeof MessageChannel<"u"){var Sc=new MessageChannel,ym=Sc.port2;Sc.port1.onmessage=br,Kr=function(){ym.postMessage(null)}}else Kr=function(){T(br,0)};function qs(A){L=A,C||(C=!0,Kr())}function Xs(A,F){N=T(function(){A(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,qs(I))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var B=h;h=F;try{return A()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=h;h=A;try{return F()}finally{h=B}},t.unstable_scheduleCallback=function(A,F,B){var oe=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?oe+B:oe):B=oe,A){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=B+fe,A={id:f++,callback:F,priorityLevel:A,startTime:B,expirationTime:fe,sortIndex:-1},B>oe?(A.sortIndex=B,e(c,A),n(u)===null&&A===n(c)&&(y?(g(N),N=-1):y=!0,Xs(E,B-oe))):(A.sortIndex=fe,e(u,A),_||v||(_=!0,qs(I))),A},t.unstable_shouldYield=Ve,t.unstable_wrapCallback=function(A){var F=h;return function(){var B=h;h=F;try{return A.apply(this,arguments)}finally{h=B}}}})(Dd);Md.exports=Dd;var Gm=Md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm=R,He=Gm;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zd=new Set,Si={};function Vn(t,e){Er(t,e),Er(t+"Capture",e)}function Er(t,e){for(Si[t]=e,t=0;t<e.length;t++)zd.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=Object.prototype.hasOwnProperty,bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cc={},Pc={};function Km(t){return Rl.call(Pc,t)?!0:Rl.call(Cc,t)?!1:bm.test(t)?Pc[t]=!0:(Cc[t]=!0,!1)}function Qm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ym(t,e,n,r){if(e===null||typeof e>"u"||Qm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ja=/[\-:]([a-z])/g;function Za(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ja,Za);Se[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ja,Za);Se[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ja,Za);Se[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function eu(t,e,n,r){var i=Se.hasOwnProperty(e)?Se[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ym(e,n,i,r)&&(n=null),r||i===null?Km(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bt=Hm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lo=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),tu=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),Fd=Symbol.for("react.provider"),Ud=Symbol.for("react.context"),nu=Symbol.for("react.forward_ref"),Ml=Symbol.for("react.suspense"),Dl=Symbol.for("react.suspense_list"),ru=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),Wd=Symbol.for("react.offscreen"),Lc=Symbol.iterator;function Yr(t){return t===null||typeof t!="object"?null:(t=Lc&&t[Lc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,el;function oi(t){if(el===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);el=e&&e[1]||""}return`
`+el+t}var tl=!1;function nl(t,e){if(!t||tl)return"";tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{tl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oi(t):""}function qm(t){switch(t.tag){case 5:return oi(t.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 2:case 15:return t=nl(t.type,!1),t;case 11:return t=nl(t.type.render,!1),t;case 1:return t=nl(t.type,!0),t;default:return""}}function zl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Jn:return"Portal";case kl:return"Profiler";case tu:return"StrictMode";case Ml:return"Suspense";case Dl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ud:return(t.displayName||"Context")+".Consumer";case Fd:return(t._context.displayName||"Context")+".Provider";case nu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ru:return e=t.displayName||null,e!==null?e:zl(t.type)||"Memo";case Qt:e=t._payload,t=t._init;try{return zl(t(e))}catch{}}return null}function Xm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zl(e);case 8:return e===tu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jm(t){var e=Bd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ao(t){t._valueTracker||(t._valueTracker=Jm(t))}function Vd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ho(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fl(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ac(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jd(t,e){e=e.checked,e!=null&&eu(t,"checked",e,!1)}function Ul(t,e){jd(t,e);var n=fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wl(t,e.type,fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Oc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wl(t,e,n){(e!=="number"||Ho(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var si=Array.isArray;function hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(si(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fn(n)}}function $d(t,e){var n=fn(e.value),r=fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uo,Hd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ti(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zm=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(t){Zm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ci[e]=ci[t]})});function bd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ci.hasOwnProperty(t)&&ci[t]?(""+e).trim():e+"px"}function Kd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var e0=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jl(t,e){if(e){if(e0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function iu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hl=null,pr=null,gr=null;function kc(t){if(t=Qi(t)){if(typeof Hl!="function")throw Error(S(280));var e=t.stateNode;e&&(e=Ns(e),Hl(t.stateNode,t.type,e))}}function Qd(t){pr?gr?gr.push(t):gr=[t]:pr=t}function Yd(){if(pr){var t=pr,e=gr;if(gr=pr=null,kc(t),e)for(t=0;t<e.length;t++)kc(e[t])}}function qd(t,e){return t(e)}function Xd(){}var rl=!1;function Jd(t,e,n){if(rl)return t(e,n);rl=!0;try{return qd(t,e,n)}finally{rl=!1,(pr!==null||gr!==null)&&(Xd(),Yd())}}function Ii(t,e){var n=t.stateNode;if(n===null)return null;var r=Ns(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var bl=!1;if(Ft)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){bl=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{bl=!1}function t0(t,e,n,r,i,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var fi=!1,bo=null,Ko=!1,Kl=null,n0={onError:function(t){fi=!0,bo=t}};function r0(t,e,n,r,i,o,s,l,u){fi=!1,bo=null,t0.apply(n0,arguments)}function i0(t,e,n,r,i,o,s,l,u){if(r0.apply(this,arguments),fi){if(fi){var c=bo;fi=!1,bo=null}else throw Error(S(198));Ko||(Ko=!0,Kl=c)}}function jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mc(t){if(jn(t)!==t)throw Error(S(188))}function o0(t){var e=t.alternate;if(!e){if(e=jn(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Mc(i),t;if(o===r)return Mc(i),e;o=o.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function eh(t){return t=o0(t),t!==null?th(t):null}function th(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=th(t);if(e!==null)return e;t=t.sibling}return null}var nh=He.unstable_scheduleCallback,Dc=He.unstable_cancelCallback,s0=He.unstable_shouldYield,l0=He.unstable_requestPaint,le=He.unstable_now,a0=He.unstable_getCurrentPriorityLevel,ou=He.unstable_ImmediatePriority,rh=He.unstable_UserBlockingPriority,Qo=He.unstable_NormalPriority,u0=He.unstable_LowPriority,ih=He.unstable_IdlePriority,Ps=null,Tt=null;function c0(t){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Ps,t,void 0,(t.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:h0,f0=Math.log,d0=Math.LN2;function h0(t){return t>>>=0,t===0?32:31-(f0(t)/d0|0)|0}var co=64,fo=4194304;function li(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=li(l):(o&=s,o!==0&&(r=li(o)))}else s=n&~i,s!==0?r=li(s):o!==0&&(r=li(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ut(e),i=1<<n,r|=t[n],e&=~i;return r}function p0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ut(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=p0(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Ql(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oh(){var t=co;return co<<=1,!(co&4194240)&&(co=64),t}function il(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ut(e),t[e]=n}function m0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ut(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function su(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var K=0;function sh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lh,lu,ah,uh,ch,Yl=!1,ho=[],nn=null,rn=null,on=null,xi=new Map,Ci=new Map,Xt=[],v0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zc(t,e){switch(t){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(e.pointerId)}}function Xr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Qi(e),e!==null&&lu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function y0(t,e,n,r,i){switch(e){case"focusin":return nn=Xr(nn,t,e,n,r,i),!0;case"dragenter":return rn=Xr(rn,t,e,n,r,i),!0;case"mouseover":return on=Xr(on,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return xi.set(o,Xr(xi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ci.set(o,Xr(Ci.get(o)||null,t,e,n,r,i)),!0}return!1}function fh(t){var e=Pn(t.target);if(e!==null){var n=jn(e);if(n!==null){if(e=n.tag,e===13){if(e=Zd(n),e!==null){t.blockedOn=e,ch(t.priority,function(){ah(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function No(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ql(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gl=r,n.target.dispatchEvent(r),Gl=null}else return e=Qi(n),e!==null&&lu(e),t.blockedOn=n,!1;e.shift()}return!0}function Fc(t,e,n){No(t)&&n.delete(e)}function _0(){Yl=!1,nn!==null&&No(nn)&&(nn=null),rn!==null&&No(rn)&&(rn=null),on!==null&&No(on)&&(on=null),xi.forEach(Fc),Ci.forEach(Fc)}function Jr(t,e){t.blockedOn===e&&(t.blockedOn=null,Yl||(Yl=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,_0)))}function Pi(t){function e(i){return Jr(i,t)}if(0<ho.length){Jr(ho[0],t);for(var n=1;n<ho.length;n++){var r=ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nn!==null&&Jr(nn,t),rn!==null&&Jr(rn,t),on!==null&&Jr(on,t),xi.forEach(e),Ci.forEach(e),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)fh(n),n.blockedOn===null&&Xt.shift()}var mr=bt.ReactCurrentBatchConfig,qo=!0;function E0(t,e,n,r){var i=K,o=mr.transition;mr.transition=null;try{K=1,au(t,e,n,r)}finally{K=i,mr.transition=o}}function w0(t,e,n,r){var i=K,o=mr.transition;mr.transition=null;try{K=4,au(t,e,n,r)}finally{K=i,mr.transition=o}}function au(t,e,n,r){if(qo){var i=ql(t,e,n,r);if(i===null)pl(t,e,r,Xo,n),zc(t,r);else if(y0(i,t,e,n,r))r.stopPropagation();else if(zc(t,r),e&4&&-1<v0.indexOf(t)){for(;i!==null;){var o=Qi(i);if(o!==null&&lh(o),o=ql(t,e,n,r),o===null&&pl(t,e,r,Xo,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else pl(t,e,r,null,n)}}var Xo=null;function ql(t,e,n,r){if(Xo=null,t=iu(r),t=Pn(t),t!==null)if(e=jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xo=t,null}function dh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case ou:return 1;case rh:return 4;case Qo:case u0:return 16;case ih:return 536870912;default:return 16}default:return 16}}var Zt=null,uu=null,Ro=null;function hh(){if(Ro)return Ro;var t,e=uu,n=e.length,r,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Ro=i.slice(t,1<r?1-r:void 0)}function ko(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function po(){return!0}function Uc(){return!1}function Qe(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?po:Uc,this.isPropagationStopped=Uc,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),e}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Qe(Br),Ki=re({},Br,{view:0,detail:0}),S0=Qe(Ki),ol,sl,Zr,Ls=re({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zr&&(Zr&&t.type==="mousemove"?(ol=t.screenX-Zr.screenX,sl=t.screenY-Zr.screenY):sl=ol=0,Zr=t),ol)},movementY:function(t){return"movementY"in t?t.movementY:sl}}),Wc=Qe(Ls),T0=re({},Ls,{dataTransfer:0}),I0=Qe(T0),x0=re({},Ki,{relatedTarget:0}),ll=Qe(x0),C0=re({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),P0=Qe(C0),L0=re({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A0=Qe(L0),O0=re({},Br,{data:0}),Bc=Qe(O0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k0[t])?!!e[t]:!1}function fu(){return M0}var D0=re({},Ki,{key:function(t){if(t.key){var e=N0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ko(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(t){return t.type==="keypress"?ko(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ko(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z0=Qe(D0),F0=re({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vc=Qe(F0),U0=re({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),W0=Qe(U0),B0=re({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0=Qe(B0),j0=re({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$0=Qe(j0),G0=[9,13,27,32],du=Ft&&"CompositionEvent"in window,di=null;Ft&&"documentMode"in document&&(di=document.documentMode);var H0=Ft&&"TextEvent"in window&&!di,ph=Ft&&(!du||di&&8<di&&11>=di),jc=" ",$c=!1;function gh(t,e){switch(t){case"keyup":return G0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function b0(t,e){switch(t){case"compositionend":return mh(e);case"keypress":return e.which!==32?null:($c=!0,jc);case"textInput":return t=e.data,t===jc&&$c?null:t;default:return null}}function K0(t,e){if(er)return t==="compositionend"||!du&&gh(t,e)?(t=hh(),Ro=uu=Zt=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ph&&e.locale!=="ko"?null:e.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q0[t.type]:e==="textarea"}function vh(t,e,n,r){Qd(r),e=Jo(e,"onChange"),0<e.length&&(n=new cu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hi=null,Li=null;function Y0(t){Lh(t,0)}function As(t){var e=rr(t);if(Vd(e))return t}function q0(t,e){if(t==="change")return e}var yh=!1;if(Ft){var al;if(Ft){var ul="oninput"in document;if(!ul){var Hc=document.createElement("div");Hc.setAttribute("oninput","return;"),ul=typeof Hc.oninput=="function"}al=ul}else al=!1;yh=al&&(!document.documentMode||9<document.documentMode)}function bc(){hi&&(hi.detachEvent("onpropertychange",_h),Li=hi=null)}function _h(t){if(t.propertyName==="value"&&As(Li)){var e=[];vh(e,Li,t,iu(t)),Jd(Y0,e)}}function X0(t,e,n){t==="focusin"?(bc(),hi=e,Li=n,hi.attachEvent("onpropertychange",_h)):t==="focusout"&&bc()}function J0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return As(Li)}function Z0(t,e){if(t==="click")return As(e)}function ev(t,e){if(t==="input"||t==="change")return As(e)}function tv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:tv;function Ai(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rl.call(e,i)||!ht(t[i],e[i]))return!1}return!0}function Kc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qc(t,e){var n=Kc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kc(n)}}function Eh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Eh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wh(){for(var t=window,e=Ho();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ho(t.document)}return e}function hu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nv(t){var e=wh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Eh(n.ownerDocument.documentElement,n)){if(r!==null&&hu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Qc(n,o);var s=Qc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rv=Ft&&"documentMode"in document&&11>=document.documentMode,tr=null,Xl=null,pi=null,Jl=!1;function Yc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jl||tr==null||tr!==Ho(r)||(r=tr,"selectionStart"in r&&hu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pi&&Ai(pi,r)||(pi=r,r=Jo(Xl,"onSelect"),0<r.length&&(e=new cu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tr)))}function go(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nr={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionend:go("Transition","TransitionEnd")},cl={},Sh={};Ft&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function Os(t){if(cl[t])return cl[t];if(!nr[t])return t;var e=nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sh)return cl[t]=e[n];return t}var Th=Os("animationend"),Ih=Os("animationiteration"),xh=Os("animationstart"),Ch=Os("transitionend"),Ph=new Map,qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(t,e){Ph.set(t,e),Vn(e,[t])}for(var fl=0;fl<qc.length;fl++){var dl=qc[fl],iv=dl.toLowerCase(),ov=dl[0].toUpperCase()+dl.slice(1);vn(iv,"on"+ov)}vn(Th,"onAnimationEnd");vn(Ih,"onAnimationIteration");vn(xh,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(Ch,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function Xc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,i0(r,e,void 0,t),t.currentTarget=null}function Lh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Xc(i,l,c),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Xc(i,l,c),o=u}}}if(Ko)throw t=Kl,Ko=!1,Kl=null,t}function X(t,e){var n=e[ra];n===void 0&&(n=e[ra]=new Set);var r=t+"__bubble";n.has(r)||(Ah(e,t,2,!1),n.add(r))}function hl(t,e,n){var r=0;e&&(r|=4),Ah(n,t,r,e)}var mo="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){if(!t[mo]){t[mo]=!0,zd.forEach(function(n){n!=="selectionchange"&&(sv.has(n)||hl(n,!1,t),hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mo]||(e[mo]=!0,hl("selectionchange",!1,e))}}function Ah(t,e,n,r){switch(dh(e)){case 1:var i=E0;break;case 4:i=w0;break;default:i=au}n=i.bind(null,e,n,t),i=void 0,!bl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pl(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Pn(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Jd(function(){var c=o,f=iu(n),d=[];e:{var h=Ph.get(t);if(h!==void 0){var v=cu,_=t;switch(t){case"keypress":if(ko(n)===0)break e;case"keydown":case"keyup":v=z0;break;case"focusin":_="focus",v=ll;break;case"focusout":_="blur",v=ll;break;case"beforeblur":case"afterblur":v=ll;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=I0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=W0;break;case Th:case Ih:case xh:v=P0;break;case Ch:v=V0;break;case"scroll":v=S0;break;case"wheel":v=$0;break;case"copy":case"cut":case"paste":v=A0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Vc}var y=(e&4)!==0,T=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=c,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Ii(p,g),E!=null&&y.push(Ni(p,E,m)))),T)break;p=p.return}0<y.length&&(h=new v(h,_,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==Gl&&(_=n.relatedTarget||n.fromElement)&&(Pn(_)||_[Ut]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?Pn(_):null,_!==null&&(T=jn(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(y=Wc,E="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Vc,E="onPointerLeave",g="onPointerEnter",p="pointer"),T=v==null?h:rr(v),m=_==null?h:rr(_),h=new y(E,p+"leave",v,n,f),h.target=T,h.relatedTarget=m,E=null,Pn(f)===c&&(y=new y(g,p+"enter",_,n,f),y.target=m,y.relatedTarget=T,E=y),T=E,v&&_)t:{for(y=v,g=_,p=0,m=y;m;m=Kn(m))p++;for(m=0,E=g;E;E=Kn(E))m++;for(;0<p-m;)y=Kn(y),p--;for(;0<m-p;)g=Kn(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Kn(y),g=Kn(g)}y=null}else y=null;v!==null&&Jc(d,h,v,y,!1),_!==null&&T!==null&&Jc(d,T,_,y,!0)}}e:{if(h=c?rr(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var I=q0;else if(Gc(h))if(yh)I=ev;else{I=J0;var C=X0}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=Z0);if(I&&(I=I(t,c))){vh(d,I,n,f);break e}C&&C(t,h,c),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Wl(h,"number",h.value)}switch(C=c?rr(c):window,t){case"focusin":(Gc(C)||C.contentEditable==="true")&&(tr=C,Xl=c,pi=null);break;case"focusout":pi=Xl=tr=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Yc(d,n,f);break;case"selectionchange":if(rv)break;case"keydown":case"keyup":Yc(d,n,f)}var L;if(du)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else er?gh(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(ph&&n.locale!=="ko"&&(er||N!=="onCompositionStart"?N==="onCompositionEnd"&&er&&(L=hh()):(Zt=f,uu="value"in Zt?Zt.value:Zt.textContent,er=!0)),C=Jo(c,N),0<C.length&&(N=new Bc(N,t,null,n,f),d.push({event:N,listeners:C}),L?N.data=L:(L=mh(n),L!==null&&(N.data=L)))),(L=H0?b0(t,n):K0(t,n))&&(c=Jo(c,"onBeforeInput"),0<c.length&&(f=new Bc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=L))}Lh(d,e)})}function Ni(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ii(t,n),o!=null&&r.unshift(Ni(t,o,i)),o=Ii(t,e),o!=null&&r.push(Ni(t,o,i))),t=t.return}return r}function Kn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jc(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ii(n,o),u!=null&&s.unshift(Ni(n,u,l))):i||(u=Ii(n,o),u!=null&&s.push(Ni(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var lv=/\r\n?/g,av=/\u0000|\uFFFD/g;function Zc(t){return(typeof t=="string"?t:""+t).replace(lv,`
`).replace(av,"")}function vo(t,e,n){if(e=Zc(e),Zc(t)!==e&&n)throw Error(S(425))}function Zo(){}var Zl=null,ea=null;function ta(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var na=typeof setTimeout=="function"?setTimeout:void 0,uv=typeof clearTimeout=="function"?clearTimeout:void 0,ef=typeof Promise=="function"?Promise:void 0,cv=typeof queueMicrotask=="function"?queueMicrotask:typeof ef<"u"?function(t){return ef.resolve(null).then(t).catch(fv)}:na;function fv(t){setTimeout(function(){throw t})}function gl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pi(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),_t="__reactFiber$"+Vr,Ri="__reactProps$"+Vr,Ut="__reactContainer$"+Vr,ra="__reactEvents$"+Vr,dv="__reactListeners$"+Vr,hv="__reactHandles$"+Vr;function Pn(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tf(t);t!==null;){if(n=t[_t])return n;t=tf(t)}return e}t=n,n=t.parentNode}return null}function Qi(t){return t=t[_t]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function Ns(t){return t[Ri]||null}var ia=[],ir=-1;function yn(t){return{current:t}}function Z(t){0>ir||(t.current=ia[ir],ia[ir]=null,ir--)}function Y(t,e){ir++,ia[ir]=t.current,t.current=e}var dn={},Ce=yn(dn),Ue=yn(!1),kn=dn;function wr(t,e){var n=t.type.contextTypes;if(!n)return dn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function We(t){return t=t.childContextTypes,t!=null}function es(){Z(Ue),Z(Ce)}function nf(t,e,n){if(Ce.current!==dn)throw Error(S(168));Y(Ce,e),Y(Ue,n)}function Oh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,Xm(t)||"Unknown",i));return re({},n,r)}function ts(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,kn=Ce.current,Y(Ce,t),Y(Ue,Ue.current),!0}function rf(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=Oh(t,e,kn),r.__reactInternalMemoizedMergedChildContext=t,Z(Ue),Z(Ce),Y(Ce,t)):Z(Ue),Y(Ue,n)}var Nt=null,Rs=!1,ml=!1;function Nh(t){Nt===null?Nt=[t]:Nt.push(t)}function pv(t){Rs=!0,Nh(t)}function _n(){if(!ml&&Nt!==null){ml=!0;var t=0,e=K;try{var n=Nt;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nt=null,Rs=!1}catch(i){throw Nt!==null&&(Nt=Nt.slice(t+1)),nh(ou,_n),i}finally{K=e,ml=!1}}return null}var or=[],sr=0,ns=null,rs=0,Ye=[],qe=0,Mn=null,Rt=1,kt="";function In(t,e){or[sr++]=rs,or[sr++]=ns,ns=t,rs=e}function Rh(t,e,n){Ye[qe++]=Rt,Ye[qe++]=kt,Ye[qe++]=Mn,Mn=t;var r=Rt;t=kt;var i=32-ut(r)-1;r&=~(1<<i),n+=1;var o=32-ut(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Rt=1<<32-ut(e)+i|n<<i|r,kt=o+t}else Rt=1<<o|n<<i|r,kt=t}function pu(t){t.return!==null&&(In(t,1),Rh(t,1,0))}function gu(t){for(;t===ns;)ns=or[--sr],or[sr]=null,rs=or[--sr],or[sr]=null;for(;t===Mn;)Mn=Ye[--qe],Ye[qe]=null,kt=Ye[--qe],Ye[qe]=null,Rt=Ye[--qe],Ye[qe]=null}var Ge=null,$e=null,ee=!1,st=null;function kh(t,e){var n=Xe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function of(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ge=t,$e=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ge=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mn!==null?{id:Rt,overflow:kt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ge=t,$e=null,!0):!1;default:return!1}}function oa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sa(t){if(ee){var e=$e;if(e){var n=e;if(!of(t,e)){if(oa(t))throw Error(S(418));e=sn(n.nextSibling);var r=Ge;e&&of(t,e)?kh(r,n):(t.flags=t.flags&-4097|2,ee=!1,Ge=t)}}else{if(oa(t))throw Error(S(418));t.flags=t.flags&-4097|2,ee=!1,Ge=t}}}function sf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ge=t}function yo(t){if(t!==Ge)return!1;if(!ee)return sf(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ta(t.type,t.memoizedProps)),e&&(e=$e)){if(oa(t))throw Mh(),Error(S(418));for(;e;)kh(t,e),e=sn(e.nextSibling)}if(sf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$e=sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=Ge?sn(t.stateNode.nextSibling):null;return!0}function Mh(){for(var t=$e;t;)t=sn(t.nextSibling)}function Sr(){$e=Ge=null,ee=!1}function mu(t){st===null?st=[t]:st.push(t)}var gv=bt.ReactCurrentBatchConfig;function ei(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function _o(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lf(t){var e=t._init;return e(t._payload)}function Dh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=cn(g,p),g.index=0,g.sibling=null,g}function o(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,E){return p===null||p.tag!==6?(p=Tl(m,g.mode,E),p.return=g,p):(p=i(p,m),p.return=g,p)}function u(g,p,m,E){var I=m.type;return I===Zn?f(g,p,m.props.children,E,m.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Qt&&lf(I)===p.type)?(E=i(p,m.props),E.ref=ei(g,p,m),E.return=g,E):(E=Bo(m.type,m.key,m.props,null,g.mode,E),E.ref=ei(g,p,m),E.return=g,E)}function c(g,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Il(m,g.mode,E),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,E,I){return p===null||p.tag!==7?(p=Rn(m,g.mode,E,I),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Tl(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case lo:return m=Bo(p.type,p.key,p.props,null,g.mode,m),m.ref=ei(g,null,p),m.return=g,m;case Jn:return p=Il(p,g.mode,m),p.return=g,p;case Qt:var E=p._init;return d(g,E(p._payload),m)}if(si(p)||Yr(p))return p=Rn(p,g.mode,m,null),p.return=g,p;_o(g,p)}return null}function h(g,p,m,E){var I=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return I!==null?null:l(g,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case lo:return m.key===I?u(g,p,m,E):null;case Jn:return m.key===I?c(g,p,m,E):null;case Qt:return I=m._init,h(g,p,I(m._payload),E)}if(si(m)||Yr(m))return I!==null?null:f(g,p,m,E,null);_o(g,m)}return null}function v(g,p,m,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,l(p,g,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lo:return g=g.get(E.key===null?m:E.key)||null,u(p,g,E,I);case Jn:return g=g.get(E.key===null?m:E.key)||null,c(p,g,E,I);case Qt:var C=E._init;return v(g,p,m,C(E._payload),I)}if(si(E)||Yr(E))return g=g.get(m)||null,f(p,g,E,I,null);_o(p,E)}return null}function _(g,p,m,E){for(var I=null,C=null,L=p,N=p=0,G=null;L!==null&&N<m.length;N++){L.index>N?(G=L,L=null):G=L.sibling;var k=h(g,L,m[N],E);if(k===null){L===null&&(L=G);break}t&&L&&k.alternate===null&&e(g,L),p=o(k,p,N),C===null?I=k:C.sibling=k,C=k,L=G}if(N===m.length)return n(g,L),ee&&In(g,N),I;if(L===null){for(;N<m.length;N++)L=d(g,m[N],E),L!==null&&(p=o(L,p,N),C===null?I=L:C.sibling=L,C=L);return ee&&In(g,N),I}for(L=r(g,L);N<m.length;N++)G=v(L,g,N,m[N],E),G!==null&&(t&&G.alternate!==null&&L.delete(G.key===null?N:G.key),p=o(G,p,N),C===null?I=G:C.sibling=G,C=G);return t&&L.forEach(function(Ve){return e(g,Ve)}),ee&&In(g,N),I}function y(g,p,m,E){var I=Yr(m);if(typeof I!="function")throw Error(S(150));if(m=I.call(m),m==null)throw Error(S(151));for(var C=I=null,L=p,N=p=0,G=null,k=m.next();L!==null&&!k.done;N++,k=m.next()){L.index>N?(G=L,L=null):G=L.sibling;var Ve=h(g,L,k.value,E);if(Ve===null){L===null&&(L=G);break}t&&L&&Ve.alternate===null&&e(g,L),p=o(Ve,p,N),C===null?I=Ve:C.sibling=Ve,C=Ve,L=G}if(k.done)return n(g,L),ee&&In(g,N),I;if(L===null){for(;!k.done;N++,k=m.next())k=d(g,k.value,E),k!==null&&(p=o(k,p,N),C===null?I=k:C.sibling=k,C=k);return ee&&In(g,N),I}for(L=r(g,L);!k.done;N++,k=m.next())k=v(L,g,N,k.value,E),k!==null&&(t&&k.alternate!==null&&L.delete(k.key===null?N:k.key),p=o(k,p,N),C===null?I=k:C.sibling=k,C=k);return t&&L.forEach(function(br){return e(g,br)}),ee&&In(g,N),I}function T(g,p,m,E){if(typeof m=="object"&&m!==null&&m.type===Zn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case lo:e:{for(var I=m.key,C=p;C!==null;){if(C.key===I){if(I=m.type,I===Zn){if(C.tag===7){n(g,C.sibling),p=i(C,m.props.children),p.return=g,g=p;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Qt&&lf(I)===C.type){n(g,C.sibling),p=i(C,m.props),p.ref=ei(g,C,m),p.return=g,g=p;break e}n(g,C);break}else e(g,C);C=C.sibling}m.type===Zn?(p=Rn(m.props.children,g.mode,E,m.key),p.return=g,g=p):(E=Bo(m.type,m.key,m.props,null,g.mode,E),E.ref=ei(g,p,m),E.return=g,g=E)}return s(g);case Jn:e:{for(C=m.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Il(m,g.mode,E),p.return=g,g=p}return s(g);case Qt:return C=m._init,T(g,p,C(m._payload),E)}if(si(m))return _(g,p,m,E);if(Yr(m))return y(g,p,m,E);_o(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=Tl(m,g.mode,E),p.return=g,g=p),s(g)):n(g,p)}return T}var Tr=Dh(!0),zh=Dh(!1),is=yn(null),os=null,lr=null,vu=null;function yu(){vu=lr=os=null}function _u(t){var e=is.current;Z(is),t._currentValue=e}function la(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vr(t,e){os=t,vu=lr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(vu!==t)if(t={context:t,memoizedValue:e,next:null},lr===null){if(os===null)throw Error(S(308));lr=t,os.dependencies={lanes:0,firstContext:t}}else lr=lr.next=t;return e}var Ln=null;function Eu(t){Ln===null?Ln=[t]:Ln.push(t)}function Fh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Eu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wt(t,r)}function Wt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yt=!1;function wu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wt(t,n)}return i=r.interleaved,i===null?(e.next=e,Eu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wt(t,n)}function Mo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,su(t,n)}}function af(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ss(t,e,n,r){var i=t.updateQueue;Yt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var d=i.baseState;s=0,f=c=u=null,l=o;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(v,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(v,d,h):_,h==null)break e;d=re({},d,h);break e;case 2:Yt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,u=d):f=f.next=v,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);zn|=s,t.lanes=s,t.memoizedState=d}}function uf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var Yi={},It=yn(Yi),ki=yn(Yi),Mi=yn(Yi);function An(t){if(t===Yi)throw Error(S(174));return t}function Su(t,e){switch(Y(Mi,e),Y(ki,t),Y(It,Yi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vl(e,t)}Z(It),Y(It,e)}function Ir(){Z(It),Z(ki),Z(Mi)}function Wh(t){An(Mi.current);var e=An(It.current),n=Vl(e,t.type);e!==n&&(Y(ki,t),Y(It,n))}function Tu(t){ki.current===t&&(Z(It),Z(ki))}var te=yn(0);function ls(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vl=[];function Iu(){for(var t=0;t<vl.length;t++)vl[t]._workInProgressVersionPrimary=null;vl.length=0}var Do=bt.ReactCurrentDispatcher,yl=bt.ReactCurrentBatchConfig,Dn=0,ne=null,ue=null,he=null,as=!1,gi=!1,Di=0,mv=0;function Te(){throw Error(S(321))}function xu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function Cu(t,e,n,r,i,o){if(Dn=o,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Do.current=t===null||t.memoizedState===null?Ev:wv,t=n(r,i),gi){o=0;do{if(gi=!1,Di=0,25<=o)throw Error(S(301));o+=1,he=ue=null,e.updateQueue=null,Do.current=Sv,t=n(r,i)}while(gi)}if(Do.current=us,e=ue!==null&&ue.next!==null,Dn=0,he=ue=ne=null,as=!1,e)throw Error(S(300));return t}function Pu(){var t=Di!==0;return Di=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?ne.memoizedState=he=t:he=he.next=t,he}function et(){if(ue===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=he===null?ne.memoizedState:he.next;if(e!==null)he=e,ue=t;else{if(t===null)throw Error(S(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},he===null?ne.memoizedState=he=t:he=he.next=t}return he}function zi(t,e){return typeof e=="function"?e(t):e}function _l(t){var e=et(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((Dn&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,s=r):u=u.next=d,ne.lanes|=f,zn|=f}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=l,ht(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ne.lanes|=o,zn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function El(t){var e=et(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);ht(o,e.memoizedState)||(Fe=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Bh(){}function Vh(t,e){var n=ne,r=et(),i=e(),o=!ht(r.memoizedState,i);if(o&&(r.memoizedState=i,Fe=!0),r=r.queue,Lu(Gh.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Fi(9,$h.bind(null,n,r,i,e),void 0,null),pe===null)throw Error(S(349));Dn&30||jh(n,e,i)}return i}function jh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $h(t,e,n,r){e.value=n,e.getSnapshot=r,Hh(e)&&bh(t)}function Gh(t,e,n){return n(function(){Hh(e)&&bh(t)})}function Hh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function bh(t){var e=Wt(t,1);e!==null&&ct(e,t,1,-1)}function cf(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},e.queue=t,t=t.dispatch=_v.bind(null,ne,t),[e.memoizedState,t]}function Fi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kh(){return et().memoizedState}function zo(t,e,n,r){var i=mt();ne.flags|=t,i.memoizedState=Fi(1|e,n,void 0,r===void 0?null:r)}function ks(t,e,n,r){var i=et();r=r===void 0?null:r;var o=void 0;if(ue!==null){var s=ue.memoizedState;if(o=s.destroy,r!==null&&xu(r,s.deps)){i.memoizedState=Fi(e,n,o,r);return}}ne.flags|=t,i.memoizedState=Fi(1|e,n,o,r)}function ff(t,e){return zo(8390656,8,t,e)}function Lu(t,e){return ks(2048,8,t,e)}function Qh(t,e){return ks(4,2,t,e)}function Yh(t,e){return ks(4,4,t,e)}function qh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xh(t,e,n){return n=n!=null?n.concat([t]):null,ks(4,4,qh.bind(null,e,t),n)}function Au(){}function Jh(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zh(t,e){var n=et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ep(t,e,n){return Dn&21?(ht(n,e)||(n=oh(),ne.lanes|=n,zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function vv(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=yl.transition;yl.transition={};try{t(!1),e()}finally{K=n,yl.transition=r}}function tp(){return et().memoizedState}function yv(t,e,n){var r=un(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},np(t))rp(e,n);else if(n=Fh(t,e,n,r),n!==null){var i=Re();ct(n,t,r,i),ip(n,e,r)}}function _v(t,e,n){var r=un(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(np(t))rp(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,ht(l,s)){var u=e.interleaved;u===null?(i.next=i,Eu(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Fh(t,e,i,r),n!==null&&(i=Re(),ct(n,t,r,i),ip(n,e,r))}}function np(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function rp(t,e){gi=as=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ip(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,su(t,n)}}var us={readContext:Ze,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},Ev={readContext:Ze,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:ff,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zo(4194308,4,qh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zo(4194308,4,t,e)},useInsertionEffect:function(t,e){return zo(4,2,t,e)},useMemo:function(t,e){var n=mt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yv.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:cf,useDebugValue:Au,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=cf(!1),e=t[0];return t=vv.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=mt();if(ee){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),pe===null)throw Error(S(349));Dn&30||jh(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,ff(Gh.bind(null,r,o,t),[t]),r.flags|=2048,Fi(9,$h.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=mt(),e=pe.identifierPrefix;if(ee){var n=kt,r=Rt;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Di++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wv={readContext:Ze,useCallback:Jh,useContext:Ze,useEffect:Lu,useImperativeHandle:Xh,useInsertionEffect:Qh,useLayoutEffect:Yh,useMemo:Zh,useReducer:_l,useRef:Kh,useState:function(){return _l(zi)},useDebugValue:Au,useDeferredValue:function(t){var e=et();return ep(e,ue.memoizedState,t)},useTransition:function(){var t=_l(zi)[0],e=et().memoizedState;return[t,e]},useMutableSource:Bh,useSyncExternalStore:Vh,useId:tp,unstable_isNewReconciler:!1},Sv={readContext:Ze,useCallback:Jh,useContext:Ze,useEffect:Lu,useImperativeHandle:Xh,useInsertionEffect:Qh,useLayoutEffect:Yh,useMemo:Zh,useReducer:El,useRef:Kh,useState:function(){return El(zi)},useDebugValue:Au,useDeferredValue:function(t){var e=et();return ue===null?e.memoizedState=t:ep(e,ue.memoizedState,t)},useTransition:function(){var t=El(zi)[0],e=et().memoizedState;return[t,e]},useMutableSource:Bh,useSyncExternalStore:Vh,useId:tp,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function aa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ms={isMounted:function(t){return(t=t._reactInternals)?jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Re(),i=un(t),o=Mt(r,i);o.payload=e,n!=null&&(o.callback=n),e=ln(t,o,i),e!==null&&(ct(e,t,i,r),Mo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Re(),i=un(t),o=Mt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ln(t,o,i),e!==null&&(ct(e,t,i,r),Mo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Re(),r=un(t),i=Mt(n,r);i.tag=2,e!=null&&(i.callback=e),e=ln(t,i,r),e!==null&&(ct(e,t,r,n),Mo(e,t,r))}};function df(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ai(n,r)||!Ai(i,o):!0}function op(t,e,n){var r=!1,i=dn,o=e.contextType;return typeof o=="object"&&o!==null?o=Ze(o):(i=We(e)?kn:Ce.current,r=e.contextTypes,o=(r=r!=null)?wr(t,i):dn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ms,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function hf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ms.enqueueReplaceState(e,e.state,null)}function ua(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wu(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ze(o):(o=We(e)?kn:Ce.current,i.context=wr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(aa(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ms.enqueueReplaceState(i,i.state,null),ss(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xr(t,e){try{var n="",r=e;do n+=qm(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function wl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ca(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tv=typeof WeakMap=="function"?WeakMap:Map;function sp(t,e,n){n=Mt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fs||(fs=!0,Ea=r),ca(t,e)},n}function lp(t,e,n){n=Mt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ca(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ca(t,e),typeof r!="function"&&(an===null?an=new Set([this]):an.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function pf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Tv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fv.bind(null,t,e,n),e.then(t,t))}function gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mt(-1,1),e.tag=2,ln(n,e,1))),n.lanes|=1),t)}var Iv=bt.ReactCurrentOwner,Fe=!1;function Le(t,e,n,r){e.child=t===null?zh(e,null,n,r):Tr(e,t.child,n,r)}function vf(t,e,n,r,i){n=n.render;var o=e.ref;return vr(e,i),r=Cu(t,e,n,r,o,i),n=Pu(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ee&&n&&pu(e),e.flags|=1,Le(t,e,r,i),e.child)}function yf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Fu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ap(t,e,o,r,i)):(t=Bo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ai,n(s,r)&&t.ref===e.ref)return Bt(t,e,i)}return e.flags|=1,t=cn(o,r),t.ref=e.ref,t.return=e,e.child=t}function ap(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ai(o,r)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Bt(t,e,i)}return fa(t,e,n,r,i)}function up(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(ur,je),je|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(ur,je),je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Y(ur,je),je|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Y(ur,je),je|=r;return Le(t,e,i,n),e.child}function cp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fa(t,e,n,r,i){var o=We(n)?kn:Ce.current;return o=wr(e,o),vr(e,i),n=Cu(t,e,n,r,o,i),r=Pu(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bt(t,e,i)):(ee&&r&&pu(e),e.flags|=1,Le(t,e,n,i),e.child)}function _f(t,e,n,r,i){if(We(n)){var o=!0;ts(e)}else o=!1;if(vr(e,i),e.stateNode===null)Fo(t,e),op(e,n,r),ua(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ze(c):(c=We(n)?kn:Ce.current,c=wr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==c)&&hf(e,s,r,c),Yt=!1;var h=e.memoizedState;s.state=h,ss(e,r,s,i),u=e.memoizedState,l!==r||h!==u||Ue.current||Yt?(typeof f=="function"&&(aa(e,n,f,r),u=e.memoizedState),(l=Yt||df(e,n,l,r,h,u,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Uh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:rt(e.type,l),s.props=c,d=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ze(u):(u=We(n)?kn:Ce.current,u=wr(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==u)&&hf(e,s,r,u),Yt=!1,h=e.memoizedState,s.state=h,ss(e,r,s,i);var _=e.memoizedState;l!==d||h!==_||Ue.current||Yt?(typeof v=="function"&&(aa(e,n,v,r),_=e.memoizedState),(c=Yt||df(e,n,c,r,h,_,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return da(t,e,n,r,o,i)}function da(t,e,n,r,i,o){cp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&rf(e,n,!1),Bt(t,e,o);r=e.stateNode,Iv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Tr(e,t.child,null,o),e.child=Tr(e,null,l,o)):Le(t,e,l,o),e.memoizedState=r.state,i&&rf(e,n,!0),e.child}function fp(t){var e=t.stateNode;e.pendingContext?nf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nf(t,e.context,!1),Su(t,e.containerInfo)}function Ef(t,e,n,r,i){return Sr(),mu(i),e.flags|=256,Le(t,e,n,r),e.child}var ha={dehydrated:null,treeContext:null,retryLane:0};function pa(t){return{baseLanes:t,cachePool:null,transitions:null}}function dp(t,e,n){var r=e.pendingProps,i=te.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(te,i&1),t===null)return sa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Fs(s,r,0,null),t=Rn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=pa(n),e.memoizedState=ha,t):Ou(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xv(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=cn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=cn(l,o):(o=Rn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?pa(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ha,r}return o=t.child,t=o.sibling,r=cn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ou(t,e){return e=Fs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eo(t,e,n,r){return r!==null&&mu(r),Tr(e,t.child,null,n),t=Ou(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xv(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=wl(Error(S(422))),Eo(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Fs({mode:"visible",children:r.children},i,0,null),o=Rn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Tr(e,t.child,null,s),e.child.memoizedState=pa(s),e.memoizedState=ha,o);if(!(e.mode&1))return Eo(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(S(419)),r=wl(o,r,void 0),Eo(t,e,s,r)}if(l=(s&t.childLanes)!==0,Fe||l){if(r=pe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Wt(t,i),ct(r,t,i,-1))}return zu(),r=wl(Error(S(421))),Eo(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Uv.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,$e=sn(i.nextSibling),Ge=e,ee=!0,st=null,t!==null&&(Ye[qe++]=Rt,Ye[qe++]=kt,Ye[qe++]=Mn,Rt=t.id,kt=t.overflow,Mn=e),e=Ou(e,r.children),e.flags|=4096,e)}function wf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),la(t.return,e,n)}function Sl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function hp(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Le(t,e,r.children,n),r=te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wf(t,n,e);else if(t.tag===19)wf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ls(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ls(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sl(e,!0,n,null,o);break;case"together":Sl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=cn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cv(t,e,n){switch(e.tag){case 3:fp(e),Sr();break;case 5:Wh(e);break;case 1:We(e.type)&&ts(e);break;case 4:Su(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Y(is,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?dp(t,e,n):(Y(te,te.current&1),t=Bt(t,e,n),t!==null?t.sibling:null);Y(te,te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(te,te.current),r)break;return null;case 22:case 23:return e.lanes=0,up(t,e,n)}return Bt(t,e,n)}var pp,ga,gp,mp;pp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ga=function(){};gp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,An(It.current);var o=null;switch(n){case"input":i=Fl(t,i),r=Fl(t,r),o=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),o=[];break;case"textarea":i=Bl(t,i),r=Bl(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zo)}jl(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Si.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Si.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&X("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};mp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ti(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pv(t,e,n){var r=e.pendingProps;switch(gu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return We(e.type)&&es(),Ie(e),null;case 3:return r=e.stateNode,Ir(),Z(Ue),Z(Ce),Iu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,st!==null&&(Ta(st),st=null))),ga(t,e),Ie(e),null;case 5:Tu(e);var i=An(Mi.current);if(n=e.type,t!==null&&e.stateNode!=null)gp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return Ie(e),null}if(t=An(It.current),yo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_t]=e,r[Ri]=o,t=(e.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(i=0;i<ai.length;i++)X(ai[i],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":Ac(r,o),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},X("invalid",r);break;case"textarea":Nc(r,o),X("invalid",r)}jl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&vo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&vo(r.textContent,l,t),i=["children",""+l]):Si.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&X("scroll",r)}switch(n){case"input":ao(r),Oc(r,o,!0);break;case"textarea":ao(r),Rc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[_t]=e,t[Ri]=r,pp(t,e,!1,!1),e.stateNode=t;e:{switch(s=$l(n,r),n){case"dialog":X("cancel",t),X("close",t),i=r;break;case"iframe":case"object":case"embed":X("load",t),i=r;break;case"video":case"audio":for(i=0;i<ai.length;i++)X(ai[i],t);i=r;break;case"source":X("error",t),i=r;break;case"img":case"image":case"link":X("error",t),X("load",t),i=r;break;case"details":X("toggle",t),i=r;break;case"input":Ac(t,r),i=Fl(t,r),X("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),X("invalid",t);break;case"textarea":Nc(t,r),i=Bl(t,r),X("invalid",t);break;default:i=r}jl(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Kd(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Hd(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ti(t,u):typeof u=="number"&&Ti(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Si.hasOwnProperty(o)?u!=null&&o==="onScroll"&&X("scroll",t):u!=null&&eu(t,o,u,s))}switch(n){case"input":ao(t),Oc(t,r,!1);break;case"textarea":ao(t),Rc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?hr(t,!!r.multiple,o,!1):r.defaultValue!=null&&hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)mp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=An(Mi.current),An(It.current),yo(e)){if(r=e.stateNode,n=e.memoizedProps,r[_t]=e,(o=r.nodeValue!==n)&&(t=Ge,t!==null))switch(t.tag){case 3:vo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vo(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Ie(e),null;case 13:if(Z(te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&$e!==null&&e.mode&1&&!(e.flags&128))Mh(),Sr(),e.flags|=98560,o=!1;else if(o=yo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(S(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(S(317));o[_t]=e}else Sr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),o=!1}else st!==null&&(Ta(st),st=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?ce===0&&(ce=3):zu())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return Ir(),ga(t,e),t===null&&Oi(e.stateNode.containerInfo),Ie(e),null;case 10:return _u(e.type._context),Ie(e),null;case 17:return We(e.type)&&es(),Ie(e),null;case 19:if(Z(te),o=e.memoizedState,o===null)return Ie(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ti(o,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ls(t),s!==null){for(e.flags|=128,ti(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(te,te.current&1|2),e.child}t=t.sibling}o.tail!==null&&le()>Cr&&(e.flags|=128,r=!0,ti(o,!1),e.lanes=4194304)}else{if(!r)if(t=ls(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ti(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ee)return Ie(e),null}else 2*le()-o.renderingStartTime>Cr&&n!==1073741824&&(e.flags|=128,r=!0,ti(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=le(),e.sibling=null,n=te.current,Y(te,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return Du(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?je&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function Lv(t,e){switch(gu(e),e.tag){case 1:return We(e.type)&&es(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ir(),Z(Ue),Z(Ce),Iu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tu(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));Sr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return Ir(),null;case 10:return _u(e.type._context),null;case 22:case 23:return Du(),null;case 24:return null;default:return null}}var wo=!1,xe=!1,Av=typeof WeakSet=="function"?WeakSet:Set,P=null;function ar(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(t,e,r)}else n.current=null}function ma(t,e,n){try{n()}catch(r){ie(t,e,r)}}var Sf=!1;function Ov(t,e){if(Zl=qo,t=wh(),hu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(u=s),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ea={focusedElem:t,selectionRange:n},qo=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,T=_.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:rt(e.type,y),T);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(E){ie(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return _=Sf,Sf=!1,_}function mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&ma(e,n,o)}i=i.next}while(i!==r)}}function Ds(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function va(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vp(t){var e=t.alternate;e!==null&&(t.alternate=null,vp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_t],delete e[Ri],delete e[ra],delete e[dv],delete e[hv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yp(t){return t.tag===5||t.tag===3||t.tag===4}function Tf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ya(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zo));else if(r!==4&&(t=t.child,t!==null))for(ya(t,e,n),t=t.sibling;t!==null;)ya(t,e,n),t=t.sibling}function _a(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_a(t,e,n),t=t.sibling;t!==null;)_a(t,e,n),t=t.sibling}var ye=null,it=!1;function Kt(t,e,n){for(n=n.child;n!==null;)_p(t,e,n),n=n.sibling}function _p(t,e,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Ps,n)}catch{}switch(n.tag){case 5:xe||ar(n,e);case 6:var r=ye,i=it;ye=null,Kt(t,e,n),ye=r,it=i,ye!==null&&(it?(t=ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ye.removeChild(n.stateNode));break;case 18:ye!==null&&(it?(t=ye,n=n.stateNode,t.nodeType===8?gl(t.parentNode,n):t.nodeType===1&&gl(t,n),Pi(t)):gl(ye,n.stateNode));break;case 4:r=ye,i=it,ye=n.stateNode.containerInfo,it=!0,Kt(t,e,n),ye=r,it=i;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ma(n,e,s),i=i.next}while(i!==r)}Kt(t,e,n);break;case 1:if(!xe&&(ar(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ie(n,e,l)}Kt(t,e,n);break;case 21:Kt(t,e,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,Kt(t,e,n),xe=r):Kt(t,e,n);break;default:Kt(t,e,n)}}function If(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Av),e.forEach(function(r){var i=Wv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:ye=l.stateNode,it=!1;break e;case 3:ye=l.stateNode.containerInfo,it=!0;break e;case 4:ye=l.stateNode.containerInfo,it=!0;break e}l=l.return}if(ye===null)throw Error(S(160));_p(o,s,i),ye=null,it=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ie(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ep(e,t),e=e.sibling}function Ep(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),gt(t),r&4){try{mi(3,t,t.return),Ds(3,t)}catch(y){ie(t,t.return,y)}try{mi(5,t,t.return)}catch(y){ie(t,t.return,y)}}break;case 1:nt(e,t),gt(t),r&512&&n!==null&&ar(n,n.return);break;case 5:if(nt(e,t),gt(t),r&512&&n!==null&&ar(n,n.return),t.flags&32){var i=t.stateNode;try{Ti(i,"")}catch(y){ie(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&jd(i,o),$l(l,s);var c=$l(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];f==="style"?Kd(i,d):f==="dangerouslySetInnerHTML"?Hd(i,d):f==="children"?Ti(i,d):eu(i,f,d,c)}switch(l){case"input":Ul(i,o);break;case"textarea":$d(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?hr(i,!!o.multiple,v,!1):h!==!!o.multiple&&(o.defaultValue!=null?hr(i,!!o.multiple,o.defaultValue,!0):hr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ri]=o}catch(y){ie(t,t.return,y)}}break;case 6:if(nt(e,t),gt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){ie(t,t.return,y)}}break;case 3:if(nt(e,t),gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pi(e.containerInfo)}catch(y){ie(t,t.return,y)}break;case 4:nt(e,t),gt(t);break;case 13:nt(e,t),gt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ku=le())),r&4&&If(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(xe=(c=xe)||f,nt(e,t),xe=c):nt(e,t),gt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(P=t,f=t.child;f!==null;){for(d=P=f;P!==null;){switch(h=P,v=h.child,h.tag){case 0:case 11:case 14:case 15:mi(4,h,h.return);break;case 1:ar(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){ie(r,n,y)}}break;case 5:ar(h,h.return);break;case 22:if(h.memoizedState!==null){Cf(d);continue}}v!==null?(v.return=h,P=v):Cf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=bd("display",s))}catch(y){ie(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){ie(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:nt(e,t),gt(t),r&4&&If(t);break;case 21:break;default:nt(e,t),gt(t)}}function gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yp(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ti(i,""),r.flags&=-33);var o=Tf(t);_a(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Tf(t);ya(t,l,s);break;default:throw Error(S(161))}}catch(u){ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nv(t,e,n){P=t,wp(t)}function wp(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var i=P,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||wo;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||xe;l=wo;var c=xe;if(wo=s,(xe=u)&&!c)for(P=i;P!==null;)s=P,u=s.child,s.tag===22&&s.memoizedState!==null?Pf(i):u!==null?(u.return=s,P=u):Pf(i);for(;o!==null;)P=o,wp(o),o=o.sibling;P=i,wo=l,xe=c}xf(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,P=o):xf(t)}}function xf(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xe||Ds(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&uf(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uf(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Pi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}xe||e.flags&512&&va(e)}catch(h){ie(e,e.return,h)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function Cf(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function Pf(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ds(4,e)}catch(u){ie(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ie(e,i,u)}}var o=e.return;try{va(e)}catch(u){ie(e,o,u)}break;case 5:var s=e.return;try{va(e)}catch(u){ie(e,s,u)}}}catch(u){ie(e,e.return,u)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var Rv=Math.ceil,cs=bt.ReactCurrentDispatcher,Nu=bt.ReactCurrentOwner,Je=bt.ReactCurrentBatchConfig,$=0,pe=null,ae=null,_e=0,je=0,ur=yn(0),ce=0,Ui=null,zn=0,zs=0,Ru=0,vi=null,ze=null,ku=0,Cr=1/0,At=null,fs=!1,Ea=null,an=null,So=!1,en=null,ds=0,yi=0,wa=null,Uo=-1,Wo=0;function Re(){return $&6?le():Uo!==-1?Uo:Uo=le()}function un(t){return t.mode&1?$&2&&_e!==0?_e&-_e:gv.transition!==null?(Wo===0&&(Wo=oh()),Wo):(t=K,t!==0||(t=window.event,t=t===void 0?16:dh(t.type)),t):1}function ct(t,e,n,r){if(50<yi)throw yi=0,wa=null,Error(S(185));bi(t,n,r),(!($&2)||t!==pe)&&(t===pe&&(!($&2)&&(zs|=n),ce===4&&Jt(t,_e)),Be(t,r),n===1&&$===0&&!(e.mode&1)&&(Cr=le()+500,Rs&&_n()))}function Be(t,e){var n=t.callbackNode;g0(t,e);var r=Yo(t,t===pe?_e:0);if(r===0)n!==null&&Dc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dc(n),e===1)t.tag===0?pv(Lf.bind(null,t)):Nh(Lf.bind(null,t)),cv(function(){!($&6)&&_n()}),n=null;else{switch(sh(r)){case 1:n=ou;break;case 4:n=rh;break;case 16:n=Qo;break;case 536870912:n=ih;break;default:n=Qo}n=Ap(n,Sp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sp(t,e){if(Uo=-1,Wo=0,$&6)throw Error(S(327));var n=t.callbackNode;if(yr()&&t.callbackNode!==n)return null;var r=Yo(t,t===pe?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hs(t,r);else{e=r;var i=$;$|=2;var o=Ip();(pe!==t||_e!==e)&&(At=null,Cr=le()+500,Nn(t,e));do try{Dv();break}catch(l){Tp(t,l)}while(!0);yu(),cs.current=o,$=i,ae!==null?e=0:(pe=null,_e=0,e=ce)}if(e!==0){if(e===2&&(i=Ql(t),i!==0&&(r=i,e=Sa(t,i))),e===1)throw n=Ui,Nn(t,0),Jt(t,r),Be(t,le()),n;if(e===6)Jt(t,r);else{if(i=t.current.alternate,!(r&30)&&!kv(i)&&(e=hs(t,r),e===2&&(o=Ql(t),o!==0&&(r=o,e=Sa(t,o))),e===1))throw n=Ui,Nn(t,0),Jt(t,r),Be(t,le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:xn(t,ze,At);break;case 3:if(Jt(t,r),(r&130023424)===r&&(e=ku+500-le(),10<e)){if(Yo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Re(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=na(xn.bind(null,t,ze,At),e);break}xn(t,ze,At);break;case 4:if(Jt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ut(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rv(r/1960))-r,10<r){t.timeoutHandle=na(xn.bind(null,t,ze,At),r);break}xn(t,ze,At);break;case 5:xn(t,ze,At);break;default:throw Error(S(329))}}}return Be(t,le()),t.callbackNode===n?Sp.bind(null,t):null}function Sa(t,e){var n=vi;return t.current.memoizedState.isDehydrated&&(Nn(t,e).flags|=256),t=hs(t,e),t!==2&&(e=ze,ze=n,e!==null&&Ta(e)),t}function Ta(t){ze===null?ze=t:ze.push.apply(ze,t)}function kv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ht(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jt(t,e){for(e&=~Ru,e&=~zs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ut(e),r=1<<n;t[n]=-1,e&=~r}}function Lf(t){if($&6)throw Error(S(327));yr();var e=Yo(t,0);if(!(e&1))return Be(t,le()),null;var n=hs(t,e);if(t.tag!==0&&n===2){var r=Ql(t);r!==0&&(e=r,n=Sa(t,r))}if(n===1)throw n=Ui,Nn(t,0),Jt(t,e),Be(t,le()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xn(t,ze,At),Be(t,le()),null}function Mu(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(Cr=le()+500,Rs&&_n())}}function Fn(t){en!==null&&en.tag===0&&!($&6)&&yr();var e=$;$|=1;var n=Je.transition,r=K;try{if(Je.transition=null,K=1,t)return t()}finally{K=r,Je.transition=n,$=e,!($&6)&&_n()}}function Du(){je=ur.current,Z(ur)}function Nn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uv(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(gu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&es();break;case 3:Ir(),Z(Ue),Z(Ce),Iu();break;case 5:Tu(r);break;case 4:Ir();break;case 13:Z(te);break;case 19:Z(te);break;case 10:_u(r.type._context);break;case 22:case 23:Du()}n=n.return}if(pe=t,ae=t=cn(t.current,null),_e=je=e,ce=0,Ui=null,Ru=zs=zn=0,ze=vi=null,Ln!==null){for(e=0;e<Ln.length;e++)if(n=Ln[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ln=null}return t}function Tp(t,e){do{var n=ae;try{if(yu(),Do.current=us,as){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}as=!1}if(Dn=0,he=ue=ne=null,gi=!1,Di=0,Nu.current=null,n===null||n.return===null){ce=1,Ui=e,ae=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=_e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=gf(s);if(v!==null){v.flags&=-257,mf(v,s,l,o,e),v.mode&1&&pf(o,c,e),e=v,u=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(u),e.updateQueue=y}else _.add(u);break e}else{if(!(e&1)){pf(o,c,e),zu();break e}u=Error(S(426))}}else if(ee&&l.mode&1){var T=gf(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),mf(T,s,l,o,e),mu(xr(u,l));break e}}o=u=xr(u,l),ce!==4&&(ce=2),vi===null?vi=[o]:vi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=sp(o,u,e);af(o,g);break e;case 1:l=u;var p=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(an===null||!an.has(m)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=lp(o,l,e);af(o,E);break e}}o=o.return}while(o!==null)}Cp(n)}catch(I){e=I,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function Ip(){var t=cs.current;return cs.current=us,t===null?us:t}function zu(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(zn&268435455)&&!(zs&268435455)||Jt(pe,_e)}function hs(t,e){var n=$;$|=2;var r=Ip();(pe!==t||_e!==e)&&(At=null,Nn(t,e));do try{Mv();break}catch(i){Tp(t,i)}while(!0);if(yu(),$=n,cs.current=r,ae!==null)throw Error(S(261));return pe=null,_e=0,ce}function Mv(){for(;ae!==null;)xp(ae)}function Dv(){for(;ae!==null&&!s0();)xp(ae)}function xp(t){var e=Lp(t.alternate,t,je);t.memoizedProps=t.pendingProps,e===null?Cp(t):ae=e,Nu.current=null}function Cp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lv(n,e),n!==null){n.flags&=32767,ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,ae=null;return}}else if(n=Pv(n,e,je),n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);ce===0&&(ce=5)}function xn(t,e,n){var r=K,i=Je.transition;try{Je.transition=null,K=1,zv(t,e,n,r)}finally{Je.transition=i,K=r}return null}function zv(t,e,n,r){do yr();while(en!==null);if($&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(m0(t,o),t===pe&&(ae=pe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||So||(So=!0,Ap(Qo,function(){return yr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Je.transition,Je.transition=null;var s=K;K=1;var l=$;$|=4,Nu.current=null,Ov(t,n),Ep(n,t),nv(ea),qo=!!Zl,ea=Zl=null,t.current=n,Nv(n),l0(),$=l,K=s,Je.transition=o}else t.current=n;if(So&&(So=!1,en=t,ds=i),o=t.pendingLanes,o===0&&(an=null),c0(n.stateNode),Be(t,le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fs)throw fs=!1,t=Ea,Ea=null,t;return ds&1&&t.tag!==0&&yr(),o=t.pendingLanes,o&1?t===wa?yi++:(yi=0,wa=t):yi=0,_n(),null}function yr(){if(en!==null){var t=sh(ds),e=Je.transition,n=K;try{if(Je.transition=null,K=16>t?16:t,en===null)var r=!1;else{if(t=en,en=null,ds=0,$&6)throw Error(S(331));var i=$;for($|=4,P=t.current;P!==null;){var o=P,s=o.child;if(P.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(P=c;P!==null;){var f=P;switch(f.tag){case 0:case 11:case 15:mi(8,f,o)}var d=f.child;if(d!==null)d.return=f,P=d;else for(;P!==null;){f=P;var h=f.sibling,v=f.return;if(vp(f),f===c){P=null;break}if(h!==null){h.return=v,P=h;break}P=v}}}var _=o.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}P=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,P=s;else e:for(;P!==null;){if(o=P,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mi(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,P=g;break e}P=o.return}}var p=t.current;for(P=p;P!==null;){s=P;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,P=m;else e:for(s=p;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ds(9,l)}}catch(I){ie(l,l.return,I)}if(l===s){P=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,P=E;break e}P=l.return}}if($=i,_n(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Ps,t)}catch{}r=!0}return r}finally{K=n,Je.transition=e}}return!1}function Af(t,e,n){e=xr(n,e),e=sp(t,e,1),t=ln(t,e,1),e=Re(),t!==null&&(bi(t,1,e),Be(t,e))}function ie(t,e,n){if(t.tag===3)Af(t,t,n);else for(;e!==null;){if(e.tag===3){Af(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(an===null||!an.has(r))){t=xr(n,t),t=lp(e,t,1),e=ln(e,t,1),t=Re(),e!==null&&(bi(e,1,t),Be(e,t));break}}e=e.return}}function Fv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Re(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(_e&n)===n&&(ce===4||ce===3&&(_e&130023424)===_e&&500>le()-ku?Nn(t,0):Ru|=n),Be(t,e)}function Pp(t,e){e===0&&(t.mode&1?(e=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):e=1);var n=Re();t=Wt(t,e),t!==null&&(bi(t,e,n),Be(t,n))}function Uv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pp(t,n)}function Wv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),Pp(t,n)}var Lp;Lp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ue.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,Cv(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,ee&&e.flags&1048576&&Rh(e,rs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fo(t,e),t=e.pendingProps;var i=wr(e,Ce.current);vr(e,n),i=Cu(null,e,r,t,i,n);var o=Pu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(o=!0,ts(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wu(e),i.updater=Ms,e.stateNode=i,i._reactInternals=e,ua(e,r,t,n),e=da(null,e,r,!0,o,n)):(e.tag=0,ee&&o&&pu(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Vv(r),t=rt(r,t),i){case 0:e=fa(null,e,r,t,n);break e;case 1:e=_f(null,e,r,t,n);break e;case 11:e=vf(null,e,r,t,n);break e;case 14:e=yf(null,e,r,rt(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),fa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),_f(t,e,r,i,n);case 3:e:{if(fp(e),t===null)throw Error(S(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Uh(t,e),ss(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=xr(Error(S(423)),e),e=Ef(t,e,r,n,i);break e}else if(r!==i){i=xr(Error(S(424)),e),e=Ef(t,e,r,n,i);break e}else for($e=sn(e.stateNode.containerInfo.firstChild),Ge=e,ee=!0,st=null,n=zh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sr(),r===i){e=Bt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return Wh(e),t===null&&sa(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,ta(r,i)?s=null:o!==null&&ta(r,o)&&(e.flags|=32),cp(t,e),Le(t,e,s,n),e.child;case 6:return t===null&&sa(e),null;case 13:return dp(t,e,n);case 4:return Su(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tr(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),vf(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Y(is,r._currentValue),r._currentValue=s,o!==null)if(ht(o.value,s)){if(o.children===i.children&&!Ue.current){e=Bt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Mt(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),la(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(S(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),la(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vr(e,n),i=Ze(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=rt(r,e.pendingProps),i=rt(r.type,i),yf(t,e,r,i,n);case 15:return ap(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rt(r,i),Fo(t,e),e.tag=1,We(r)?(t=!0,ts(e)):t=!1,vr(e,n),op(e,r,i),ua(e,r,i,n),da(null,e,r,!0,t,n);case 19:return hp(t,e,n);case 22:return up(t,e,n)}throw Error(S(156,e.tag))};function Ap(t,e){return nh(t,e)}function Bv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,n,r){return new Bv(t,e,n,r)}function Fu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vv(t){if(typeof t=="function")return Fu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nu)return 11;if(t===ru)return 14}return 2}function cn(t,e){var n=t.alternate;return n===null?(n=Xe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bo(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Fu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Zn:return Rn(n.children,i,o,e);case tu:s=8,i|=8;break;case kl:return t=Xe(12,n,e,i|2),t.elementType=kl,t.lanes=o,t;case Ml:return t=Xe(13,n,e,i),t.elementType=Ml,t.lanes=o,t;case Dl:return t=Xe(19,n,e,i),t.elementType=Dl,t.lanes=o,t;case Wd:return Fs(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fd:s=10;break e;case Ud:s=9;break e;case nu:s=11;break e;case ru:s=14;break e;case Qt:s=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=Xe(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Rn(t,e,n,r){return t=Xe(7,t,r,e),t.lanes=n,t}function Fs(t,e,n,r){return t=Xe(22,t,r,e),t.elementType=Wd,t.lanes=n,t.stateNode={isHidden:!1},t}function Tl(t,e,n){return t=Xe(6,t,null,e),t.lanes=n,t}function Il(t,e,n){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,i,o,s,l,u){return t=new jv(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(o),t}function $v(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Op(t){if(!t)return dn;t=t._reactInternals;e:{if(jn(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(We(n))return Oh(t,n,e)}return e}function Np(t,e,n,r,i,o,s,l,u){return t=Uu(n,r,!0,t,i,o,s,l,u),t.context=Op(null),n=t.current,r=Re(),i=un(n),o=Mt(r,i),o.callback=e??null,ln(n,o,i),t.current.lanes=i,bi(t,i,r),Be(t,r),t}function Us(t,e,n,r){var i=e.current,o=Re(),s=un(i);return n=Op(n),e.context===null?e.context=n:e.pendingContext=n,e=Mt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ln(i,e,s),t!==null&&(ct(t,i,s,o),Mo(t,i,s)),s}function ps(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Of(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wu(t,e){Of(t,e),(t=t.alternate)&&Of(t,e)}function Gv(){return null}var Rp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bu(t){this._internalRoot=t}Ws.prototype.render=Bu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));Us(t,e,null,null)};Ws.prototype.unmount=Bu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fn(function(){Us(null,t,null,null)}),e[Ut]=null}};function Ws(t){this._internalRoot=t}Ws.prototype.unstable_scheduleHydration=function(t){if(t){var e=uh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xt.length&&e!==0&&e<Xt[n].priority;n++);Xt.splice(n,0,t),n===0&&fh(t)}};function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nf(){}function Hv(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=ps(s);o.call(c)}}var s=Np(e,r,t,0,null,!1,!1,"",Nf);return t._reactRootContainer=s,t[Ut]=s.current,Oi(t.nodeType===8?t.parentNode:t),Fn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ps(u);l.call(c)}}var u=Uu(t,0,!1,null,null,!1,!1,"",Nf);return t._reactRootContainer=u,t[Ut]=u.current,Oi(t.nodeType===8?t.parentNode:t),Fn(function(){Us(e,u,n,r)}),u}function Vs(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=ps(s);l.call(u)}}Us(e,s,t,i)}else s=Hv(n,e,t,i,r);return ps(s)}lh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=li(e.pendingLanes);n!==0&&(su(e,n|1),Be(e,le()),!($&6)&&(Cr=le()+500,_n()))}break;case 13:Fn(function(){var r=Wt(t,1);if(r!==null){var i=Re();ct(r,t,1,i)}}),Wu(t,1)}};lu=function(t){if(t.tag===13){var e=Wt(t,134217728);if(e!==null){var n=Re();ct(e,t,134217728,n)}Wu(t,134217728)}};ah=function(t){if(t.tag===13){var e=un(t),n=Wt(t,e);if(n!==null){var r=Re();ct(n,t,e,r)}Wu(t,e)}};uh=function(){return K};ch=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Hl=function(t,e,n){switch(e){case"input":if(Ul(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ns(r);if(!i)throw Error(S(90));Vd(r),Ul(r,i)}}}break;case"textarea":$d(t,n);break;case"select":e=n.value,e!=null&&hr(t,!!n.multiple,e,!1)}};qd=Mu;Xd=Fn;var bv={usingClientEntryPoint:!1,Events:[Qi,rr,Ns,Qd,Yd,Mu]},ni={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kv={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eh(t),t===null?null:t.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||Gv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{Ps=To.inject(Kv),Tt=To}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bv;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(e))throw Error(S(200));return $v(t,e,null,n)};Ke.createRoot=function(t,e){if(!Vu(t))throw Error(S(299));var n=!1,r="",i=Rp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,null,n,!1,r,i),t[Ut]=e.current,Oi(t.nodeType===8?t.parentNode:t),new Bu(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=eh(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return Fn(t)};Ke.hydrate=function(t,e,n){if(!Bs(e))throw Error(S(200));return Vs(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!Vu(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Rp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Np(e,null,t,1,n??null,i,!1,o,s),t[Ut]=e.current,Oi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ws(e)};Ke.render=function(t,e,n){if(!Bs(e))throw Error(S(200));return Vs(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!Bs(t))throw Error(S(40));return t._reactRootContainer?(Fn(function(){Vs(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};Ke.unstable_batchedUpdates=Mu;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bs(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return Vs(t,e,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function kp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kp)}catch(t){console.error(t)}}kp(),kd.exports=Ke;var Qv=kd.exports,Rf=Qv;Nl.createRoot=Rf.createRoot,Nl.hydrateRoot=Rf.hydrateRoot;const Yv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),qv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),Xv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),Jv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),Zv=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),ey=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),ty=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),ny=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),ry=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),iy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),oy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),sy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),ly=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),ay=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),uy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),cy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),fy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),dy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),hy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"})),py=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M6.854 5.854l.353-.354-.707-.707-.354.353.708.708zM4.5 7.5l-.354-.354-.353.354.353.354L4.5 7.5zm1.646 2.354l.354.353.707-.707-.353-.354-.708.708zM7.5.5V0v.5zm7 7h.5-.5zm-14 0H1 .5zm7 7V14v.5zM6.146 5.146l-2 2 .708.708 2-2-.708-.708zm-2 2.708l2 2 .708-.708-2-2-.708.708zM4.5 8H11V7H4.5v1zm3-7A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zM1 7.5A6.5 6.5 0 017.5 1V0A7.5 7.5 0 000 7.5h1zM7.5 14A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zm0 1A7.5 7.5 0 0015 7.5h-1A6.5 6.5 0 017.5 14v1z",fill:"currentColor"})),gy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M8.146 9.146l-.353.354.707.707.354-.353-.708-.708zM10.5 7.5l.354.354.353-.354-.353-.354-.354.354zM8.854 5.146L8.5 4.793l-.707.707.353.354.708-.708zm0 4.708l2-2-.708-.708-2 2 .708.708zm2-2.708l-2-2-.708.708 2 2 .708-.708zM10.5 7H4v1h6.5V7zm-3 7A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zM14 7.5A6.5 6.5 0 017.5 14v1A7.5 7.5 0 0015 7.5h-1zM7.5 1A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zm0-1A7.5 7.5 0 000 7.5h1A6.5 6.5 0 017.5 1V0z",fill:"currentColor"})),my=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"}),R.createElement("path",{d:"M 9.159 5.175 L 1.166 5.175 C 0.799 5.175 0.5 5.472 0.5 5.841 L 0.5 13.834 C 0.5 14.203 0.799 14.5 1.166 14.5 L 9.159 14.5 C 9.528 14.5 9.825 14.203 9.825 13.834 L 9.825 5.841 C 9.825 5.472 9.528 5.175 9.159 5.175 Z",stroke:"currentColor"})),vy=t=>R.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},R.createElement("path",{d:"M13.5 7.5l-4 4m4-4l-4-4m4 4H3M1.5 1v13",stroke:"currentColor"}),R.createElement("path",{d:"M1.5 7.5l4-4m-4 4l4 4m-4-4H12m1.5 6.5V1",stroke:"currentColor"}));var ve=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.ArrowLeftCircle="ArrowLeftCircle",t.ArrowRightCircle="ArrowRightCircle",t.Measurement="Measurement",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t.Scale="Scale",t))(ve||{});const yy={Line:Yv,Square:qv,Circle:Xv,Direction:Jv,VectorDocument:Zv,LayersDifference:ey,AntiClockwise:sy,Clockwise:ly,Github:ay,Crop:uy,Folder:cy,Save:dy,Svg:ty,Expand:fy,Image:hy,ArrowLeftCircle:py,ArrowRightCircle:gy,Measurement:vy,SolidDown:ny,SolidUp:ry,SolidUpSmall:iy,SolidDownSmall:oy,Scale:my},Mp=({name:t,className:e})=>{const n=yy[t];return M.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:M.jsx(n,{})})};var z=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.SCALE="SCALE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t.ROTATE="ROTATE",t.MEASUREMENT="MEASUREMENT",t))(z||{});const Q=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:o,className:s,iconClassname:l,style:u})=>M.jsx(M.Fragment,{children:M.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(s?" "+s:""),style:u,"data-active":i,onClick:r,title:e,children:[n&&M.jsx(Mp,{name:n,className:l}),t&&M.jsx("span",{children:t}),o]})}),xl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:o,children:s})=>{const[l,u]=R.useState(!1);return M.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[M.jsx(Q,{icon:n,label:t,title:e,"data-active":l,onClick:()=>u(!l),style:o}),M.jsx(Mp,{name:ve.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&M.jsx("div",{className:"flex flex-row gap-1",onClick:()=>u(!1),children:s})]})},Dp=!0,_y=!1,Vo={CCW:-1,CW:1,NOT_ORIENTABLE:0},Ey=2*Math.PI,gs=1,zp=0,vt=2,wy=3,Sy=4,Ty=1,Iy=2,ju=0,_i=1,_r=2;var ms=Object.freeze({__proto__:null,BOUNDARY:vt,CCW:Dp,CONTAINS:wy,CW:_y,END_VERTEX:_r,INSIDE:gs,INTERLACE:Sy,NOT_VERTEX:ju,ORIENTATION:Vo,OUTSIDE:zp,OVERLAP_OPPOSITE:Iy,OVERLAP_SAME:Ty,PIx2:Ey,START_VERTEX:_i});let Ct=1e-6;function Fp(t){Ct=t}function Up(){return Ct}const xy=3;function Ia(t){return t<Ct&&t>-Ct}function Un(t,e){return t-e<Ct&&t-e>-Ct}function Wp(t,e){return t-e>Ct}function Cy(t,e){return t-e>-Ct}function Bp(t,e){return t-e<-Ct}function Py(t,e){return t-e<Ct}var Ly=Object.freeze({__proto__:null,DECIMALS:xy,EQ:Un,EQ_0:Ia,GE:Cy,GT:Wp,LE:Py,LT:Bp,getTolerance:Up,setTolerance:Fp});let a={Utils:Ly,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in ms)a[t]=ms[t];Object.defineProperty(a,"DP_TOL",{get:function(){return Up()},set:function(t){Fp(t)}});class J{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}a.Errors=J;class $u{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,o=n||this.last,s=i;if(s===void 0)return r;do r.push(s),s=s.next;while(s!==o.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw J.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const kf={stroke:"black"};class Ay{constructor(e=kf){for(const n in e)this[n]=e[n];this.stroke=e.stroke??kf.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function $n(t){return new Ay(t).toAttributesString()}function jr(t,e){let n=[],[r,i,o]=t.standard,[s,l,u]=e.standard,c=r*l-i*s,f=o*l-i*u,d=r*u-o*s;if(!a.Utils.EQ_0(c)){let h,v;i===0?(h=o/r,v=d/c):l===0?(h=u/s,v=d/c):r===0?(h=f/c,v=o/i):s===0?(h=f/c,v=u/l):(h=f/c,v=d/c),n.push(new a.Point(h,v))}return n}function Gn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(a.Utils.EQ(i,e.r))n.push(r);else if(a.Utils.LT(i,e.r)){let o=Math.sqrt(e.r*e.r-i*i),s,l;s=t.norm.rotate90CCW().multiply(o),l=r.translate(s),n.push(l),s=t.norm.rotate90CW().multiply(o),l=r.translate(s),n.push(l)}return n}function Pr(t,e){let n=[];for(let r of e.toSegments()){let i=qi(r,t);for(let o of i)Yp(o,n)||n.push(o)}return n}function js(t,e){let n=[];if(Pr(t,e.box).length===0)return n;let r=new a.Circle(e.pc,e.r),i=Gn(t,r);for(let o of i)o.on(e)&&n.push(o);return n}function qi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new a.Line(t.ps,t.pe);return jr(r,e)}function $s(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let o=jr(r,i);o.length>0&&Mf(o[0],t)&&Mf(o[0],e)&&n.push(o[0])}return n}function Mf(t,e){const n=e.box;return a.Utils.LE(t.x,n.xmax)&&a.Utils.GE(t.x,n.xmin)&&a.Utils.LE(t.y,n.ymax)&&a.Utils.GE(t.y,n.ymin)}function Gs(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[o,s]=t.ps.distanceTo(e.pc);return a.Utils.EQ(o,e.r)&&n.push(t.ps),n}let r=new a.Line(t.ps,t.pe),i=Gn(r,e);for(let o of i)o.on(t)&&n.push(o);return n}function $r(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new a.Line(t.ps,t.pe),i=new a.Circle(e.pc,e.r),o=Gn(r,i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Oy(t,e){let n=[];for(let r of e.toSegments()){let i=$s(r,t);for(let o of i)n.push(o)}return n}function Vp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new a.Vector(t.pc,e.pc),i=t.r,o=e.r;if(a.Utils.EQ_0(i)||a.Utils.EQ_0(o))return n;if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y)&&a.Utils.EQ(i,o))return n.push(t.pc.translate(-i,0)),n;let s=t.pc.distanceTo(e.pc)[0];if(a.Utils.GT(s,i+o)||a.Utils.LT(s,Math.abs(i-o)))return n;r.x/=s,r.y/=s;let l;if(a.Utils.EQ(s,i+o)||a.Utils.EQ(s,Math.abs(i-o)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let u=i*i/(2*s)-o*o/(2*s)+s/2,c=t.pc.translate(u*r.x,u*r.y),f=Math.sqrt(i*i-u*u);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Ny(t,e){let n=[];for(let r of e.toSegments()){let i=Gs(r,t);for(let o of i)n.push(o)}return n}function jp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&a.Utils.EQ(t.r,e.r)){let s;return s=t.start,s.on(e)&&n.push(s),s=t.end,s.on(e)&&n.push(s),s=e.start,s.on(t)&&n.push(s),s=e.end,s.on(t)&&n.push(s),n}let r=new a.Circle(t.pc,t.r),i=new a.Circle(e.pc,e.r),o=r.intersect(i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Gu(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&a.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new a.Circle(t.pc,t.r),o=Vp(r,i);for(let s of o)s.on(t)&&n.push(s);return n}function Ry(t,e){let n=[];for(let r of e.toSegments()){let i=$r(r,t);for(let o of i)n.push(o)}return n}function $p(t,e){return t.isSegment?$s(t.shape,e):$r(e,t.shape)}function Gp(t,e){return t.isSegment?$r(t.shape,e):jp(t.shape,e)}function Hp(t,e){return t.isSegment?qi(t.shape,e):js(e,t.shape)}function ky(t,e){return t.isSegment?Ku(e,t.shape):Qu(e,t.shape)}function My(t,e){return t.isSegment?Gs(t.shape,e):Gu(t.shape,e)}function Hu(t,e){let n=[];for(let r of e.edges)for(let i of $p(r,t))n.push(i);return n}function bu(t,e){let n=[];for(let r of e.edges)for(let i of Gp(r,t))n.push(i);return n}function Xi(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Hp(r,t))Yp(i,n)||n.push(i);return t.sortPoints(n)}function bp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of My(r,t))n.push(i);return n}function Kp(t,e){return t.isSegment?$p(e,t.shape):t.isArc?Gp(e,t.shape):t.isLine?Hp(e,t.shape):t.isRay?ky(e,t.shape):[]}function Qp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Kp(t,i)];return n}function Dy(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...Qp(r,e)];return n}function zy(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...Qp(r,e)];return n}function Fy(t,e){return t instanceof a.Line?Xi(t,e):t instanceof a.Segment?Hu(t,e):t instanceof a.Arc?bu(t,e):[]}function Yp(t,e){return e.some(n=>n.equalTo(t))}function hn(t){return new a.Line(t.start,t.norm)}function Ku(t,e){return qi(e,hn(t)).filter(n=>t.contains(n))}function Qu(t,e){return js(hn(t),e).filter(n=>t.contains(n))}function qp(t,e){return Gn(hn(t),e).filter(n=>t.contains(n))}function Uy(t,e){return Pr(hn(t),e).filter(n=>t.contains(n))}function Xp(t,e){return jr(hn(t),e).filter(n=>t.contains(n))}function Wy(t,e){return jr(hn(t),hn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function Jp(t,e){return Xi(hn(t),e).filter(n=>t.contains(n))}function Zp(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw J.UNSUPPORTED_SHAPE_TYPE}function Ji(t,e){let n=[];for(let r of e)n=[...n,...Zp(r,r.shape)];return n}function By(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...Zp(r,i)];return n}let Hn=class ui extends $u{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,o=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray||u instanceof a.Line,s=u=>u instanceof a.Segment||u instanceof a.Arc||u instanceof a.Ray,l=u=>u instanceof a.Segment||u instanceof a.Arc;if(n=i===1&&o(r[0])||i>1&&s(r[0])&&s(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(u=>u instanceof a.Ray||u instanceof a.Line);for(let u of r){let c=new a.Edge(u);this.append(c)}this.setArcLength()}else throw a.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new ui(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return this.insert(i,o),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Line){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Circle){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Segment){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){const[n,r]=a.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof a.Multiline)return a.Distance.multiline2multiline(this,e);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof a.Multiline?By(this,e):Ji(e,this)}contains(e){if(e instanceof a.Point)return this.edges.some(n=>n.shape.contains(e));throw a.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new ui(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new a.Point){return new ui(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new a.Matrix){return new ui(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${$n({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};a.Multiline=Hn;const Vy=(...t)=>new a.Multiline(...t);a.multiline=Vy;function Lr(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let o=0;i[0]===null?o=0:i[1]===null?o=t.shape.length:o=i[0].length;let s=ju;Un(o,0)&&(s|=_i),Un(o,t.shape.length)&&(s|=_r);let l;o===1/0?l=i[0].coord(e):l=s&_r&&t.next&&t.next.arc_length===0?0:t.arc_length+o,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:s})}function Wi(t){t.int_points1_sorted=qt(t.int_points1),t.int_points2_sorted=qt(t.int_points2)}function qt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(jy)}function jy(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function Yu(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,o;for(let s=0;s<t.int_points1_sorted.length;s++)if(t.int_points1_sorted[s].id!==-1){n=t.int_points1_sorted[s],r=t.int_points2[n.id];for(let l=s+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!Un(i.arc_length,n.arc_length));l++)i.id!==-1&&(o=t.int_points2[i.id],o.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&o.edge_before===r.edge_before&&o.edge_after===r.edge_after&&(i.id=-1,o.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let s=1;s<t.int_points2_sorted.length;s++){let l=t.int_points2_sorted[s];if(l.id===-1)continue;if(r.id===-1||!Un(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let u=t.int_points1[l.id];u.edge_before===n.edge_before&&u.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(u.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(s=>s.id>=0),t.int_points2=t.int_points2.filter(s=>s.id>=0),t.int_points1.forEach((s,l)=>s.id=l),t.int_points2.forEach((s,l)=>s.id=l))}function xa(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=vt),e.edge_after&&(e.edge_after.bvStart=vt)}function Ca(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function $y(t){let e,n,r,i=t.int_points1.length;for(let o=0;o<i;o++){let s=t.int_points1_sorted[o];s.face!==e&&(n=o,e=s.face);let l=o,u=Ar(t.int_points1_sorted,o,e),c;l+u<i&&t.int_points1_sorted[l+u].face===e?c=l+u:c=n;let f=Ar(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[s.id].face){r=p;break}}if(r===null)continue;let d=s.edge_after,h=r.edge_before;if(!(d.bv===vt&&h.bv===vt)||d!==h)continue;let v=t.int_points2[s.id],_=t.int_points2[r.id],y=v.edge_after,T=_.edge_before;y.bv===vt&&T.bv===vt&&y===T||(v=t.int_points2[r.id],_=t.int_points2[s.id],y=v.edge_after,T=_.edge_before),y.bv===vt&&T.bv===vt&&y===T&&d.setOverlap(y)}}function Ar(t,e,n){let r,i,o=1;if(t.length===1)return 1;r=t[e];for(let s=e+1;s<t.length&&!(r.face!==n||(i=t[s],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));s++)o++;return o}function Or(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=ju,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=_i),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=_r),n.is_vertex&_i){n.edge_before=r.prev,r.prev&&(n.is_vertex=_r);continue}if(n.is_vertex&_r)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof Hn&&n.is_vertex&_i&&(n.edge_after=t.first)}}function Df(t,e,n){const r=t.edge_before,i=e.edge_after,o=n.length;r.next=n[0],n[0].prev=r,n[o-1].next=i,i.prev=n[o-1]}const{INSIDE:Et,OUTSIDE:wt,BOUNDARY:de,OVERLAP_SAME:Gy,OVERLAP_OPPOSITE:Hy}=ms,{NOT_VERTEX:Zw,START_VERTEX:zf,END_VERTEX:Ff}=ms,Hs=1,Zi=2,Wn=3;function by(t,e){let[n,r]=eo(t,e,Hs,!0);return n}function Pa(t,e){let r=e.clone().reverse(),[i,o]=eo(t,r,Wn,!0);return i}function eg(t,e){let[n,r]=eo(t,e,Zi,!0);return n}function tg(t,e){let[n,r]=eo(t,e,Zi,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(l=>l.shape)];let o=[];for(let s of r.faces)o=[...o,...[...s.edges].map(l=>l.shape)];return[i,o]}function La(t,e){let[n,r]=eo(t,e,Wn,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(s=>s.shape)];return i}function ng(t,e){let n=t.clone(),r=e.clone(),i=rg(n,r);Wi(i),Or(n,i.int_points1_sorted),Or(r,i.int_points2_sorted),Yu(i),Wi(i);let o=i.int_points1_sorted.map(l=>l.pt),s=i.int_points2_sorted.map(l=>l.pt);return[o,s]}function Ky(t,e,n,r){let i=Uf(t,n.int_points1),o=Uf(e,n.int_points2);for(Wf(i,e),Wf(o,t),xa(n.int_points1),xa(n.int_points2),Ca(n.int_points1,e),Ca(n.int_points2,t);Yy(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););$y(n),Aa(t,r,n.int_points1_sorted,!0),Aa(e,r,n.int_points2_sorted,!1),Bf(t,i,r,!0),Bf(e,o,r,!1)}function Qy(t,e,n,r){qy(t,e,r,n.int_points2),Xy(t,e,n),Oa(t,n.int_points1),Oa(e,n.int_points2),Na(t,n.int_points1,n.int_points2),Na(t,n.int_points2,n.int_points1)}function eo(t,e,n,r){let i=t.clone(),o=e.clone(),s=rg(i,o);return Wi(s),Or(i,s.int_points1_sorted),Or(o,s.int_points2_sorted),Yu(s),Wi(s),Ky(i,o,s,n),r&&Qy(i,o,s,n),[i,o]}function rg(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let o of i){let s=r.shape.intersect(o.shape);for(let l of s)Lr(r,l,n.int_points1),Lr(o,l,n.int_points2)}}return n}function Uf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Wf(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Yy(t,e,n,r,i,o){let s,l,u,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==s&&(l=d,s=h.face);let v=d,_=Ar(r,d,s),y;v+_<c&&r[v+_].face===s?y=v+_:y=l;let T=Ar(r,y,s);u=null;for(let m=y;m<y+T;m++){let E=r[m];if(E.face===s&&i[E.id].face===i[h.id].face){u=E;break}}if(u===null)continue;let g=h.edge_after,p=u.edge_before;if(g.bv===de&&p.bv!=de){g.bv=p.bv;continue}if(g.bv!=de&&p.bv===de){p.bv=g.bv;continue}if(g.bv===de&&p.bv===de&&g!=p||g.bv===Et&&p.bv===wt||g.bv===wt&&p.bv===Et){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===de&&p.bv===de&&g!=p){let m=g.next,E;for(;m!=p;){if(m.bv!=de){if(E===void 0)E=m.bv;else if(m.bv!=E)throw J.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}E!=null&&(g.bv=E,p.bv=E);continue}if(g.bv===Et&&p.bv===wt||g.bv===wt&&p.bv===Et){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[E,I]=m.shape.distanceTo(e);if(E<10*a.DP_TOL){Lr(m,I.ps,n);let C=n[n.length-1];if(C.is_vertex&zf)C.edge_after=m,C.edge_before=m.prev,m.bvStart=de,m.bv=void 0,m.setInclusion(e);else if(C.is_vertex&Ff)C.edge_after=m.next,m.bvEnd=de,m.bv=void 0,m.setInclusion(e);else{let G=e.addVertex(C.pt,m);C.edge_before=G,C.edge_after=G.next,G.setInclusion(e),G.next.bvStart=de,G.next.bvEnd=void 0,G.next.bv=void 0,G.next.setInclusion(e)}let L=e.findEdgeByPoint(I.pe);Lr(L,I.pe,i);let N=i[i.length-1];if(N.is_vertex&zf)N.edge_after=L,N.edge_before=L.prev;else if(N.is_vertex&Ff)N.edge_after=L.next;else{let G=i.find(Ve=>Ve.edge_after===L),k=e.addVertex(N.pt,L);N.edge_before=k,N.edge_after=k.next,G&&(G.edge_after=k),k.bvStart=void 0,k.bvEnd=de,k.bv=void 0,k.setInclusion(t),k.next.bvStart=de,k.next.bvEnd=void 0,k.next.bv=void 0,k.next.setInclusion(t)}Wi(o),f=!0;break}}m=m.next}if(f)break;throw J.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function Aa(t,e,n,r){if(!n)return;let i,o,s,l;for(let u=0;u<n.length;u++){if(s=n[u],s.face!==i&&(o=u,i=s.face),i.isEmpty())continue;let c=u,f=Ar(n,u,i),d;c+f<n.length&&n[c+f].face===s.face?d=c+f:d=o,l=n[d];let h=d,v=Ar(n,h,i),_=s.edge_after,y=l.edge_before;if(_.bv===Et&&y.bv===Et&&e===Hs||_.bv===wt&&y.bv===wt&&e===Zi||(_.bv===wt||y.bv===wt)&&e===Wn&&!r||(_.bv===Et||y.bv===Et)&&e===Wn&&r||_.bv===de&&y.bv===de&&_.overlap&Gy&&r||_.bv===de&&y.bv===de&&_.overlap&Hy){t.removeChain(i,_,y);for(let T=c;T<c+f;T++)n[T].edge_after=void 0;for(let T=h;T<h+v;T++)n[T].edge_before=void 0}u+=f-1}}function qy(t,e,n,r){for(let i of e.faces){for(let o of i)t.edges.add(o);r.find(o=>o.face===i)===void 0&&t.addFace(i.first,i.last)}}function Xy(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],o=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&o.edge_before===void 0&&o.edge_after!==void 0&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before),o.edge_before!==void 0&&o.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(o.edge_before.next=i.edge_after,i.edge_after.prev=o.edge_before,o.edge_after=i.edge_after,i.edge_before=o.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let s of n.int_points1_sorted)s!==i&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(i.pt)&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before);if(o.edge_before!==void 0&&o.edge_after===void 0)for(let s of n.int_points2_sorted)s!==o&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(o.pt)&&(o.edge_before.next=s.edge_after,s.edge_after.prev=o.edge_before,o.edge_after=s.edge_after,s.edge_before=o.edge_before)}}function Oa(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Na(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,o=r.edge_before;try{$u.testInfiniteLoop(i)}catch{throw J.CANNOT_COMPLETE_BOOLEAN_OPERATION}let s=t.addFace(i,o);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s)}}function Bf(t,e,n,r){for(let i of e){let o=i.first.bv;(n===Hs&&o===Et||n===Wn&&o===Et&&r||n===Wn&&o===wt&&!r||n===Zi&&o===wt)&&t.deleteFace(i)}}var Jy=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:Zi,BOOLEAN_SUBTRACT:Wn,BOOLEAN_UNION:Hs,calculateIntersections:ng,innerClip:tg,intersect:eg,outerClip:La,removeNotRelevantChains:Aa,removeOldFaces:Oa,restoreFaces:Na,subtract:Pa,unify:by});const Zy=RegExp("T.F..FFF.|T.F...F.."),e1=RegExp("T........|.T.......|...T.....|....T...."),t1=RegExp("FT.......|F..T.....|F...T...."),n1=RegExp("T.F..F..."),r1=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Gr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return Zy.test(this.toString())}intersect(){return e1.test(this.toString())}touch(){return t1.test(this.toString())}inside(){return n1.test(this.toString())}covered(){return r1.test(this.toString())}}function Ei(t,e){let n,r=new a.Ray(e),i=new a.Line(r.pt,r.norm);const o=new a.Box(r.box.xmin-a.DP_TOL,r.box.ymin-a.DP_TOL,r.box.xmax,r.box.ymax+a.DP_TOL);if(t.box.not_intersect(o))return a.OUTSIDE;let s=t.edges.search(o);if(s.length===0)return a.OUTSIDE;for(let f of s)if(f.shape.contains(e))return a.BOUNDARY;let l=[...t.faces],u=[];for(let f of s)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return a.BOUNDARY;u.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}u.sort((f,d)=>Bp(f.pt.x,d.pt.x)?-1:Wp(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<u.length;f++){let d=u[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.prev===u[f-1].edge)continue;let h=d.edge.prev;for(;Ia(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),_=d.pt.translate(v),y=d.edge.shape.tangentInStart(),T=d.pt.translate(y),g=_.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(u[f-1].pt)&&d.face_index===u[f-1].face_index&&d.edge.next===u[f-1].edge)continue;let h=d.edge.next;for(;Ia(h.length);)h=h.next;let v=h.shape.tangentInStart(),_=d.pt.translate(v),y=d.edge.shape.tangentInEnd(),T=d.pt.translate(y),g=_.leftTo(i),p=T.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof a.Segment)c++;else{let h=d.edge.shape.box;Un(d.pt.y,h.ymin)||Un(d.pt.y,h.ymax)||c++}}return n=c%2===1?gs:zp,n}function i1(t,e){return Hr(t,e).equal()}function ig(t,e){return Hr(t,e).intersect()}function o1(t,e){return Hr(t,e).touch()}function s1(t,e){return!ig(t,e)}function og(t,e){return Hr(t,e).inside()}function sg(t,e){return Hr(t,e).covered()}function l1(t,e){return og(e,t)}function lg(t,e){return sg(e,t)}function Hr(t,e){if(t instanceof a.Line&&e instanceof a.Line)return a1(t,e);if(t instanceof a.Line&&e instanceof a.Circle)return u1(t,e);if(t instanceof a.Line&&e instanceof a.Box)return c1(t,e);if(t instanceof a.Line&&e instanceof a.Polygon)return f1(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&e instanceof a.Polygon)return Vf(t,e);if((t instanceof a.Segment||t instanceof a.Arc)&&(e instanceof a.Circle||e instanceof a.Box))return Vf(t,new a.Polygon(e));if(t instanceof a.Polygon&&e instanceof a.Polygon)return Io(t,e);if((t instanceof a.Circle||t instanceof a.Box)&&(e instanceof a.Circle||e instanceof a.Box))return Io(new a.Polygon(t),new a.Polygon(e));if((t instanceof a.Circle||t instanceof a.Box)&&e instanceof a.Polygon)return Io(new a.Polygon(t),e);if(t instanceof a.Polygon&&(e instanceof a.Circle||e instanceof a.Box))return Io(t,new a.Polygon(e))}function a1(t,e){let n=new Gr,r=jr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function u1(t,e){let n=new Gr,r=Gn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Hn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon([e.toArc()]).cutWithLine(t)}return n}function c1(t,e){let n=new Gr,r=Pr(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Hn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[s[1]],n.I2E=[s[0],s[2]],n.E2I=[e]):(n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new a.Polygon(e.toSegments()).cutWithLine(t))}return n}function f1(t,e){let n=new Gr,r=Xi(t,e),i=new Hn([t]),o=r.length>0?r.slice():t.sortPoints(r);return i.split(o),[...i].forEach(s=>s.setInclusion(e)),n.I2I=[...i].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...i].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...i].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.E2I=e.cutWithLine(t),n}function Vf(t,e){let n=new Gr,r=Fy(t,e),i=r.length>0?r.slice():t.sortPoints(r),o=new Hn([t]);o.split(i),[...o].forEach(s=>s.setInclusion(e)),n.I2I=[...o].filter(s=>s.bv===a.INSIDE).map(s=>s.shape),n.I2B=[...o].slice(1).map(s=>s.bv===a.BOUNDARY?s.shape:s.shape.start),n.I2E=[...o].filter(s=>s.bv===a.OUTSIDE).map(s=>s.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let s of[t.start,t.end])switch(Ei(e,s)){case a.INSIDE:n.B2I.push(s);break;case a.BOUNDARY:n.B2B.push(s);break;case a.OUTSIDE:n.B2E.push(s);break}return n}function Io(t,e){let n=new Gr,[r,i]=ng(t,e),o=eg(t,e),s=Pa(t,e),l=Pa(e,t),[u,c]=tg(t,e),f=La(t,e),d=La(e,t);return n.I2I=o.isEmpty()?[]:[o],n.I2B=c,n.I2E=s.isEmpty()?[]:[s],n.B2I=u,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var qu=Object.freeze({__proto__:null,contain:l1,cover:lg,covered:sg,disjoint:s1,equal:i1,inside:og,intersect:ig,relate:Hr,touch:o1});class lt{constructor(e=1,n=0,r=0,i=1,o=0,s=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s}clone(){return new lt(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new lt(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw J.ILLEGAL_PARAMETERS;return this.multiply(new lt(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),o=Math.sin(e);return this.translate(n,r).multiply(new lt(i,o,-o,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new lt(e,0,0,n,0,0))}equalTo(e){return!(!a.Utils.EQ(this.tx,e.tx)||!a.Utils.EQ(this.ty,e.ty)||!a.Utils.EQ(this.a,e.a)||!a.Utils.EQ(this.b,e.b)||!a.Utils.EQ(this.c,e.c)||!a.Utils.EQ(this.d,e.d))}}a.Matrix=lt;const d1=(...t)=>new a.Matrix(...t);a.matrix=d1;const h1=class Ra{constructor(e,n){this.low=e,this.high=n}clone(){return new Ra(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new Ra(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},me=0,b=1;class Tn{constructor(e=void 0,n=void 0,r=null,i=null,o=null,s=b){if(this.left=r,this.right=i,this.parent=o,this.color=s,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,u]=e;l>u&&([l,u]=[u,l]),this.item.key=new h1(l,u)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===b}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class Bi{constructor(){this.root=null,this.nil_node=new Tn}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new Tn(e,n,this.nil_node,this.nil_node,null,me);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new Tn(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new Tn(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new Tn(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(o=>n(o.item.value,o.item.key))}intersect_any(e){let n=new Tn(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new Bi;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new Tn(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===me;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===me?(n.parent.color=b,r.color=b,n.parent.parent.color=me,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=b,n.parent.parent.color=me,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===me?(n.parent.color=b,r.color=b,n.parent.parent.color=me,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=b,n.parent.parent.color=me,this.rotate_left(n.parent.parent)));this.root.color=b}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===b&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===b;)n===n.parent.left?(r=n.parent.right,r.color===me&&(r.color=b,n.parent.color=me,this.rotate_left(n.parent),r=n.parent.right),r.left.color===b&&r.right.color===b?(r.color=me,n=n.parent):(r.right.color===b&&(r.color=me,r.left.color=b,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=b,r.right.color=b,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===me&&(r.color=b,n.parent.color=me,this.rotate_right(n.parent),r=n.parent.left),r.left.color===b&&r.right.color===b?(r.color=me,n=n.parent):(r.left.color===b&&(r.color=me,r.right.color=b,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=b,r.left.color=b,this.rotate_right(n.parent),n=this.root));n.color=b}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===me&&(n.left.color===b&&n.right.color===b||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===b&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class p1 extends Set{constructor(e){super(e),this.index=new Bi,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,o=r||e.box,s=i||e;return super.add(s),this.size>n&&this.index.insert(o,s),this}delete(e){const{key:n,value:r}=e,i=n||e.box,o=r||e;let s=super.delete(o);return s&&this.index.remove(i,o),s}clear(){super.clear(),this.index=new Bi}search(e){return this.index.search(e)}hit(e){let n=new a.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}a.PlanarSet=p1;class En{get name(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new lt().translate(...e))}rotate(e,n=new a.Point){return this.transform(new lt().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new lt().scale(e,n))}transform(...e){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}}let w=class ag extends En{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw J.ILLEGAL_PARAMETERS}}get box(){return new a.Box(this.x,this.y,this.x,this.y)}clone(){return new a.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}lessThan(e){return!!(a.Utils.LT(this.y,e.y)||a.Utils.EQ(this.y,e.y)&&a.Utils.LT(this.x,e.x))}transform(e){return new a.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new a.Vector(this,e.pt);if(a.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new a.Vector(e.pt,this);return a.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof ag){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new a.Segment(this,e)]}if(e instanceof a.Line)return a.Distance.point2line(this,e);if(e instanceof a.Circle)return a.Distance.point2circle(this,e);if(e instanceof a.Segment)return a.Distance.point2segment(this,e);if(e instanceof a.Arc)return a.Distance.point2arc(this,e);if(e instanceof a.Polygon)return a.Distance.point2polygon(this,e);if(e instanceof a.PlanarSet)return a.Distance.shape2planarSet(this,e);if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}on(e){if(e instanceof a.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw a.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${$n({fill:"red",...e})} />`}};a.Point=w;const g1=(...t)=>new a.Point(...t);a.point=g1;let tt=class extends En{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof a.Point&&r instanceof a.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return a.Utils.EQ(this.x,e.x)&&a.Utils.EQ(this.y,e.y)}multiply(e){return new a.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!a.Utils.EQ_0(this.length))return new a.Vector(this.x/this.length,this.y/this.length);throw J.ZERO_DIVISION}rotate(e,n=new a.Point){if(n.x===0&&n.y===0)return this.transform(new lt().rotate(e));throw J.OPERATION_IS_NOT_SUPPORTED}transform(e){return new a.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new a.Vector(-this.y,this.x)}rotate90CW(){return new a.Vector(this.y,-this.x)}invert(){return new a.Vector(-this.x,-this.y)}add(e){return new a.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new a.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};a.Vector=tt;const ug=(...t)=>new a.Vector(...t);a.vector=ug;let yt=class ka extends En{constructor(...e){if(super(),this.ps=new a.Point,this.pe=new a.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new a.Point(n[0],n[1]),this.pe=new a.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new a.Point(n.x,n.y),this.pe=new a.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof a.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof a.Point&&e[1]instanceof a.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new a.Point(e[0],e[1]),this.pe=new a.Point(e[2],e[3]);return}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new a.Vector(this.start,this.end).slope}get box(){return new a.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return a.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return qi(this,e);if(e instanceof a.Ray)return Ku(e,this);if(e instanceof a.Segment)return $s(this,e);if(e instanceof a.Circle)return Gs(this,e);if(e instanceof a.Box)return Oy(this,e);if(e instanceof a.Arc)return $r(this,e);if(e instanceof a.Polygon)return Hu(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.segment2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.segment2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2segment(this,e);return[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.segment2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}tangentInStart(){return new a.Vector(this.start,this.end).normalize()}tangentInEnd(){return new a.Vector(this.end,this.start).normalize()}reverse(){return new ka(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new a.Segment(this.start,e),new a.Segment(e,this.end)]}middle(){return new a.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new a.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=a.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new a.Matrix){return new ka(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new a.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${$n(e)} />`}};a.Segment=yt;const m1=(...t)=>new a.Segment(...t);a.segment=m1;let{vector:ri}=a,St=class cg extends En{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new a.Point(n),this.norm=new a.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof a.Point&&r instanceof a.Point){this.pt=n,this.norm=cg.points2norm(n,r),this.norm.dot(ri(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Point&&r instanceof a.Vector){if(a.Utils.EQ_0(r.x)&&a.Utils.EQ_0(r.y))throw J.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(ri(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof a.Vector&&r instanceof a.Point){if(a.Utils.EQ_0(n.x)&&a.Utils.EQ_0(n.y))throw J.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(ri(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new a.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new a.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(ri(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return a.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))}coord(e){return ri(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return jr(this,e);if(e instanceof a.Ray)return Xp(e,this);if(e instanceof a.Circle)return Gn(this,e);if(e instanceof a.Box)return Pr(this,e);if(e instanceof a.Segment)return qi(e,this);if(e instanceof a.Arc)return js(this,e);if(e instanceof a.Polygon)return Xi(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof a.Point)return[new a.Ray(e,this.norm),new a.Ray(e,this.norm)];{let n=new a.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new a.Point){return new a.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=Pr(this,e);if(r.length===0)return"";let i=r[0],o=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return o===void 0&&(o=i),new a.Segment(i,o).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw J.ILLEGAL_PARAMETERS;return new a.Vector(e,n).normalize().rotate90CCW()}};a.Line=St;const v1=(...t)=>new a.Line(...t);a.line=v1;let jo=class extends En{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new a.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new a.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new a.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof a.Point)return a.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof a.Segment)return a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Arc)return this.intersect(e).length===0&&a.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&a.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof a.Circle)return this.intersect(e).length===0&&a.Utils.LE(e.r,this.r)&&a.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new a.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw J.OPERATION_IS_NOT_SUPPORTED;return new a.Circle(this.pc,this.r*e)}transform(e=new a.Matrix){return new a.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Gn(e,this);if(e instanceof a.Ray)return qp(e,this);if(e instanceof a.Segment)return Gs(e,this);if(e instanceof a.Circle)return Vp(e,this);if(e instanceof a.Box)return Ny(this,e);if(e instanceof a.Arc)return Gu(e,this);if(e instanceof a.Polygon)return bp(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.circle2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.circle2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline){let[n,r]=a.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${$n({fill:"none",...e})} />`}};a.Circle=jo;const y1=(...t)=>new a.Circle(...t);a.circle=y1;class Ma extends En{constructor(...e){if(super(),this.pc=new a.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=a.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:o,counterClockwise:s}=e[0];this.pc=new a.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=o,this.counterClockwise=s}else{let[n,r,i,o,s]=[...e];n&&n instanceof a.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),o!==void 0&&(this.endAngle=o),s!==void 0&&(this.counterClockwise=s)}}clone(){return new a.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(a.Utils.EQ(this.startAngle,this.endAngle))return 0;if(a.Utils.EQ(Math.abs(this.startAngle-this.endAngle),a.PIx2))return a.PIx2;let e;return this.counterClockwise?e=a.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+a.PIx2:e=a.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+a.PIx2,a.Utils.GT(e,a.PIx2)&&(e-=a.PIx2),a.Utils.LT(e,0)&&(e+=a.PIx2),e}get start(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new a.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new a.Box);return n=n.merge(this.end.box),n}contains(e){if(!a.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new a.Vector(this.pc,e).slope,r=new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return a.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new a.Vector(this.pc,e).slope;return[new a.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new a.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new a.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new a.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return js(e,this);if(e instanceof a.Ray)return Qu(e,this);if(e instanceof a.Circle)return Gu(this,e);if(e instanceof a.Segment)return $r(e,this);if(e instanceof a.Box)return Ry(this,e);if(e instanceof a.Arc)return jp(this,e);if(e instanceof a.Polygon)return bu(this,e);if(e instanceof a.Multiline)return Ji(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle){let[n,r]=a.Distance.arc2circle(this,e);return[n,r]}if(e instanceof a.Line){let[n,r]=a.Distance.arc2line(this,e);return[n,r]}if(e instanceof a.Segment){let[n,r]=a.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Arc){let[n,r]=a.Distance.arc2arc(this,e);return[n,r]}if(e instanceof a.Polygon){let[n,r]=a.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof a.PlanarSet){let[n,r]=a.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof a.Multiline)return a.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let o=0;o<4;o++)r[o].on(this)&&i.push(new a.Arc(this.pc,this.r,this.startAngle,n[o],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,u)=>l.length-u.length);for(let l=0;l<i.length;l++){let u=e.length>0?e[e.length-1]:void 0,c;u?c=new a.Arc(this.pc,this.r,u.endAngle,i[l].endAngle,this.counterClockwise):c=new a.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),a.Utils.EQ_0(c.length)||e.push(c.clone())}let o=e.length>0?e[e.length-1]:void 0,s;o?s=new a.Arc(this.pc,this.r,o.endAngle,this.endAngle,this.counterClockwise):s=new a.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!a.Utils.EQ_0(s.length)&&!a.Utils.EQ(s.sweep,2*Math.PI)&&e.push(s.clone())}return e}tangentInStart(){let e=new a.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new a.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new a.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new a.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),o=this.counterClockwise;return e.a*e.d<0&&(o=!o),a.Arc.arcSE(i,n,r,o)}static arcSE(e,n,r,i){let{vector:o}=a,s=o(e,n).slope,l=o(e,r).slope;a.Utils.EQ(s,l)&&(l+=2*Math.PI,i=!0);let u=o(e,n).length;return new a.Arc(e,u,s,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,o)=>i+o.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new a.Line(this.start,this.end),r=this.pc.leftTo(n),o=new a.Segment(this.start,this.end).definiteIntegral(e),s=this.circularSegmentArea();return r?o-s:o+s}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=a;return e.slice().sort((r,i)=>{let o=n(this.pc,r).slope,s=n(this.pc,i).slope;return o<s?-1:o>s?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return a.Utils.EQ(this.sweep,2*Math.PI)?new a.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${$n({fill:"none",...e})} />`}}a.Arc=Ma;const _1=(...t)=>new a.Arc(...t);a.arc=_1;class Dt extends En{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new Dt(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new a.Point(this.xmin,this.ymin)}get high(){return new a.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new a.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Dt(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new a.Point(this.xmin,this.ymin),new a.Point(this.xmax,this.ymin),new a.Point(this.xmax,this.ymax),new a.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new a.Segment(e[0],e[1]),new a.Segment(e[1],e[2]),new a.Segment(e[2],e[3]),new a.Segment(e[3],e[0])]}rotate(e,n=new a.Point){throw J.OPERATION_IS_NOT_SUPPORTED}transform(e=new a.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new Dt)}contains(e){if(e instanceof a.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof a.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof a.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof a.Circle)return this.contains(e.box);if(e instanceof a.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>$r(n,e).length===0);if(e instanceof a.Line||e instanceof a.Ray)return!1;if(e instanceof a.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof a.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${$n({fill:"none",...e})} />`}}a.Box=Dt;const E1=(...t)=>new a.Box(...t);a.box=E1;class w1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof a.Segment}get isArc(){return this.shape instanceof a.Arc}get isLine(){return this.shape instanceof a.Line}get isRay(){return this.shape instanceof a.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof a.Line||this.shape instanceof a.Ray)return this.bv=a.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=Ei(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=Ei(e,this.end)),this.bvStart===a.OUTSIDE||this.bvEnd==a.OUTSIDE)this.bv=a.OUTSIDE;else if(this.bvStart===a.INSIDE||this.bvEnd==a.INSIDE)this.bv=a.INSIDE;else{let n=Ei(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof a.Segment&&i instanceof a.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=a.OVERLAP_OPPOSITE):(r instanceof a.Arc&&i instanceof a.Arc||r instanceof a.Segment&&i instanceof a.Arc||r instanceof a.Arc&&i instanceof a.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=a.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=a.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof a.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof a.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(a.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,o=new a.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),s=new a.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}
                    A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}a.Edge=w1;class S1 extends $u{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class cr extends S1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof a.Point)){let i=cr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(s=>new a.Point(s[0],s[1])),o=cr.points2segments(i);this.shapes2face(e.edges,o)}else if(r.every(i=>i instanceof a.Segment||i instanceof a.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let o of r){let s;o.name==="segment"?s=new a.Segment(o):s=new a.Arc(o),i.push(s)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof cr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof a.Circle)this.shapes2face(e.edges,[n[0].toArc(Dp)]);else if(n[0]instanceof a.Box){let r=n[0];this.shapes2face(e.edges,[new a.Segment(new a.Point(r.xmin,r.ymin),new a.Point(r.xmax,r.ymin)),new a.Segment(new a.Point(r.xmax,r.ymin),new a.Point(r.xmax,r.ymax)),new a.Segment(new a.Point(r.xmax,r.ymax),new a.Point(r.xmin,r.ymax)),new a.Segment(new a.Point(r.xmin,r.ymax),new a.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof a.Edge&&n[1]instanceof a.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new a.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new a.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new a.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();a.Utils.EQ_0(e)?this._orientation=Vo.NOT_ORIENTABLE:a.Utils.LT(e,0)?this._orientation=Vo.CCW:this._orientation=Vo.CW}return this._orientation}isSimple(e){return cr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let o of e){let s=n.search(o.box);for(let l of s){if(o===l||l.face!==e||o.shape instanceof a.Segment&&l.shape instanceof a.Segment&&(o.next===l||o.prev===l))continue;let u=o.shape.intersect(l.shape);for(let c of u)if(!(c.equalTo(o.start)&&c.equalTo(l.end)&&l===o.prev)&&!(c.equalTo(o.end)&&c.equalTo(l.start)&&l===o.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new a.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}a.Face=cr;class Xu extends En{constructor(...e){if(super(),this.pt=new a.Point,this.norm=new a.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof a.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof a.Vector){this.norm=e[1].clone();return}throw J.ILLEGAL_PARAMETERS}}clone(){return new Xu(this.pt,this.norm)}get slope(){return new a.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new a.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new a.Vector(this.pt,e);return a.Utils.EQ_0(this.norm.dot(n))&&a.Utils.GE(n.cross(this.norm),0)}coord(e){return ug(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new a.Segment(this.pt,e),new a.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Segment)return Ku(this,e);if(e instanceof a.Arc)return Qu(this,e);if(e instanceof a.Line)return Xp(this,e);if(e instanceof a.Ray)return Wy(this,e);if(e instanceof a.Circle)return qp(this,e);if(e instanceof a.Box)return Uy(this,e);if(e instanceof a.Polygon)return Jp(this,e)}rotate(e,n=new a.Point){return new a.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new a.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new a.Line(this.pt,this.norm),i=Pr(r,e);return i=i.filter(s=>this.contains(s)),i.length===0||i.length===2?"":new a.Segment(this.pt,i[0]).svg(n)}}a.Ray=Xu;const T1=(...t)=>new a.Ray(...t);a.ray=T1;let pn=class qn{constructor(){this.faces=new a.PlanarSet,this.edges=new a.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof a.Circle||e[0]instanceof a.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new a.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new a.Face(this,i));else this.faces.add(new a.Face(this,r));else this.faces.add(new a.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new a.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new qn;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new a.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new a.Edge(r[0]),o=n.prev;return n.face.insert(i,o),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let s of e.edges)for(let l of n.edges){let u=Kp(s,l);for(let c of u)Lr(s,c,r.int_points1),Lr(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=qt(r.int_points1),r.int_points2_sorted=qt(r.int_points2),Or(e,r.int_points1_sorted),Or(n,r.int_points2_sorted),Yu(r),r.int_points1_sorted=qt(r.int_points1),r.int_points2_sorted=qt(r.int_points2),xa(r.int_points1),Ca(r.int_points1,n);for(let s of r.int_points1_sorted)s.edge_before&&s.edge_after&&s.edge_before.bv===s.edge_after.bv&&(r.int_points2[s.id]=-1,s.id=-1);if(r.int_points1=r.int_points1.filter(s=>s.id>=0),r.int_points2=r.int_points2.filter(s=>s.id>=0),r.int_points1.forEach((s,l)=>{s.id=l}),r.int_points2.forEach((s,l)=>{s.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=qt(r.int_points1),r.int_points2_sorted=qt(r.int_points2);let i,o;for(let s=1;s<r.int_points1_sorted.length;s++)if(o=r.int_points1_sorted[s],i=r.int_points1_sorted[s-1],o.edge_before&&o.edge_before.bv===gs){let l=i.edge_after,u=o.edge_before,c=e.getChain(l,u);Df(r.int_points2[i.id],r.int_points2[o.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new a.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Df(r.int_points2[o.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new Hn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,o)=>o.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let o=[...i.faces][0];if(o.orientation()!==n){for(let s of r)if(o.shapes.every(l=>s.contains(l))){s.addFace(o.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof a.Point){let n=Ei(this,e);return n===gs||n===vt}else return lg(this,e)}distanceTo(e){if(e instanceof a.Point){let[n,r]=a.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Circle||e instanceof a.Line||e instanceof a.Segment||e instanceof a.Arc){let[n,r]=a.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof a.Polygon){let n=[Number.POSITIVE_INFINITY,new a.Segment],r,i;for(let o of this.edges){let s=n[0];[r,i]=a.Distance.shape2planarSet(o.shape,e.edges,s),a.Utils.LT(r,s)&&(n=[r,i])}return n}}intersect(e){if(e instanceof a.Point)return this.contains(e)?[e]:[];if(e instanceof a.Line)return Xi(e,this);if(e instanceof a.Ray)return Jp(e,this);if(e instanceof a.Circle)return bp(e,this);if(e instanceof a.Segment)return Hu(e,this);if(e instanceof a.Arc)return bu(e,this);if(e instanceof a.Polygon)return zy(e,this);if(e instanceof a.Multiline)return Dy(e,this)}translate(e){let n=new qn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new a.Point){let r=new qn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.rotate(e,n)));return r}scale(e,n){let r=new qn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.scale(e,n)));return r}transform(e=new a.Matrix){let n=new qn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${$n({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};a.Polygon=pn;const I1=(...t)=>new a.Polygon(...t);a.polygon=I1;const{Circle:Cl,Line:jf,Point:$f,Vector:xo,Utils:Pl}=a;class wi{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new xo(e.pc,n),i=e.r*e.r,o=r.dot(r);return Pl.EQ_0(o)?new $f(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/o))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(Pl.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),o=new xo(e.pc,n.pc);o=o.normalize();let s=e.pc.translate(o.multiply(i));return new jf(s,o)}else{let i=new xo(e.pc,n.pc),o=e.r*e.r/(i.dot(i)-n.r*n.r),s=e.pc.translate(i.multiply(o)),l=Math.abs(o)*n.r;return new Cl(s,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(Pl.EQ_0(r))return n.clone();{let o=e.r*e.r/(2*r),s=new xo(e.pc,i.end);return s=s.multiply(o/r),new Cl(e.pc.translate(s),o)}}inverse(e){if(e instanceof $f)return wi.inversePoint(this.circle,e);if(e instanceof Cl)return wi.inverseCircle(this.circle,e);if(e instanceof jf)return wi.inverseLine(this.circle,e)}}a.Inversion=wi;const x1=t=>new a.Inversion(t);a.inversion=x1;class x{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new a.Vector(e,r).length,new a.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(a.Utils.EQ_0(r))return[n.r,new a.Segment(e,n.toArc().start)];{let o=Math.abs(r-n.r),s=new a.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(s);return[o,new a.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return x.point2point(e,n.start);let r=new a.Vector(n.start,n.end),i=new a.Vector(n.start,e),o=new a.Vector(n.end,e),s=r.dot(i),l=-r.dot(o),u,c;if(a.Utils.GE(s,0)&&a.Utils.GE(l,0)){let f=n.tangentInStart();return u=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[u,new a.Segment(e,c)]}else return s<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new a.Circle(n.pc,n.r),i=[],o,s;return[o,s]=x.point2circle(e,r),s.end.on(n)&&i.push(x.point2circle(e,r)),i.push(x.point2point(e,n.start)),i.push(x.point2point(e,n.end)),x.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof a.Segment?x.point2segment(e,n.shape):x.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[];return i.push(x.point2line(e.start,n)),i.push(x.point2line(e.end,n)),x.sort(i),i[0]}static segment2segment(e,n){let r=$s(e,n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=[],o,s;return[o,s]=x.point2segment(n.start,e),i.push([o,s.reverse()]),[o,s]=x.point2segment(n.end,e),i.push([o,s.reverse()]),i.push(x.point2segment(e.start,n)),i.push(x.point2segment(e.end,n)),x.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),[o,s]=x.point2line(n.center,i);if(a.Utils.GE(o,n.r)&&s.end.on(e))return x.point2circle(s.end,n);{let[l,u]=x.point2circle(e.start,n),[c,f]=x.point2circle(e.end,n);return a.Utils.LT(l,c)?[l,u]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Line(e.ps,e.pe),o=new a.Circle(n.pc,n.r),[s,l]=x.point2line(o.center,i);if(a.Utils.GE(s,o.r)&&l.end.on(e)){let[d,h]=x.point2circle(l.end,o);if(h.end.on(n))return[d,h]}let u=[];u.push(x.point2arc(e.start,n)),u.push(x.point2arc(e.end,n));let c,f;return[c,f]=x.point2segment(n.start,e),u.push([c,f.reverse()]),[c,f]=x.point2segment(n.end,e),u.push([c,f.reverse()]),x.sort(u),u[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),o=n.toArc();return x.point2point(i.start,o.start)}else{let i=new a.Line(e.center,n.center),o=i.intersect(e),s=i.intersect(n),l=[];return l.push(x.point2point(o[0],s[0])),l.push(x.point2point(o[0],s[1])),l.push(x.point2point(o[1],s[0])),l.push(x.point2point(o[1],s[1])),x.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let[i,o]=x.point2line(e.center,n),[s,l]=x.point2circle(o.end,e);return l=l.reverse(),[s,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.point2line(i.center,n);if(a.Utils.GE(o,i.r)){let[l,u]=x.point2circle(s.end,i);if(u.end.on(e))return[l,u]}else{let l=[];return l.push(x.point2line(e.start,n)),l.push(x.point2line(e.end,n)),x.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),[o,s]=x.circle2circle(i,n);if(s.start.on(e))return[o,s];{let l=[];return l.push(x.point2circle(e.start,n)),l.push(x.point2circle(e.end,n)),x.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new a.Segment(r[0],r[0])];let i=new a.Circle(e.center,e.r),o=new a.Circle(n.center,n.r),[s,l]=x.circle2circle(i,o);if(l.start.on(e)&&l.end.on(n))return[s,l];{let u=[],c,f;return[c,f]=x.point2arc(e.start,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(e.end,n),f.end.on(n)&&u.push([c,f]),[c,f]=x.point2arc(n.start,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2arc(n.end,e),f.end.on(e)&&u.push([c,f.reverse()]),[c,f]=x.point2point(e.start,n.start),u.push([c,f]),[c,f]=x.point2point(e.start,n.end),u.push([c,f]),[c,f]=x.point2point(e.end,n.start),u.push([c,f]),[c,f]=x.point2point(e.end,n.end),u.push([c,f]),x.sort(u),u[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=x.point2edge(e,i);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n.edges){let[o,s]=e.distanceTo(i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e.edges)for(let o of n.edges){let[s,l]=i.shape.distanceTo(o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),o=r*r+i*i,s=e.merge(n),l=s.xmax-s.xmin,u=s.ymax-s.ymin,c=l*l+u*u;return[o,c]}static minmax_tree_process_level(e,n,r,i){let o,s;for(let f of n)[o,s]=x.box2box_minmax(e.box,f.item.key),f.item.value instanceof a.Edge?i.insert([o,s],f.item.value.shape):i.insert([o,s],f.item.value),a.Utils.LT(s,r)&&(r=s);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),u=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...u].filter(f=>{let[d,h]=x.box2box_minmax(e.box,f.max);return a.Utils.LE(d,r)});return r=x.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new Bi,o=[n.index.root],s=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return s=x.minmax_tree_process_level(e,o,s,i),i}static minmax_tree_calc_distance(e,n,r){let i,o;if(n!=null&&!n.isNil()){if([i,o]=x.minmax_tree_calc_distance(e,n.left,r),o)return[i,o];if(a.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[s,l]=x.distance(e,n.item.value);return a.Utils.LT(s,i[0])&&(i=[s,l]),[i,o]=x.minmax_tree_calc_distance(e,n.right,i),[i,o]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new a.Segment],o=!1;if(n instanceof a.PlanarSet){let s=x.minmax_tree(e,n,r);[i,o]=x.minmax_tree_calc_distance(e,s.root,i)}return i}static sort(e){e.sort((n,r)=>a.Utils.LT(n[0],r[0])?-1:a.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of n){let[o,s]=x.distance(e,i.shape);a.Utils.LT(o,r[0])&&(r=[o,s])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new a.Segment];for(let i of e)for(let o of n){let[s,l]=x.distance(i.shape,o.shape);a.Utils.LT(s,r[0])&&(r=[s,l])}return r}}a.Distance=x;const{Multiline:C1,Point:fg,Segment:P1,Polygon:dg}=a;function Ju(t){return new fg(t.split(" ").map(Number))}function hg(t){return t.split(", ").map(Ju)}function Zu(t){const e=hg(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new P1(e[r],e[r+1]));return new C1(n)}function L1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(Zu)}function pg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new dg;let r;return e.forEach((i,o)=>{let s=i.split(", ").map(u=>new fg(u.split(" ").map(Number)));const l=n.addFace(s);o===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function A1(t){const n=t.split(/\)\), \(\(/).map(o=>"(("+o+"))").map(pg),r=new dg;return n.reduce((o,s)=>[...o,...s==null?void 0:s.faces],[]).forEach(o=>r.addFace([...o==null?void 0:o.shapes])),r}function O1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return pg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return A1(e)}}function N1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Ju)}function R1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Zu).reduce((n,r)=>[...n,...r],[])}function gg(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return Ju(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return hg(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return Zu(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return L1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return O1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(gg).map(i=>i instanceof Array?i:[i]).reduce((i,o)=>[...i,...o],[])}else{if(mg(t))return N1(t);if(vg(t))return R1(t)}}return[]}function mg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function vg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function k1(t){return t.startsWith("POINT")||mg(t)||t.startsWith("LINESTRING")||vg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}a.isWktString=k1;a.parseWKT=gg;a.BooleanOperations=Jy;a.Relations=qu;var U=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(U||{}),vs=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(vs||{}),ys=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(ys||{}),Oe=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(Oe||{});function M1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function Ee(t){const e=[];for(const n of t)n&&e.push(n);return e}function D1(t,e){let n=t[0],r=1/0;for(const i of t){const o=e(i);o<r&&(r=o,n=i)}return n}function z1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function bs(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const o=e[i],s=typeof o=="function",l=s?o(n):n[o],u=s?o(r):r[o],c=z1(l,u,"asc");if(c!==0)return c}return 0})}function to(t,e){const n=[];for(const r of t)n.every(o=>!e(o,r))&&n.push(r);return n}function Gf(){}function F1(t,e=0){if(!Number.isInteger(e))throw new Error("Precision must be an integer.");const n=Math.pow(10,e);return Math.round(t*n)/n}function Hf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const U1="[object RegExp]",W1="[object String]",B1="[object Number]",V1="[object Boolean]",bf="[object Arguments]",j1="[object Symbol]",$1="[object Date]",G1="[object Map]",H1="[object Set]",b1="[object Array]",K1="[object Function]",Q1="[object ArrayBuffer]",Ll="[object Object]",Y1="[object Error]",q1="[object DataView]",X1="[object Uint8Array]",J1="[object Uint8ClampedArray]",Z1="[object Uint16Array]",e_="[object Uint32Array]",t_="[object BigUint64Array]",n_="[object Int8Array]",r_="[object Int16Array]",i_="[object Int32Array]",o_="[object BigInt64Array]",s_="[object Float32Array]",l_="[object Float64Array]";function Kf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Qf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function a_(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ot(t,e)}return Ot(t,e)}function Ot(t,e,n){if(Object.is(t,e))return!0;let r=Qf(t),i=Qf(e);if(r===bf&&(r=Ll),i===bf&&(i=Ll),r!==i)return!1;switch(r){case W1:return t.toString()===e.toString();case B1:{const l=t.valueOf(),u=e.valueOf();return l===u||Number.isNaN(l)&&Number.isNaN(u)}case V1:case $1:case j1:return Object.is(t.valueOf(),e.valueOf());case U1:return t.source===e.source&&t.flags===e.flags;case K1:return t===e}n=n??new Map;const o=n.get(t),s=n.get(e);if(o!=null&&s!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(r){case G1:{if(t.size!==e.size)return!1;for(const[l,u]of t.entries())if(!e.has(l)||!Ot(u,e.get(l),n))return!1;return!0}case H1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),u=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=u.findIndex(h=>Ot(f,h,n));if(d===-1)return!1;u.splice(d,1)}return!0}case b1:case X1:case J1:case Z1:case e_:case t_:case n_:case r_:case i_:case o_:case s_:case l_:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Ot(t[l],e[l],n))return!1;return!0}case Q1:return t.byteLength!==e.byteLength?!1:Ot(new Uint8Array(t),new Uint8Array(e),n);case q1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ot(t.buffer,e.buffer,n);case Y1:return t.name===e.name&&t.message===e.message;case Ll:{if(!(Ot(t.constructor,e.constructor,n)||Hf(t)&&Hf(e)))return!1;const u=[...Object.keys(t),...Kf(t)],c=[...Object.keys(e),...Kf(e)];if(u.length!==c.length)return!1;for(let f=0;f<u.length;f++){const d=u[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!Ot(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}let yg=new w(0,0),_g=null,$o=null,Eg=null,Nr=[],wg=[],no=[],Sg=!1,Tg=[],Ig=[],xg=!1,u_=[],Cg=45,Da=null,za=null,Pg=null,Lg=null,Ag=null,Og=null,Ng=[],Rg=0,kg="#fff",Mg=1;const ec=()=>yg,c_=()=>_g,se=()=>$o,Dg=()=>Eg,we=()=>Nr,Ne=()=>no,f_=()=>Sg,d_=()=>Tg,h_=()=>Ig,p_=()=>xg,g_=()=>u_,zg=()=>Cg,m_=()=>Pg,Vi=()=>Lg,_s=()=>Ag,v_=()=>Og,tc=()=>Ng,y_=()=>Rg,Vt=()=>kg,jt=()=>Mg,ft=()=>{if(!Da)throw new Error("getScreenCanvasDrawController() returned null");return Da},__=()=>{if(!za)throw new Error("getCanvasInputField() returned null");return za},nc=()=>Nr.filter(t=>no.includes(t.id)),E_=()=>Nr.filter(t=>!no.includes(t.id)),Rr=t=>no.includes(t.id),rc=t=>wg.includes(t.id),w_=t=>yg=t,S_=t=>_g=t,ji=(t,e=!0)=>{var n;(n=se())==null||n.stop(),$o=t,$o.subscribe(r=>{var o;const i=(o=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:o.instructions;Dg()!==i&&T_(i||null)}),$o.start(),e&&Qs(Oe.activeTool)},T_=t=>Eg=t,Ks=t=>{M_(Oe.entities,Nr),Nr=t},Fa=t=>wg=t,H=t=>no=t,ic=t=>Sg=t,oc=t=>Tg=t,W=t=>Ig=t,be=t=>(console.log("setShouldDrawHelpers",t),Fg(null),Ug(null),oc([]),xg=t),I_=(t,e=!0)=>{Cg=t,e&&Qs(Oe.activeTool)},x_=t=>Da=t,C_=t=>za=t,sc=t=>Pg=t,Fg=t=>Lg=t,Ug=t=>Ag=t,ge=t=>Og=t,P_=t=>Ng=t,L_=t=>Rg=t,A_=(t,e=!0)=>{kg=t,e&&Qs(Oe.activeLineColor)},O_=(t,e=!0)=>{Mg=t,e&&Qs(Oe.activeLineWidth)},$t=(...t)=>{const e=t.map(r=>r.id),n=we().filter(r=>!e.includes(r.id));return Ks(n),n},ke=(...t)=>{const e=[...we(),...t];return Ks(e),e},N_=[Oe.activeTool,Oe.angleStep,Oe.activeLineColor,Oe.activeLineWidth,Oe.screenZoom],R_=[Oe.entities],k_=[],fr=M1();function M_(t,e){if(!R_.includes(t))return;const n=fr.peek();if(!a_(e,n==null?void 0:n.value)){if(t!==Oe.activeEntity&&fr.clear(Oe.activeEntity),k_.includes(t)&&(n==null?void 0:n.variable)===t){fr.replace({variable:t,value:e});return}fr.push({variable:t,value:e})}}function Wg(t){const e=t.variable,n=t.value;switch(e){case Oe.entities:Nr=n;break}}function Bg(){const t=fr.undo();t&&Wg(t)}function Vg(){const t=fr.redo();t&&Wg(t)}function Qs(t){N_.includes(t)&&window.dispatchEvent(new CustomEvent(ys.UPDATE_STATE))}var q=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t.Measurement="Measurement",t))(q||{});const Ua=1e-6,Co=10,Po=30,D_="#111",z_="#FFFF00",lc=15,F_=15,ac=15,O=15,uc=1e3,U_=3,Yf=20,qf=20,W_=200,B_=20,Xf=7,V_=2,j_=20,$_=40,G_="#b6ff9a",H_="#6899f3",b_=1,K_=[5,5],jg="#999",$g=1,Gg=[5,5],Q_=.1,Qn=20,Y_=150,Lo=20,q_="#161616",X_="#FFF",J_=16,Z_="#999",eE=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"],Wa=Math.PI/180;function pt(t,e){return Math.abs(t.x-e.x)<Ua&&Math.abs(t.y-e.y)<Ua}function Hg(t,e,n){const r=ot.getAngle(e,n),i=t.map(o=>({point:o,angle:(new St(e,o).slope-r+2*Math.PI)%(2*Math.PI)}));return bs(i,[o=>o.angle]).map(o=>o.point)}function bn(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}function xt(t,e,n){const i=new tt(e,t).scale(n-1,n-1);return new w(t.x+i.x,t.y+i.y)}class ot{constructor(e,n,r,i,o=!0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"arc");this.arc=new Ma(e,n,r,i,o)}static getAngle(e,n){return new St(e,n).slope}draw(e){var n,r;e.drawArc(this.arc.center,this.arc.r.valueOf(),((n=this.arc)==null?void 0:n.startAngle)||0,((r=this.arc)==null?void 0:r.endAngle)||2*Math.PI)}move(e,n){this.arc=this.arc.translate(e,n)}scale(e,n){const r=xt(this.arc.center,e,n);this.arc=new Ma(r,this.arc.r.valueOf()*n,this.arc.startAngle,this.arc.endAngle,this.arc.counterClockwise)}rotate(e,n){this.arc=this.arc.rotate(n,e)}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:o}=this.arc;return new ot(e,n.valueOf(),r,i,o)}return this}intersectsWithBox(e){return this.arc.intersect(e).length>0}isContainedInBox(e){return e.contains(this.arc)}getBoundingBox(){return this.arc.box}getShape(){return this.arc}getSnapPoints(){return[{point:this.arc.center,type:U.CircleCenter},{point:this.arc.start,type:U.LineEndPoint},{point:this.arc.end,type:U.LineEndPoint}]}getIntersections(e){const n=e.getShape();return n?this.arc.intersect(n):[]}getFirstPoint(){return this.arc.center}distanceTo(e){return this.arc.distanceTo(e)}getSvgString(){return this.arc.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){const n=to([this.arc.start,this.arc.end,...e],pt),r=Hg(n,this.arc.center,this.arc.start),i=[];for(let o=0;o<r.length-1;o++){const s=r[o],l=r[o+1],u=ot.getAngle(this.arc.center,s),c=ot.getAngle(this.arc.center,l),f=new ot(this.arc.center,Number(this.arc.r),u,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:q.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==q.Arc)throw new Error("Invalid Entity type in JSON");const n=new w(e.shapeData.center.x,e.shapeData.center.y),r=new w(e.shapeData.start.x,e.shapeData.start.y),i=new w(e.shapeData.end.x,e.shapeData.end.y),o=Number(n.distanceTo(r)[0]),s=Number(ot.getAngle(n,r)),l=Number(ot.getAngle(n,i)),u=e.shapeData.counterClockwise,c=new ot(n,o,s,l,u);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class kr{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"circle");e instanceof jo?this.circle=e:this.circle=new jo(e,n)}draw(e){e.drawArc(this.circle.center,this.circle.r,0,2*Math.PI)}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}scale(e,n){const r=xt(this.circle.center,e,n);this.circle=new jo(r,this.circle.r.valueOf()*n)}rotate(e,n){this.circle=this.circle.rotate(n,e)}clone(){return this.circle?new kr(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){var e;return(e=this.circle)!=null&&e.center?[{point:this.circle.center,type:U.CircleCenter},{point:new w(this.circle.center.x+this.circle.r,this.circle.center.y),type:U.CircleCardinal},{point:new w(this.circle.center.x-this.circle.r,this.circle.center.y),type:U.CircleCardinal},{point:new w(this.circle.center.x,this.circle.center.y+this.circle.r),type:U.CircleCardinal},{point:new w(this.circle.center.x,this.circle.center.y-this.circle.r),type:U.CircleCardinal}]:[]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.circle.center}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}async toJson(){var e;return this.circle?{id:this.id,type:q.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new w(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new kr(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}function Gt(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}class dt{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"segment");e instanceof yt?this.segment=e:this.segment=new yt(e,n)}draw(e){const n=new w(this.segment.start.x,this.segment.start.y),r=new w(this.segment.end.x,this.segment.end.y);e.drawLine(n,r)}move(e,n){this.segment=this.segment.translate(e,n)}scale(e,n){const r=xt(this.segment.start,e,n),i=xt(this.segment.end,e,n);this.segment=new yt(r,i)}rotate(e,n){this.segment=this.segment.rotate(n,e)}clone(){return new dt(this.segment.clone())}intersectsWithBox(e){return this.segment.intersect(e).length>0}isContainedInBox(e){return e.contains(this.segment)}getBoundingBox(){return this.segment.box}getShape(){return this.segment}getSnapPoints(){return[{point:this.segment.start,type:U.LineEndPoint},{point:this.segment.end,type:U.LineEndPoint},{point:this.segment.middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?this.segment.intersect(n):[]}getFirstPoint(){return this.segment.start}distanceTo(e){return this.segment.distanceTo(e)}getSvgString(){return this.segment.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Line}containsPointOnShape(e){return this.segment.contains(e)}cutAtPoints(e){const n=to([this.segment.start,this.segment.end,...e],pt),r=bs(n,[o=>Gt(this.segment.start,o)]),i=[];for(let o=0;o<r.length-1;o++)i.push(new dt(r[o],r[o+1]));return i}async toJson(){return{id:this.id,type:q.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}}static async fromJson(e){const n=new w(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new w(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new dt(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class Es{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"point");e instanceof w?this.point=new w(e.x,e.y):this.point=new w(e,n)}draw(e){e.drawArc(this.point,5,0,Math.PI*2)}move(e,n){this.point=this.point.translate(e,n)}scale(e,n){this.point=xt(this.point,e,n)}rotate(e,n){this.point=this.point.rotate(n,e)}clone(){return new Es(this.point.clone())}intersectsWithBox(){return!1}isContainedInBox(e){return e.contains(this.point)}getBoundingBox(){return this.point?new Dt(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return[{point:this.point,type:U.Point}]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point.distanceTo(e)}getSvgString(){return this.point.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})||null}getType(){return q.Point}containsPointOnShape(e){return this.point.equalTo(e)}async toJson(){return{id:this.id,type:q.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}}static async fromJson(e){const n=new w(e.shapeData.point.x,e.shapeData.point.y),r=new Es(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function tE(t){return new pn([new w(Math.min(t.low.x,t.high.x),Math.min(t.low.y,t.high.y)),new w(Math.min(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new w(Math.max(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new w(Math.max(t.low.x,t.high.x),Math.min(t.low.y,t.high.y))])}function cc(t,e){return new pn([new w(Math.min(t.x,e.x),Math.min(t.y,e.y)),new w(Math.min(t.x,e.x),Math.max(t.y,e.y)),new w(Math.max(t.x,e.x),Math.max(t.y,e.y)),new w(Math.max(t.x,e.x),Math.min(t.y,e.y))])}function at(t){const e=[];return t.edges.forEach(n=>{e.push(n.shape)}),e}class Ht{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"polygon");e instanceof pn?this.polygon=e:this.polygon=cc(e,n)}draw(e){at(this.polygon).forEach(n=>{const r=new w(n.start.x,n.start.y),i=new w(n.end.x,n.end.y);e.drawLine(r,i)})}move(e,n){this.polygon=this.polygon.translate(new tt(e,n))}scale(e,n){const r=this.polygon.box.center,i=xt(r,e,n);this.polygon=this.polygon.translate(new tt(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e)}clone(){return new Ht(this.polygon.clone())}intersectsWithBox(e){return qu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=at(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_VALUE,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=at(this.polygon);return[{point:e[0],type:U.LineEndPoint},{point:e[1],type:U.LineEndPoint},{point:e[2],type:U.LineEndPoint},{point:e[3],type:U.LineEndPoint},{point:n[0].middle(),type:U.LineMidPoint},{point:n[1].middle(),type:U.LineMidPoint},{point:n[2].middle(),type:U.LineMidPoint},{point:n[3].middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?at(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})}getType(){return q.Rectangle}containsPointOnShape(e){return at(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y}))}}}static async fromJson(e){const n=new pn(e.shapeData.points.map(i=>new w(i.x,i.y))),r=new Ht(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function nE(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,o=JSON.parse(i);o.entities||n(new Error("Invalid JSON file"));const s=Ee(o.entities.map(l=>{switch(l.type){case q.Arc:return ot.fromJson(l);case q.Circle:return kr.fromJson(l);case q.Line:return dt.fromJson(l);case q.Point:return Es.fromJson(l);case q.Rectangle:return Ht.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));Ks(Ee(await Promise.all(s))),e()}),r.readAsText(t,"utf-8")})}var bg={exports:{}};(function(t,e){(function(n,r){r()})(Qr,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){u(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Qr=="object"&&Qr.global===Qr?Qr:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=s.URL||s.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?o(v):i(v.href)?r(c,f,d):o(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){o(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",_=/constructor/i.test(s.HTMLElement)||s.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&_||l)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var m=T.result;m=y?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},T.readAsDataURL(c)}else{var g=s.URL||s.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});s.saveAs=u.saveAs=u,t.exports=u})})(bg);var fc=bg.exports;async function rE(){const e=we().map(o=>o.toJson()),n={entities:Ee(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});fc.saveAs(i,"open-web-cad--drawing.json")}function Kg(t,e){let n=e.x,r=e.y,i=0,o=0;const s=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),o=Math.max(o,d.ymax))}),console.log("exporting svg",s);const l=i-n+Co*2,u=o-r+Co*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new tt(new w(n,r),new w(Co,Co))).svg({stroke:bn(f.lineColor),strokeWidth:f.lineWidth});v&&s.push(v)}),{svgString:`
      <svg width="${l}" height="${u}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${u}" fill="white" />
        ${s.join("")}
      </svg>
    `,width:l,height:u}}function iE(){const t=we(),e=ec(),n=Kg(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});fc.saveAs(r,"open-web-cad--drawing.svg")}function oE(t,e,n,r){return new Promise((i,o)=>{const s=document.createElement("canvas"),l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const u=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);u.onload=()=>{s.width=e+r*2,s.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,s.width,s.height),l.drawImage(u,r,r),URL.revokeObjectURL(f),s.toBlob(d=>{d?i(d):o(new Error("Could not convert canvas to blob"))},"image/png")},u.src=f})}async function sE(){const t=we(),e=ec(),n=Kg(t,e),r=await oE(n.svgString,n.width,n.height,20);fc.saveAs(r,"open-web-cad--drawing.png")}function Qg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function lE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function aE(){const t=lE();if(t.__xstate__)return t.__xstate__}const uE=t=>{if(typeof window>"u")return;const e=aE();e&&e.register(t)};class Jf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Yg=".",cE="",qg="",fE="#",dE="*",Xg="xstate.init",hE="xstate.error",Ba="xstate.stop";function pE(t,e){return{type:`xstate.after.${t}.${e}`}}function Va(t,e){return{type:`xstate.done.state.${t}`,output:e}}function gE(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Jg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Zg(t){return{type:Xg,input:t}}function Lt(t){setTimeout(()=>{throw t})}const mE=typeof Symbol=="function"&&Symbol.observable||"@@observable";function em(t,e){const n=Zf(t),r=Zf(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?em(n[i],r[i]):!1)}function dc(t){if(nm(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Zf(t){if(QE(t))return t.value;if(typeof t!="string")return t;const e=dc(t);return vE(e)}function vE(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function ed(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function tm(t){return nm(t)?t:[t]}function tn(t){return t===void 0?[]:tm(t)}function ja(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function nm(t){return Array.isArray(t)}function yE(t){return t.type.startsWith("xstate.error.actor")}function Xn(t){return tm(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function rm(t){if(!(t===void 0||t===cE))return tn(t)}function $a(t,e,n){var o,s,l;const r=typeof t=="object",i=r?t:void 0;return{next:(o=r?t.next:t)==null?void 0:o.bind(i),error:(s=r?t.error:e)==null?void 0:s.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function td(t,e){return`${e}.${t}`}function hc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,s=t.getStateNodeById(i).config.invoke;return(Array.isArray(s)?s[r]:s).src}function nd(t,e){return`${t.sessionId}.${e}`}let _E=0;function EE(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,s={},{clock:l,logger:u}=e,c={schedule:(h,v,_,y,T=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:_,delay:y,id:T,startedAt:Date.now()},p=nd(h,T);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete s[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,_)},y);s[p]=m},cancel:(h,v)=>{const _=nd(h,v),y=s[_];delete s[_],delete d._snapshot._scheduledEvents[_],y!==void 0&&l.clearTimeout(y)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===h&&c.cancel(h,_.id)}}},f=h=>{if(!o.size)return;const v={...h,rootId:t.sessionId};o.forEach(_=>{var y;return(y=_.next)==null?void 0:y.call(_,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${_E++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const _=r.get(h);if(_&&_!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=$a(h);return o.add(v),{unsubscribe(){o.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:_}),v._send(_)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:_,target:y,event:T,delay:g,id:p}=h[v];c.schedule(_,y,T,g,p)}},_clock:l,_logger:u};return d}const pc=1;let Pe=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const wE={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class Mr{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Jf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Pe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...wE,...n},{clock:i,logger:o,parent:s,syncSnapshot:l,id:u,systemId:c,inspect:f}=r;this.system=s?s.system:EE(this,{clock:i,logger:o}),f&&!s&&this.system.inspect($a(f)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=s,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const _=new Set([...h?h.values():[],...v?v.values():[]]);for(const y of Array.from(_))y(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,o;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...e,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{(i=s.next)==null||i.call(s,e)}catch(l){Lt(l)}break;case"done":for(const s of this.observers)try{(o=s.next)==null||o.call(s,e)}catch(l){Lt(l)}this._stopProcedure(),this._complete(),this._doneEvent=gE(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var o;const i=$a(e,n,r);if(this._processingStatus!==Pe.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(o=i.complete)==null||o.call(i)}catch(s){Lt(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)Lt(s);else try{i.error(s)}catch(l){Lt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Pe.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Pe.Running;const e=Zg(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Ba&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Pe.Stopped?this:(this.mailbox.clear(),this._processingStatus===Pe.NotStarted?(this._processingStatus=Pe.Stopped,this):(this.mailbox.enqueue({type:Ba}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){Lt(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Lt(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(o){Lt(o)}}this.observers.clear(),n&&Lt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Jg(this.id,e))}_stopProcedure(){return this._processingStatus!==Pe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Jf(this._process.bind(this)),this._processingStatus=Pe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Pe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:uE)(this)}toJSON(){return{xstate$$type:pc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[mE](){return this}getSnapshot(){return this._snapshot}}function ws(t,...[e]){return new Mr(t,e)}function SE(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,o]}function TE(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function IE(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=SE,e.execute=TE,e}function xE(t,e,n,r,{id:i,systemId:o,src:s,input:l,syncSnapshot:u}){const c=typeof s=="string"?hc(e.machine,s):s,f=typeof i=="function"?i(n):i;let d;return c&&(d=ws(c,{id:f,src:s,parent:t.self,syncSnapshot:u,systemId:o,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[Bn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function CE(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==Pe.Stopped&&n.start()})}function PE(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(s,l){}return o.type="snapshot.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=xE,o.execute=CE,o}function LE(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,s=typeof o=="string"?e.children[o]:o;let l=e.children;return s&&(l={...l},delete l[s.id]),[Bn(e,{children:l}),s]}function AE(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Pe.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function im(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=LE,e.execute=AE,e}function gc(t,e,n,r){const{machine:i}=r,o=typeof t=="function",s=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!s)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof s!="function")return gc(s,e,n,r);const l={context:e,event:n},u=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(r,l,s):s(l,u)}const mc=t=>t.type==="atomic"||t.type==="final";function Dr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function ro(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function Ss(t){const e=new Set(t),n=sm(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))rd(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of Dr(r))if(i.type!=="history"&&!e.has(i)){const o=rd(i);for(const s of o)e.add(s)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function om(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(mc(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=om(i,e);return r}function sm(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function lm(t,e){const n=Ss(e);return om(t,sm(n))}function vc(t,e){return e.type==="compound"?Dr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?Dr(e).every(n=>vc(t,n)):e.type==="final"}const Ys=t=>t[0]===fE;function OE(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===dE)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let s=0;s<i.length;s++){const l=i[s],u=o[s];if(l==="*")return s===i.length-1;if(l!==u)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function NE(t){const e=t.config.after;if(!e)return[];const n=(i,o)=>{const s=pE(i,t.id),l=s.type;return t.entry.push(rw(s,{id:l,delay:i})),t.exit.push(IE(l)),l};return Object.keys(e).flatMap((i,o)=>{const s=e[i],l=typeof s=="string"?{target:s}:s,u=Number.isNaN(+i)?i:+i,c=n(u);return tn(l).map(f=>({...f,event:c,delay:u}))}).map(i=>{const{delay:o}=i;return{...Cn(t,i.event,i),delay:o}})}function Cn(t,e,n){const r=rm(n.target),i=n.reenter??!1,o=ME(t,r),s={...n,actions:tn(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...s,source:`#${t.id}`,target:o?o.map(l=>`#${l.id}`):void 0})};return s}function RE(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===qg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Xn(r).map(i=>Cn(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Xn(t.config.onDone).map(r=>Cn(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Xn(n.onDone).map(i=>Cn(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Xn(n.onError).map(i=>Cn(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Xn(n.onSnapshot).map(i=>Cn(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function kE(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:tn(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function ME(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(Ys(n))return t.machine.getStateNodeById(n);const r=n[0]===Yg;if(r&&!t.parent)return Ts(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return Ts(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function am(t){const e=rm(t.config.target);return e?{target:e.map(n=>typeof n=="string"?Ts(t.parent,n):n)}:t.parent.initial}function On(t){return t.type==="history"}function rd(t){const e=um(t);for(const n of e)for(const r of ro(n,t))e.add(r);return e}function um(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of Dr(r))n(i)}}return n(t),e}function zr(t,e){if(Ys(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function Ts(t,e){if(typeof e=="string"&&Ys(e))try{return t.machine.getStateNodeById(e)}catch{}const n=dc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=zr(r,i)}return r}function Is(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>zr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const s=zr(t,o);if(!s)return i;const l=Is(s,e[o]);return i.concat(l)},[]))}function DE(t,e,n,r){const o=zr(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function zE(t,e,n,r){const i=Object.keys(e),o=zr(t,i[0]),s=yc(o,e[i[0]],n,r);return!s||!s.length?t.next(n,r):s}function FE(t,e,n,r){const i=[];for(const o of Object.keys(e)){const s=e[o];if(!s)continue;const l=zr(t,o),u=yc(l,s,n,r);u&&i.push(...u)}return i.length?i:t.next(n,r)}function yc(t,e,n,r){return typeof e=="string"?DE(t,e,n,r):Object.keys(e).length===1?zE(t,e,n,r):FE(t,e,n,r)}function UE(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function gn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function WE(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function cm(t,e,n){const r=new Set;for(const i of t){let o=!1;const s=new Set;for(const l of r)if(WE(Ga([i],e,n),Ga([l],e,n)))if(gn(i.source,l.source))s.add(l);else{o=!0;break}if(!o){for(const l of s)r.delete(l);r.add(i)}}return Array.from(r)}function BE(t){const[e,...n]=t;for(const r of ro(e,void 0))if(n.every(i=>gn(i,r)))return r}function _c(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(On(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of _c(am(r),e))n.add(i);else n.add(r);return[...n]}function fm(t,e){const n=_c(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||gn(i,t.source)))return t.source;const r=BE(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Ga(t,e,n){var i;const r=new Set;for(const o of t)if((i=o.target)!=null&&i.length){const s=fm(o,n);o.reenter&&o.source===s&&r.add(s);for(const l of e)gn(l,s)&&r.add(l)}return[...r]}function VE(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Ha(t,e,n,r,i,o){if(!t.length)return e;const s=new Set(e._nodes);let l=e.historyValue;const u=cm(t,s,l);let c=e;i||([c,l]=HE(c,r,n,u,s,l,o)),c=Fr(c,r,n,u.flatMap(d=>d.actions),o),c=$E(c,r,n,u,s,o,l,i);const f=[...s];c.status==="done"&&(c=Fr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),o));try{return l===e.historyValue&&VE(e._nodes,s)?c:Bn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function jE(t,e,n,r,i){if(r.output===void 0)return;const o=Va(i.id,i.output!==void 0&&i.parent?ja(i.output,t.context,e,n.self):void 0);return ja(r.output,t.context,o,n.self)}function $E(t,e,n,r,i,o,s,l){let u=t;const c=new Set,f=new Set;GE(r,s,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,_)=>v.order-_.order)){i.add(h);const v=[];v.push(...h.entry);for(const _ of h.invoke)v.push(PE(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;v.push(..._)}if(u=Fr(u,e,n,v,o,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let y=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,T=y||h;for((_==null?void 0:_.type)==="compound"&&o.push(Va(_.id,h.output!==void 0?ja(h.output,u.context,e,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!d.has(y)&&vc(i,y);)d.add(y),o.push(Va(y.id)),T=y,y=y.parent;if(y)continue;u=Bn(u,{status:"done",output:jE(u,e,n,u.machine.root,T)})}}return u}function GE(t,e,n,r){for(const i of t){const o=fm(i,e);for(const l of i.target||[])!On(l)&&(i.source!==l||i.source!==o||i.reenter)&&(r.add(l),n.add(l)),dr(l,e,n,r);const s=_c(i,e);for(const l of s){const u=ro(l,o);(o==null?void 0:o.type)==="parallel"&&u.push(o),dm(r,e,n,u,!i.source.parent&&i.reenter?void 0:o)}}}function dr(t,e,n,r){var i;if(On(t))if(e[t.id]){const o=e[t.id];for(const s of o)r.add(s),dr(s,e,n,r);for(const s of o)Al(s,t.parent,r,e,n)}else{const o=am(t);for(const s of o.target)r.add(s),o===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),dr(s,e,n,r);for(const s of o.target)Al(s,t.parent,r,e,n)}else if(t.type==="compound"){const[o]=t.initial.target;On(o)||(r.add(o),n.add(o)),dr(o,e,n,r),Al(o,t,r,e,n)}else if(t.type==="parallel")for(const o of Dr(t).filter(s=>!On(s)))[...r].some(s=>gn(s,o))||(On(o)||(r.add(o),n.add(o)),dr(o,e,n,r))}function dm(t,e,n,r,i){for(const o of r)if((!i||gn(o,i))&&t.add(o),o.type==="parallel")for(const s of Dr(o).filter(l=>!On(l)))[...t].some(l=>gn(l,s))||(t.add(s),dr(s,e,n,t))}function Al(t,e,n,r,i){dm(n,r,i,ro(t,e))}function HE(t,e,n,r,i,o,s){let l=t;const u=Ga(r,i,o);u.sort((f,d)=>d.order-f.order);let c;for(const f of u)for(const d of UE(f)){let h;d.history==="deep"?h=v=>mc(v)&&gn(v,f):h=v=>v.parent===f,c??(c={...o}),c[d.id]=Array.from(i).filter(h)}for(const f of u)l=Fr(l,e,n,[...f.exit,...f.invoke.map(d=>im(d.id))],s),i.delete(f);return[l,c||o]}let id=!1;function hm(t,e,n,r,i,o){const{machine:s}=t;let l=t;for(const c of r){let _=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{id=d,d(h,v)}finally{id=!1}};var u=_;const f=typeof c=="function",d=f?c:s.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===Pe.Running?_():n.defer(()=>{_()});continue}const y=d,[T,g,p]=y.resolve(n,l,h,v,d,i);l=T,"retryResolve"in y&&(o==null||o.push([y,g])),"execute"in y&&(n.self._processingStatus===Pe.Running?y.execute(n,g):n.defer(y.execute.bind(null,n,g))),p&&(l=hm(l,e,n,p,i,o))}return l}function Fr(t,e,n,r,i,o){const s=o?[]:void 0,l=hm(t,e,n,r,{internalQueue:i,deferredActorIds:o},s);return s==null||s.forEach(([u,c])=>{u.retryResolve(n,l,c)}),l}function Ol(t,e,n,r=[]){let i=t;const o=[];function s(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),o.push(c)}if(e.type===Ba)return i=Bn(od(i,e,n),{status:"stopped"}),s(i,e,[]),{snapshot:i,microstates:o};let l=e;if(l.type!==Xg){const c=l,f=yE(c),d=sd(c,i);if(f&&!d.length)return i=Bn(t,{status:"error",error:c.error}),s(i,c,[]),{snapshot:i,microstates:o};i=Ha(d,t,n,l,!1,r),s(i,c,d)}let u=!0;for(;i.status==="active";){let c=u?bE(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=sd(l,i)}i=Ha(c,i,n,l,!1,r),u=i!==f,s(i,l,c)}return i.status!=="active"&&od(i,l,n),{snapshot:i,microstates:o}}function od(t,e,n){return Fr(t,e,n,Object.values(t.children).map(r=>im(r)),[])}function sd(t,e){return e.machine.getTransitionData(e,t)}function bE(t,e){const n=new Set,r=t._nodes.filter(mc);for(const i of r)e:for(const o of[i].concat(ro(i,void 0)))if(o.always){for(const s of o.always)if(s.guard===void 0||gc(s.guard,t.context,e,t)){n.add(s);break e}}return cm(Array.from(n),new Set(t._nodes),t.historyValue)}function KE(t,e){const n=Ss(Is(t,e));return lm(t,[...n])}function QE(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const YE=function(e){return em(e,this.value)},qE=function(e){return this.tags.has(e)},XE=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},JE=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:s,hasTag:l,matches:u,...c}=this;return{...c,tags:Array.from(n)}},ZE=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Go(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:lm(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:YE,hasTag:qE,can:XE,getMeta:ZE,toJSON:JE}}function Bn(t,e={}){return Go({...t,...e},t.machine)}function ew(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:s,can:l,hasTag:u,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const y in o){const T=o[y];v[y]={snapshot:T.getPersistedSnapshot(e),src:T.src,systemId:T._systemId,syncSnapshot:T._syncSnapshot}}return{...h,context:pm(s),children:v}}function pm(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:pc,id:r.id};else{const i=pm(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function tw(t,e,n,r,{event:i,id:o,delay:s},{internalQueue:l}){const u=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof s=="string"){const d=u&&u[s];f=typeof d=="function"?d(n,r):d}else f=typeof s=="function"?s(n,r):s;return typeof f!="number"&&l.push(c),[e,{event:c,id:o,delay:f}]}function nw(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function rw(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=tw,n.execute=nw,n}function iw(t,{machine:e,context:n},r,i){const o=(s,l={})=>{const{systemId:u,input:c}=l;if(typeof s=="string"){const f=hc(e,s);if(!f)throw new Error(`Actor logic '${s}' not implemented in machine '${e.id}'`);const d=ws(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:s,systemId:u});return i[d.id]=d,d}else return ws(s,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:s,systemId:u})};return(s,l)=>{const u=o(s,l);return i[u.id]=u,t.defer(()=>{u._processingStatus!==Pe.Stopped&&u.start()}),u}}function ow(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},s={context:e.context,event:n.event,spawn:iw(t,e,n.event,o),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(s,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(s,r):f}const u=Object.assign({},e.context,l);return[Bn(e,{context:u,children:Object.keys(o).length?{...e.children,...o}:e.children})]}function j(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=ow,e}let ld=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function sw(t,e,n,r,{to:i,event:o,id:s,delay:l},u){var _;const c=e.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);const f=typeof o=="function"?o(n,r):o;let d;if(typeof l=="string"){const y=c&&c[l];d=typeof y=="function"?y(n,r):y}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===ld.Parent?v=t.self._parent:h===ld.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(_=u.deferredActorIds)!=null&&_.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:s,delay:d}]}function lw(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function aw(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:o}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,o);return}t.system._relay(t.self,n,r.type===hE?Jg(t.self.id,r.data):r)})}function zt(t,e,n){function r(i,o){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=sw,r.retryResolve=lw,r.execute=aw,r}const ad=new WeakMap;function Yn(t,e,n){let r=ad.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},ad.set(t,r)),r[e]}const uw={},ii=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class Ec{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Yg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ed(this.config.states,(r,i)=>new Ec(r,{_parent:this,_key:i,_machine:this.machine})):uw,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=tn(this.config.entry).slice(),this.exit=tn(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=tn(e.tags).slice()}_initialize(){this.transitions=RE(this),this.config.always&&(this.always=Xn(this.config.always).map(e=>Cn(this,qg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(ii),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(ii),eventType:null})}:void 0,history:this.history,states:ed(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(ii)})),entry:this.entry.map(ii),exit:this.exit.map(ii),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Yn(this,"invoke",()=>tn(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??td(this.id,n),s=typeof r=="string"?r:`xstate.invoke.${td(this.id,n)}`;return{...e,src:s,id:o,systemId:i,toJSON(){const{onDone:l,onError:u,...c}=e;return{...c,type:"xstate.invoke",src:s,id:o}}}}))}get on(){return Yn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return Yn(this,"delayedTransitions",()=>NE(this))}get initial(){return Yn(this,"initial",()=>kE(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const s=Yn(this,`candidates-${r}`,()=>OE(this,r));for(const l of s){const{guard:u}=l,c=e.context;let f=!1;try{f=!u||gc(u,c,n,e)}catch(d){const h=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),o=l;break}}return o?[o]:void 0}get events(){return Yn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const cw="#";class wc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Ec(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new wc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=KE(this.root,e.value),r=Ss(Is(this.root,n));return Go({_nodes:[...r],context:e.context||{},children:{},status:vc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return Ol(e,n,r).snapshot}microstep(e,n,r){return Ol(e,n,r).microstates}getTransitionData(e,n){return yc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=Go({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Fr(o,n,e,[j(({spawn:l,event:u,self:c})=>i({spawn:l,input:u.input,self:c}))],r):o}getInitialSnapshot(e,n){const r=Zg(n),i=[],o=this.getPreInitialState(e,r,i),s=Ha([{target:[...um(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:l}=Ol(s,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=dc(e),r=n.slice(1),i=Ys(n[0])?n[0].slice(cw.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Ts(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return ew(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(u=>{const c=i[u],f=c.snapshot,d=c.src,h=typeof d=="string"?hc(this,d):d;if(!h)return;const v=ws(h,{id:u,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[u]=v});const o=Go({...e,children:r,_nodes:Array.from(Ss(Is(this.root,e.value)))},this);let s=new Set;function l(u,c){if(!s.has(u)){s.add(u);for(let f in u){const d=u[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===pc){u[f]=c[d.id];continue}l(d,c)}}}}return l(o.context,r),o}}function Pt(t,e){return new wc(t,e)}const fw=Pt({types:{},context:{startPoint:null,type:z.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},NUMBER_INPUT:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"},ENTER:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:j(()=>(be(!0),H([]),W([]),ge(null),{startPoint:null})),RECORD_START_POINT:j(({event:t})=>(ge(t.worldClickPoint),{startPoint:t.worldClickPoint})),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new dt(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=Vt(),n.lineWidth=jt(),W([n])},DRAW_FINAL_LINE:j(({context:t,event:e})=>{if(console.log("drawFinalLine",{context:t,event:e}),!t.startPoint)throw new Error("Start point is not set during DRAW_FINAL_LINE in LineEntity");let n;if(e.type==="NUMBER_INPUT"){const i=e.value,s=new tt(e.worldClickPoint.x-t.startPoint.x,e.worldClickPoint.y-t.startPoint.y).normalize();n=t.startPoint.translate(s.multiply(i))}else if(e.type==="MOUSE_CLICK")n=e.worldClickPoint;else throw new Error("Received unexpected event type in DRAW_FINAL_LINE of LineEntity");const r=new dt(t.startPoint,n);return r.lineColor=Vt(),r.lineWidth=jt(),ke(r),W([new dt(n,n)]),ge(n),{startPoint:n}})}}),dw=Pt({types:{},context:{startPoint:null,type:z.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{be(!0),W([]),H([]),ge(null)},RECORD_START_POINT:j(({event:t})=>(ge(t.worldClickPoint),{startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new Ht(t.startPoint,e.drawController.getWorldMouseLocation());n.lineColor=Vt(),n.lineWidth=jt(),W([n])},DRAW_FINAL_RECTANGLE:({context:t,event:e})=>{const n=e.worldClickPoint,r=new Ht(t.startPoint,n);r.lineColor=Vt(),r.lineWidth=jt(),ke(r)}}}),hw=Pt({types:{},context:{centerPoint:null,type:z.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:j(()=>(console.log("activate circle tool"),be(!0),W([]),H([]),ge(null),{centerPoint:null})),RECORD_START_POINT:j(({event:t})=>(ge(t.worldClickPoint),{centerPoint:t.worldClickPoint})),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new kr(t.centerPoint,Gt(e.drawController.getWorldMouseLocation(),t.centerPoint));n.lineColor=Vt(),n.lineWidth=jt(),W([n])},DRAW_FINAL_CIRCLE:j(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new kr(t.centerPoint,Gt(n,t.centerPoint));return r.lineColor=Vt(),r.lineWidth=jt(),ke(r),W([]),{centerPoint:null}})}});function Ur(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const o=i.distanceTo(t);o&&o[0]<r[0]&&(r=o,n=i)}),{distance:r[0],segment:r[1],entity:n}}function pw(t,e){const n=Ur(e.worldClickPoint,we());if(n&&n.distance<ac){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?H([r.id]):e.holdingCtrl?Rr(r)?H(Ne().filter(i=>i!==r.id)):H([...Ne(),r.id]):H([...Ne(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function gw(t,e,n){const r=new Ht(t,e);console.log("Finish selection: ",r);const i=gm(r,t),o=Ee(we().map(s=>{if(i){if(s.intersectsWithBox(r.getBoundingBox())||s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id}else if(s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id;return null}));H(o)}function mw(t,e){const n=new Ht(t,e),r=gm(n,t);n.lineColor=r?G_:H_,n.lineWidth=b_,n.lineStyle=K_,W([n])}function gm(t,e){if(!t.getShape()||!e)return!1;const n=Math.min(...t.getShape().vertices.map(r=>r.x));return Math.abs(e.x-n)>Ua}const mn=Pt({types:{},context:{startPoint:null,type:z.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),be(!1),W([]),H([])},HANDLE_FIRST_SELECT_POINT:j(({context:t,event:e})=>(console.log("handle first select point"),pw(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");mw(t.startPoint,e.drawController.getWorldMouseLocation())},SELECT_ENTITIES_INSIDE_RECTANGLE:({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");gw(t.startPoint,e.worldClickPoint,e.holdingCtrl),W([])},DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),Ks(E_()),H([]),W([])},RESET_SELECTION:j(()=>(W([]),H([]),{startPoint:null}))}});function vw(t,e,n,r){const i=bs(to([e,...r,t,n],pt),[s=>Gt(e,s)]),o=i.findIndex(s=>pt(t,s));if(o===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[o-1]||e,i[o+1]||n]}function yw(t,e){const n=t.map(r=>({point:r,angle:new St(e,r).slope}));return bs(n,[r=>r.angle]).map(r=>r.point)}function _w(t,e,n){const r=yw(to([...n,t],pt),e.getShape().center),i=r.findIndex(o=>pt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function Ew(t,e,n){const r=Hg(to([...n,t],pt),e.getShape().center,e.getShape().start),i=r.findIndex(o=>pt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function ud(t,e){return Ee(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function cd(t,e,n){const r=t.getShape(),[i,o]=vw(e,r.start,r.end,n),l=t.cutAtPoints([i,o]).filter(u=>!u.containsPointOnShape(e));$t(t),ke(...l)}function ww(t,e,n){if(n.length===0){$t(t);return}const[r,i]=_w(e,t,n),o=t.getShape(),s=o.center,l=[r,i,e].map(d=>Math.atan2(d.y-s.y,d.x-s.x)),[u,c]=Sw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new ot(s,o.r,u,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),$t(t),ke(f)}function Sw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function Tw(t,e,n){const[r,i]=Ew(e,t,n);if(pt(r,i)){$t(t);return}$t(t),t.cutAtPoints([r,i]).filter(o=>!o.containsPointOnShape(e)).forEach(o=>{Object.assign(o,{lineColor:t.lineColor,lineWidth:t.lineWidth}),ke(o)})}const Iw=Pt({types:{},context:{startPoint:null,type:z.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:j(()=>(console.log("activate eraser tool"),be(!1),W([]),H([]),{})),HANDLE_MOUSE_CLICK:j(({context:t,event:e})=>(xw(e.worldClickPoint),t))}});function xw(t){const e=Ur(t,we());if(!e)return;const n=e.segment.start,r=ud(e.entity,we());switch(e.entity.getType()){case q.Line:{const o=e.entity;cd(o,n,r);break}case q.Circle:{const o=e.entity;ww(o,n,r);break}case q.Arc:{const o=e.entity;Tw(o,n,r);break}case q.Rectangle:{const o=e.entity,l=at(o.getShape()).map(f=>new dt(f)),u=Ur(t,l);$t(o),ke(...l);const c=ud(u.entity,we());cd(u.entity,n,c);break}case q.Image:}}function fd(t,e,n){t.forEach(r=>r.move(e,n))}const Cw=Pt({types:{},context:{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null,type:z.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ne().length>0),Ne().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ne().length===0),Ne().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:mn,onDone:{actions:j(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=se())==null?void 0:t.getSnapshot()),{startPoint:null}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:zt("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:zt("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:zt("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_ENTITIES"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:j(()=>(console.log("activate move tool"),be(!1),W([]),H([]),ge(null),{startPoint:null,originalSelectedEntities:[],movedEntities:[],lastDrawLocation:null})),ENABLE_HELPERS:()=>{be(!0)},RECORD_START_POINT:j(({event:t})=>(ge(t.worldClickPoint),{startPoint:t.worldClickPoint})),COPY_SELECTION_BEFORE_MOVE:j(({context:t})=>{const e=nc();return W(e),$t(...e),H([]),{startPoint:t.startPoint,originalSelectedEntities:Ee(e.map(n=>n.clone())),movedEntities:e}}),DRAW_TEMP_MOVE_ENTITIES:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawController.getWorldMouseLocation(),r=t.originalSelectedEntities.map(o=>o.clone());fd(r,n.x-t.startPoint.x,n.y-t.startPoint.y);const i=new dt(t.startPoint,n);i.lineColor=jg,i.lineWidth=$g,i.lineStyle=Gg,W([i,...r])},MOVE_SELECTION:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=e.worldClickPoint;fd(t.originalSelectedEntities,n.x-t.startPoint.x,n.y-t.startPoint.y),ke(...t.originalSelectedEntities),W([]),H([])},DESELECT_ENTITIES:j(()=>(W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=we();return console.log({entities:e}),ke(...t.originalSelectedEntities),W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...mn.implementations.actions}});var Ae=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t.NUMBER_INPUT="NUMBER_INPUT",t.TEXT_INPUT="TEXT_INPUT",t.ABSOLUTE_POINT_INPUT="ABSOLUTE_POINT_INPUT",t.RELATIVE_POINT_INPUT="RELATIVE_POINT_INPUT",t))(Ae||{});class $i{constructor(e,n,r,i=0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"imageElement");D(this,"polygon");D(this,"angle");this.imageElement=e,n instanceof pn?this.polygon=n:this.polygon=cc(n,r),r instanceof w?this.angle=i:this.angle=r}draw(e){at(this.polygon).forEach(i=>{e.drawLine(i.start,i.end)});const n=this.polygon.box.width,r=this.polygon.box.height;e.drawImage(this.imageElement,this.polygon.box.xmin,this.polygon.box.ymin,n,r,this.angle)}move(e,n){this.polygon=this.polygon.translate(new tt(e,n))}scale(e,n){const r=this.polygon.box.center,i=xt(r,e,n);this.polygon=this.polygon.translate(new tt(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e),this.angle+=n}clone(){const e=document.createElement("img");return e.src=this.imageElement.src,new $i(e,this.polygon.clone())}intersectsWithBox(e){return qu.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=at(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=at(this.polygon);return[{point:e[0],type:U.LineEndPoint},{point:e[1],type:U.LineEndPoint},{point:e[2],type:U.LineEndPoint},{point:e[3],type:U.LineEndPoint},{point:n[0].middle(),type:U.LineMidPoint},{point:n[1].middle(),type:U.LineMidPoint},{point:n[2].middle(),type:U.LineMidPoint},{point:n[3].middle(),type:U.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?at(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:bn(this.lineColor)})}getType(){return q.Image}containsPointOnShape(e){return at(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:q.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y})),imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new pn(e.shapeData.points.map(o=>new w(o.x,o.y))),r=new Image;r.src=e.shapeData.imageData;const i=new $i(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function dd(t,e,n,r){const i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y);if(i===0||o===0)return null;const s=t/e,l=i/o;if(s<l){const u=Math.abs(o*s),c=n.x<r.x?n.x:n.x-u,f=n.y<r.y?n.y:n.y-o;return new Dt(c,f,c+u,f+o)}else{const u=Math.abs(i/s),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-u;return new Dt(c,f,c+i,f+u)}}const mm=Pt({types:{},context:{type:z.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[Ae.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{target:"INIT"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","INIT_IMAGE_IMPORT_TOOL","SWITCH_TO_SELECT_TOOL"]},ESC:{target:"INIT"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:j(()=>(be(!0),W([]),H([]),ge(null),{startPoint:null,imageElement:null})),STORE_IMAGE_DATA:j(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:j(({context:t,event:e})=>(ge(e.worldClickPoint),{...t,startPoint:e.worldClickPoint})),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!dd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.drawController.getWorldMouseLocation()))return;const r=new $i(t.imageElement,new pn),i=new Ht(cc(t.startPoint,e.drawController.getWorldMouseLocation()));W([r]),oc([i])},DRAW_FINAL_IMAGE_IMPORT:({context:t,event:e})=>{if(console.log("drawFinalImageImport",{context:t,event:e}),!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=dd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldClickPoint);if(!n)return;const r=new $i(t.imageElement,tE(n));ke(r)},SWITCH_TO_SELECT_TOOL:()=>{ji(new Mr(mn))}}});function hd(t,e,n,r){const i=Gt(e,r)/Gt(e,n);t.forEach(o=>o.scale(e,i))}const Pw=Pt({types:{},context:{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[],type:z.SCALE},initial:"INIT",states:{INIT:{description:"Initializing the scale tool",always:{actions:"INIT_SCALE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ne().length>0),Ne().length>0),target:"WAITING_FOR_BASE_VECTOR_START_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ne().length===0),Ne().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to scale",meta:{instructions:"Select what you want to scale, then ENTER"},invoke:{id:"selectToolInsideTheScaleTool",src:mn,onDone:{actions:j(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=se())==null?void 0:t.getSnapshot()),{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:zt("selectToolInsideTheScaleTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_SCALE_TOOL"]},ENTER:{actions:zt("selectToolInsideTheScaleTool",({event:t})=>t)},DRAW:{actions:zt("selectToolInsideTheScaleTool",({event:t})=>t)}}},WAITING_FOR_BASE_VECTOR_START_POINT:{description:"Select the origin of the scale operation",meta:{instructions:"Select the origin of the scale operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_START_POINT"],target:"WAITING_FOR_BASE_VECTOR_END_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_BASE_VECTOR_END_POINT:{description:"Select the end of the base scale line",meta:{instructions:"Select the end of the base scale line"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_END_POINT","COPY_SELECTION_BEFORE_SCALE"],target:"WAITING_FOR_SCALE_VECTOR_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_SCALE_VECTOR_END_POINT:{description:"Select the end of the scale line",meta:{instructions:"Select the end of the scale line"},on:{DRAW:{actions:["DRAW_TEMP_SCALE_ENTITIES"]},MOUSE_CLICK:{actions:["SCALE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_SCALE_TOOL:()=>{console.log("activate scale tool"),be(!1),W([]),H([]),ge(null)},ENABLE_HELPERS:()=>{be(!0)},RECORD_BASE_VECTOR_START_POINT:j(({context:t,event:e})=>(ge(e.worldClickPoint),{...t,baseVectorStartPoint:e.worldClickPoint})),RECORD_BASE_VECTOR_END_POINT:j(({context:t,event:e})=>({...t,baseVectorEndPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_SCALE:j(({context:t})=>{const e=nc();return W(e),$t(...e),H([]),{...t,originalSelectedEntities:Ee(e.map(n=>n.clone()))}}),DRAW_TEMP_SCALE_ENTITIES:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling draw temp scale entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=Ee(t.originalSelectedEntities.map(i=>i.clone()));hd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),W(r)},SCALE_SELECTION:({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling scale selection without some scale vector endpoints");const n=e.worldClickPoint,r=Ee(t.originalSelectedEntities.map(i=>i.clone()));hd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),ke(...r),W([]),H([])},DESELECT_ENTITIES:j(()=>(W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=we();return console.log({entities:e}),ke(...t.originalSelectedEntities),W([]),W([]),H([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...mn.implementations.actions}});function pd(t,e,n,r){const i=new St(e,r).slope-new St(e,n).slope;t.forEach(o=>o.rotate(e,i))}const Lw=Pt({types:{},context:{rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[],type:z.ROTATE},initial:"INIT",states:{INIT:{description:"Initializing the rotate tool",always:{actions:"INIT_ROTATE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ne().length>0),Ne().length>0),target:"WAITING_FOR_ROTATION_ORIGIN"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ne().length===0),Ne().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to rotate",meta:{instructions:"Select what you want to rotate, then ENTER"},invoke:{id:"selectToolInsideTheRotateTool",src:mn,onDone:{actions:j(({context:t})=>{var e;return console.log("select tool finished selection"),console.log("actor: ",(e=se())==null?void 0:e.getSnapshot()),{...t}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:zt("selectToolInsideTheRotateTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_ROTATE_TOOL"]},ENTER:{actions:zt("selectToolInsideTheRotateTool",({event:t})=>t)},DRAW:{actions:zt("selectToolInsideTheRotateTool",({event:t})=>t)}}},WAITING_FOR_ROTATION_ORIGIN:{description:"Select the origin of the rotate operation",meta:{instructions:"Select the origin of the rotate operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ORIGIN"],target:"WAITING_FOR_ANGLE_START_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_START_POINT:{description:"Select the end of the base rotate line",meta:{instructions:"Select the end of the base rotate line"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ANGLE_START_POINT","COPY_SELECTION_BEFORE_ROTATE"],target:"WAITING_FOR_ANGLE_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_END_POINT:{description:"Select the end of the rotate line",meta:{instructions:"Select the end of the rotate line"},on:{DRAW:{actions:["DRAW_TEMP_ROTATE_ENTITIES"]},MOUSE_CLICK:{actions:["ROTATE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_ROTATE_TOOL:()=>{console.log("activate rotate tool"),be(!1),W([]),H([]),ge(null)},ENABLE_HELPERS:()=>{be(!0)},RECORD_ROTATION_ORIGIN:j(({context:t,event:e})=>(ge(e.worldClickPoint),{...t,rotationOrigin:e.worldClickPoint})),RECORD_ROTATION_ANGLE_START_POINT:j(({context:t,event:e})=>({...t,angleStartPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_ROTATE:j(({context:t})=>{const e=nc();return W(e),$t(...e),H([]),{...t,originalSelectedEntities:Ee(e.map(n=>n.clone()))}}),DRAW_TEMP_ROTATE_ENTITIES:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling draw temp rotate entities without a base start point or base end point");const n=e.drawController.getWorldMouseLocation(),r=Ee(t.originalSelectedEntities.map(i=>i.clone()));pd(r,t.rotationOrigin,t.angleStartPoint,n),W(r)},ROTATE_SELECTION:({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling rotate selection without some rotate vector endpoints");const n=e.worldClickPoint,r=Ee(t.originalSelectedEntities.map(i=>i.clone()));pd(r,t.rotationOrigin,t.angleStartPoint,n),ke(...r),W([]),H([])},DESELECT_ENTITIES:j(({context:t})=>(W([]),H([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]})),RESTORE_ORIGINAL_ENTITIES:j(({context:t})=>{const e=we();return console.log({entities:e}),ke(...t.originalSelectedEntities),W([]),H([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]}}),...mn.implementations.actions}});function gd(t=[]){let e=t[0],n;for(const r of t)(n==null||r>n)&&(n=r,e=r);return e}function md(t=[]){let e=t[0],n;for(const r of t)(n==null||r<n)&&(n=r,e=r);return e}class Gi{constructor(e,n,r){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"startPoint");D(this,"endPoint");D(this,"offsetPoint");this.startPoint=e,this.endPoint=n,this.offsetPoint=r}getDrawPoints(){const e=new St(this.startPoint,this.endPoint),[,n]=this.offsetPoint.distanceTo(e),r=n.end;let i;pt(r,this.offsetPoint)?i=e.norm:i=new tt(r,this.offsetPoint);const o=i.normalize(),s=this.startPoint.clone().translate(i),l=this.endPoint.clone().translate(i),u=this.startPoint.clone().translate(o.multiply(qf)),c=this.endPoint.clone().translate(o.multiply(qf)),f=s.clone().translate(o.multiply(Yf)),d=l.clone().translate(o.multiply(Yf)),v=new w((s.x+l.x)/2,(s.y+l.y)/2).clone().translate(o.multiply(j_));return{offsetStartPoint:s,offsetEndPoint:l,offsetStartPointExtend:f,offsetEndPointExtend:d,offsetStartPointMargin:u,offsetEndPointMargin:c,midpointMeasurementLineOffset:v,normalUnit:o}}draw(e){const n=this.getDrawPoints();if(!n)return;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u,midpointMeasurementLineOffset:c,normalUnit:f}=n;e.drawArrowHead(r,i),e.drawArrowHead(i,r),e.drawLine(r,i),e.drawLine(l,o),e.drawLine(u,s);const d=F1(Gt(this.startPoint,this.endPoint),V_);e.drawText(String(d),c,{textAlign:"center",textDirection:f.rotate90CCW(),fontSize:$_})}move(e,n){this.startPoint=this.startPoint.translate(e,n),this.endPoint=this.endPoint.translate(e,n),this.offsetPoint=this.offsetPoint.translate(e,n)}scale(e,n){this.startPoint=xt(this.startPoint,e,n),this.endPoint=xt(this.endPoint,e,n),this.offsetPoint=xt(this.offsetPoint,e,n)}rotate(e,n){this.startPoint=this.startPoint.rotate(n,e),this.endPoint=this.endPoint.rotate(n,e),this.offsetPoint=this.offsetPoint.rotate(n,e)}clone(){return new Gi(this.startPoint.clone(),this.endPoint.clone(),this.offsetPoint.clone())}intersectsWithBox(e){const n=this.getDrawPoints(),r=[new yt(n.offsetStartPoint,n.offsetEndPoint),new yt(n.offsetStartPointMargin,n.offsetStartPointExtend),new yt(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(i.intersect(e).length>0||e.contains(i))return!0;return!1}isContainedInBox(e){const n=this.getDrawPoints(),r=[new yt(n.offsetStartPoint,n.offsetEndPoint),new yt(n.offsetStartPointMargin,n.offsetStartPointExtend),new yt(n.offsetEndPointMargin,n.offsetEndPointExtend)];for(const i of r)if(!e.contains(i))return!1;return!0}getBoundingBox(){const e=this.getDrawPoints();if(!e)return null;const n=[e.offsetStartPointMargin,e.offsetStartPointExtend,e.offsetEndPointMargin,e.offsetEndPointExtend];return new Dt(md(n.map(r=>r.x)),md(n.map(r=>r.y)),gd(n.map(r=>r.x)),gd(n.map(r=>r.y)))}getShape(){return null}getSnapPoints(){return[]}getIntersections(){return[]}getFirstPoint(){return this.startPoint}distanceTo(e){const n=this.getDrawPoints();if(!n)return null;const{offsetStartPoint:r,offsetEndPoint:i,offsetStartPointExtend:o,offsetEndPointExtend:s,offsetStartPointMargin:l,offsetEndPointMargin:u}=n,f=new St(r,i).distanceTo(e),h=new St(l,o).distanceTo(e),_=new St(u,s).distanceTo(e);return D1([f,h,_],y=>y[0])}getSvgString(){throw new Error("getSvgString for MeasurementEntity not yet implemented")}getType(){return q.Measurement}containsPointOnShape(e){throw new Error("containsPointOnShape for MeasurementEntity not yet implemented")}async toJson(){return{id:this.id,type:q.Measurement,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.startPoint.x,y:this.startPoint.y},endPoint:{x:this.endPoint.x,y:this.endPoint.y},offsetPoint:{x:this.offsetPoint.x,y:this.offsetPoint.y}}}}static async fromJson(e){const n=new w(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new w(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new w(e.shapeData.offsetPoint.x,e.shapeData.offsetPoint.y),o=new Gi(n,r,i);return o.id=e.id,o.lineColor=e.lineColor,o.lineWidth=e.lineWidth,o}}const Aw=Pt({types:{},context:{startPoint:null,endPoint:null,type:z.MEASUREMENT},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_MEASUREMENT_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the measurement",meta:{instructions:"Select the start point of the measurement"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the measurement",meta:{instructions:"Select the end point of the measurement"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"RECORD_END_POINT",target:"WAITING_FOR_OFFSET"},ESC:{target:"INIT"}}},WAITING_FOR_OFFSET:{description:"Select the offset to display the measurement at",meta:{instructions:"Select the offset to display the measurement at"},on:{DRAW:{actions:"DRAW_TEMP_MEASUREMENT"},MOUSE_CLICK:{actions:"DRAW_FINAL_MEASUREMENT",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_MEASUREMENT_TOOL:j(()=>(be(!0),H([]),W([]),ge(null),{startPoint:null})),RECORD_START_POINT:j(({event:t})=>(ge(t.worldClickPoint),{startPoint:t.worldClickPoint})),RECORD_END_POINT:j(({context:t,event:e})=>(ge(e.worldClickPoint),{...t,endPoint:e.worldClickPoint})),DRAW_TEMP_MEASUREMENT:({context:t,event:e})=>{const n=t.startPoint;let r,i;if(t.endPoint)r=t.endPoint,i=e.drawController.getWorldMouseLocation();else{r=e.drawController.getWorldMouseLocation();const s=new tt(n,r).rotate(-90*Wa).normalize();i=n.clone().translate(s.multiply(W_))}const o=new Gi(t.startPoint,r,i);o.lineColor=Vt(),o.lineWidth=jt(),W([o])},DRAW_FINAL_MEASUREMENT:({context:t,event:e})=>{console.log("drawFinalMeasurement",{context:t,event:e});const n=e.worldClickPoint,r=new Gi(t.startPoint,t.endPoint,n);r.lineColor=Vt(),r.lineWidth=jt(),ke(r)}}}),xs={[z.LINE]:fw,[z.RECTANGLE]:dw,[z.CIRCLE]:hw,[z.SELECT]:mn,[z.ERASER]:Iw,[z.MOVE]:Cw,[z.SCALE]:Pw,[z.ROTATE]:Lw,[z.IMAGE_IMPORT]:mm,[z.MEASUREMENT]:Aw};function Ow(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const Nw=()=>{const[t,e]=R.useState(z.LINE),[n,r]=R.useState(45),[i,o]=R.useState("#FFF"),[s,l]=R.useState(1),[u,c]=R.useState(1),f=R.useCallback(()=>{var y,T;e((T=(y=se())==null?void 0:y.getSnapshot())==null?void 0:T.context.type),r(zg()),o(Vt()),l(jt()),c(ft().getScreenScale())},[]),d=y=>{y.ctrlKey&&y.preventDefault()};R.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(ys.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(ys.UPDATE_STATE,f)}),[f]);const h=R.useCallback(y=>{var g;(g=se())==null||g.stop();const T=new Mr(xs[y]);ji(T,!1),e(y)},[]),v=R.useCallback(y=>{r(y),I_(y,!1)},[]),_=R.useCallback(()=>{ft().setScreenScale(1),ft().setScreenOffset(new w(0,0))},[]);return M.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[M.jsx(Q,{title:"Select (s)",icon:ve.Direction,onClick:()=>{h(z.SELECT)},active:t===z.SELECT}),M.jsx(Q,{title:"Line (l)",icon:ve.Line,onClick:()=>{h(z.LINE)},active:t===z.LINE}),M.jsx(Q,{title:"Rectangle (r)",icon:ve.Square,onClick:()=>{h(z.RECTANGLE)},active:t===z.RECTANGLE}),M.jsx(Q,{title:"Circle (c)",icon:ve.Circle,onClick:()=>{h(z.CIRCLE)},active:t===z.CIRCLE}),M.jsx(Q,{className:"mt-2",title:"Move",icon:ve.Expand,iconClassname:"transform rotate-45",onClick:()=>h(z.MOVE),active:t===z.MOVE}),M.jsx(Q,{title:"Scale",icon:ve.Scale,onClick:()=>h(z.SCALE),active:t===z.SCALE}),M.jsx(Q,{title:"Rotate",icon:ve.Clockwise,onClick:()=>h(z.ROTATE),active:t===z.ROTATE}),M.jsx(Q,{className:"mt-2",title:"Add measurements",icon:ve.Measurement,onClick:()=>h(z.MEASUREMENT),active:t===z.MEASUREMENT}),M.jsx(Q,{className:"mt-2",title:"Undo (ctrl + z)",icon:ve.ArrowLeftCircle,onClick:()=>Bg()}),M.jsx(Q,{title:"Redo (ctrl + shift + z)",icon:ve.ArrowRightCircle,onClick:()=>Vg()}),M.jsx(Q,{className:"mt-2",title:"Delete segments",icon:ve.Crop,onClick:()=>h(z.ERASER),active:t===z.ERASER}),M.jsx(xl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:eE.map(y=>M.jsx(Q,{title:"Change line color",style:{backgroundColor:y},active:y===i,onClick:()=>A_(y)},"line-color--"+y))}),M.jsx(xl,{title:"Line width",label:String(s)+"px",children:Qg(9).map(y=>{const T=y+1;return M.jsx(Q,{title:"Change line width",label:String(T)+"px",active:T===s,onClick:()=>O_(T)},"line-width--"+T)})}),M.jsxs(xl,{title:"Snap angles",label:n+"°",children:[M.jsx(Q,{title:"Add guide every 5 degrees",label:"5°",onClick:()=>v(5),active:n===5}),M.jsx(Q,{title:"Add guide every 15 degrees",label:"15°",onClick:()=>v(15),active:n===15}),M.jsx(Q,{title:"Add guide every 30 degrees",label:"30°",onClick:()=>v(30),active:n===30}),M.jsx(Q,{title:"Add guide every 45 degrees",label:"45°",onClick:()=>v(45),active:n===45}),M.jsx(Q,{title:"Add guide every 90 degrees",label:"90°",onClick:()=>v(90),active:n===90})]}),M.jsx(Q,{title:"Zoom level",label:(u*100).toFixed(0)+"%",onClick:_}),M.jsx(Q,{className:"relative mt-2",title:"Import image into the current drawing",icon:ve.Image,onClick:Gf,children:M.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async y=>{var p;const T=await Ow((p=y.target.files)==null?void 0:p[0]),g=new Mr(mm);g.start(),g.send({type:Ae.FILE_SELECTED,image:T}),ji(g),y.target.files=null}})}),M.jsx(Q,{className:"relative",title:"Load from JSON file",icon:ve.Folder,onClick:Gf,children:M.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async y=>{var T;await nE((T=y.target.files)==null?void 0:T[0]),y.target.files=null}})}),M.jsx(Q,{title:"Save to JSON file",icon:ve.Save,onClick:()=>rE()}),M.jsx(Q,{title:"Export to SVG file",label:"SVG",onClick:()=>iE()}),M.jsx(Q,{title:"Export to PNG file",label:"PNG",onClick:()=>sE()}),M.jsx(Q,{className:"mt-2",title:"Github",icon:ve.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function Rw(){return M.jsx("div",{children:M.jsx(Nw,{})})}function vd(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const o=t[i];e.push(...r.getIntersections(o))}}return e}function ba(t,e){let n=null,r=1/0;return t.forEach(i=>{const o=Gt(i.point,e);o<r&&(r=o,n=i)}),{distance:r,snapPoint:n}}function Ka(t,e,n){const{distance:r,snapPoint:i}=ba(t.filter(l=>l.type!==U.AngleGuide),e);if(r<n)return i;const{distance:o,snapPoint:s}=ba(t.filter(l=>l.type===U.AngleGuide),e);return o<n?s:null}function kw(t,e){return Qg(180/e,n=>{const i=n*e*(Math.PI/180),o=t.x+Math.cos(i),s=t.y+Math.sin(i);return new dt(new w(t.x-1e4*(o-t.x),t.y-1e4*(s-t.y)),new w(t.x+1e4*(o-t.x),t.y+1e4*(s-t.y)))})}function Mw(t,e,n,r,i){let o=null,s=null;const l=[],u=[];e.forEach(v=>{const _=kw(v,r),y=Ur(n,_);y.distance<F_&&(u.push(y.entity),l.push({point:y.segment.start,type:U.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...vd(Ee(t)).map(v=>({point:v,type:U.Intersection}))],f=Ka(c,n,i);f&&(o=f);const d=[...l,...vd([...Ee(t),...u]).map(v=>({point:v,type:U.Intersection}))],h=Ka(d,n,i);return h&&(s=h),{angleGuides:u,entitySnapPoint:o,angleSnapPoint:s}}function yd(t,e){e.forEach(n=>{t.setLineStyles(rc(n),Rr(n),n.lineColor,n.lineWidth,[]),n.draw(t)})}function Dw(t,e){e.forEach(n=>{t.setLineStyles(rc(n),Rr(n),"#FF5500",1,[]),n.draw(t)})}function zw(t,e,n){if(!e)return;const r=e.point;switch(t.setLineStyles(!1,!1,z_,1,[]),n&&(t.drawLine(new w(r.x-O/2,r.y),new w(r.x+O/2,r.y)),t.drawLine(new w(r.x,r.y-O/2),new w(r.x,r.y+O/2))),e.type){case U.LineEndPoint:t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x+O/2,r.y-O/2)),t.drawLine(new w(r.x+O/2,r.y-O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y+O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x-O/2,r.y+O/2));break;case U.LineMidPoint:t.drawLine(new w(r.x,r.y-O/2),new w(r.x-O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y+O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x+O/2,r.y+O/2),new w(r.x,r.y-O/2));break;case U.AngleGuide:t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x+O/2,r.y-O/2)),t.drawLine(new w(r.x+O/2,r.y-O/2),new w(r.x-O/2,r.y+O/2)),t.drawLine(new w(r.x-O/2,r.y+O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x+O/2,r.y+O/2),new w(r.x-O/2,r.y-O/2));break;case U.Intersection:t.drawLine(new w(r.x-O/2,r.y-O/2),new w(r.x+O/2,r.y+O/2)),t.drawLine(new w(r.x+O/2,r.y-O/2),new w(r.x-O/2,r.y+O/2));break;case U.CircleCenter:t.drawArc(r,O/2,0,2*Math.PI);break;case U.CircleCardinal:t.drawLine(new w(r.x,r.y-O/2),new w(r.x-O/2,r.y)),t.drawLine(new w(r.x-O/2,r.y),new w(r.x,r.y+O/2)),t.drawLine(new w(r.x,r.y+O/2),new w(r.x+O/2,r.y)),t.drawLine(new w(r.x+O/2,r.y),new w(r.x,r.y-O/2));break}}function Fw(t,e){e.forEach(n=>{t.setLineStyles(rc(n),Rr(n),jg,$g,Gg),n.draw(t)})}function Uw(t,e){e&&(t.setLineStyles(!1,!1,"#FFF",1,[]),t.drawLine(new w(t.getScreenMouseLocation().x,t.getScreenMouseLocation().y-Po),new w(t.getScreenMouseLocation().x,t.getScreenMouseLocation().y+Po)),t.drawLine(new w(t.getScreenMouseLocation().x-Po,t.getScreenMouseLocation().y),new w(t.getScreenMouseLocation().x+Po,t.getScreenMouseLocation().y)))}function Ww(t){t.clearCanvas(),Fw(t,d_()),yd(t,h_()),yd(t,we()),Dw(t,g_());const{snapPoint:e}=ba(Ee([Vi(),_s()]),t.getWorldMouseLocation()),n=!!e&&tc().some(r=>r.milliSecondsHovered>uc&&pt(r.snapPoint.point,e.point));zw(t,e,n),Uw(t,f_()),__().draw(t)}function Bw(t,e,n,r,i){if(!t)return;const o=e.at(-1);let s;o?Gt(t.point,o.snapPoint.point)<r?s=[...e.slice(0,e.length-1),{...o,milliSecondsHovered:o.milliSecondsHovered+i}]:o.milliSecondsHovered>=uc?s=[...e,{snapPoint:t,milliSecondsHovered:i}]:s=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:s=[{snapPoint:t,milliSecondsHovered:i}];const l=s.slice(0,U_);n(l)}class Vw{constructor(e,n){D(this,"screenOffset",new w(0,0));D(this,"screenScale",1);D(this,"screenMouseLocation");this.context=e,this.canvasSize=n,this.screenMouseLocation=new w(n.x/2,n.y/2)}getScreenScale(){return this.screenScale}setScreenScale(e){this.screenScale=e}getScreenOffset(){return this.screenOffset}setScreenOffset(e){this.screenOffset=e}getScreenMouseLocation(){return this.screenMouseLocation}setScreenMouseLocation(e){this.screenMouseLocation=e}getWorldMouseLocation(){return this.screenToWorld(this.screenMouseLocation)}setLineStyles(e,n,r,i,o=[]){this.context.strokeStyle=r,this.context.lineWidth=i,this.context.setLineDash(o),e&&(this.context.lineWidth=i+1),n&&this.context.setLineDash([5,5])}clearCanvas(){var e,n;this.canvasSize!==null&&this.context&&(this.context.fillStyle=D_,this.context.fillRect(0,0,(e=this.canvasSize)==null?void 0:e.x,(n=this.canvasSize)==null?void 0:n.y))}drawLine(e,n){const[r,i]=this.worldsToScreens([e,n]);this.context.beginPath(),this.context.moveTo(r.x,r.y),this.context.lineTo(i.x,i.y),this.context.stroke()}drawArc(e,n,r,i){const o=this.worldToScreen(e),s=n*this.screenScale;this.context.beginPath(),this.context.arc(o.x,o.y,s,r,i),this.context.stroke()}drawArrowHead(e,n){const i=new tt(n,e).normalize(),o=n.clone().translate(i.multiply(B_*this.screenScale)),s=i.rotate(90*Wa),l=i.rotate(-90*Wa),u=o.clone().translate(s.multiply(Xf*this.screenScale)),c=o.clone().translate(l.multiply(Xf*this.screenScale)),[f,d,h]=this.worldsToScreens([n,u,c]);this.context.beginPath(),this.context.moveTo(f.x,f.y),this.context.lineTo(d.x,d.y),this.context.lineTo(h.x,h.y),this.context.lineTo(f.x,f.y),this.context.fillStyle="#FFF",this.context.stroke(),this.context.fill()}drawText(e,n,r={}){const i=this.worldToScreen(n);this.drawTextScreen(e,i,{...r,fontSize:r.fontSize?r.fontSize*this.screenScale:void 0})}drawTextScreen(e,n,r={}){const i={textDirection:new tt(1,0),textAlign:"center",textColor:"#FFF",fontSize:J_,fontFamily:"sans-serif",...r};this.context.save(),this.context.translate(n.x,n.y);const o=Math.atan2(i.textDirection.y,i.textDirection.x);this.context.rotate(o),this.context.font=`${i.fontSize}px ${i.fontFamily}`,this.context.textAlign=i.textAlign,this.context.fillStyle=i.textColor,this.context.fillText(e,0,0),this.context.restore()}drawImage(e,n,r,i,o,s){const l=n+i/2,u=r+o/2;this.context.translate(l,u),this.context.rotate(s),this.context.drawImage(e,-i/2,-o/2,i,o),this.context.rotate(-s),this.context.translate(-l,-u)}worldToScreen(e){return new w((e.x-this.screenOffset.x)*this.screenScale,(e.y-this.screenOffset.y)*this.screenScale)}worldsToScreens(e){return e.map(this.worldToScreen.bind(this))}screenToWorld(e){return new w(e.x/this.screenScale+this.screenOffset.x,e.y/this.screenScale+this.screenOffset.y)}screensToWorlds(e){return e.map(this.screenToWorld.bind(this))}panScreen(e,n){this.screenOffset=new w(this.screenOffset.x-e/this.screenScale,this.screenOffset.y-n/this.screenScale)}zoomScreen(e){const n=this.getWorldMouseLocation(),r=this.getScreenScale()*(1-Q_*(e/Math.abs(e)));this.setScreenScale(r);const i=this.getWorldMouseLocation();this.panScreen(n.x-i.x,n.y-i.y)}fillRectScreen(e,n,r,i,o){this.context.fillStyle=o,this.context.fillRect(e,n,r,i)}}const jw=/^[0-9]+([.][0-9]+)?$/,_d=/^([0-9]+([.][0-9]+))\s*,\s*([0-9]+([.][0-9]+)?)$/,Ed=/^@([0-9]+([.][0-9]+))\s*,\s*([0-9]+([.][0-9]+)?)$/;class $w{constructor(){D(this,"text","");document.addEventListener("keydown",e=>{this.handleKeyStroke(e)}),document.addEventListener("mouseup",e=>{this.handleMouseUp(e)}),document.addEventListener("contextmenu",e=>{e.preventDefault()})}draw(e){const n=e.getScreenMouseLocation();e.fillRectScreen(n.x+Qn,n.y+Qn,Y_,Lo,q_),e.drawTextScreen(this.text,new w(n.x+Qn+2,n.y+Qn+Lo-2),{textAlign:"left",textColor:X_,fontSize:18});const r=this.getToolNamesFromPrefixText(),i=Dg(),o=[];i&&o.push(i),r.length&&o.push(...r),this.drawListBelowInputField(e,o)}handleMouseUp(e){e.button===2&&(console.log("right mouse button"),e.preventDefault(),e.stopPropagation(),this.handleEnterKey())}handleKeyStroke(e){var n,r;e.ctrlKey&&e.key==="v"||(e.ctrlKey&&!e.shiftKey&&e.key==="z"?this.handleUndo(e):e.ctrlKey&&e.shiftKey&&e.key==="z"?this.handleRedo(e):e.ctrlKey&&e.key==="y"?this.handleRedo(e):e.key==="Backspace"?(e.preventDefault(),this.text=this.text.slice(0,this.text.length-1)):e.key==="Delete"?(e.preventDefault(),(n=se())==null||n.send({type:Ae.DELETE})):e.key==="Escape"?this.handleEscapeKey():e.key==="Enter"?this.handleEnterKey():((r=e.key)==null?void 0:r.length)===1&&(this.text+=e.key.toUpperCase()))}handleEscapeKey(){var e;this.text===""?(e=se())==null||e.send({type:Ae.ESC}):this.text=""}getToolNamesFromPrefixText(){return this.text===""?[]:Object.keys(xs).filter(e=>e.startsWith(this.text.toUpperCase()))||null}handleEnterKey(){var e,n,r,i,o,s,l,u,c,f;if(this.text==="")(e=se())==null||e.send({type:Ae.ENTER});else if(this.getToolNamesFromPrefixText()[0]){const d=this.getToolNamesFromPrefixText()[0];(n=se())==null||n.stop();const h=new Mr(xs[d]);ji(h),this.text=""}else if(jw.test(this.text))(o=se())==null||o.send({type:Ae.NUMBER_INPUT,value:parseFloat(this.text),worldClickPoint:((r=_s())==null?void 0:r.point)||((i=Vi())==null?void 0:i.point)||ft().getWorldMouseLocation()}),this.text="";else if(_d.test(this.text)){const d=_d.exec(this.text);if(!d)return;const h=parseFloat(d[1]),v=parseFloat(d[3]);(s=se())==null||s.send({type:Ae.ABSOLUTE_POINT_INPUT,value:new w(h,v)}),this.text=""}else if(Ed.test(this.text)){const d=Ed.exec(this.text);if(!d)return;const h=parseFloat(d[1]),v=parseFloat(d[3]);(c=se())==null||c.send({type:Ae.RELATIVE_POINT_INPUT,value:new w(h,v),worldClickPoint:((l=_s())==null?void 0:l.point)||((u=Vi())==null?void 0:u.point)||ft().getWorldMouseLocation()}),this.text=""}else(f=se())==null||f.send({type:Ae.TEXT_INPUT,value:this.text}),this.text=""}handleUndo(e){var n;e.preventDefault(),Bg(),W([]),H([]),(n=se())==null||n.send({type:Ae.ESC})}handleRedo(e){var n;e.preventDefault(),Vg(),W([]),H([]),(n=se())==null||n.send({type:Ae.ESC})}drawListBelowInputField(e,n){const r=e.getScreenMouseLocation(),i=r.y+Qn+Lo*2+2,o=Lo;n.forEach((s,l)=>{e.drawTextScreen(s,new w(r.x+Qn+2,i+l*o),{textAlign:"left",textColor:Z_,fontSize:18})})}}Nl.createRoot(document.getElementById("root")).render(M.jsx(Fm.StrictMode,{children:M.jsx(Rw,{})}));function Gw(){ic(!0)}function Hw(t){var i,o;ic(!0);const e=new w(t.clientX,t.clientY),n=ft();n.setScreenMouseLocation(e);const r=m_();if(r&&(n.panScreen(t.clientX-r.x,t.clientY-r.y),sc(e)),qw(),((o=(i=se())==null?void 0:i.getSnapshot())==null?void 0:o.context.type)===z.SELECT){const s=Ur(n.screenToWorld(e),we());s.distance<ac?Fa([s.entity.id]):Fa([])}}function bw(){ic(!1)}function Kw(t){ft().zoomScreen(t.deltaY)}function Qw(t){t.button===vs.Middle&&sc(new w(t.clientX,t.clientY))}function Yw(t){if(t.button===vs.Middle&&sc(null),t.button===vs.Left){const e=ft(),n=Ka(Ee([Vi(),_s()]),e.getWorldMouseLocation(),lc/e.getScreenScale()),r=ft().screenToWorld(new w(t.clientX,t.clientY)),i=n?n.point:r,o=se();o==null||o.send({type:Ae.MOUSE_CLICK,worldClickPoint:i,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function qw(){const t=zg(),e=ft(),n=we(),r=e.getScreenScale(),i=e.getWorldMouseLocation(),l=tc().filter(u=>u.milliSecondsHovered>uc).map(u=>u.snapPoint.point);if(p_()){const{angleGuides:u,entitySnapPoint:c,angleSnapPoint:f}=Mw(n,Ee([v_(),...l]),i,t,lc/r);oc(u),Fg(c),Ug(f)}}function vm(t,e){var i,o,s,l,u;const n=y_(),r=e-n;if(L_(e),(i=se())!=null&&i.getSnapshot().can({type:Ae.DRAW})&&((o=se())==null||o.send({type:Ae.DRAW,drawController:t})),((u=(l=(s=se())==null?void 0:s.getSnapshot())==null?void 0:l.context)==null?void 0:u.type)===z.SELECT){const c=ft();if(!c)throw new Error("getScreenCanvasDrawController() returned null");const{distance:f,entity:d}=Ur(c.getWorldMouseLocation(),we());f<ac&&Fa([d.id])}Bw(Vi(),tc(),P_,lc/t.getScreenScale(),r),Ww(t),requestAnimationFrame(c=>{vm(t,c)})}function wd(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),w_(new w(window.innerWidth,window.innerHeight));const t=c_();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function Xw(){const t=document.getElementsByTagName("canvas")[0];if(t){S_(t),t.addEventListener("mousedown",Qw),t.addEventListener("mousemove",Hw),t.addEventListener("mouseup",Yw),t.addEventListener("wheel",Kw),t.addEventListener("mouseout",bw),t.addEventListener("mouseenter",Gw),window.addEventListener("resize",wd);const e=new $w;C_(e),wd();const n=t.getContext("2d");if(!n)return;const r=new Vw(n,ec());x_(r),vm(r,0);const i=new Mr(xs[z.LINE]);i.start(),ji(i)}}document.addEventListener("DOMContentLoaded",()=>{Xw()});
