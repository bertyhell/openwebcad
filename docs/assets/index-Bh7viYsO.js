var vm=Object.defineProperty;var ym=(t,e,n)=>e in t?vm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>ym(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _m(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fd={exports:{}},vo={},dd={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ui=Symbol.for("react.element"),wm=Symbol.for("react.portal"),Em=Symbol.for("react.fragment"),Sm=Symbol.for("react.strict_mode"),xm=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Im=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Lm=Symbol.for("react.memo"),Am=Symbol.for("react.lazy"),wc=Symbol.iterator;function km(t){return t===null||typeof t!="object"?null:(t=wc&&t[wc]||t["@@iterator"],typeof t=="function"?t:null)}var hd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pd=Object.assign,gd={};function kr(t,e,n){this.props=t,this.context=e,this.refs=gd,this.updater=n||hd}kr.prototype.isReactComponent={};kr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function md(){}md.prototype=kr.prototype;function Wu(t,e,n){this.props=t,this.context=e,this.refs=gd,this.updater=n||hd}var ju=Wu.prototype=new md;ju.constructor=Wu;pd(ju,kr.prototype);ju.isPureReactComponent=!0;var Ec=Array.isArray,vd=Object.prototype.hasOwnProperty,$u={current:null},yd={key:!0,ref:!0,__self:!0,__source:!0};function _d(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vd.call(e,r)&&!yd.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ui,type:t,key:s,ref:o,props:i,_owner:$u.current}}function Om(t,e){return{$$typeof:Ui,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ui}function Nm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sc=/\/+/g;function Go(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nm(""+t.key):e.toString(36)}function Ss(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ui:case wm:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Go(o,0):r,Ec(i)?(n="",t!=null&&(n=t.replace(Sc,"$&/")+"/"),Ss(i,e,n,"",function(c){return c})):i!=null&&(Vu(i)&&(i=Om(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Sc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ec(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Go(s,l);o+=Ss(s,e,n,a,i)}else if(a=km(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Go(s,l++),o+=Ss(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ts(t,e,n){if(t==null)return t;var r=[],i=0;return Ss(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Rm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},xs={transition:null},Mm={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:xs,ReactCurrentOwner:$u};function wd(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:ts,forEach:function(t,e,n){ts(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ts(t,function(){e++}),e},toArray:function(t){return ts(t,function(e){return e})||[]},only:function(t){if(!Vu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=kr;U.Fragment=Em;U.Profiler=xm;U.PureComponent=Wu;U.StrictMode=Sm;U.Suspense=Pm;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm;U.act=wd;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pd({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$u.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)vd.call(e,a)&&!yd.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ui,type:t.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(t){return t={$$typeof:Im,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tm,_context:t},t.Consumer=t};U.createElement=_d;U.createFactory=function(t){var e=_d.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:Cm,render:t}};U.isValidElement=Vu;U.lazy=function(t){return{$$typeof:Am,_payload:{_status:-1,_result:t},_init:Rm}};U.memo=function(t,e){return{$$typeof:Lm,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=xs.transition;xs.transition={};try{t()}finally{xs.transition=e}};U.unstable_act=wd;U.useCallback=function(t,e){return Pe.current.useCallback(t,e)};U.useContext=function(t){return Pe.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};U.useEffect=function(t,e){return Pe.current.useEffect(t,e)};U.useId=function(){return Pe.current.useId()};U.useImperativeHandle=function(t,e,n){return Pe.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return Pe.current.useMemo(t,e)};U.useReducer=function(t,e,n){return Pe.current.useReducer(t,e,n)};U.useRef=function(t){return Pe.current.useRef(t)};U.useState=function(t){return Pe.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return Pe.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return Pe.current.useTransition()};U.version="18.3.1";dd.exports=U;var k=dd.exports;const zm=_m(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=k,Fm=Symbol.for("react.element"),Um=Symbol.for("react.fragment"),Bm=Object.prototype.hasOwnProperty,Wm=Dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jm={key:!0,ref:!0,__self:!0,__source:!0};function Ed(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Bm.call(e,r)&&!jm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Fm,type:t,key:s,ref:o,props:i,_owner:Wm.current}}vo.Fragment=Um;vo.jsx=Ed;vo.jsxs=Ed;fd.exports=vo;var N=fd.exports,Il={},Sd={exports:{}},je={},xd={exports:{}},Td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,R){var z=L.length;L.push(R);e:for(;0<z;){var ie=z-1>>>1,fe=L[ie];if(0<i(fe,R))L[ie]=R,L[z]=fe,z=ie;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var R=L[0],z=L.pop();if(z!==R){L[0]=z;e:for(var ie=0,fe=L.length,Zi=fe>>>1;ie<Zi;){var an=2*(ie+1)-1,Ho=L[an],cn=an+1,es=L[cn];if(0>i(Ho,z))cn<fe&&0>i(es,Ho)?(L[ie]=es,L[cn]=z,ie=cn):(L[ie]=Ho,L[an]=z,ie=an);else if(cn<fe&&0>i(es,z))L[ie]=es,L[cn]=z,ie=cn;else break e}}return R}function i(L,R){var z=L.sortIndex-R.sortIndex;return z!==0?z:L.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,d=null,h=3,v=!1,_=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(L){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=L)r(c),R.sortIndex=R.expirationTime,e(a,R);else break;R=n(c)}}function w(L){if(y=!1,m(L),!_)if(n(a)!==null)_=!0,$o(x);else{var R=n(c);R!==null&&Vo(w,R.startTime-L)}}function x(L,R){_=!1,y&&(y=!1,g(A),A=-1),v=!0;var z=h;try{for(m(R),d=n(a);d!==null&&(!(d.expirationTime>R)||L&&!De());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,h=d.priorityLevel;var fe=ie(d.expirationTime<=R);R=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(a)&&r(a),m(R)}else r(a);d=n(a)}if(d!==null)var Zi=!0;else{var an=n(c);an!==null&&Vo(w,an.startTime-R),Zi=!1}return Zi}finally{d=null,h=z,v=!1}}var I=!1,P=null,A=-1,j=5,O=-1;function De(){return!(t.unstable_now()-O<j)}function Wr(){if(P!==null){var L=t.unstable_now();O=L;var R=!0;try{R=P(!0,L)}finally{R?jr():(I=!1,P=null)}}else I=!1}var jr;if(typeof p=="function")jr=function(){p(Wr)};else if(typeof MessageChannel<"u"){var _c=new MessageChannel,mm=_c.port2;_c.port1.onmessage=Wr,jr=function(){mm.postMessage(null)}}else jr=function(){S(Wr,0)};function $o(L){P=L,I||(I=!0,jr())}function Vo(L,R){A=S(function(){L(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,$o(x))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var z=h;h=R;try{return L()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,R){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=h;h=L;try{return R()}finally{h=z}},t.unstable_scheduleCallback=function(L,R,z){var ie=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ie+z:ie):z=ie,L){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=z+fe,L={id:f++,callback:R,priorityLevel:L,startTime:z,expirationTime:fe,sortIndex:-1},z>ie?(L.sortIndex=z,e(c,L),n(a)===null&&L===n(c)&&(y?(g(A),A=-1):y=!0,Vo(w,z-ie))):(L.sortIndex=fe,e(a,L),_||v||(_=!0,$o(x))),L},t.unstable_shouldYield=De,t.unstable_wrapCallback=function(L){var R=h;return function(){var z=h;h=R;try{return L.apply(this,arguments)}finally{h=z}}}})(Td);xd.exports=Td;var $m=xd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=k,We=$m;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Id=new Set,mi={};function Rn(t,e){dr(t,e),dr(t+"Capture",e)}function dr(t,e){for(mi[t]=e,t=0;t<e.length;t++)Id.add(e[t])}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cl=Object.prototype.hasOwnProperty,Hm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xc={},Tc={};function Gm(t){return Cl.call(Tc,t)?!0:Cl.call(xc,t)?!1:Hm.test(t)?Tc[t]=!0:(xc[t]=!0,!1)}function bm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qm(t,e,n,r){if(e===null||typeof e>"u"||bm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Le(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ye[t]=new Le(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ye[e]=new Le(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ye[t]=new Le(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ye[t]=new Le(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ye[t]=new Le(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ye[t]=new Le(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ye[t]=new Le(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ye[t]=new Le(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ye[t]=new Le(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hu=/[\-:]([a-z])/g;function Gu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hu,Gu);ye[e]=new Le(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hu,Gu);ye[e]=new Le(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hu,Gu);ye[e]=new Le(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ye[t]=new Le(t,1,!1,t.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ye[t]=new Le(t,1,!1,t.toLowerCase(),null,!0,!0)});function bu(t,e,n,r){var i=ye.hasOwnProperty(e)?ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qm(e,n,i,r)&&(n=null),r||i===null?Gm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zt=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ns=Symbol.for("react.element"),Hn=Symbol.for("react.portal"),Gn=Symbol.for("react.fragment"),Qu=Symbol.for("react.strict_mode"),Pl=Symbol.for("react.profiler"),Cd=Symbol.for("react.provider"),Pd=Symbol.for("react.context"),Yu=Symbol.for("react.forward_ref"),Ll=Symbol.for("react.suspense"),Al=Symbol.for("react.suspense_list"),Ku=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Ld=Symbol.for("react.offscreen"),Ic=Symbol.iterator;function Vr(t){return t===null||typeof t!="object"?null:(t=Ic&&t[Ic]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,bo;function Zr(t){if(bo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bo=e&&e[1]||""}return`
`+bo+t}var Qo=!1;function Yo(t,e){if(!t||Qo)return"";Qo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Qo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zr(t):""}function Ym(t){switch(t.tag){case 5:return Zr(t.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return t=Yo(t.type,!1),t;case 11:return t=Yo(t.type.render,!1),t;case 1:return t=Yo(t.type,!0),t;default:return""}}function kl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gn:return"Fragment";case Hn:return"Portal";case Pl:return"Profiler";case Qu:return"StrictMode";case Ll:return"Suspense";case Al:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pd:return(t.displayName||"Context")+".Consumer";case Cd:return(t._context.displayName||"Context")+".Provider";case Yu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ku:return e=t.displayName||null,e!==null?e:kl(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return kl(t(e))}catch{}}return null}function Km(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kl(e);case 8:return e===Qu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ad(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qm(t){var e=Ad(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rs(t){t._valueTracker||(t._valueTracker=qm(t))}function kd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ad(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ol(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Od(t,e){e=e.checked,e!=null&&bu(t,"checked",e,!1)}function Nl(t,e){Od(t,e);var n=Zt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rl(t,e.type,Zt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rl(t,e,n){(e!=="number"||Us(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ei=Array.isArray;function sr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ml(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(ei(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zt(n)}}function Nd(t,e){var n=Zt(e.value),r=Zt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ac(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var is,Md=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(is=is||document.createElement("div"),is.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=is.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xm=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(t){Xm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ii[e]=ii[t]})});function zd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ii.hasOwnProperty(t)&&ii[t]?(""+e).trim():e+"px"}function Dd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Jm=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dl(t,e){if(e){if(Jm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Fl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=null;function qu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bl=null,or=null,lr=null;function kc(t){if(t=ji(t)){if(typeof Bl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=So(e),Bl(t.stateNode,t.type,e))}}function Fd(t){or?lr?lr.push(t):lr=[t]:or=t}function Ud(){if(or){var t=or,e=lr;if(lr=or=null,kc(t),e)for(t=0;t<e.length;t++)kc(e[t])}}function Bd(t,e){return t(e)}function Wd(){}var Ko=!1;function jd(t,e,n){if(Ko)return t(e,n);Ko=!0;try{return Bd(t,e,n)}finally{Ko=!1,(or!==null||lr!==null)&&(Wd(),Ud())}}function yi(t,e){var n=t.stateNode;if(n===null)return null;var r=So(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Wl=!1;if(At)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Wl=!1}function Zm(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var si=!1,Bs=null,Ws=!1,jl=null,e0={onError:function(t){si=!0,Bs=t}};function t0(t,e,n,r,i,s,o,l,a){si=!1,Bs=null,Zm.apply(e0,arguments)}function n0(t,e,n,r,i,s,o,l,a){if(t0.apply(this,arguments),si){if(si){var c=Bs;si=!1,Bs=null}else throw Error(E(198));Ws||(Ws=!0,jl=c)}}function Mn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $d(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Oc(t){if(Mn(t)!==t)throw Error(E(188))}function r0(t){var e=t.alternate;if(!e){if(e=Mn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Oc(i),t;if(s===r)return Oc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Vd(t){return t=r0(t),t!==null?Hd(t):null}function Hd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hd(t);if(e!==null)return e;t=t.sibling}return null}var Gd=We.unstable_scheduleCallback,Nc=We.unstable_cancelCallback,i0=We.unstable_shouldYield,s0=We.unstable_requestPaint,se=We.unstable_now,o0=We.unstable_getCurrentPriorityLevel,Xu=We.unstable_ImmediatePriority,bd=We.unstable_UserBlockingPriority,js=We.unstable_NormalPriority,l0=We.unstable_LowPriority,Qd=We.unstable_IdlePriority,yo=null,gt=null;function u0(t){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(yo,t,void 0,(t.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:f0,a0=Math.log,c0=Math.LN2;function f0(t){return t>>>=0,t===0?32:31-(a0(t)/c0|0)|0}var ss=64,os=4194304;function ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $s(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ti(l):(s&=o,s!==0&&(r=ti(s)))}else o=n&~i,o!==0?r=ti(o):s!==0&&(r=ti(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rt(e),i=1<<n,r|=t[n],e&=~i;return r}function d0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=d0(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function $l(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yd(){var t=ss;return ss<<=1,!(ss&4194240)&&(ss=64),t}function qo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rt(e),t[e]=n}function p0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ju(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function Kd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qd,Zu,Xd,Jd,Zd,Vl=!1,ls=[],Gt=null,bt=null,Qt=null,_i=new Map,wi=new Map,Wt=[],g0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rc(t,e){switch(t){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":_i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(e.pointerId)}}function Gr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ji(e),e!==null&&Zu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function m0(t,e,n,r,i){switch(e){case"focusin":return Gt=Gr(Gt,t,e,n,r,i),!0;case"dragenter":return bt=Gr(bt,t,e,n,r,i),!0;case"mouseover":return Qt=Gr(Qt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _i.set(s,Gr(_i.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wi.set(s,Gr(wi.get(s)||null,t,e,n,r,i)),!0}return!1}function eh(t){var e=gn(t.target);if(e!==null){var n=Mn(e);if(n!==null){if(e=n.tag,e===13){if(e=$d(n),e!==null){t.blockedOn=e,Zd(t.priority,function(){Xd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ts(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ul=r,n.target.dispatchEvent(r),Ul=null}else return e=ji(n),e!==null&&Zu(e),t.blockedOn=n,!1;e.shift()}return!0}function Mc(t,e,n){Ts(t)&&n.delete(e)}function v0(){Vl=!1,Gt!==null&&Ts(Gt)&&(Gt=null),bt!==null&&Ts(bt)&&(bt=null),Qt!==null&&Ts(Qt)&&(Qt=null),_i.forEach(Mc),wi.forEach(Mc)}function br(t,e){t.blockedOn===e&&(t.blockedOn=null,Vl||(Vl=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,v0)))}function Ei(t){function e(i){return br(i,t)}if(0<ls.length){br(ls[0],t);for(var n=1;n<ls.length;n++){var r=ls[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gt!==null&&br(Gt,t),bt!==null&&br(bt,t),Qt!==null&&br(Qt,t),_i.forEach(e),wi.forEach(e),n=0;n<Wt.length;n++)r=Wt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wt.length&&(n=Wt[0],n.blockedOn===null);)eh(n),n.blockedOn===null&&Wt.shift()}var ur=zt.ReactCurrentBatchConfig,Vs=!0;function y0(t,e,n,r){var i=H,s=ur.transition;ur.transition=null;try{H=1,ea(t,e,n,r)}finally{H=i,ur.transition=s}}function _0(t,e,n,r){var i=H,s=ur.transition;ur.transition=null;try{H=4,ea(t,e,n,r)}finally{H=i,ur.transition=s}}function ea(t,e,n,r){if(Vs){var i=Hl(t,e,n,r);if(i===null)ol(t,e,r,Hs,n),Rc(t,r);else if(m0(i,t,e,n,r))r.stopPropagation();else if(Rc(t,r),e&4&&-1<g0.indexOf(t)){for(;i!==null;){var s=ji(i);if(s!==null&&qd(s),s=Hl(t,e,n,r),s===null&&ol(t,e,r,Hs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ol(t,e,r,null,n)}}var Hs=null;function Hl(t,e,n,r){if(Hs=null,t=qu(r),t=gn(t),t!==null)if(e=Mn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$d(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hs=t,null}function th(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Xu:return 1;case bd:return 4;case js:case l0:return 16;case Qd:return 536870912;default:return 16}default:return 16}}var $t=null,ta=null,Is=null;function nh(){if(Is)return Is;var t,e=ta,n=e.length,r,i="value"in $t?$t.value:$t.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Is=i.slice(t,1<r?1-r:void 0)}function Cs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function us(){return!0}function zc(){return!1}function $e(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?us:zc,this.isPropagationStopped=zc,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),e}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},na=$e(Or),Wi=ne({},Or,{view:0,detail:0}),w0=$e(Wi),Xo,Jo,Qr,_o=ne({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qr&&(Qr&&t.type==="mousemove"?(Xo=t.screenX-Qr.screenX,Jo=t.screenY-Qr.screenY):Jo=Xo=0,Qr=t),Xo)},movementY:function(t){return"movementY"in t?t.movementY:Jo}}),Dc=$e(_o),E0=ne({},_o,{dataTransfer:0}),S0=$e(E0),x0=ne({},Wi,{relatedTarget:0}),Zo=$e(x0),T0=ne({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=$e(T0),C0=ne({},Or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),P0=$e(C0),L0=ne({},Or,{data:0}),Fc=$e(L0),A0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=O0[t])?!!e[t]:!1}function ra(){return N0}var R0=ne({},Wi,{key:function(t){if(t.key){var e=A0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(t){return t.type==="keypress"?Cs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),M0=$e(R0),z0=ne({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=$e(z0),D0=ne({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),F0=$e(D0),U0=ne({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=$e(U0),W0=ne({},_o,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=$e(W0),$0=[9,13,27,32],ia=At&&"CompositionEvent"in window,oi=null;At&&"documentMode"in document&&(oi=document.documentMode);var V0=At&&"TextEvent"in window&&!oi,rh=At&&(!ia||oi&&8<oi&&11>=oi),Bc=" ",Wc=!1;function ih(t,e){switch(t){case"keyup":return $0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bn=!1;function H0(t,e){switch(t){case"compositionend":return sh(e);case"keypress":return e.which!==32?null:(Wc=!0,Bc);case"textInput":return t=e.data,t===Bc&&Wc?null:t;default:return null}}function G0(t,e){if(bn)return t==="compositionend"||!ia&&ih(t,e)?(t=nh(),Is=ta=$t=null,bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rh&&e.locale!=="ko"?null:e.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b0[t.type]:e==="textarea"}function oh(t,e,n,r){Fd(r),e=Gs(e,"onChange"),0<e.length&&(n=new na("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var li=null,Si=null;function Q0(t){vh(t,0)}function wo(t){var e=Kn(t);if(kd(e))return t}function Y0(t,e){if(t==="change")return e}var lh=!1;if(At){var el;if(At){var tl="oninput"in document;if(!tl){var $c=document.createElement("div");$c.setAttribute("oninput","return;"),tl=typeof $c.oninput=="function"}el=tl}else el=!1;lh=el&&(!document.documentMode||9<document.documentMode)}function Vc(){li&&(li.detachEvent("onpropertychange",uh),Si=li=null)}function uh(t){if(t.propertyName==="value"&&wo(Si)){var e=[];oh(e,Si,t,qu(t)),jd(Q0,e)}}function K0(t,e,n){t==="focusin"?(Vc(),li=e,Si=n,li.attachEvent("onpropertychange",uh)):t==="focusout"&&Vc()}function q0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wo(Si)}function X0(t,e){if(t==="click")return wo(e)}function J0(t,e){if(t==="input"||t==="change")return wo(e)}function Z0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ot=typeof Object.is=="function"?Object.is:Z0;function xi(t,e){if(ot(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cl.call(e,i)||!ot(t[i],e[i]))return!1}return!0}function Hc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gc(t,e){var n=Hc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hc(n)}}function ah(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ah(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ch(){for(var t=window,e=Us();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Us(t.document)}return e}function sa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ev(t){var e=ch(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ah(n.ownerDocument.documentElement,n)){if(r!==null&&sa(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gc(n,s);var o=Gc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tv=At&&"documentMode"in document&&11>=document.documentMode,Qn=null,Gl=null,ui=null,bl=!1;function bc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bl||Qn==null||Qn!==Us(r)||(r=Qn,"selectionStart"in r&&sa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ui&&xi(ui,r)||(ui=r,r=Gs(Gl,"onSelect"),0<r.length&&(e=new na("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qn)))}function as(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yn={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionend:as("Transition","TransitionEnd")},nl={},fh={};At&&(fh=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function Eo(t){if(nl[t])return nl[t];if(!Yn[t])return t;var e=Yn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fh)return nl[t]=e[n];return t}var dh=Eo("animationend"),hh=Eo("animationiteration"),ph=Eo("animationstart"),gh=Eo("transitionend"),mh=new Map,Qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(t,e){mh.set(t,e),Rn(e,[t])}for(var rl=0;rl<Qc.length;rl++){var il=Qc[rl],nv=il.toLowerCase(),rv=il[0].toUpperCase()+il.slice(1);sn(nv,"on"+rv)}sn(dh,"onAnimationEnd");sn(hh,"onAnimationIteration");sn(ph,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(gh,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function Yc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n0(r,e,void 0,t),t.currentTarget=null}function vh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Yc(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Yc(i,l,c),s=a}}}if(Ws)throw t=jl,Ws=!1,jl=null,t}function b(t,e){var n=e[Xl];n===void 0&&(n=e[Xl]=new Set);var r=t+"__bubble";n.has(r)||(yh(e,t,2,!1),n.add(r))}function sl(t,e,n){var r=0;e&&(r|=4),yh(n,t,r,e)}var cs="_reactListening"+Math.random().toString(36).slice(2);function Ti(t){if(!t[cs]){t[cs]=!0,Id.forEach(function(n){n!=="selectionchange"&&(iv.has(n)||sl(n,!1,t),sl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cs]||(e[cs]=!0,sl("selectionchange",!1,e))}}function yh(t,e,n,r){switch(th(e)){case 1:var i=y0;break;case 4:i=_0;break;default:i=ea}n=i.bind(null,e,n,t),i=void 0,!Wl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ol(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=gn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}jd(function(){var c=s,f=qu(n),d=[];e:{var h=mh.get(t);if(h!==void 0){var v=na,_=t;switch(t){case"keypress":if(Cs(n)===0)break e;case"keydown":case"keyup":v=M0;break;case"focusin":_="focus",v=Zo;break;case"focusout":_="blur",v=Zo;break;case"beforeblur":case"afterblur":v=Zo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=S0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=F0;break;case dh:case hh:case ph:v=I0;break;case gh:v=B0;break;case"scroll":v=w0;break;case"wheel":v=j0;break;case"copy":case"cut":case"paste":v=P0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Uc}var y=(e&4)!==0,S=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=c,m;p!==null;){m=p;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,g!==null&&(w=yi(p,g),w!=null&&y.push(Ii(p,w,m)))),S)break;p=p.return}0<y.length&&(h=new v(h,_,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==Ul&&(_=n.relatedTarget||n.fromElement)&&(gn(_)||_[kt]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?gn(_):null,_!==null&&(S=Mn(_),_!==S||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(y=Dc,w="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Uc,w="onPointerLeave",g="onPointerEnter",p="pointer"),S=v==null?h:Kn(v),m=_==null?h:Kn(_),h=new y(w,p+"leave",v,n,f),h.target=S,h.relatedTarget=m,w=null,gn(f)===c&&(y=new y(g,p+"enter",_,n,f),y.target=m,y.relatedTarget=S,w=y),S=w,v&&_)t:{for(y=v,g=_,p=0,m=y;m;m=Wn(m))p++;for(m=0,w=g;w;w=Wn(w))m++;for(;0<p-m;)y=Wn(y),p--;for(;0<m-p;)g=Wn(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Wn(y),g=Wn(g)}y=null}else y=null;v!==null&&Kc(d,h,v,y,!1),_!==null&&S!==null&&Kc(d,S,_,y,!0)}}e:{if(h=c?Kn(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var x=Y0;else if(jc(h))if(lh)x=J0;else{x=q0;var I=K0}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=X0);if(x&&(x=x(t,c))){oh(d,x,n,f);break e}I&&I(t,h,c),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&Rl(h,"number",h.value)}switch(I=c?Kn(c):window,t){case"focusin":(jc(I)||I.contentEditable==="true")&&(Qn=I,Gl=c,ui=null);break;case"focusout":ui=Gl=Qn=null;break;case"mousedown":bl=!0;break;case"contextmenu":case"mouseup":case"dragend":bl=!1,bc(d,n,f);break;case"selectionchange":if(tv)break;case"keydown":case"keyup":bc(d,n,f)}var P;if(ia)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else bn?ih(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(rh&&n.locale!=="ko"&&(bn||A!=="onCompositionStart"?A==="onCompositionEnd"&&bn&&(P=nh()):($t=f,ta="value"in $t?$t.value:$t.textContent,bn=!0)),I=Gs(c,A),0<I.length&&(A=new Fc(A,t,null,n,f),d.push({event:A,listeners:I}),P?A.data=P:(P=sh(n),P!==null&&(A.data=P)))),(P=V0?H0(t,n):G0(t,n))&&(c=Gs(c,"onBeforeInput"),0<c.length&&(f=new Fc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=P))}vh(d,e)})}function Ii(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yi(t,n),s!=null&&r.unshift(Ii(t,s,i)),s=yi(t,e),s!=null&&r.push(Ii(t,s,i))),t=t.return}return r}function Wn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=yi(n,s),a!=null&&o.unshift(Ii(n,a,l))):i||(a=yi(n,s),a!=null&&o.push(Ii(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sv=/\r\n?/g,ov=/\u0000|\uFFFD/g;function qc(t){return(typeof t=="string"?t:""+t).replace(sv,`
`).replace(ov,"")}function fs(t,e,n){if(e=qc(e),qc(t)!==e&&n)throw Error(E(425))}function bs(){}var Ql=null,Yl=null;function Kl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ql=typeof setTimeout=="function"?setTimeout:void 0,lv=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,uv=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(t){return Xc.resolve(null).then(t).catch(av)}:ql;function av(t){setTimeout(function(){throw t})}function ll(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ei(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ei(e)}function Yt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nr=Math.random().toString(36).slice(2),ft="__reactFiber$"+Nr,Ci="__reactProps$"+Nr,kt="__reactContainer$"+Nr,Xl="__reactEvents$"+Nr,cv="__reactListeners$"+Nr,fv="__reactHandles$"+Nr;function gn(t){var e=t[ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kt]||n[ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jc(t);t!==null;){if(n=t[ft])return n;t=Jc(t)}return e}t=n,n=t.parentNode}return null}function ji(t){return t=t[ft]||t[kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function So(t){return t[Ci]||null}var Jl=[],qn=-1;function on(t){return{current:t}}function K(t){0>qn||(t.current=Jl[qn],Jl[qn]=null,qn--)}function G(t,e){qn++,Jl[qn]=t.current,t.current=e}var en={},Se=on(en),Re=on(!1),Sn=en;function hr(t,e){var n=t.type.contextTypes;if(!n)return en;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Me(t){return t=t.childContextTypes,t!=null}function Qs(){K(Re),K(Se)}function Zc(t,e,n){if(Se.current!==en)throw Error(E(168));G(Se,e),G(Re,n)}function _h(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,Km(t)||"Unknown",i));return ne({},n,r)}function Ys(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||en,Sn=Se.current,G(Se,t),G(Re,Re.current),!0}function ef(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=_h(t,e,Sn),r.__reactInternalMemoizedMergedChildContext=t,K(Re),K(Se),G(Se,t)):K(Re),G(Re,n)}var Tt=null,xo=!1,ul=!1;function wh(t){Tt===null?Tt=[t]:Tt.push(t)}function dv(t){xo=!0,wh(t)}function ln(){if(!ul&&Tt!==null){ul=!0;var t=0,e=H;try{var n=Tt;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tt=null,xo=!1}catch(i){throw Tt!==null&&(Tt=Tt.slice(t+1)),Gd(Xu,ln),i}finally{H=e,ul=!1}}return null}var Xn=[],Jn=0,Ks=null,qs=0,He=[],Ge=0,xn=null,Ct=1,Pt="";function dn(t,e){Xn[Jn++]=qs,Xn[Jn++]=Ks,Ks=t,qs=e}function Eh(t,e,n){He[Ge++]=Ct,He[Ge++]=Pt,He[Ge++]=xn,xn=t;var r=Ct;t=Pt;var i=32-rt(r)-1;r&=~(1<<i),n+=1;var s=32-rt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ct=1<<32-rt(e)+i|n<<i|r,Pt=s+t}else Ct=1<<s|n<<i|r,Pt=t}function oa(t){t.return!==null&&(dn(t,1),Eh(t,1,0))}function la(t){for(;t===Ks;)Ks=Xn[--Jn],Xn[Jn]=null,qs=Xn[--Jn],Xn[Jn]=null;for(;t===xn;)xn=He[--Ge],He[Ge]=null,Pt=He[--Ge],He[Ge]=null,Ct=He[--Ge],He[Ge]=null}var Be=null,Ue=null,q=!1,et=null;function Sh(t,e){var n=be(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,Ue=Yt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,Ue=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xn!==null?{id:Ct,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=be(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,Ue=null,!0):!1;default:return!1}}function Zl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eu(t){if(q){var e=Ue;if(e){var n=e;if(!tf(t,e)){if(Zl(t))throw Error(E(418));e=Yt(n.nextSibling);var r=Be;e&&tf(t,e)?Sh(r,n):(t.flags=t.flags&-4097|2,q=!1,Be=t)}}else{if(Zl(t))throw Error(E(418));t.flags=t.flags&-4097|2,q=!1,Be=t}}}function nf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function ds(t){if(t!==Be)return!1;if(!q)return nf(t),q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kl(t.type,t.memoizedProps)),e&&(e=Ue)){if(Zl(t))throw xh(),Error(E(418));for(;e;)Sh(t,e),e=Yt(e.nextSibling)}if(nf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ue=Yt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ue=null}}else Ue=Be?Yt(t.stateNode.nextSibling):null;return!0}function xh(){for(var t=Ue;t;)t=Yt(t.nextSibling)}function pr(){Ue=Be=null,q=!1}function ua(t){et===null?et=[t]:et.push(t)}var hv=zt.ReactCurrentBatchConfig;function Yr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function hs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rf(t){var e=t._init;return e(t._payload)}function Th(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=Jt(g,p),g.index=0,g.sibling=null,g}function s(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,w){return p===null||p.tag!==6?(p=gl(m,g.mode,w),p.return=g,p):(p=i(p,m),p.return=g,p)}function a(g,p,m,w){var x=m.type;return x===Gn?f(g,p,m.props.children,w,m.key):p!==null&&(p.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&rf(x)===p.type)?(w=i(p,m.props),w.ref=Yr(g,p,m),w.return=g,w):(w=Rs(m.type,m.key,m.props,null,g.mode,w),w.ref=Yr(g,p,m),w.return=g,w)}function c(g,p,m,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=ml(m,g.mode,w),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,w,x){return p===null||p.tag!==7?(p=En(m,g.mode,w,x),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=gl(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ns:return m=Rs(p.type,p.key,p.props,null,g.mode,m),m.ref=Yr(g,null,p),m.return=g,m;case Hn:return p=ml(p,g.mode,m),p.return=g,p;case Ft:var w=p._init;return d(g,w(p._payload),m)}if(ei(p)||Vr(p))return p=En(p,g.mode,m,null),p.return=g,p;hs(g,p)}return null}function h(g,p,m,w){var x=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return x!==null?null:l(g,p,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ns:return m.key===x?a(g,p,m,w):null;case Hn:return m.key===x?c(g,p,m,w):null;case Ft:return x=m._init,h(g,p,x(m._payload),w)}if(ei(m)||Vr(m))return x!==null?null:f(g,p,m,w,null);hs(g,m)}return null}function v(g,p,m,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(m)||null,l(p,g,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ns:return g=g.get(w.key===null?m:w.key)||null,a(p,g,w,x);case Hn:return g=g.get(w.key===null?m:w.key)||null,c(p,g,w,x);case Ft:var I=w._init;return v(g,p,m,I(w._payload),x)}if(ei(w)||Vr(w))return g=g.get(m)||null,f(p,g,w,x,null);hs(p,w)}return null}function _(g,p,m,w){for(var x=null,I=null,P=p,A=p=0,j=null;P!==null&&A<m.length;A++){P.index>A?(j=P,P=null):j=P.sibling;var O=h(g,P,m[A],w);if(O===null){P===null&&(P=j);break}t&&P&&O.alternate===null&&e(g,P),p=s(O,p,A),I===null?x=O:I.sibling=O,I=O,P=j}if(A===m.length)return n(g,P),q&&dn(g,A),x;if(P===null){for(;A<m.length;A++)P=d(g,m[A],w),P!==null&&(p=s(P,p,A),I===null?x=P:I.sibling=P,I=P);return q&&dn(g,A),x}for(P=r(g,P);A<m.length;A++)j=v(P,g,A,m[A],w),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?A:j.key),p=s(j,p,A),I===null?x=j:I.sibling=j,I=j);return t&&P.forEach(function(De){return e(g,De)}),q&&dn(g,A),x}function y(g,p,m,w){var x=Vr(m);if(typeof x!="function")throw Error(E(150));if(m=x.call(m),m==null)throw Error(E(151));for(var I=x=null,P=p,A=p=0,j=null,O=m.next();P!==null&&!O.done;A++,O=m.next()){P.index>A?(j=P,P=null):j=P.sibling;var De=h(g,P,O.value,w);if(De===null){P===null&&(P=j);break}t&&P&&De.alternate===null&&e(g,P),p=s(De,p,A),I===null?x=De:I.sibling=De,I=De,P=j}if(O.done)return n(g,P),q&&dn(g,A),x;if(P===null){for(;!O.done;A++,O=m.next())O=d(g,O.value,w),O!==null&&(p=s(O,p,A),I===null?x=O:I.sibling=O,I=O);return q&&dn(g,A),x}for(P=r(g,P);!O.done;A++,O=m.next())O=v(P,g,A,O.value,w),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?A:O.key),p=s(O,p,A),I===null?x=O:I.sibling=O,I=O);return t&&P.forEach(function(Wr){return e(g,Wr)}),q&&dn(g,A),x}function S(g,p,m,w){if(typeof m=="object"&&m!==null&&m.type===Gn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ns:e:{for(var x=m.key,I=p;I!==null;){if(I.key===x){if(x=m.type,x===Gn){if(I.tag===7){n(g,I.sibling),p=i(I,m.props.children),p.return=g,g=p;break e}}else if(I.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&rf(x)===I.type){n(g,I.sibling),p=i(I,m.props),p.ref=Yr(g,I,m),p.return=g,g=p;break e}n(g,I);break}else e(g,I);I=I.sibling}m.type===Gn?(p=En(m.props.children,g.mode,w,m.key),p.return=g,g=p):(w=Rs(m.type,m.key,m.props,null,g.mode,w),w.ref=Yr(g,p,m),w.return=g,g=w)}return o(g);case Hn:e:{for(I=m.key;p!==null;){if(p.key===I)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=ml(m,g.mode,w),p.return=g,g=p}return o(g);case Ft:return I=m._init,S(g,p,I(m._payload),w)}if(ei(m))return _(g,p,m,w);if(Vr(m))return y(g,p,m,w);hs(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=gl(m,g.mode,w),p.return=g,g=p),o(g)):n(g,p)}return S}var gr=Th(!0),Ih=Th(!1),Xs=on(null),Js=null,Zn=null,aa=null;function ca(){aa=Zn=Js=null}function fa(t){var e=Xs.current;K(Xs),t._currentValue=e}function tu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ar(t,e){Js=t,aa=Zn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ne=!0),t.firstContext=null)}function Ke(t){var e=t._currentValue;if(aa!==t)if(t={context:t,memoizedValue:e,next:null},Zn===null){if(Js===null)throw Error(E(308));Zn=t,Js.dependencies={lanes:0,firstContext:t}}else Zn=Zn.next=t;return e}var mn=null;function da(t){mn===null?mn=[t]:mn.push(t)}function Ch(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,da(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ot(t,r)}function Ot(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ut=!1;function ha(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ph(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ot(t,n)}return i=r.interleaved,i===null?(e.next=e,da(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ot(t,n)}function Ps(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ju(t,n)}}function sf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zs(t,e,n,r){var i=t.updateQueue;Ut=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=c=a=null,l=s;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(v,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(v,d,h):_,h==null)break e;d=ne({},d,h);break e;case 2:Ut=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,a=d):f=f.next=v,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);In|=o,t.lanes=o,t.memoizedState=d}}function of(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var $i={},mt=on($i),Pi=on($i),Li=on($i);function vn(t){if(t===$i)throw Error(E(174));return t}function pa(t,e){switch(G(Li,e),G(Pi,t),G(mt,$i),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zl(e,t)}K(mt),G(mt,e)}function mr(){K(mt),K(Pi),K(Li)}function Lh(t){vn(Li.current);var e=vn(mt.current),n=zl(e,t.type);e!==n&&(G(Pi,t),G(mt,n))}function ga(t){Pi.current===t&&(K(mt),K(Pi))}var J=on(0);function eo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var al=[];function ma(){for(var t=0;t<al.length;t++)al[t]._workInProgressVersionPrimary=null;al.length=0}var Ls=zt.ReactCurrentDispatcher,cl=zt.ReactCurrentBatchConfig,Tn=0,te=null,ae=null,he=null,to=!1,ai=!1,Ai=0,pv=0;function _e(){throw Error(E(321))}function va(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ot(t[n],e[n]))return!1;return!0}function ya(t,e,n,r,i,s){if(Tn=s,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ls.current=t===null||t.memoizedState===null?yv:_v,t=n(r,i),ai){s=0;do{if(ai=!1,Ai=0,25<=s)throw Error(E(301));s+=1,he=ae=null,e.updateQueue=null,Ls.current=wv,t=n(r,i)}while(ai)}if(Ls.current=no,e=ae!==null&&ae.next!==null,Tn=0,he=ae=te=null,to=!1,e)throw Error(E(300));return t}function _a(){var t=Ai!==0;return Ai=0,t}function at(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?te.memoizedState=he=t:he=he.next=t,he}function qe(){if(ae===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=he===null?te.memoizedState:he.next;if(e!==null)he=e,ae=t;else{if(t===null)throw Error(E(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},he===null?te.memoizedState=he=t:he=he.next=t}return he}function ki(t,e){return typeof e=="function"?e(t):e}function fl(t){var e=qe(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ae,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var f=c.lane;if((Tn&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,te.lanes|=f,In|=f}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,ot(r,e.memoizedState)||(Ne=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,te.lanes|=s,In|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dl(t){var e=qe(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ot(s,e.memoizedState)||(Ne=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ah(){}function kh(t,e){var n=te,r=qe(),i=e(),s=!ot(r.memoizedState,i);if(s&&(r.memoizedState=i,Ne=!0),r=r.queue,wa(Rh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Oi(9,Nh.bind(null,n,r,i,e),void 0,null),pe===null)throw Error(E(349));Tn&30||Oh(n,e,i)}return i}function Oh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nh(t,e,n,r){e.value=n,e.getSnapshot=r,Mh(e)&&zh(t)}function Rh(t,e,n){return n(function(){Mh(e)&&zh(t)})}function Mh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ot(t,n)}catch{return!0}}function zh(t){var e=Ot(t,1);e!==null&&it(e,t,1,-1)}function lf(t){var e=at();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:t},e.queue=t,t=t.dispatch=vv.bind(null,te,t),[e.memoizedState,t]}function Oi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dh(){return qe().memoizedState}function As(t,e,n,r){var i=at();te.flags|=t,i.memoizedState=Oi(1|e,n,void 0,r===void 0?null:r)}function To(t,e,n,r){var i=qe();r=r===void 0?null:r;var s=void 0;if(ae!==null){var o=ae.memoizedState;if(s=o.destroy,r!==null&&va(r,o.deps)){i.memoizedState=Oi(e,n,s,r);return}}te.flags|=t,i.memoizedState=Oi(1|e,n,s,r)}function uf(t,e){return As(8390656,8,t,e)}function wa(t,e){return To(2048,8,t,e)}function Fh(t,e){return To(4,2,t,e)}function Uh(t,e){return To(4,4,t,e)}function Bh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wh(t,e,n){return n=n!=null?n.concat([t]):null,To(4,4,Bh.bind(null,e,t),n)}function Ea(){}function jh(t,e){var n=qe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&va(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $h(t,e){var n=qe();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&va(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vh(t,e,n){return Tn&21?(ot(n,e)||(n=Yd(),te.lanes|=n,In|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ne=!0),t.memoizedState=n)}function gv(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=cl.transition;cl.transition={};try{t(!1),e()}finally{H=n,cl.transition=r}}function Hh(){return qe().memoizedState}function mv(t,e,n){var r=Xt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gh(t))bh(e,n);else if(n=Ch(t,e,n,r),n!==null){var i=Ie();it(n,t,r,i),Qh(n,e,r)}}function vv(t,e,n){var r=Xt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gh(t))bh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,ot(l,o)){var a=e.interleaved;a===null?(i.next=i,da(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Ch(t,e,i,r),n!==null&&(i=Ie(),it(n,t,r,i),Qh(n,e,r))}}function Gh(t){var e=t.alternate;return t===te||e!==null&&e===te}function bh(t,e){ai=to=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ju(t,n)}}var no={readContext:Ke,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},yv={readContext:Ke,useCallback:function(t,e){return at().memoizedState=[t,e===void 0?null:e],t},useContext:Ke,useEffect:uf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,As(4194308,4,Bh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return As(4194308,4,t,e)},useInsertionEffect:function(t,e){return As(4,2,t,e)},useMemo:function(t,e){var n=at();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=at();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mv.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=at();return t={current:t},e.memoizedState=t},useState:lf,useDebugValue:Ea,useDeferredValue:function(t){return at().memoizedState=t},useTransition:function(){var t=lf(!1),e=t[0];return t=gv.bind(null,t[1]),at().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,i=at();if(q){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),pe===null)throw Error(E(349));Tn&30||Oh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,uf(Rh.bind(null,r,s,t),[t]),r.flags|=2048,Oi(9,Nh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=at(),e=pe.identifierPrefix;if(q){var n=Pt,r=Ct;n=(r&~(1<<32-rt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ai++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_v={readContext:Ke,useCallback:jh,useContext:Ke,useEffect:wa,useImperativeHandle:Wh,useInsertionEffect:Fh,useLayoutEffect:Uh,useMemo:$h,useReducer:fl,useRef:Dh,useState:function(){return fl(ki)},useDebugValue:Ea,useDeferredValue:function(t){var e=qe();return Vh(e,ae.memoizedState,t)},useTransition:function(){var t=fl(ki)[0],e=qe().memoizedState;return[t,e]},useMutableSource:Ah,useSyncExternalStore:kh,useId:Hh,unstable_isNewReconciler:!1},wv={readContext:Ke,useCallback:jh,useContext:Ke,useEffect:wa,useImperativeHandle:Wh,useInsertionEffect:Fh,useLayoutEffect:Uh,useMemo:$h,useReducer:dl,useRef:Dh,useState:function(){return dl(ki)},useDebugValue:Ea,useDeferredValue:function(t){var e=qe();return ae===null?e.memoizedState=t:Vh(e,ae.memoizedState,t)},useTransition:function(){var t=dl(ki)[0],e=qe().memoizedState;return[t,e]},useMutableSource:Ah,useSyncExternalStore:kh,useId:Hh,unstable_isNewReconciler:!1};function Je(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Io={isMounted:function(t){return(t=t._reactInternals)?Mn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=Xt(t),s=Lt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Kt(t,s,i),e!==null&&(it(e,t,i,r),Ps(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=Xt(t),s=Lt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Kt(t,s,i),e!==null&&(it(e,t,i,r),Ps(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=Xt(t),i=Lt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Kt(t,i,r),e!==null&&(it(e,t,r,n),Ps(e,t,r))}};function af(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xi(n,r)||!xi(i,s):!0}function Yh(t,e,n){var r=!1,i=en,s=e.contextType;return typeof s=="object"&&s!==null?s=Ke(s):(i=Me(e)?Sn:Se.current,r=e.contextTypes,s=(r=r!=null)?hr(t,i):en),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Io,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Io.enqueueReplaceState(e,e.state,null)}function ru(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ha(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ke(s):(s=Me(e)?Sn:Se.current,i.context=hr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Io.enqueueReplaceState(i,i.state,null),Zs(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function vr(t,e){try{var n="",r=e;do n+=Ym(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function iu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ev=typeof WeakMap=="function"?WeakMap:Map;function Kh(t,e,n){n=Lt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){io||(io=!0,pu=r),iu(t,e)},n}function qh(t,e,n){n=Lt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){iu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){iu(t,e),typeof r!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ff(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ev;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zv.bind(null,t,e,n),e.then(t,t))}function df(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lt(-1,1),e.tag=2,Kt(n,e,1))),n.lanes|=1),t)}var Sv=zt.ReactCurrentOwner,Ne=!1;function Te(t,e,n,r){e.child=t===null?Ih(e,null,n,r):gr(e,t.child,n,r)}function pf(t,e,n,r,i){n=n.render;var s=e.ref;return ar(e,i),r=ya(t,e,n,r,s,i),n=_a(),t!==null&&!Ne?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nt(t,e,i)):(q&&n&&oa(e),e.flags|=1,Te(t,e,r,i),e.child)}function gf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Aa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xh(t,e,s,r,i)):(t=Rs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xi,n(o,r)&&t.ref===e.ref)return Nt(t,e,i)}return e.flags|=1,t=Jt(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xh(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xi(s,r)&&t.ref===e.ref)if(Ne=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ne=!0);else return e.lanes=t.lanes,Nt(t,e,i)}return su(t,e,n,r,i)}function Jh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(tr,Fe),Fe|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(tr,Fe),Fe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,G(tr,Fe),Fe|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,G(tr,Fe),Fe|=r;return Te(t,e,i,n),e.child}function Zh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function su(t,e,n,r,i){var s=Me(n)?Sn:Se.current;return s=hr(e,s),ar(e,i),n=ya(t,e,n,r,s,i),r=_a(),t!==null&&!Ne?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nt(t,e,i)):(q&&r&&oa(e),e.flags|=1,Te(t,e,n,i),e.child)}function mf(t,e,n,r,i){if(Me(n)){var s=!0;Ys(e)}else s=!1;if(ar(e,i),e.stateNode===null)ks(t,e),Yh(e,n,r),ru(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ke(c):(c=Me(n)?Sn:Se.current,c=hr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&cf(e,o,r,c),Ut=!1;var h=e.memoizedState;o.state=h,Zs(e,r,o,i),a=e.memoizedState,l!==r||h!==a||Re.current||Ut?(typeof f=="function"&&(nu(e,n,f,r),a=e.memoizedState),(l=Ut||af(e,n,l,r,h,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ph(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Je(e.type,l),o.props=c,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ke(a):(a=Me(n)?Sn:Se.current,a=hr(e,a));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&cf(e,o,r,a),Ut=!1,h=e.memoizedState,o.state=h,Zs(e,r,o,i);var _=e.memoizedState;l!==d||h!==_||Re.current||Ut?(typeof v=="function"&&(nu(e,n,v,r),_=e.memoizedState),(c=Ut||af(e,n,c,r,h,_,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ou(t,e,n,r,s,i)}function ou(t,e,n,r,i,s){Zh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ef(e,n,!1),Nt(t,e,s);r=e.stateNode,Sv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gr(e,t.child,null,s),e.child=gr(e,null,l,s)):Te(t,e,l,s),e.memoizedState=r.state,i&&ef(e,n,!0),e.child}function ep(t){var e=t.stateNode;e.pendingContext?Zc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zc(t,e.context,!1),pa(t,e.containerInfo)}function vf(t,e,n,r,i){return pr(),ua(i),e.flags|=256,Te(t,e,n,r),e.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function tp(t,e,n){var r=e.pendingProps,i=J.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),G(J,i&1),t===null)return eu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lo(o,r,0,null),t=En(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=uu(n),e.memoizedState=lu,t):Sa(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Jt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Jt(l,s):(s=En(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?uu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=lu,r}return s=t.child,t=s.sibling,r=Jt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sa(t,e){return e=Lo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ps(t,e,n,r){return r!==null&&ua(r),gr(e,t.child,null,n),t=Sa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hl(Error(E(422))),ps(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Lo({mode:"visible",children:r.children},i,0,null),s=En(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&gr(e,t.child,null,o),e.child.memoizedState=uu(o),e.memoizedState=lu,s);if(!(e.mode&1))return ps(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(E(419)),r=hl(s,r,void 0),ps(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ne||l){if(r=pe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ot(t,i),it(r,t,i,-1))}return La(),r=hl(Error(E(421))),ps(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Dv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ue=Yt(i.nextSibling),Be=e,q=!0,et=null,t!==null&&(He[Ge++]=Ct,He[Ge++]=Pt,He[Ge++]=xn,Ct=t.id,Pt=t.overflow,xn=e),e=Sa(e,r.children),e.flags|=4096,e)}function yf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tu(t.return,e,n)}function pl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function np(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Te(t,e,r.children,n),r=J.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yf(t,n,e);else if(t.tag===19)yf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(J,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&eo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),pl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&eo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}pl(e,!0,n,null,s);break;case"together":pl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ks(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),In|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Jt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tv(t,e,n){switch(e.tag){case 3:ep(e),pr();break;case 5:Lh(e);break;case 1:Me(e.type)&&Ys(e);break;case 4:pa(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;G(Xs,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(J,J.current&1),e.flags|=128,null):n&e.child.childLanes?tp(t,e,n):(G(J,J.current&1),t=Nt(t,e,n),t!==null?t.sibling:null);G(J,J.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return np(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(J,J.current),r)break;return null;case 22:case 23:return e.lanes=0,Jh(t,e,n)}return Nt(t,e,n)}var rp,au,ip,sp;rp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};au=function(){};ip=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vn(mt.current);var s=null;switch(n){case"input":i=Ol(t,i),r=Ol(t,r),s=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),s=[];break;case"textarea":i=Ml(t,i),r=Ml(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bs)}Dl(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mi.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mi.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&b("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kr(t,e){if(!q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Iv(t,e,n){var r=e.pendingProps;switch(la(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return Me(e.type)&&Qs(),we(e),null;case 3:return r=e.stateNode,mr(),K(Re),K(Se),ma(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ds(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,et!==null&&(vu(et),et=null))),au(t,e),we(e),null;case 5:ga(e);var i=vn(Li.current);if(n=e.type,t!==null&&e.stateNode!=null)ip(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return we(e),null}if(t=vn(mt.current),ds(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ft]=e,r[Ci]=s,t=(e.mode&1)!==0,n){case"dialog":b("cancel",r),b("close",r);break;case"iframe":case"object":case"embed":b("load",r);break;case"video":case"audio":for(i=0;i<ni.length;i++)b(ni[i],r);break;case"source":b("error",r);break;case"img":case"image":case"link":b("error",r),b("load",r);break;case"details":b("toggle",r);break;case"input":Cc(r,s),b("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},b("invalid",r);break;case"textarea":Lc(r,s),b("invalid",r)}Dl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&fs(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&fs(r.textContent,l,t),i=["children",""+l]):mi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&b("scroll",r)}switch(n){case"input":rs(r),Pc(r,s,!0);break;case"textarea":rs(r),Ac(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bs)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ft]=e,t[Ci]=r,rp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fl(n,r),n){case"dialog":b("cancel",t),b("close",t),i=r;break;case"iframe":case"object":case"embed":b("load",t),i=r;break;case"video":case"audio":for(i=0;i<ni.length;i++)b(ni[i],t);i=r;break;case"source":b("error",t),i=r;break;case"img":case"image":case"link":b("error",t),b("load",t),i=r;break;case"details":b("toggle",t),i=r;break;case"input":Cc(t,r),i=Ol(t,r),b("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),b("invalid",t);break;case"textarea":Lc(t,r),i=Ml(t,r),b("invalid",t);break;default:i=r}Dl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Dd(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Md(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&vi(t,a):typeof a=="number"&&vi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&b("scroll",t):a!=null&&bu(t,s,a,o))}switch(n){case"input":rs(t),Pc(t,r,!1);break;case"textarea":rs(t),Ac(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?sr(t,!!r.multiple,s,!1):r.defaultValue!=null&&sr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)sp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=vn(Li.current),vn(mt.current),ds(e)){if(r=e.stateNode,n=e.memoizedProps,r[ft]=e,(s=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:fs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ft]=e,e.stateNode=r}return we(e),null;case 13:if(K(J),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(q&&Ue!==null&&e.mode&1&&!(e.flags&128))xh(),pr(),e.flags|=98560,s=!1;else if(s=ds(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[ft]=e}else pr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),s=!1}else et!==null&&(vu(et),et=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?ce===0&&(ce=3):La())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return mr(),au(t,e),t===null&&Ti(e.stateNode.containerInfo),we(e),null;case 10:return fa(e.type._context),we(e),null;case 17:return Me(e.type)&&Qs(),we(e),null;case 19:if(K(J),s=e.memoizedState,s===null)return we(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Kr(s,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=eo(t),o!==null){for(e.flags|=128,Kr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(J,J.current&1|2),e.child}t=t.sibling}s.tail!==null&&se()>yr&&(e.flags|=128,r=!0,Kr(s,!1),e.lanes=4194304)}else{if(!r)if(t=eo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!q)return we(e),null}else 2*se()-s.renderingStartTime>yr&&n!==1073741824&&(e.flags|=128,r=!0,Kr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=se(),e.sibling=null,n=J.current,G(J,r?n&1|2:n&1),e):(we(e),null);case 22:case 23:return Pa(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fe&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function Cv(t,e){switch(la(e),e.tag){case 1:return Me(e.type)&&Qs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mr(),K(Re),K(Se),ma(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ga(e),null;case 13:if(K(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));pr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(J),null;case 4:return mr(),null;case 10:return fa(e.type._context),null;case 22:case 23:return Pa(),null;case 24:return null;default:return null}}var gs=!1,Ee=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,C=null;function er(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function cu(t,e,n){try{n()}catch(r){re(t,e,r)}}var _f=!1;function Lv(t,e){if(Ql=Vs,t=ch(),sa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=o),h===s&&++f===r&&(a=o),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yl={focusedElem:t,selectionRange:n},Vs=!1,C=e;C!==null;)if(e=C,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,C=t;else for(;C!==null;){e=C;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,S=_.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Je(e.type,y),S);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){re(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,C=t;break}C=e.return}return _=_f,_f=!1,_}function ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&cu(e,n,s)}i=i.next}while(i!==r)}}function Co(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function op(t){var e=t.alternate;e!==null&&(t.alternate=null,op(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ft],delete e[Ci],delete e[Xl],delete e[cv],delete e[fv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lp(t){return t.tag===5||t.tag===3||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function du(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bs));else if(r!==4&&(t=t.child,t!==null))for(du(t,e,n),t=t.sibling;t!==null;)du(t,e,n),t=t.sibling}function hu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hu(t,e,n),t=t.sibling;t!==null;)hu(t,e,n),t=t.sibling}var me=null,Ze=!1;function Dt(t,e,n){for(n=n.child;n!==null;)up(t,e,n),n=n.sibling}function up(t,e,n){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(yo,n)}catch{}switch(n.tag){case 5:Ee||er(n,e);case 6:var r=me,i=Ze;me=null,Dt(t,e,n),me=r,Ze=i,me!==null&&(Ze?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(Ze?(t=me,n=n.stateNode,t.nodeType===8?ll(t.parentNode,n):t.nodeType===1&&ll(t,n),Ei(t)):ll(me,n.stateNode));break;case 4:r=me,i=Ze,me=n.stateNode.containerInfo,Ze=!0,Dt(t,e,n),me=r,Ze=i;break;case 0:case 11:case 14:case 15:if(!Ee&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cu(n,e,o),i=i.next}while(i!==r)}Dt(t,e,n);break;case 1:if(!Ee&&(er(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){re(n,e,l)}Dt(t,e,n);break;case 21:Dt(t,e,n);break;case 22:n.mode&1?(Ee=(r=Ee)||n.memoizedState!==null,Dt(t,e,n),Ee=r):Dt(t,e,n);break;default:Dt(t,e,n)}}function Ef(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Pv),e.forEach(function(r){var i=Fv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xe(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,Ze=!1;break e;case 3:me=l.stateNode.containerInfo,Ze=!0;break e;case 4:me=l.stateNode.containerInfo,Ze=!0;break e}l=l.return}if(me===null)throw Error(E(160));up(s,o,i),me=null,Ze=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){re(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ap(e,t),e=e.sibling}function ap(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xe(e,t),ut(t),r&4){try{ci(3,t,t.return),Co(3,t)}catch(y){re(t,t.return,y)}try{ci(5,t,t.return)}catch(y){re(t,t.return,y)}}break;case 1:Xe(e,t),ut(t),r&512&&n!==null&&er(n,n.return);break;case 5:if(Xe(e,t),ut(t),r&512&&n!==null&&er(n,n.return),t.flags&32){var i=t.stateNode;try{vi(i,"")}catch(y){re(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Od(i,s),Fl(l,o);var c=Fl(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?Dd(i,d):f==="dangerouslySetInnerHTML"?Md(i,d):f==="children"?vi(i,d):bu(i,f,d,c)}switch(l){case"input":Nl(i,s);break;case"textarea":Nd(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?sr(i,!!s.multiple,v,!1):h!==!!s.multiple&&(s.defaultValue!=null?sr(i,!!s.multiple,s.defaultValue,!0):sr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ci]=s}catch(y){re(t,t.return,y)}}break;case 6:if(Xe(e,t),ut(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){re(t,t.return,y)}}break;case 3:if(Xe(e,t),ut(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ei(e.containerInfo)}catch(y){re(t,t.return,y)}break;case 4:Xe(e,t),ut(t);break;case 13:Xe(e,t),ut(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ia=se())),r&4&&Ef(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ee=(c=Ee)||f,Xe(e,t),Ee=c):Xe(e,t),ut(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(C=t,f=t.child;f!==null;){for(d=C=f;C!==null;){switch(h=C,v=h.child,h.tag){case 0:case 11:case 14:case 15:ci(4,h,h.return);break;case 1:er(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){re(r,n,y)}}break;case 5:er(h,h.return);break;case 22:if(h.memoizedState!==null){xf(d);continue}}v!==null?(v.return=h,C=v):xf(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=zd("display",o))}catch(y){re(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){re(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xe(e,t),ut(t),r&4&&Ef(t);break;case 21:break;default:Xe(e,t),ut(t)}}function ut(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lp(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vi(i,""),r.flags&=-33);var s=wf(t);hu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=wf(t);du(t,l,o);break;default:throw Error(E(161))}}catch(a){re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Av(t,e,n){C=t,cp(t)}function cp(t,e,n){for(var r=(t.mode&1)!==0;C!==null;){var i=C,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gs;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ee;l=gs;var c=Ee;if(gs=o,(Ee=a)&&!c)for(C=i;C!==null;)o=C,a=o.child,o.tag===22&&o.memoizedState!==null?Tf(i):a!==null?(a.return=o,C=a):Tf(i);for(;s!==null;)C=s,cp(s),s=s.sibling;C=i,gs=l,Ee=c}Sf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,C=s):Sf(t)}}function Sf(t){for(;C!==null;){var e=C;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ee||Co(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ee)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Je(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&of(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}of(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ei(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ee||e.flags&512&&fu(e)}catch(h){re(e,e.return,h)}}if(e===t){C=null;break}if(n=e.sibling,n!==null){n.return=e.return,C=n;break}C=e.return}}function xf(t){for(;C!==null;){var e=C;if(e===t){C=null;break}var n=e.sibling;if(n!==null){n.return=e.return,C=n;break}C=e.return}}function Tf(t){for(;C!==null;){var e=C;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Co(4,e)}catch(a){re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){re(e,i,a)}}var s=e.return;try{fu(e)}catch(a){re(e,s,a)}break;case 5:var o=e.return;try{fu(e)}catch(a){re(e,o,a)}}}catch(a){re(e,e.return,a)}if(e===t){C=null;break}var l=e.sibling;if(l!==null){l.return=e.return,C=l;break}C=e.return}}var kv=Math.ceil,ro=zt.ReactCurrentDispatcher,xa=zt.ReactCurrentOwner,Qe=zt.ReactCurrentBatchConfig,W=0,pe=null,oe=null,ve=0,Fe=0,tr=on(0),ce=0,Ni=null,In=0,Po=0,Ta=0,fi=null,ke=null,Ia=0,yr=1/0,St=null,io=!1,pu=null,qt=null,ms=!1,Vt=null,so=0,di=0,gu=null,Os=-1,Ns=0;function Ie(){return W&6?se():Os!==-1?Os:Os=se()}function Xt(t){return t.mode&1?W&2&&ve!==0?ve&-ve:hv.transition!==null?(Ns===0&&(Ns=Yd()),Ns):(t=H,t!==0||(t=window.event,t=t===void 0?16:th(t.type)),t):1}function it(t,e,n,r){if(50<di)throw di=0,gu=null,Error(E(185));Bi(t,n,r),(!(W&2)||t!==pe)&&(t===pe&&(!(W&2)&&(Po|=n),ce===4&&jt(t,ve)),ze(t,r),n===1&&W===0&&!(e.mode&1)&&(yr=se()+500,xo&&ln()))}function ze(t,e){var n=t.callbackNode;h0(t,e);var r=$s(t,t===pe?ve:0);if(r===0)n!==null&&Nc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nc(n),e===1)t.tag===0?dv(If.bind(null,t)):wh(If.bind(null,t)),uv(function(){!(W&6)&&ln()}),n=null;else{switch(Kd(r)){case 1:n=Xu;break;case 4:n=bd;break;case 16:n=js;break;case 536870912:n=Qd;break;default:n=js}n=yp(n,fp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fp(t,e){if(Os=-1,Ns=0,W&6)throw Error(E(327));var n=t.callbackNode;if(cr()&&t.callbackNode!==n)return null;var r=$s(t,t===pe?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=oo(t,r);else{e=r;var i=W;W|=2;var s=hp();(pe!==t||ve!==e)&&(St=null,yr=se()+500,wn(t,e));do try{Rv();break}catch(l){dp(t,l)}while(!0);ca(),ro.current=s,W=i,oe!==null?e=0:(pe=null,ve=0,e=ce)}if(e!==0){if(e===2&&(i=$l(t),i!==0&&(r=i,e=mu(t,i))),e===1)throw n=Ni,wn(t,0),jt(t,r),ze(t,se()),n;if(e===6)jt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ov(i)&&(e=oo(t,r),e===2&&(s=$l(t),s!==0&&(r=s,e=mu(t,s))),e===1))throw n=Ni,wn(t,0),jt(t,r),ze(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:hn(t,ke,St);break;case 3:if(jt(t,r),(r&130023424)===r&&(e=Ia+500-se(),10<e)){if($s(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ql(hn.bind(null,t,ke,St),e);break}hn(t,ke,St);break;case 4:if(jt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kv(r/1960))-r,10<r){t.timeoutHandle=ql(hn.bind(null,t,ke,St),r);break}hn(t,ke,St);break;case 5:hn(t,ke,St);break;default:throw Error(E(329))}}}return ze(t,se()),t.callbackNode===n?fp.bind(null,t):null}function mu(t,e){var n=fi;return t.current.memoizedState.isDehydrated&&(wn(t,e).flags|=256),t=oo(t,e),t!==2&&(e=ke,ke=n,e!==null&&vu(e)),t}function vu(t){ke===null?ke=t:ke.push.apply(ke,t)}function Ov(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ot(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jt(t,e){for(e&=~Ta,e&=~Po,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rt(e),r=1<<n;t[n]=-1,e&=~r}}function If(t){if(W&6)throw Error(E(327));cr();var e=$s(t,0);if(!(e&1))return ze(t,se()),null;var n=oo(t,e);if(t.tag!==0&&n===2){var r=$l(t);r!==0&&(e=r,n=mu(t,r))}if(n===1)throw n=Ni,wn(t,0),jt(t,e),ze(t,se()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hn(t,ke,St),ze(t,se()),null}function Ca(t,e){var n=W;W|=1;try{return t(e)}finally{W=n,W===0&&(yr=se()+500,xo&&ln())}}function Cn(t){Vt!==null&&Vt.tag===0&&!(W&6)&&cr();var e=W;W|=1;var n=Qe.transition,r=H;try{if(Qe.transition=null,H=1,t)return t()}finally{H=r,Qe.transition=n,W=e,!(W&6)&&ln()}}function Pa(){Fe=tr.current,K(tr)}function wn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lv(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(la(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qs();break;case 3:mr(),K(Re),K(Se),ma();break;case 5:ga(r);break;case 4:mr();break;case 13:K(J);break;case 19:K(J);break;case 10:fa(r.type._context);break;case 22:case 23:Pa()}n=n.return}if(pe=t,oe=t=Jt(t.current,null),ve=Fe=e,ce=0,Ni=null,Ta=Po=In=0,ke=fi=null,mn!==null){for(e=0;e<mn.length;e++)if(n=mn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}mn=null}return t}function dp(t,e){do{var n=oe;try{if(ca(),Ls.current=no,to){for(var r=te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}to=!1}if(Tn=0,he=ae=te=null,ai=!1,Ai=0,xa.current=null,n===null||n.return===null){ce=1,Ni=e,oe=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=df(o);if(v!==null){v.flags&=-257,hf(v,o,l,s,e),v.mode&1&&ff(s,c,e),e=v,a=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(a),e.updateQueue=y}else _.add(a);break e}else{if(!(e&1)){ff(s,c,e),La();break e}a=Error(E(426))}}else if(q&&l.mode&1){var S=df(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),hf(S,o,l,s,e),ua(vr(a,l));break e}}s=a=vr(a,l),ce!==4&&(ce=2),fi===null?fi=[s]:fi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Kh(s,a,e);sf(s,g);break e;case 1:l=a;var p=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qt===null||!qt.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=qh(s,l,e);sf(s,w);break e}}s=s.return}while(s!==null)}gp(n)}catch(x){e=x,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function hp(){var t=ro.current;return ro.current=no,t===null?no:t}function La(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(In&268435455)&&!(Po&268435455)||jt(pe,ve)}function oo(t,e){var n=W;W|=2;var r=hp();(pe!==t||ve!==e)&&(St=null,wn(t,e));do try{Nv();break}catch(i){dp(t,i)}while(!0);if(ca(),W=n,ro.current=r,oe!==null)throw Error(E(261));return pe=null,ve=0,ce}function Nv(){for(;oe!==null;)pp(oe)}function Rv(){for(;oe!==null&&!i0();)pp(oe)}function pp(t){var e=vp(t.alternate,t,Fe);t.memoizedProps=t.pendingProps,e===null?gp(t):oe=e,xa.current=null}function gp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cv(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,oe=null;return}}else if(n=Iv(n,e,Fe),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);ce===0&&(ce=5)}function hn(t,e,n){var r=H,i=Qe.transition;try{Qe.transition=null,H=1,Mv(t,e,n,r)}finally{Qe.transition=i,H=r}return null}function Mv(t,e,n,r){do cr();while(Vt!==null);if(W&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(p0(t,s),t===pe&&(oe=pe=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ms||(ms=!0,yp(js,function(){return cr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qe.transition,Qe.transition=null;var o=H;H=1;var l=W;W|=4,xa.current=null,Lv(t,n),ap(n,t),ev(Yl),Vs=!!Ql,Yl=Ql=null,t.current=n,Av(n),s0(),W=l,H=o,Qe.transition=s}else t.current=n;if(ms&&(ms=!1,Vt=t,so=i),s=t.pendingLanes,s===0&&(qt=null),u0(n.stateNode),ze(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(io)throw io=!1,t=pu,pu=null,t;return so&1&&t.tag!==0&&cr(),s=t.pendingLanes,s&1?t===gu?di++:(di=0,gu=t):di=0,ln(),null}function cr(){if(Vt!==null){var t=Kd(so),e=Qe.transition,n=H;try{if(Qe.transition=null,H=16>t?16:t,Vt===null)var r=!1;else{if(t=Vt,Vt=null,so=0,W&6)throw Error(E(331));var i=W;for(W|=4,C=t.current;C!==null;){var s=C,o=s.child;if(C.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(C=c;C!==null;){var f=C;switch(f.tag){case 0:case 11:case 15:ci(8,f,s)}var d=f.child;if(d!==null)d.return=f,C=d;else for(;C!==null;){f=C;var h=f.sibling,v=f.return;if(op(f),f===c){C=null;break}if(h!==null){h.return=v,C=h;break}C=v}}}var _=s.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}C=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,C=o;else e:for(;C!==null;){if(s=C,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ci(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,C=g;break e}C=s.return}}var p=t.current;for(C=p;C!==null;){o=C;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,C=m;else e:for(o=p;C!==null;){if(l=C,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Co(9,l)}}catch(x){re(l,l.return,x)}if(l===o){C=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,C=w;break e}C=l.return}}if(W=i,ln(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(yo,t)}catch{}r=!0}return r}finally{H=n,Qe.transition=e}}return!1}function Cf(t,e,n){e=vr(n,e),e=Kh(t,e,1),t=Kt(t,e,1),e=Ie(),t!==null&&(Bi(t,1,e),ze(t,e))}function re(t,e,n){if(t.tag===3)Cf(t,t,n);else for(;e!==null;){if(e.tag===3){Cf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qt===null||!qt.has(r))){t=vr(n,t),t=qh(e,t,1),e=Kt(e,t,1),t=Ie(),e!==null&&(Bi(e,1,t),ze(e,t));break}}e=e.return}}function zv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(ve&n)===n&&(ce===4||ce===3&&(ve&130023424)===ve&&500>se()-Ia?wn(t,0):Ta|=n),ze(t,e)}function mp(t,e){e===0&&(t.mode&1?(e=os,os<<=1,!(os&130023424)&&(os=4194304)):e=1);var n=Ie();t=Ot(t,e),t!==null&&(Bi(t,e,n),ze(t,n))}function Dv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mp(t,n)}function Fv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),mp(t,n)}var vp;vp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Re.current)Ne=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ne=!1,Tv(t,e,n);Ne=!!(t.flags&131072)}else Ne=!1,q&&e.flags&1048576&&Eh(e,qs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ks(t,e),t=e.pendingProps;var i=hr(e,Se.current);ar(e,n),i=ya(null,e,r,t,i,n);var s=_a();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Me(r)?(s=!0,Ys(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ha(e),i.updater=Io,e.stateNode=i,i._reactInternals=e,ru(e,r,t,n),e=ou(null,e,r,!0,s,n)):(e.tag=0,q&&s&&oa(e),Te(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ks(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Bv(r),t=Je(r,t),i){case 0:e=su(null,e,r,t,n);break e;case 1:e=mf(null,e,r,t,n);break e;case 11:e=pf(null,e,r,t,n);break e;case 14:e=gf(null,e,r,Je(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Je(r,i),su(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Je(r,i),mf(t,e,r,i,n);case 3:e:{if(ep(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ph(t,e),Zs(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vr(Error(E(423)),e),e=vf(t,e,r,n,i);break e}else if(r!==i){i=vr(Error(E(424)),e),e=vf(t,e,r,n,i);break e}else for(Ue=Yt(e.stateNode.containerInfo.firstChild),Be=e,q=!0,et=null,n=Ih(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pr(),r===i){e=Nt(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return Lh(e),t===null&&eu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Kl(r,i)?o=null:s!==null&&Kl(r,s)&&(e.flags|=32),Zh(t,e),Te(t,e,o,n),e.child;case 6:return t===null&&eu(e),null;case 13:return tp(t,e,n);case 4:return pa(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gr(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Je(r,i),pf(t,e,r,i,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,G(Xs,r._currentValue),r._currentValue=o,s!==null)if(ot(s.value,o)){if(s.children===i.children&&!Re.current){e=Nt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Lt(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),tu(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),tu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Te(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ar(e,n),i=Ke(i),r=r(i),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,i=Je(r,e.pendingProps),i=Je(r.type,i),gf(t,e,r,i,n);case 15:return Xh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Je(r,i),ks(t,e),e.tag=1,Me(r)?(t=!0,Ys(e)):t=!1,ar(e,n),Yh(e,r,i),ru(e,r,i,n),ou(null,e,r,!0,t,n);case 19:return np(t,e,n);case 22:return Jh(t,e,n)}throw Error(E(156,e.tag))};function yp(t,e){return Gd(t,e)}function Uv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function be(t,e,n,r){return new Uv(t,e,n,r)}function Aa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bv(t){if(typeof t=="function")return Aa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yu)return 11;if(t===Ku)return 14}return 2}function Jt(t,e){var n=t.alternate;return n===null?(n=be(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rs(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Aa(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gn:return En(n.children,i,s,e);case Qu:o=8,i|=8;break;case Pl:return t=be(12,n,e,i|2),t.elementType=Pl,t.lanes=s,t;case Ll:return t=be(13,n,e,i),t.elementType=Ll,t.lanes=s,t;case Al:return t=be(19,n,e,i),t.elementType=Al,t.lanes=s,t;case Ld:return Lo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cd:o=10;break e;case Pd:o=9;break e;case Yu:o=11;break e;case Ku:o=14;break e;case Ft:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=be(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function En(t,e,n,r){return t=be(7,t,r,e),t.lanes=n,t}function Lo(t,e,n,r){return t=be(22,t,r,e),t.elementType=Ld,t.lanes=n,t.stateNode={isHidden:!1},t}function gl(t,e,n){return t=be(6,t,null,e),t.lanes=n,t}function ml(t,e,n){return e=be(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qo(0),this.expirationTimes=qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ka(t,e,n,r,i,s,o,l,a){return t=new Wv(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=be(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ha(s),t}function jv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _p(t){if(!t)return en;t=t._reactInternals;e:{if(Mn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Me(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Me(n))return _h(t,n,e)}return e}function wp(t,e,n,r,i,s,o,l,a){return t=ka(n,r,!0,t,i,s,o,l,a),t.context=_p(null),n=t.current,r=Ie(),i=Xt(n),s=Lt(r,i),s.callback=e??null,Kt(n,s,i),t.current.lanes=i,Bi(t,i,r),ze(t,r),t}function Ao(t,e,n,r){var i=e.current,s=Ie(),o=Xt(i);return n=_p(n),e.context===null?e.context=n:e.pendingContext=n,e=Lt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kt(i,e,o),t!==null&&(it(t,i,o,s),Ps(t,i,o)),o}function lo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Oa(t,e){Pf(t,e),(t=t.alternate)&&Pf(t,e)}function $v(){return null}var Ep=typeof reportError=="function"?reportError:function(t){console.error(t)};function Na(t){this._internalRoot=t}ko.prototype.render=Na.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Ao(t,e,null,null)};ko.prototype.unmount=Na.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cn(function(){Ao(null,t,null,null)}),e[kt]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wt.length&&e!==0&&e<Wt[n].priority;n++);Wt.splice(n,0,t),n===0&&eh(t)}};function Ra(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lf(){}function Vv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=lo(o);s.call(c)}}var o=wp(e,r,t,0,null,!1,!1,"",Lf);return t._reactRootContainer=o,t[kt]=o.current,Ti(t.nodeType===8?t.parentNode:t),Cn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=lo(a);l.call(c)}}var a=ka(t,0,!1,null,null,!1,!1,"",Lf);return t._reactRootContainer=a,t[kt]=a.current,Ti(t.nodeType===8?t.parentNode:t),Cn(function(){Ao(e,a,n,r)}),a}function No(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=lo(o);l.call(a)}}Ao(e,o,t,i)}else o=Vv(n,e,t,i,r);return lo(o)}qd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ti(e.pendingLanes);n!==0&&(Ju(e,n|1),ze(e,se()),!(W&6)&&(yr=se()+500,ln()))}break;case 13:Cn(function(){var r=Ot(t,1);if(r!==null){var i=Ie();it(r,t,1,i)}}),Oa(t,1)}};Zu=function(t){if(t.tag===13){var e=Ot(t,134217728);if(e!==null){var n=Ie();it(e,t,134217728,n)}Oa(t,134217728)}};Xd=function(t){if(t.tag===13){var e=Xt(t),n=Ot(t,e);if(n!==null){var r=Ie();it(n,t,e,r)}Oa(t,e)}};Jd=function(){return H};Zd=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};Bl=function(t,e,n){switch(e){case"input":if(Nl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=So(r);if(!i)throw Error(E(90));kd(r),Nl(r,i)}}}break;case"textarea":Nd(t,n);break;case"select":e=n.value,e!=null&&sr(t,!!n.multiple,e,!1)}};Bd=Ca;Wd=Cn;var Hv={usingClientEntryPoint:!1,Events:[ji,Kn,So,Fd,Ud,Ca]},qr={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gv={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vd(t),t===null?null:t.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||$v,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vs.isDisabled&&vs.supportsFiber)try{yo=vs.inject(Gv),gt=vs}catch{}}je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hv;je.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ra(e))throw Error(E(200));return jv(t,e,null,n)};je.createRoot=function(t,e){if(!Ra(t))throw Error(E(299));var n=!1,r="",i=Ep;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ka(t,1,!1,null,null,n,!1,r,i),t[kt]=e.current,Ti(t.nodeType===8?t.parentNode:t),new Na(e)};je.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Vd(e),t=t===null?null:t.stateNode,t};je.flushSync=function(t){return Cn(t)};je.hydrate=function(t,e,n){if(!Oo(e))throw Error(E(200));return No(null,t,e,!0,n)};je.hydrateRoot=function(t,e,n){if(!Ra(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ep;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wp(e,null,t,1,n??null,i,!1,s,o),t[kt]=e.current,Ti(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ko(e)};je.render=function(t,e,n){if(!Oo(e))throw Error(E(200));return No(null,t,e,!1,n)};je.unmountComponentAtNode=function(t){if(!Oo(t))throw Error(E(40));return t._reactRootContainer?(Cn(function(){No(null,null,t,!1,function(){t._reactRootContainer=null,t[kt]=null})}),!0):!1};je.unstable_batchedUpdates=Ca;je.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oo(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return No(t,e,n,!1,r)};je.version="18.3.1-next-f1338f8080-20240426";function Sp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sp)}catch(t){console.error(t)}}Sp(),Sd.exports=je;var bv=Sd.exports,Af=bv;Il.createRoot=Af.createRoot,Il.hydrateRoot=Af.hydrateRoot;const Qv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),Yv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),Kv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),qv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),Xv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),Jv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),Zv=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),ey=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),ty=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),ny=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),ry=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),iy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),sy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),oy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),ly=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),uy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),ay=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),cy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),fy=t=>k.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},k.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"}));var Ae=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t))(Ae||{});const dy={Line:Qv,Square:Yv,Circle:Kv,Direction:qv,VectorDocument:Xv,LayersDifference:Jv,AntiClockwise:iy,Clockwise:sy,Github:oy,Crop:ly,Folder:uy,Save:cy,Svg:Zv,Expand:ay,Image:fy,SolidDown:ey,SolidUp:ty,SolidUpSmall:ny,SolidDownSmall:ry},xp=({name:t,className:e})=>{const n=dy[t];return N.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:N.jsx(n,{})})};var $=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t))($||{});const X=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:s,className:o,style:l})=>N.jsx(N.Fragment,{children:N.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(o?" "+o:""),style:l,"data-active":i,onClick:r,title:e,children:[n&&N.jsx(xp,{name:n}),t&&N.jsx("span",{children:t}),s]})}),vl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:s,children:o})=>{const[l,a]=k.useState(!1);return N.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[N.jsx(X,{icon:n,label:t,title:e,"data-active":l,onClick:()=>a(!l),style:s}),N.jsx(xp,{name:Ae.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&N.jsx("div",{className:"flex flex-row gap-1",onClick:()=>a(!1),children:o})]})},Tp=!0,hy=!1,Ms={CCW:-1,CW:1,NOT_ORIENTABLE:0},py=2*Math.PI,uo=1,Ip=0,ct=2,gy=3,my=4,vy=1,yy=2,Ma=0,hi=1,fr=2;var ao=Object.freeze({__proto__:null,BOUNDARY:ct,CCW:Tp,CONTAINS:gy,CW:hy,END_VERTEX:fr,INSIDE:uo,INTERLACE:my,NOT_VERTEX:Ma,ORIENTATION:Ms,OUTSIDE:Ip,OVERLAP_OPPOSITE:yy,OVERLAP_SAME:vy,PIx2:py,START_VERTEX:hi});let vt=1e-6;function Cp(t){vt=t}function Pp(){return vt}const _y=3;function yu(t){return t<vt&&t>-vt}function Pn(t,e){return t-e<vt&&t-e>-vt}function Lp(t,e){return t-e>vt}function wy(t,e){return t-e>-vt}function Ap(t,e){return t-e<-vt}function Ey(t,e){return t-e<vt}var Sy=Object.freeze({__proto__:null,DECIMALS:_y,EQ:Pn,EQ_0:yu,GE:wy,GT:Lp,LE:Ey,LT:Ap,getTolerance:Pp,setTolerance:Cp});let u={Utils:Sy,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in ao)u[t]=ao[t];Object.defineProperty(u,"DP_TOL",{get:function(){return Pp()},set:function(t){Cp(t)}});class Y{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}u.Errors=Y;class za{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,s=n||this.last,o=i;if(o===void 0)return r;do r.push(o),o=o.next;while(o!==s.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw Y.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const kf={stroke:"black"};class xy{constructor(e=kf){for(const n in e)this[n]=e[n];this.stroke=e.stroke??kf.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function zn(t){return new xy(t).toAttributesString()}function Rr(t,e){let n=[],[r,i,s]=t.standard,[o,l,a]=e.standard,c=r*l-i*o,f=s*l-i*a,d=r*a-s*o;if(!u.Utils.EQ_0(c)){let h,v;i===0?(h=s/r,v=d/c):l===0?(h=a/o,v=d/c):r===0?(h=f/c,v=s/i):o===0?(h=f/c,v=a/l):(h=f/c,v=d/c),n.push(new u.Point(h,v))}return n}function Dn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(u.Utils.EQ(i,e.r))n.push(r);else if(u.Utils.LT(i,e.r)){let s=Math.sqrt(e.r*e.r-i*i),o,l;o=t.norm.rotate90CCW().multiply(s),l=r.translate(o),n.push(l),o=t.norm.rotate90CW().multiply(s),l=r.translate(o),n.push(l)}return n}function _r(t,e){let n=[];for(let r of e.toSegments()){let i=Vi(r,t);for(let s of i)Up(s,n)||n.push(s)}return n}function Ro(t,e){let n=[];if(_r(t,e.box).length===0)return n;let r=new u.Circle(e.pc,e.r),i=Dn(t,r);for(let s of i)s.on(e)&&n.push(s);return n}function Vi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new u.Line(t.ps,t.pe);return Rr(r,e)}function Mo(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let s=Rr(r,i);s.length>0&&Of(s[0],t)&&Of(s[0],e)&&n.push(s[0])}return n}function Of(t,e){const n=e.box;return u.Utils.LE(t.x,n.xmax)&&u.Utils.GE(t.x,n.xmin)&&u.Utils.LE(t.y,n.ymax)&&u.Utils.GE(t.y,n.ymin)}function zo(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[s,o]=t.ps.distanceTo(e.pc);return u.Utils.EQ(s,e.r)&&n.push(t.ps),n}let r=new u.Line(t.ps,t.pe),i=Dn(r,e);for(let s of i)s.on(t)&&n.push(s);return n}function Mr(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Circle(e.pc,e.r),s=Dn(r,i);for(let o of s)o.on(t)&&o.on(e)&&n.push(o);return n}function Ty(t,e){let n=[];for(let r of e.toSegments()){let i=Mo(r,t);for(let s of i)n.push(s)}return n}function kp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new u.Vector(t.pc,e.pc),i=t.r,s=e.r;if(u.Utils.EQ_0(i)||u.Utils.EQ_0(s))return n;if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y)&&u.Utils.EQ(i,s))return n.push(t.pc.translate(-i,0)),n;let o=t.pc.distanceTo(e.pc)[0];if(u.Utils.GT(o,i+s)||u.Utils.LT(o,Math.abs(i-s)))return n;r.x/=o,r.y/=o;let l;if(u.Utils.EQ(o,i+s)||u.Utils.EQ(o,Math.abs(i-s)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let a=i*i/(2*o)-s*s/(2*o)+o/2,c=t.pc.translate(a*r.x,a*r.y),f=Math.sqrt(i*i-a*a);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Iy(t,e){let n=[];for(let r of e.toSegments()){let i=zo(r,t);for(let s of i)n.push(s)}return n}function Op(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&u.Utils.EQ(t.r,e.r)){let o;return o=t.start,o.on(e)&&n.push(o),o=t.end,o.on(e)&&n.push(o),o=e.start,o.on(t)&&n.push(o),o=e.end,o.on(t)&&n.push(o),n}let r=new u.Circle(t.pc,t.r),i=new u.Circle(e.pc,e.r),s=r.intersect(i);for(let o of s)o.on(t)&&o.on(e)&&n.push(o);return n}function Da(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&u.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new u.Circle(t.pc,t.r),s=kp(r,i);for(let o of s)o.on(t)&&n.push(o);return n}function Cy(t,e){let n=[];for(let r of e.toSegments()){let i=Mr(r,t);for(let s of i)n.push(s)}return n}function Np(t,e){return t.isSegment?Mo(t.shape,e):Mr(e,t.shape)}function Rp(t,e){return t.isSegment?Mr(t.shape,e):Op(t.shape,e)}function Mp(t,e){return t.isSegment?Vi(t.shape,e):Ro(e,t.shape)}function Py(t,e){return t.isSegment?Ba(e,t.shape):Wa(e,t.shape)}function Ly(t,e){return t.isSegment?zo(t.shape,e):Da(t.shape,e)}function Fa(t,e){let n=[];for(let r of e.edges)for(let i of Np(r,t))n.push(i);return n}function Ua(t,e){let n=[];for(let r of e.edges)for(let i of Rp(r,t))n.push(i);return n}function Hi(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Mp(r,t))Up(i,n)||n.push(i);return t.sortPoints(n)}function zp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Ly(r,t))n.push(i);return n}function Dp(t,e){return t.isSegment?Np(e,t.shape):t.isArc?Rp(e,t.shape):t.isLine?Mp(e,t.shape):t.isRay?Py(e,t.shape):[]}function Fp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Dp(t,i)];return n}function Ay(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...Fp(r,e)];return n}function ky(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...Fp(r,e)];return n}function Oy(t,e){return t instanceof u.Line?Hi(t,e):t instanceof u.Segment?Fa(t,e):t instanceof u.Arc?Ua(t,e):[]}function Up(t,e){return e.some(n=>n.equalTo(t))}function tn(t){return new u.Line(t.start,t.norm)}function Ba(t,e){return Vi(e,tn(t)).filter(n=>t.contains(n))}function Wa(t,e){return Ro(tn(t),e).filter(n=>t.contains(n))}function Bp(t,e){return Dn(tn(t),e).filter(n=>t.contains(n))}function Ny(t,e){return _r(tn(t),e).filter(n=>t.contains(n))}function Wp(t,e){return Rr(tn(t),e).filter(n=>t.contains(n))}function Ry(t,e){return Rr(tn(t),tn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function jp(t,e){return Hi(tn(t),e).filter(n=>t.contains(n))}function $p(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw Y.UNSUPPORTED_SHAPE_TYPE}function Gi(t,e){let n=[];for(let r of e)n=[...n,...$p(r,r.shape)];return n}function My(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...$p(r,i)];return n}let Fn=class ri extends za{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,s=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray||a instanceof u.Line,o=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray,l=a=>a instanceof u.Segment||a instanceof u.Arc;if(n=i===1&&s(r[0])||i>1&&o(r[0])&&o(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(a=>a instanceof u.Ray||a instanceof u.Line);for(let a of r){let c=new u.Edge(a);this.append(c)}this.setArcLength()}else throw u.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new ri(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),s=n.prev;return this.insert(i,s),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Line){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Circle){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Segment){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Multiline)return u.Distance.multiline2multiline(this,e);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof u.Multiline?My(this,e):Gi(e,this)}contains(e){if(e instanceof u.Point)return this.edges.some(n=>n.shape.contains(e));throw u.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new ri(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new u.Point){return new ri(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new u.Matrix){return new ri(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${zn({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};u.Multiline=Fn;const zy=(...t)=>new u.Multiline(...t);u.multiline=zy;function wr(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let s=0;i[0]===null?s=0:i[1]===null?s=t.shape.length:s=i[0].length;let o=Ma;Pn(s,0)&&(o|=hi),Pn(s,t.shape.length)&&(o|=fr);let l;s===1/0?l=i[0].coord(e):l=o&fr&&t.next&&t.next.arc_length===0?0:t.arc_length+s,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:o})}function Ri(t){t.int_points1_sorted=Bt(t.int_points1),t.int_points2_sorted=Bt(t.int_points2)}function Bt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(Dy)}function Dy(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function ja(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,s;for(let o=0;o<t.int_points1_sorted.length;o++)if(t.int_points1_sorted[o].id!==-1){n=t.int_points1_sorted[o],r=t.int_points2[n.id];for(let l=o+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!Pn(i.arc_length,n.arc_length));l++)i.id!==-1&&(s=t.int_points2[i.id],s.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&s.edge_before===r.edge_before&&s.edge_after===r.edge_after&&(i.id=-1,s.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let o=1;o<t.int_points2_sorted.length;o++){let l=t.int_points2_sorted[o];if(l.id===-1)continue;if(r.id===-1||!Pn(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let a=t.int_points1[l.id];a.edge_before===n.edge_before&&a.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(a.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(o=>o.id>=0),t.int_points2=t.int_points2.filter(o=>o.id>=0),t.int_points1.forEach((o,l)=>o.id=l),t.int_points2.forEach((o,l)=>o.id=l))}function _u(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=ct),e.edge_after&&(e.edge_after.bvStart=ct)}function wu(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function Fy(t){let e,n,r,i=t.int_points1.length;for(let s=0;s<i;s++){let o=t.int_points1_sorted[s];o.face!==e&&(n=s,e=o.face);let l=s,a=Er(t.int_points1_sorted,s,e),c;l+a<i&&t.int_points1_sorted[l+a].face===e?c=l+a:c=n;let f=Er(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[o.id].face){r=p;break}}if(r===null)continue;let d=o.edge_after,h=r.edge_before;if(!(d.bv===ct&&h.bv===ct)||d!==h)continue;let v=t.int_points2[o.id],_=t.int_points2[r.id],y=v.edge_after,S=_.edge_before;y.bv===ct&&S.bv===ct&&y===S||(v=t.int_points2[r.id],_=t.int_points2[o.id],y=v.edge_after,S=_.edge_before),y.bv===ct&&S.bv===ct&&y===S&&d.setOverlap(y)}}function Er(t,e,n){let r,i,s=1;if(t.length===1)return 1;r=t[e];for(let o=e+1;o<t.length&&!(r.face!==n||(i=t[o],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));o++)s++;return s}function Sr(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=Ma,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=hi),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=fr),n.is_vertex&hi){n.edge_before=r.prev,r.prev&&(n.is_vertex=fr);continue}if(n.is_vertex&fr)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof Fn&&n.is_vertex&hi&&(n.edge_after=t.first)}}function Nf(t,e,n){const r=t.edge_before,i=e.edge_after,s=n.length;r.next=n[0],n[0].prev=r,n[s-1].next=i,i.prev=n[s-1]}const{INSIDE:ht,OUTSIDE:pt,BOUNDARY:de,OVERLAP_SAME:Uy,OVERLAP_OPPOSITE:By}=ao,{NOT_VERTEX:CE,START_VERTEX:Rf,END_VERTEX:Mf}=ao,Do=1,bi=2,Ln=3;function Wy(t,e){let[n,r]=Qi(t,e,Do,!0);return n}function Eu(t,e){let r=e.clone().reverse(),[i,s]=Qi(t,r,Ln,!0);return i}function Vp(t,e){let[n,r]=Qi(t,e,bi,!0);return n}function Hp(t,e){let[n,r]=Qi(t,e,bi,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(l=>l.shape)];let s=[];for(let o of r.faces)s=[...s,...[...o.edges].map(l=>l.shape)];return[i,s]}function Su(t,e){let[n,r]=Qi(t,e,Ln,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(o=>o.shape)];return i}function Gp(t,e){let n=t.clone(),r=e.clone(),i=bp(n,r);Ri(i),Sr(n,i.int_points1_sorted),Sr(r,i.int_points2_sorted),ja(i),Ri(i);let s=i.int_points1_sorted.map(l=>l.pt),o=i.int_points2_sorted.map(l=>l.pt);return[s,o]}function jy(t,e,n,r){let i=zf(t,n.int_points1),s=zf(e,n.int_points2);for(Df(i,e),Df(s,t),_u(n.int_points1),_u(n.int_points2),wu(n.int_points1,e),wu(n.int_points2,t);Vy(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););Fy(n),xu(t,r,n.int_points1_sorted,!0),xu(e,r,n.int_points2_sorted,!1),Ff(t,i,r,!0),Ff(e,s,r,!1)}function $y(t,e,n,r){Hy(t,e,r,n.int_points2),Gy(t,e,n),Tu(t,n.int_points1),Tu(e,n.int_points2),Iu(t,n.int_points1,n.int_points2),Iu(t,n.int_points2,n.int_points1)}function Qi(t,e,n,r){let i=t.clone(),s=e.clone(),o=bp(i,s);return Ri(o),Sr(i,o.int_points1_sorted),Sr(s,o.int_points2_sorted),ja(o),Ri(o),jy(i,s,o,n),r&&$y(i,s,o,n),[i,s]}function bp(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let s of i){let o=r.shape.intersect(s.shape);for(let l of o)wr(r,l,n.int_points1),wr(s,l,n.int_points2)}}return n}function zf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Df(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Vy(t,e,n,r,i,s){let o,l,a,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==o&&(l=d,o=h.face);let v=d,_=Er(r,d,o),y;v+_<c&&r[v+_].face===o?y=v+_:y=l;let S=Er(r,y,o);a=null;for(let m=y;m<y+S;m++){let w=r[m];if(w.face===o&&i[w.id].face===i[h.id].face){a=w;break}}if(a===null)continue;let g=h.edge_after,p=a.edge_before;if(g.bv===de&&p.bv!=de){g.bv=p.bv;continue}if(g.bv!=de&&p.bv===de){p.bv=g.bv;continue}if(g.bv===de&&p.bv===de&&g!=p||g.bv===ht&&p.bv===pt||g.bv===pt&&p.bv===ht){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===de&&p.bv===de&&g!=p){let m=g.next,w;for(;m!=p;){if(m.bv!=de){if(w===void 0)w=m.bv;else if(m.bv!=w)throw Y.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}w!=null&&(g.bv=w,p.bv=w);continue}if(g.bv===ht&&p.bv===pt||g.bv===pt&&p.bv===ht){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[w,x]=m.shape.distanceTo(e);if(w<10*u.DP_TOL){wr(m,x.ps,n);let I=n[n.length-1];if(I.is_vertex&Rf)I.edge_after=m,I.edge_before=m.prev,m.bvStart=de,m.bv=void 0,m.setInclusion(e);else if(I.is_vertex&Mf)I.edge_after=m.next,m.bvEnd=de,m.bv=void 0,m.setInclusion(e);else{let j=e.addVertex(I.pt,m);I.edge_before=j,I.edge_after=j.next,j.setInclusion(e),j.next.bvStart=de,j.next.bvEnd=void 0,j.next.bv=void 0,j.next.setInclusion(e)}let P=e.findEdgeByPoint(x.pe);wr(P,x.pe,i);let A=i[i.length-1];if(A.is_vertex&Rf)A.edge_after=P,A.edge_before=P.prev;else if(A.is_vertex&Mf)A.edge_after=P.next;else{let j=i.find(De=>De.edge_after===P),O=e.addVertex(A.pt,P);A.edge_before=O,A.edge_after=O.next,j&&(j.edge_after=O),O.bvStart=void 0,O.bvEnd=de,O.bv=void 0,O.setInclusion(t),O.next.bvStart=de,O.next.bvEnd=void 0,O.next.bv=void 0,O.next.setInclusion(t)}Ri(s),f=!0;break}}m=m.next}if(f)break;throw Y.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function xu(t,e,n,r){if(!n)return;let i,s,o,l;for(let a=0;a<n.length;a++){if(o=n[a],o.face!==i&&(s=a,i=o.face),i.isEmpty())continue;let c=a,f=Er(n,a,i),d;c+f<n.length&&n[c+f].face===o.face?d=c+f:d=s,l=n[d];let h=d,v=Er(n,h,i),_=o.edge_after,y=l.edge_before;if(_.bv===ht&&y.bv===ht&&e===Do||_.bv===pt&&y.bv===pt&&e===bi||(_.bv===pt||y.bv===pt)&&e===Ln&&!r||(_.bv===ht||y.bv===ht)&&e===Ln&&r||_.bv===de&&y.bv===de&&_.overlap&Uy&&r||_.bv===de&&y.bv===de&&_.overlap&By){t.removeChain(i,_,y);for(let S=c;S<c+f;S++)n[S].edge_after=void 0;for(let S=h;S<h+v;S++)n[S].edge_before=void 0}a+=f-1}}function Hy(t,e,n,r){for(let i of e.faces){for(let s of i)t.edges.add(s);r.find(s=>s.face===i)===void 0&&t.addFace(i.first,i.last)}}function Gy(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],s=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&s.edge_before===void 0&&s.edge_after!==void 0&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before),s.edge_before!==void 0&&s.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(s.edge_before.next=i.edge_after,i.edge_after.prev=s.edge_before,s.edge_after=i.edge_after,i.edge_before=s.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let o of n.int_points1_sorted)o!==i&&o.edge_before===void 0&&o.edge_after!==void 0&&o.pt.equalTo(i.pt)&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before);if(s.edge_before!==void 0&&s.edge_after===void 0)for(let o of n.int_points2_sorted)o!==s&&o.edge_before===void 0&&o.edge_after!==void 0&&o.pt.equalTo(s.pt)&&(s.edge_before.next=o.edge_after,o.edge_after.prev=s.edge_before,s.edge_after=o.edge_after,o.edge_before=s.edge_before)}}function Tu(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Iu(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,s=r.edge_before;try{za.testInfiniteLoop(i)}catch{throw Y.CANNOT_COMPLETE_BOOLEAN_OPERATION}let o=t.addFace(i,s);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===o&&l.edge_after.face===o&&(l.face=o);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===o&&l.edge_after.face===o&&(l.face=o)}}function Ff(t,e,n,r){for(let i of e){let s=i.first.bv;(n===Do&&s===ht||n===Ln&&s===ht&&r||n===Ln&&s===pt&&!r||n===bi&&s===pt)&&t.deleteFace(i)}}var by=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:bi,BOOLEAN_SUBTRACT:Ln,BOOLEAN_UNION:Do,calculateIntersections:Gp,innerClip:Hp,intersect:Vp,outerClip:Su,removeNotRelevantChains:xu,removeOldFaces:Tu,restoreFaces:Iu,subtract:Eu,unify:Wy});const Qy=RegExp("T.F..FFF.|T.F...F.."),Yy=RegExp("T........|.T.......|...T.....|....T...."),Ky=RegExp("FT.......|F..T.....|F...T...."),qy=RegExp("T.F..F..."),Xy=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class zr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return Qy.test(this.toString())}intersect(){return Yy.test(this.toString())}touch(){return Ky.test(this.toString())}inside(){return qy.test(this.toString())}covered(){return Xy.test(this.toString())}}function pi(t,e){let n,r=new u.Ray(e),i=new u.Line(r.pt,r.norm);const s=new u.Box(r.box.xmin-u.DP_TOL,r.box.ymin-u.DP_TOL,r.box.xmax,r.box.ymax+u.DP_TOL);if(t.box.not_intersect(s))return u.OUTSIDE;let o=t.edges.search(s);if(o.length===0)return u.OUTSIDE;for(let f of o)if(f.shape.contains(e))return u.BOUNDARY;let l=[...t.faces],a=[];for(let f of o)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return u.BOUNDARY;a.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}a.sort((f,d)=>Ap(f.pt.x,d.pt.x)?-1:Lp(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<a.length;f++){let d=a[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.prev===a[f-1].edge)continue;let h=d.edge.prev;for(;yu(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),_=d.pt.translate(v),y=d.edge.shape.tangentInStart(),S=d.pt.translate(y),g=_.leftTo(i),p=S.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.next===a[f-1].edge)continue;let h=d.edge.next;for(;yu(h.length);)h=h.next;let v=h.shape.tangentInStart(),_=d.pt.translate(v),y=d.edge.shape.tangentInEnd(),S=d.pt.translate(y),g=_.leftTo(i),p=S.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof u.Segment)c++;else{let h=d.edge.shape.box;Pn(d.pt.y,h.ymin)||Pn(d.pt.y,h.ymax)||c++}}return n=c%2===1?uo:Ip,n}function Jy(t,e){return Dr(t,e).equal()}function Qp(t,e){return Dr(t,e).intersect()}function Zy(t,e){return Dr(t,e).touch()}function e1(t,e){return!Qp(t,e)}function Yp(t,e){return Dr(t,e).inside()}function Kp(t,e){return Dr(t,e).covered()}function t1(t,e){return Yp(e,t)}function qp(t,e){return Kp(e,t)}function Dr(t,e){if(t instanceof u.Line&&e instanceof u.Line)return n1(t,e);if(t instanceof u.Line&&e instanceof u.Circle)return r1(t,e);if(t instanceof u.Line&&e instanceof u.Box)return i1(t,e);if(t instanceof u.Line&&e instanceof u.Polygon)return s1(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&e instanceof u.Polygon)return Uf(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&(e instanceof u.Circle||e instanceof u.Box))return Uf(t,new u.Polygon(e));if(t instanceof u.Polygon&&e instanceof u.Polygon)return ys(t,e);if((t instanceof u.Circle||t instanceof u.Box)&&(e instanceof u.Circle||e instanceof u.Box))return ys(new u.Polygon(t),new u.Polygon(e));if((t instanceof u.Circle||t instanceof u.Box)&&e instanceof u.Polygon)return ys(new u.Polygon(t),e);if(t instanceof u.Polygon&&(e instanceof u.Circle||e instanceof u.Box))return ys(t,new u.Polygon(e))}function n1(t,e){let n=new zr,r=Rr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function r1(t,e){let n=new zr,r=Dn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Fn([t]),s=t.sortPoints(r);i.split(s);let o=i.toShapes();n.I2I=[o[1]],n.I2B=s,n.I2E=[o[0],o[2]],n.E2I=new u.Polygon([e.toArc()]).cutWithLine(t)}return n}function i1(t,e){let n=new zr,r=_r(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Fn([t]),s=t.sortPoints(r);i.split(s);let o=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[o[1]],n.I2E=[o[0],o[2]],n.E2I=[e]):(n.I2I=[o[1]],n.I2B=s,n.I2E=[o[0],o[2]],n.E2I=new u.Polygon(e.toSegments()).cutWithLine(t))}return n}function s1(t,e){let n=new zr,r=Hi(t,e),i=new Fn([t]),s=r.length>0?r.slice():t.sortPoints(r);return i.split(s),[...i].forEach(o=>o.setInclusion(e)),n.I2I=[...i].filter(o=>o.bv===u.INSIDE).map(o=>o.shape),n.I2B=[...i].slice(1).map(o=>o.bv===u.BOUNDARY?o.shape:o.shape.start),n.I2E=[...i].filter(o=>o.bv===u.OUTSIDE).map(o=>o.shape),n.E2I=e.cutWithLine(t),n}function Uf(t,e){let n=new zr,r=Oy(t,e),i=r.length>0?r.slice():t.sortPoints(r),s=new Fn([t]);s.split(i),[...s].forEach(o=>o.setInclusion(e)),n.I2I=[...s].filter(o=>o.bv===u.INSIDE).map(o=>o.shape),n.I2B=[...s].slice(1).map(o=>o.bv===u.BOUNDARY?o.shape:o.shape.start),n.I2E=[...s].filter(o=>o.bv===u.OUTSIDE).map(o=>o.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let o of[t.start,t.end])switch(pi(e,o)){case u.INSIDE:n.B2I.push(o);break;case u.BOUNDARY:n.B2B.push(o);break;case u.OUTSIDE:n.B2E.push(o);break}return n}function ys(t,e){let n=new zr,[r,i]=Gp(t,e),s=Vp(t,e),o=Eu(t,e),l=Eu(e,t),[a,c]=Hp(t,e),f=Su(t,e),d=Su(e,t);return n.I2I=s.isEmpty()?[]:[s],n.I2B=c,n.I2E=o.isEmpty()?[]:[o],n.B2I=a,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var $a=Object.freeze({__proto__:null,contain:t1,cover:qp,covered:Kp,disjoint:e1,equal:Jy,inside:Yp,intersect:Qp,relate:Dr,touch:Zy});class tt{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}clone(){return new tt(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new tt(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw Y.ILLEGAL_PARAMETERS;return this.multiply(new tt(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),s=Math.sin(e);return this.translate(n,r).multiply(new tt(i,s,-s,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new tt(e,0,0,n,0,0))}equalTo(e){return!(!u.Utils.EQ(this.tx,e.tx)||!u.Utils.EQ(this.ty,e.ty)||!u.Utils.EQ(this.a,e.a)||!u.Utils.EQ(this.b,e.b)||!u.Utils.EQ(this.c,e.c)||!u.Utils.EQ(this.d,e.d))}}u.Matrix=tt;const o1=(...t)=>new u.Matrix(...t);u.matrix=o1;const l1=class Cu{constructor(e,n){this.low=e,this.high=n}clone(){return new Cu(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new Cu(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},ge=0,V=1;class fn{constructor(e=void 0,n=void 0,r=null,i=null,s=null,o=V){if(this.left=r,this.right=i,this.parent=s,this.color=o,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,a]=e;l>a&&([l,a]=[a,l]),this.item.key=new l1(l,a)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===V}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class Mi{constructor(){this.root=null,this.nil_node=new fn}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new fn(e,n,this.nil_node,this.nil_node,null,ge);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new fn(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new fn(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new fn(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(s=>n(s.item.value,s.item.key))}intersect_any(e){let n=new fn(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new Mi;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new fn(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===ge;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===ge?(n.parent.color=V,r.color=V,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=V,n.parent.parent.color=ge,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===ge?(n.parent.color=V,r.color=V,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=V,n.parent.parent.color=ge,this.rotate_left(n.parent.parent)));this.root.color=V}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===V&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===V;)n===n.parent.left?(r=n.parent.right,r.color===ge&&(r.color=V,n.parent.color=ge,this.rotate_left(n.parent),r=n.parent.right),r.left.color===V&&r.right.color===V?(r.color=ge,n=n.parent):(r.right.color===V&&(r.color=ge,r.left.color=V,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=V,r.right.color=V,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===ge&&(r.color=V,n.parent.color=ge,this.rotate_right(n.parent),r=n.parent.left),r.left.color===V&&r.right.color===V?(r.color=ge,n=n.parent):(r.left.color===V&&(r.color=ge,r.right.color=V,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=V,r.left.color=V,this.rotate_right(n.parent),n=this.root));n.color=V}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===ge&&(n.left.color===V&&n.right.color===V||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===V&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class u1 extends Set{constructor(e){super(e),this.index=new Mi,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,s=r||e.box,o=i||e;return super.add(o),this.size>n&&this.index.insert(s,o),this}delete(e){const{key:n,value:r}=e,i=n||e.box,s=r||e;let o=super.delete(s);return o&&this.index.remove(i,s),o}clear(){super.clear(),this.index=new Mi}search(e){return this.index.search(e)}hit(e){let n=new u.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}u.PlanarSet=u1;class un{get name(){throw Y.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw Y.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw Y.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new tt().translate(...e))}rotate(e,n=new u.Point){return this.transform(new tt().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new tt().scale(e,n))}transform(...e){throw Y.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw Y.CANNOT_INVOKE_ABSTRACT_METHOD}}let F=class Xp extends un{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw Y.ILLEGAL_PARAMETERS}}get box(){return new u.Box(this.x,this.y,this.x,this.y)}clone(){return new u.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}lessThan(e){return!!(u.Utils.LT(this.y,e.y)||u.Utils.EQ(this.y,e.y)&&u.Utils.LT(this.x,e.x))}transform(e){return new u.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new u.Vector(this,e.pt);if(u.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new u.Vector(e.pt,this);return u.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof Xp){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new u.Segment(this,e)]}if(e instanceof u.Line)return u.Distance.point2line(this,e);if(e instanceof u.Circle)return u.Distance.point2circle(this,e);if(e instanceof u.Segment)return u.Distance.point2segment(this,e);if(e instanceof u.Arc)return u.Distance.point2arc(this,e);if(e instanceof u.Polygon)return u.Distance.point2polygon(this,e);if(e instanceof u.PlanarSet)return u.Distance.shape2planarSet(this,e);if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}on(e){if(e instanceof u.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${zn({fill:"red",...e})} />`}};u.Point=F;const a1=(...t)=>new u.Point(...t);u.point=a1;let Jp=class extends un{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof u.Point&&r instanceof u.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw Y.ILLEGAL_PARAMETERS}}clone(){return new u.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}multiply(e){return new u.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!u.Utils.EQ_0(this.length))return new u.Vector(this.x/this.length,this.y/this.length);throw Y.ZERO_DIVISION}rotate(e,n=new u.Point){if(n.x===0&&n.y===0)return this.transform(new tt().rotate(e));throw Y.OPERATION_IS_NOT_SUPPORTED}transform(e){return new u.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new u.Vector(-this.y,this.x)}rotate90CW(){return new u.Vector(this.y,-this.x)}invert(){return new u.Vector(-this.x,-this.y)}add(e){return new u.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new u.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};u.Vector=Jp;const Zp=(...t)=>new u.Vector(...t);u.vector=Zp;let Pu=class Lu extends un{constructor(...e){if(super(),this.ps=new u.Point,this.pe=new u.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new u.Point(n[0],n[1]),this.pe=new u.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new u.Point(n.x,n.y),this.pe=new u.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof u.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof u.Point&&e[1]instanceof u.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new u.Point(e[0],e[1]),this.pe=new u.Point(e[2],e[3]);return}throw Y.ILLEGAL_PARAMETERS}}clone(){return new u.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new u.Vector(this.start,this.end).slope}get box(){return new u.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return u.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Vi(this,e);if(e instanceof u.Ray)return Ba(e,this);if(e instanceof u.Segment)return Mo(this,e);if(e instanceof u.Circle)return zo(this,e);if(e instanceof u.Box)return Ty(this,e);if(e instanceof u.Arc)return Mr(this,e);if(e instanceof u.Polygon)return Fa(this,e);if(e instanceof u.Multiline)return Gi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.segment2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.segment2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2segment(this,e);return[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.segment2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}tangentInStart(){return new u.Vector(this.start,this.end).normalize()}tangentInEnd(){return new u.Vector(this.end,this.start).normalize()}reverse(){return new Lu(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new u.Segment(this.start,e),new u.Segment(e,this.end)]}middle(){return new u.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new u.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=u.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new u.Matrix){return new Lu(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new u.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${zn(e)} />`}};u.Segment=Pu;const c1=(...t)=>new u.Segment(...t);u.segment=c1;let{vector:Xr}=u,Fo=class eg extends un{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new u.Point(n),this.norm=new u.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof u.Point&&r instanceof u.Point){this.pt=n,this.norm=eg.points2norm(n,r),this.norm.dot(Xr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Point&&r instanceof u.Vector){if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y))throw Y.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(Xr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Vector&&r instanceof u.Point){if(u.Utils.EQ_0(n.x)&&u.Utils.EQ_0(n.y))throw Y.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(Xr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw Y.ILLEGAL_PARAMETERS}}clone(){return new u.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new u.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(Xr(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return u.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))}coord(e){return Xr(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Rr(this,e);if(e instanceof u.Ray)return Wp(e,this);if(e instanceof u.Circle)return Dn(this,e);if(e instanceof u.Box)return _r(this,e);if(e instanceof u.Segment)return Vi(e,this);if(e instanceof u.Arc)return Ro(this,e);if(e instanceof u.Polygon)return Hi(this,e);if(e instanceof u.Multiline)return Gi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof u.Point)return[new u.Ray(e,this.norm),new u.Ray(e,this.norm)];{let n=new u.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new u.Point){return new u.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=_r(this,e);if(r.length===0)return"";let i=r[0],s=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return s===void 0&&(s=i),new u.Segment(i,s).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw Y.ILLEGAL_PARAMETERS;return new u.Vector(e,n).normalize().rotate90CCW()}};u.Line=Fo;const f1=(...t)=>new u.Line(...t);u.line=f1;let Au=class extends un{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new u.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new u.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new u.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof u.Point)return u.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof u.Segment)return u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Arc)return this.intersect(e).length===0&&u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Circle)return this.intersect(e).length===0&&u.Utils.LE(e.r,this.r)&&u.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new u.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw Y.OPERATION_IS_NOT_SUPPORTED;return new u.Circle(this.pc,this.r*e)}transform(e=new u.Matrix){return new u.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Dn(e,this);if(e instanceof u.Ray)return Bp(e,this);if(e instanceof u.Segment)return zo(e,this);if(e instanceof u.Circle)return kp(e,this);if(e instanceof u.Box)return Iy(this,e);if(e instanceof u.Arc)return Da(e,this);if(e instanceof u.Polygon)return zp(this,e);if(e instanceof u.Multiline)return Gi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.circle2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline){let[n,r]=u.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${zn({fill:"none",...e})} />`}};u.Circle=Au;const d1=(...t)=>new u.Circle(...t);u.circle=d1;class tg extends un{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=u.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:s,counterClockwise:o}=e[0];this.pc=new u.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=s,this.counterClockwise=o}else{let[n,r,i,s,o]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),s!==void 0&&(this.endAngle=s),o!==void 0&&(this.counterClockwise=o)}}clone(){return new u.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(u.Utils.EQ(this.startAngle,this.endAngle))return 0;if(u.Utils.EQ(Math.abs(this.startAngle-this.endAngle),u.PIx2))return u.PIx2;let e;return this.counterClockwise?e=u.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+u.PIx2:e=u.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+u.PIx2,u.Utils.GT(e,u.PIx2)&&(e-=u.PIx2),u.Utils.LT(e,0)&&(e+=u.PIx2),e}get start(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new u.Box);return n=n.merge(this.end.box),n}contains(e){if(!u.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new u.Vector(this.pc,e).slope,r=new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return u.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new u.Vector(this.pc,e).slope;return[new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new u.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new u.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new u.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Ro(e,this);if(e instanceof u.Ray)return Wa(e,this);if(e instanceof u.Circle)return Da(this,e);if(e instanceof u.Segment)return Mr(e,this);if(e instanceof u.Box)return Cy(this,e);if(e instanceof u.Arc)return Op(this,e);if(e instanceof u.Polygon)return Ua(this,e);if(e instanceof u.Multiline)return Gi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.arc2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.arc2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let s=0;s<4;s++)r[s].on(this)&&i.push(new u.Arc(this.pc,this.r,this.startAngle,n[s],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,a)=>l.length-a.length);for(let l=0;l<i.length;l++){let a=e.length>0?e[e.length-1]:void 0,c;a?c=new u.Arc(this.pc,this.r,a.endAngle,i[l].endAngle,this.counterClockwise):c=new u.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),u.Utils.EQ_0(c.length)||e.push(c.clone())}let s=e.length>0?e[e.length-1]:void 0,o;s?o=new u.Arc(this.pc,this.r,s.endAngle,this.endAngle,this.counterClockwise):o=new u.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!u.Utils.EQ_0(o.length)&&!u.Utils.EQ(o.sweep,2*Math.PI)&&e.push(o.clone())}return e}tangentInStart(){let e=new u.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new u.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new u.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new u.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),s=this.counterClockwise;return e.a*e.d<0&&(s=!s),u.Arc.arcSE(i,n,r,s)}static arcSE(e,n,r,i){let{vector:s}=u,o=s(e,n).slope,l=s(e,r).slope;u.Utils.EQ(o,l)&&(l+=2*Math.PI,i=!0);let a=s(e,n).length;return new u.Arc(e,a,o,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,s)=>i+s.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new u.Line(this.start,this.end),r=this.pc.leftTo(n),s=new u.Segment(this.start,this.end).definiteIntegral(e),o=this.circularSegmentArea();return r?s-o:s+o}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=u;return e.slice().sort((r,i)=>{let s=n(this.pc,r).slope,o=n(this.pc,i).slope;return s<o?-1:s>o?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return u.Utils.EQ(this.sweep,2*Math.PI)?new u.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${zn({fill:"none",...e})} />`}}u.Arc=tg;const h1=(...t)=>new u.Arc(...t);u.arc=h1;class Ye extends un{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new Ye(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new u.Point(this.xmin,this.ymin)}get high(){return new u.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new u.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Ye(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new u.Point(this.xmin,this.ymin),new u.Point(this.xmax,this.ymin),new u.Point(this.xmax,this.ymax),new u.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new u.Segment(e[0],e[1]),new u.Segment(e[1],e[2]),new u.Segment(e[2],e[3]),new u.Segment(e[3],e[0])]}rotate(e,n=new u.Point){throw Y.OPERATION_IS_NOT_SUPPORTED}transform(e=new u.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new Ye)}contains(e){if(e instanceof u.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof u.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof u.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof u.Circle)return this.contains(e.box);if(e instanceof u.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>Mr(n,e).length===0);if(e instanceof u.Line||e instanceof u.Ray)return!1;if(e instanceof u.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof u.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${zn({fill:"none",...e})} />`}}u.Box=Ye;const p1=(...t)=>new u.Box(...t);u.box=p1;class g1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof u.Segment}get isArc(){return this.shape instanceof u.Arc}get isLine(){return this.shape instanceof u.Line}get isRay(){return this.shape instanceof u.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof u.Line||this.shape instanceof u.Ray)return this.bv=u.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=pi(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=pi(e,this.end)),this.bvStart===u.OUTSIDE||this.bvEnd==u.OUTSIDE)this.bv=u.OUTSIDE;else if(this.bvStart===u.INSIDE||this.bvEnd==u.INSIDE)this.bv=u.INSIDE;else{let n=pi(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof u.Segment&&i instanceof u.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=u.OVERLAP_OPPOSITE):(r instanceof u.Arc&&i instanceof u.Arc||r instanceof u.Segment&&i instanceof u.Arc||r instanceof u.Arc&&i instanceof u.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=u.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof u.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof u.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(u.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,s=new u.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),o=new u.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}
                    A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}u.Edge=g1;class m1 extends za{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class nr extends m1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof u.Point)){let i=nr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(o=>new u.Point(o[0],o[1])),s=nr.points2segments(i);this.shapes2face(e.edges,s)}else if(r.every(i=>i instanceof u.Segment||i instanceof u.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let s of r){let o;s.name==="segment"?o=new u.Segment(s):o=new u.Arc(s),i.push(o)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof nr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof u.Circle)this.shapes2face(e.edges,[n[0].toArc(Tp)]);else if(n[0]instanceof u.Box){let r=n[0];this.shapes2face(e.edges,[new u.Segment(new u.Point(r.xmin,r.ymin),new u.Point(r.xmax,r.ymin)),new u.Segment(new u.Point(r.xmax,r.ymin),new u.Point(r.xmax,r.ymax)),new u.Segment(new u.Point(r.xmax,r.ymax),new u.Point(r.xmin,r.ymax)),new u.Segment(new u.Point(r.xmin,r.ymax),new u.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof u.Edge&&n[1]instanceof u.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new u.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new u.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new u.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();u.Utils.EQ_0(e)?this._orientation=Ms.NOT_ORIENTABLE:u.Utils.LT(e,0)?this._orientation=Ms.CCW:this._orientation=Ms.CW}return this._orientation}isSimple(e){return nr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let s of e){let o=n.search(s.box);for(let l of o){if(s===l||l.face!==e||s.shape instanceof u.Segment&&l.shape instanceof u.Segment&&(s.next===l||s.prev===l))continue;let a=s.shape.intersect(l.shape);for(let c of a)if(!(c.equalTo(s.start)&&c.equalTo(l.end)&&l===s.prev)&&!(c.equalTo(s.end)&&c.equalTo(l.start)&&l===s.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new u.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}u.Face=nr;class Va extends un{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof u.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof u.Vector){this.norm=e[1].clone();return}throw Y.ILLEGAL_PARAMETERS}}clone(){return new Va(this.pt,this.norm)}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new u.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))&&u.Utils.GE(n.cross(this.norm),0)}coord(e){return Zp(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new u.Segment(this.pt,e),new u.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Segment)return Ba(this,e);if(e instanceof u.Arc)return Wa(this,e);if(e instanceof u.Line)return Wp(this,e);if(e instanceof u.Ray)return Ry(this,e);if(e instanceof u.Circle)return Bp(this,e);if(e instanceof u.Box)return Ny(this,e);if(e instanceof u.Polygon)return jp(this,e)}rotate(e,n=new u.Point){return new u.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new u.Line(this.pt,this.norm),i=_r(r,e);return i=i.filter(o=>this.contains(o)),i.length===0||i.length===2?"":new u.Segment(this.pt,i[0]).svg(n)}}u.Ray=Va;const v1=(...t)=>new u.Ray(...t);u.ray=v1;let y1=class $n{constructor(){this.faces=new u.PlanarSet,this.edges=new u.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof u.Circle||e[0]instanceof u.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new u.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new u.Face(this,i));else this.faces.add(new u.Face(this,r));else this.faces.add(new u.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new $n;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new u.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),s=n.prev;return n.face.insert(i,s),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let o of e.edges)for(let l of n.edges){let a=Dp(o,l);for(let c of a)wr(o,c,r.int_points1),wr(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=Bt(r.int_points1),r.int_points2_sorted=Bt(r.int_points2),Sr(e,r.int_points1_sorted),Sr(n,r.int_points2_sorted),ja(r),r.int_points1_sorted=Bt(r.int_points1),r.int_points2_sorted=Bt(r.int_points2),_u(r.int_points1),wu(r.int_points1,n);for(let o of r.int_points1_sorted)o.edge_before&&o.edge_after&&o.edge_before.bv===o.edge_after.bv&&(r.int_points2[o.id]=-1,o.id=-1);if(r.int_points1=r.int_points1.filter(o=>o.id>=0),r.int_points2=r.int_points2.filter(o=>o.id>=0),r.int_points1.forEach((o,l)=>{o.id=l}),r.int_points2.forEach((o,l)=>{o.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=Bt(r.int_points1),r.int_points2_sorted=Bt(r.int_points2);let i,s;for(let o=1;o<r.int_points1_sorted.length;o++)if(s=r.int_points1_sorted[o],i=r.int_points1_sorted[o-1],s.edge_before&&s.edge_before.bv===uo){let l=i.edge_after,a=s.edge_before,c=e.getChain(l,a);Nf(r.int_points2[i.id],r.int_points2[s.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new u.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Nf(r.int_points2[s.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new Fn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,s)=>s.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let s=[...i.faces][0];if(s.orientation()!==n){for(let o of r)if(s.shapes.every(l=>o.contains(l))){o.addFace(s.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof u.Point){let n=pi(this,e);return n===uo||n===ct}else return qp(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle||e instanceof u.Line||e instanceof u.Segment||e instanceof u.Arc){let[n,r]=u.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let n=[Number.POSITIVE_INFINITY,new u.Segment],r,i;for(let s of this.edges){let o=n[0];[r,i]=u.Distance.shape2planarSet(s.shape,e.edges,o),u.Utils.LT(r,o)&&(n=[r,i])}return n}}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Hi(e,this);if(e instanceof u.Ray)return jp(e,this);if(e instanceof u.Circle)return zp(e,this);if(e instanceof u.Segment)return Fa(e,this);if(e instanceof u.Arc)return Ua(e,this);if(e instanceof u.Polygon)return ky(e,this);if(e instanceof u.Multiline)return Ay(e,this)}translate(e){let n=new $n;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new u.Point){let r=new $n;for(let i of this.faces)r.addFace(i.shapes.map(s=>s.rotate(e,n)));return r}scale(e,n){let r=new $n;for(let i of this.faces)r.addFace(i.shapes.map(s=>s.scale(e,n)));return r}transform(e=new u.Matrix){let n=new $n;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${zn({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};u.Polygon=y1;const _1=(...t)=>new u.Polygon(...t);u.polygon=_1;const{Circle:yl,Line:Bf,Point:Wf,Vector:_s,Utils:_l}=u;class gi{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new _s(e.pc,n),i=e.r*e.r,s=r.dot(r);return _l.EQ_0(s)?new Wf(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/s))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(_l.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),s=new _s(e.pc,n.pc);s=s.normalize();let o=e.pc.translate(s.multiply(i));return new Bf(o,s)}else{let i=new _s(e.pc,n.pc),s=e.r*e.r/(i.dot(i)-n.r*n.r),o=e.pc.translate(i.multiply(s)),l=Math.abs(s)*n.r;return new yl(o,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(_l.EQ_0(r))return n.clone();{let s=e.r*e.r/(2*r),o=new _s(e.pc,i.end);return o=o.multiply(s/r),new yl(e.pc.translate(o),s)}}inverse(e){if(e instanceof Wf)return gi.inversePoint(this.circle,e);if(e instanceof yl)return gi.inverseCircle(this.circle,e);if(e instanceof Bf)return gi.inverseLine(this.circle,e)}}u.Inversion=gi;const w1=t=>new u.Inversion(t);u.inversion=w1;class T{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new u.Vector(e,r).length,new u.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(u.Utils.EQ_0(r))return[n.r,new u.Segment(e,n.toArc().start)];{let s=Math.abs(r-n.r),o=new u.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(o);return[s,new u.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return T.point2point(e,n.start);let r=new u.Vector(n.start,n.end),i=new u.Vector(n.start,e),s=new u.Vector(n.end,e),o=r.dot(i),l=-r.dot(s),a,c;if(u.Utils.GE(o,0)&&u.Utils.GE(l,0)){let f=n.tangentInStart();return a=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[a,new u.Segment(e,c)]}else return o<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new u.Circle(n.pc,n.r),i=[],s,o;return[s,o]=T.point2circle(e,r),o.end.on(n)&&i.push(T.point2circle(e,r)),i.push(T.point2point(e,n.start)),i.push(T.point2point(e,n.end)),T.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof u.Segment?T.point2segment(e,n.shape):T.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[];return i.push(T.point2line(e.start,n)),i.push(T.point2line(e.end,n)),T.sort(i),i[0]}static segment2segment(e,n){let r=Mo(e,n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[],s,o;return[s,o]=T.point2segment(n.start,e),i.push([s,o.reverse()]),[s,o]=T.point2segment(n.end,e),i.push([s,o.reverse()]),i.push(T.point2segment(e.start,n)),i.push(T.point2segment(e.end,n)),T.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),[s,o]=T.point2line(n.center,i);if(u.Utils.GE(s,n.r)&&o.end.on(e))return T.point2circle(o.end,n);{let[l,a]=T.point2circle(e.start,n),[c,f]=T.point2circle(e.end,n);return u.Utils.LT(l,c)?[l,a]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),s=new u.Circle(n.pc,n.r),[o,l]=T.point2line(s.center,i);if(u.Utils.GE(o,s.r)&&l.end.on(e)){let[d,h]=T.point2circle(l.end,s);if(h.end.on(n))return[d,h]}let a=[];a.push(T.point2arc(e.start,n)),a.push(T.point2arc(e.end,n));let c,f;return[c,f]=T.point2segment(n.start,e),a.push([c,f.reverse()]),[c,f]=T.point2segment(n.end,e),a.push([c,f.reverse()]),T.sort(a),a[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),s=n.toArc();return T.point2point(i.start,s.start)}else{let i=new u.Line(e.center,n.center),s=i.intersect(e),o=i.intersect(n),l=[];return l.push(T.point2point(s[0],o[0])),l.push(T.point2point(s[0],o[1])),l.push(T.point2point(s[1],o[0])),l.push(T.point2point(s[1],o[1])),T.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let[i,s]=T.point2line(e.center,n),[o,l]=T.point2circle(s.end,e);return l=l.reverse(),[o,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[s,o]=T.point2line(i.center,n);if(u.Utils.GE(s,i.r)){let[l,a]=T.point2circle(o.end,i);if(a.end.on(e))return[l,a]}else{let l=[];return l.push(T.point2line(e.start,n)),l.push(T.point2line(e.end,n)),T.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[s,o]=T.circle2circle(i,n);if(o.start.on(e))return[s,o];{let l=[];return l.push(T.point2circle(e.start,n)),l.push(T.point2circle(e.end,n)),T.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),s=new u.Circle(n.center,n.r),[o,l]=T.circle2circle(i,s);if(l.start.on(e)&&l.end.on(n))return[o,l];{let a=[],c,f;return[c,f]=T.point2arc(e.start,n),f.end.on(n)&&a.push([c,f]),[c,f]=T.point2arc(e.end,n),f.end.on(n)&&a.push([c,f]),[c,f]=T.point2arc(n.start,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=T.point2arc(n.end,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=T.point2point(e.start,n.start),a.push([c,f]),[c,f]=T.point2point(e.start,n.end),a.push([c,f]),[c,f]=T.point2point(e.end,n.start),a.push([c,f]),[c,f]=T.point2point(e.end,n.end),a.push([c,f]),T.sort(a),a[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[s,o]=T.point2edge(e,i);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[s,o]=e.distanceTo(i.shape);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e.edges)for(let s of n.edges){let[o,l]=i.shape.distanceTo(s.shape);u.Utils.LT(o,r[0])&&(r=[o,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),s=r*r+i*i,o=e.merge(n),l=o.xmax-o.xmin,a=o.ymax-o.ymin,c=l*l+a*a;return[s,c]}static minmax_tree_process_level(e,n,r,i){let s,o;for(let f of n)[s,o]=T.box2box_minmax(e.box,f.item.key),f.item.value instanceof u.Edge?i.insert([s,o],f.item.value.shape):i.insert([s,o],f.item.value),u.Utils.LT(o,r)&&(r=o);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),a=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...a].filter(f=>{let[d,h]=T.box2box_minmax(e.box,f.max);return u.Utils.LE(d,r)});return r=T.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new Mi,s=[n.index.root],o=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return o=T.minmax_tree_process_level(e,s,o,i),i}static minmax_tree_calc_distance(e,n,r){let i,s;if(n!=null&&!n.isNil()){if([i,s]=T.minmax_tree_calc_distance(e,n.left,r),s)return[i,s];if(u.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[o,l]=T.distance(e,n.item.value);return u.Utils.LT(o,i[0])&&(i=[o,l]),[i,s]=T.minmax_tree_calc_distance(e,n.right,i),[i,s]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new u.Segment],s=!1;if(n instanceof u.PlanarSet){let o=T.minmax_tree(e,n,r);[i,s]=T.minmax_tree_calc_distance(e,o.root,i)}return i}static sort(e){e.sort((n,r)=>u.Utils.LT(n[0],r[0])?-1:u.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n){let[s,o]=T.distance(e,i.shape);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e)for(let s of n){let[o,l]=T.distance(i.shape,s.shape);u.Utils.LT(o,r[0])&&(r=[o,l])}return r}}u.Distance=T;const{Multiline:E1,Point:ng,Segment:S1,Polygon:rg}=u;function Ha(t){return new ng(t.split(" ").map(Number))}function ig(t){return t.split(", ").map(Ha)}function Ga(t){const e=ig(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new S1(e[r],e[r+1]));return new E1(n)}function x1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(Ga)}function sg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new rg;let r;return e.forEach((i,s)=>{let o=i.split(", ").map(a=>new ng(a.split(" ").map(Number)));const l=n.addFace(o);s===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function T1(t){const n=t.split(/\)\), \(\(/).map(s=>"(("+s+"))").map(sg),r=new rg;return n.reduce((s,o)=>[...s,...o==null?void 0:o.faces],[]).forEach(s=>r.addFace([...s==null?void 0:s.shapes])),r}function I1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return sg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return T1(e)}}function C1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Ha)}function P1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Ga).reduce((n,r)=>[...n,...r],[])}function og(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return Ha(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return ig(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return Ga(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return x1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return I1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(og).map(i=>i instanceof Array?i:[i]).reduce((i,s)=>[...i,...s],[])}else{if(lg(t))return C1(t);if(ug(t))return P1(t)}}return[]}function lg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function ug(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function L1(t){return t.startsWith("POINT")||lg(t)||t.startsWith("LINESTRING")||ug(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}u.isWktString=L1;u.parseWKT=og;u.BooleanOperations=by;u.Relations=$a;function yt(t){const e=qi(),n=Rt();return new F((t.x-e.x)*n,(t.y-e.y)*n)}function Uo(t){const e=qi(),n=Rt();return new F(t.x/n+e.x,t.y/n+e.y)}var M=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(M||{}),co=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(co||{}),fo=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(fo||{}),le=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(le||{});function A1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function lt(t){const e=[];for(const n of t)n&&e.push(n);return e}function k1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Bo(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const s=e[i],o=typeof s=="function",l=o?s(n):n[s],a=o?s(r):r[s],c=k1(l,a,"asc");if(c!==0)return c}return 0})}function Yi(t,e){const n=[];for(const r of t)n.every(s=>!e(s,r))&&n.push(r);return n}function jf(){}function $f(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const O1="[object RegExp]",N1="[object String]",R1="[object Number]",M1="[object Boolean]",Vf="[object Arguments]",z1="[object Symbol]",D1="[object Date]",F1="[object Map]",U1="[object Set]",B1="[object Array]",W1="[object Function]",j1="[object ArrayBuffer]",wl="[object Object]",$1="[object Error]",V1="[object DataView]",H1="[object Uint8Array]",G1="[object Uint8ClampedArray]",b1="[object Uint16Array]",Q1="[object Uint32Array]",Y1="[object BigUint64Array]",K1="[object Int8Array]",q1="[object Int16Array]",X1="[object Int32Array]",J1="[object BigInt64Array]",Z1="[object Float32Array]",e_="[object Float64Array]";function Hf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Gf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function t_(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return xt(t,e)}return xt(t,e)}function xt(t,e,n){if(Object.is(t,e))return!0;let r=Gf(t),i=Gf(e);if(r===Vf&&(r=wl),i===Vf&&(i=wl),r!==i)return!1;switch(r){case N1:return t.toString()===e.toString();case R1:{const l=t.valueOf(),a=e.valueOf();return l===a||Number.isNaN(l)&&Number.isNaN(a)}case M1:case D1:case z1:return Object.is(t.valueOf(),e.valueOf());case O1:return t.source===e.source&&t.flags===e.flags;case W1:return t===e}n=n??new Map;const s=n.get(t),o=n.get(e);if(s!=null&&o!=null)return s===e;n.set(t,e),n.set(e,t);try{switch(r){case F1:{if(t.size!==e.size)return!1;for(const[l,a]of t.entries())if(!e.has(l)||!xt(a,e.get(l),n))return!1;return!0}case U1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),a=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=a.findIndex(h=>xt(f,h,n));if(d===-1)return!1;a.splice(d,1)}return!0}case B1:case H1:case G1:case b1:case Q1:case Y1:case K1:case q1:case X1:case J1:case Z1:case e_:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!xt(t[l],e[l],n))return!1;return!0}case j1:return t.byteLength!==e.byteLength?!1:xt(new Uint8Array(t),new Uint8Array(e),n);case V1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:xt(t.buffer,e.buffer,n);case $1:return t.name===e.name&&t.message===e.message;case wl:{if(!(xt(t.constructor,e.constructor,n)||$f(t)&&$f(e)))return!1;const a=[...Object.keys(t),...Hf(t)],c=[...Object.keys(e),...Hf(e)];if(a.length!==c.length)return!1;for(let f=0;f<a.length;f++){const d=a[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!xt(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function bf(t){return t==null}let ag=new F(0,0),cg=null,ba=new F(0,0),zs=null,fg=null,xr=[],dg=[],Ki=[],Qa=null,hg=!1,pg=[],gg=[],mg=!1,vg=[],Ya=45,Ka=new F(0,0),qa=1,yg=null,_g=null,wg=null,Eg=[],Sg=0,xg="#fff",Tg=1;const Xa=()=>ag,n_=()=>cg,Ig=()=>ba,Oe=()=>zs,r_=()=>fg,Ce=()=>xr,yn=()=>Ki,Cg=()=>Qa,i_=()=>hg,s_=()=>pg,Ds=()=>gg,o_=()=>mg,l_=()=>vg,Pg=()=>Ya,qi=()=>Ka,Rt=()=>qa,u_=()=>yg,Ja=()=>_g,Lg=()=>wg,Za=()=>Eg,a_=()=>Sg,An=()=>xg,kn=()=>Tg,Fr=()=>Uo(ba),c_=()=>xr.filter(t=>Ki.includes(t.id)),f_=()=>xr.filter(t=>!Ki.includes(t.id)),Tr=t=>Ki.includes(t.id),ec=t=>dg.includes(t.id),d_=t=>ag=t,h_=t=>cg=t,p_=t=>ba=t,It=(t,e=!0)=>{var n;(n=Oe())==null||n.stop(),zs=t,zs.subscribe(r=>{var s;const i=(s=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:s.instructions;r_()!==i&&(g_(i||null),i&&(document.getElementById("toolInstructions").innerText=i,console.log("STATE: "+i)))}),zs.start(),e&&Xi(le.activeTool)},g_=t=>fg=t,Wo=t=>{I_(le.entities,xr),xr=t},ee=t=>{Qa=t},ku=t=>dg=t,ue=t=>Ki=t,tc=t=>hg=t,nc=t=>pg=t,El=t=>gg=t,nn=t=>(console.log("setShouldDrawHelpers",t),kg(null),Og(null),nc([]),mg=t),m_=t=>vg=t,v_=(t,e=!0)=>{Ya=t,e&&Xi(le.activeTool)},rc=t=>{Ka=t},Ag=t=>{qa=t,Xi(le.screenZoom)},ic=t=>yg=t,kg=t=>_g=t,Og=t=>wg=t,y_=t=>Eg=t,__=t=>Sg=t,w_=(t,e=!0)=>{xg=t,e&&Xi(le.activeLineColor)},E_=(t,e=!0)=>{Tg=t,e&&Xi(le.activeLineWidth)},On=(...t)=>{const e=t.map(r=>r.id),n=Ce().filter(r=>!e.includes(r.id));return Wo(n),n},_t=(...t)=>{const e=[...Ce(),...t];return Wo(e),e},S_=[le.activeTool,le.angleStep,le.activeLineColor,le.activeLineWidth,le.screenZoom],x_=[le.entities],T_=[],rr=A1();function I_(t,e){if(!x_.includes(t))return;const n=rr.peek();if(!t_(e,n==null?void 0:n.value)){if(t!==le.activeEntity&&rr.clear(le.activeEntity),T_.includes(t)&&(n==null?void 0:n.variable)===t){rr.replace({variable:t,value:e});return}rr.push({variable:t,value:e})}}function Ng(t){const e=t.variable,n=t.value;switch(e){case le.entities:xr=n;break;case le.activeEntity:Qa=n;break;case le.angleStep:Ya=n;break;case le.screenOffset:Ka=n;break;case le.screenZoom:qa=n;break}}function Rg(){const t=rr.undo();t&&Ng(t)}function Mg(){const t=rr.redo();t&&Ng(t)}function Xi(t){S_.includes(t)&&window.dispatchEvent(new CustomEvent(fo.UPDATE_STATE))}var Z=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t))(Z||{});function Ur(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}const Ou=1e-6,ws=10,Es=30,C_="#111",P_="#FFFF00",sc=15,L_=15,oc=15,B=15,lc=1e3,A_=3,k_="#b6ff9a",O_="#6899f3",N_=1,R_=[5,5],zg="#999",Dg=1,Fg=[5,5],M_=.1,z_=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"];function wt(t,e){return Math.abs(t.x-e.x)<Ou&&Math.abs(t.y-e.y)<Ou}function Ug(t,e,n){const r=Ve.getAngle(e,n),i=t.map(s=>({point:s,angle:(new Fo(e,s).slope-r+2*Math.PI)%(2*Math.PI)}));return Bo(i,[s=>s.angle]).map(s=>s.point)}function Un(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}class Ve{constructor(e,n,r,i,s=!0){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"arc",null);D(this,"centerPoint",null);D(this,"firstPoint",null);this.centerPoint=e,this.arc=new tg(e,n,r,i,s),this.firstPoint=this.arc.start}static getAngle(e,n){return new Fo(e,n).slope}draw(e){var s,o;if(!this.centerPoint)return;let n;if(this.arc)n=this.arc.r.valueOf();else if(this.centerPoint&&this.firstPoint)n=Ur(this.centerPoint,this.firstPoint);else return;const r=yt(this.centerPoint),i=n*e.screenZoom;e.context.beginPath(),e.context.arc(r.x,r.y,i,((s=this.arc)==null?void 0:s.startAngle)||0,((o=this.arc)==null?void 0:o.endAngle)||2*Math.PI),e.context.stroke()}move(e,n){this.arc&&(this.arc=this.arc.translate(e,n))}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:s}=this.arc;return new Ve(e,n.valueOf(),r,i,s)}return this}intersectsWithBox(e){return this.arc?this.arc.intersect(e).length>0:!1}isContainedInBox(e){return this.arc?e.contains(this.arc):!1}getBoundingBox(){return this.arc?this.arc.box:null}getShape(){return this.arc}getSnapPoints(){return this.centerPoint===null||this.arc===null?[]:[{point:this.centerPoint,type:M.CircleCenter},{point:this.arc.start,type:M.LineEndPoint},{point:this.arc.end,type:M.LineEndPoint}]}getIntersections(e){const n=e.getShape();return!this.arc||!n?[]:this.arc.intersect(n)}getFirstPoint(){return this.centerPoint}distanceTo(e){return this.arc?this.arc.distanceTo(e):null}getSvgString(){return this.arc&&this.arc.svg({strokeWidth:this.lineWidth,stroke:Un(this.lineColor)})||null}getType(){return Z.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){if(!this.arc)return[this];const n=Yi([this.arc.start,this.arc.end,...e],wt),r=Ug(n,this.arc.center,this.arc.start),i=[];for(let s=0;s<r.length-1;s++){const o=r[s],l=r[s+1],a=Ve.getAngle(this.arc.center,o),c=Ve.getAngle(this.arc.center,l),f=new Ve(this.arc.center,Number(this.arc.r),a,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:Z.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==Z.Arc)throw new Error("Invalid Entity type in JSON");const n=new F(e.shapeData.center.x,e.shapeData.center.y),r=new F(e.shapeData.start.x,e.shapeData.start.y),i=new F(e.shapeData.end.x,e.shapeData.end.y),s=Number(n.distanceTo(r)[0]),o=Number(Ve.getAngle(n,r)),l=Number(Ve.getAngle(n,i)),a=e.shapeData.counterClockwise,c=new Ve(n,s,o,l,a);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class Ir{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"circle",null);D(this,"centerPoint",null);if(e instanceof Au){const r=e;this.circle=r,this.centerPoint=r.center}else e instanceof F&&!n?this.centerPoint=e:e instanceof F&&n&&(this.circle=new Au(e,typeof n=="number"?n:Ur(e,n)),this.centerPoint=this.circle.center)}draw(e){if(!this.centerPoint)return;let n;this.circle?n=this.circle.r:n=this.centerPoint.distanceTo(e.worldMouseLocation)[0];const r=yt(this.centerPoint),i=n*e.screenZoom;e.context.beginPath(),e.context.arc(r.x,r.y,i,0,2*Math.PI),e.context.stroke()}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}clone(){return this.circle?new Ir(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){return this.centerPoint===null||this.circle===null?[]:[{point:this.centerPoint,type:M.CircleCenter},{point:new F(this.centerPoint.x+this.circle.r,this.centerPoint.y),type:M.CircleCardinal},{point:new F(this.centerPoint.x-this.circle.r,this.centerPoint.y),type:M.CircleCardinal},{point:new F(this.centerPoint.x,this.centerPoint.y+this.circle.r),type:M.CircleCardinal},{point:new F(this.centerPoint.x,this.centerPoint.y-this.circle.r),type:M.CircleCardinal}]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.centerPoint}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle&&this.circle.svg({strokeWidth:this.lineWidth,stroke:Un(this.lineColor)})||null}getType(){return Z.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}cutAtPoints(e){if(!this.circle||!this.centerPoint)return[this];const{centerPoint:n,circle:r}=this;return e.map((i,s)=>{const o=e[(s+1)%e.length],l=Math.atan2(i.y-n.y,i.x-n.x),a=Math.atan2(o.y-n.y,o.x-n.x);return new Ve(n,r.r,l,a,!0)})}async toJson(){var e;return this.circle?{id:this.id,type:Z.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new F(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new Ir(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}class st{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"segment",null);D(this,"startPoint",null);e instanceof Pu?(this.startPoint=e.start,this.segment=e):e&&n?(this.startPoint=e,this.segment=new Pu(e,n)):e&&(this.startPoint=e)}draw(e){if(!this.startPoint)return;let n,r;this.segment?(n=this.segment.start,r=this.segment.end):(n=this.startPoint,r=new F(e.worldMouseLocation.x,e.worldMouseLocation.y));const i=yt(n),s=yt(r);e.context.beginPath(),e.context.moveTo(i.x,i.y),e.context.lineTo(s.x,s.y),e.context.stroke()}move(e,n){this.segment&&(this.segment=this.segment.translate(e,n))}clone(){return this.segment?new st(this.segment.clone()):null}intersectsWithBox(e){return this.segment?this.segment.intersect(e).length>0:!1}isContainedInBox(e){return this.segment?e.contains(this.segment):!1}getBoundingBox(){return this.segment?this.segment.box:null}getShape(){return this.segment}getSnapPoints(){var e,n;return!((e=this.segment)!=null&&e.start)||!((n=this.segment)!=null&&n.end)?[]:[{point:this.segment.start,type:M.LineEndPoint},{point:this.segment.end,type:M.LineEndPoint},{point:this.segment.middle(),type:M.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.segment||!n?[]:this.segment.intersect(n)}getFirstPoint(){return this.startPoint}distanceTo(e){return this.segment?this.segment.distanceTo(e):null}getSvgString(){return this.segment&&this.segment.svg({strokeWidth:this.lineWidth,stroke:Un(this.lineColor)})||null}getType(){return Z.Line}containsPointOnShape(e){return this.segment?this.segment.contains(e):!1}cutAtPoints(e){if(!this.segment)return[this];const n=Yi([this.segment.start,this.segment.end,...e],wt),r=Bo(n,[s=>Ur(this.segment.start,s)]),i=[];for(let s=0;s<r.length-1;s++)i.push(new st(r[s],r[s+1]));return i}async toJson(){return this.segment?{id:this.id,type:Z.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}:null}static async fromJson(e){const n=new F(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new F(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new st(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class zi{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"point",null);!bf(e)&&!bf(n)&&(this.point=new F(e,n))}draw(e){if(!this.point)return;const n=yt(this.point);e.context.beginPath(),e.context.arc(n.x,n.y,5,0,Math.PI*2),e.context.stroke()}move(e,n){this.point&&(this.point=this.point.translate(e,n))}clone(){return this.point?new zi(this.point.clone()):null}intersectsWithBox(){return!1}isContainedInBox(e){return this.point?e.contains(this.point):!1}getBoundingBox(){return this.point?new Ye(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return this.point?[{point:this.point,type:M.Point}]:[]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point?this.point.distanceTo(e):null}getSvgString(){return this.point&&this.point.svg({strokeWidth:this.lineWidth,stroke:Un(this.lineColor)})||null}getType(){return Z.Point}containsPointOnShape(e){return this.point?this.point.equalTo(e):!1}async toJson(){return this.point?{id:this.id,type:Z.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}:null}static async fromJson(e){const n=new F(e.shapeData.point.x,e.shapeData.point.y),r=new zi(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}class Mt{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"rectangle",null);D(this,"startPoint",null);if(e instanceof Ye){const r=e;this.startPoint=new F(r.xmin,r.ymin),this.rectangle=r}else e&&!n?this.startPoint=e:e&&n&&(this.rectangle=new Ye(Math.min(e.x,n.x),Math.min(e.y,n.y),Math.max(e.x,n.x),Math.max(e.y,n.y)))}draw(e){if(!this.startPoint&&!this.rectangle)return;let n,r;this.rectangle?(n=this.rectangle.high,r=this.rectangle.low):(n=this.startPoint,r=new F(e.worldMouseLocation.x,e.worldMouseLocation.y));const i=yt(n),s=yt(r);e.context.beginPath(),e.context.strokeRect(i.x,i.y,s.x-i.x,s.y-i.y)}move(e,n){this.rectangle&&(this.rectangle=this.rectangle.translate(e,n))}clone(){return this.rectangle?new Mt(this.rectangle.clone()):null}intersectsWithBox(e){return this.rectangle?$a.relate(this.rectangle,e).B2B.length>0:!1}isContainedInBox(e){return this.rectangle?e.contains(this.rectangle):!1}distanceTo(e){if(!this.rectangle)return null;const n=this.rectangle.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.rectangle?this.rectangle:null}getShape(){return this.rectangle}getSnapPoints(){if(!this.rectangle)return[];const e=this.rectangle.toPoints(),n=this.rectangle.toSegments();return[{point:e[0],type:M.LineEndPoint},{point:e[1],type:M.LineEndPoint},{point:e[2],type:M.LineEndPoint},{point:e[3],type:M.LineEndPoint},{point:n[0].middle(),type:M.LineMidPoint},{point:n[1].middle(),type:M.LineMidPoint},{point:n[2].middle(),type:M.LineMidPoint},{point:n[3].middle(),type:M.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.rectangle||!n?[]:this.rectangle.toSegments().flatMap(r=>r.intersect(n))}getFirstPoint(){return this.startPoint}getSvgString(){return this.rectangle?this.rectangle.svg({strokeWidth:this.lineWidth,stroke:Un(this.lineColor)}):null}getType(){return Z.Rectangle}containsPointOnShape(e){return this.rectangle?this.rectangle.toSegments().some(n=>n.contains(e)):!1}async toJson(){return this.rectangle?{id:this.id,type:Z.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{xmin:this.rectangle.xmin,ymin:this.rectangle.ymin,xmax:this.rectangle.xmax,ymax:this.rectangle.ymax}}:null}static async fromJson(e){const n=new F(e.shapeData.xmin,e.shapeData.ymin),r=new F(e.shapeData.xmax,e.shapeData.ymax),i=new Mt(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function D_(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,s=JSON.parse(i);s.entities||n(new Error("Invalid JSON file"));const o=lt(s.entities.map(l=>{switch(l.type){case Z.Arc:return Ve.fromJson(l);case Z.Circle:return Ir.fromJson(l);case Z.Line:return st.fromJson(l);case Z.Point:return zi.fromJson(l);case Z.Rectangle:return Mt.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));Wo(lt(await Promise.all(o))),e()}),r.readAsText(t,"utf-8")})}var Bg={exports:{}};(function(t,e){(function(n,r){r()})($r,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){a(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $r=="object"&&$r.global===$r?$r:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=o.URL||o.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?s(v):i(v.href)?r(c,f,d):s(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){s(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&_||l)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var m=S.result;m=y?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},S.readAsDataURL(c)}else{var g=o.URL||o.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})})(Bg);var uc=Bg.exports;async function F_(){const e=Ce().map(s=>s.toJson()),n={entities:lt(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});uc.saveAs(i,"open-web-cad--drawing.json")}function Wg(t,e){let n=e.x,r=e.y,i=0,s=0;const o=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),s=Math.max(s,d.ymax))}),console.log("exporting svg",o);const l=i-n+ws*2,a=s-r+ws*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new Jp(new F(n,r),new F(ws,ws))).svg({stroke:Un(f.lineColor),strokeWidth:f.lineWidth});v&&o.push(v)}),{svgString:`
      <svg width="${l}" height="${a}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${a}" fill="white" />
        ${o.join("")}
      </svg>
    `,width:l,height:a}}function U_(){const t=Ce(),e=Xa(),n=Wg(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});uc.saveAs(r,"open-web-cad--drawing.svg")}function B_(t,e,n,r){return new Promise((i,s)=>{const o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Could not get canvas context");const a=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);a.onload=()=>{o.width=e+r*2,o.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,o.width,o.height),l.drawImage(a,r,r),URL.revokeObjectURL(f),o.toBlob(d=>{d?i(d):s(new Error("Could not convert canvas to blob"))},"image/png")},a.src=f})}async function W_(){const t=Ce(),e=Xa(),n=Wg(t,e),r=await B_(n.svgString,n.width,n.height,20);uc.saveAs(r,"open-web-cad--drawing.png")}function jg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function j_(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function $_(){const t=j_();if(t.__xstate__)return t.__xstate__}const V_=t=>{if(typeof window>"u")return;const e=$_();e&&e.register(t)};class Qf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const $g=".",H_="",Vg="",G_="#",b_="*",Hg="xstate.init",Q_="xstate.error",Nu="xstate.stop";function Y_(t,e){return{type:`xstate.after.${t}.${e}`}}function Ru(t,e){return{type:`xstate.done.state.${t}`,output:e}}function K_(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Gg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function bg(t){return{type:Hg,input:t}}function Et(t){setTimeout(()=>{throw t})}const q_=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qg(t,e){const n=Yf(t),r=Yf(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?Qg(n[i],r[i]):!1)}function ac(t){if(Kg(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Yf(t){if(Lw(t))return t.value;if(typeof t!="string")return t;const e=ac(t);return X_(e)}function X_(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function Kf(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const s=r[i];n[s]=e(t[s],s,t,i)}return n}function Yg(t){return Kg(t)?t:[t]}function Ht(t){return t===void 0?[]:Yg(t)}function Mu(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function Kg(t){return Array.isArray(t)}function J_(t){return t.type.startsWith("xstate.error.actor")}function Vn(t){return Yg(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function qg(t){if(!(t===void 0||t===H_))return Ht(t)}function zu(t,e,n){var s,o,l;const r=typeof t=="object",i=r?t:void 0;return{next:(s=r?t.next:t)==null?void 0:s.bind(i),error:(o=r?t.error:e)==null?void 0:o.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function qf(t,e){return`${e}.${t}`}function cc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,o=t.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[r]:o).src}function Xf(t,e){return`${t.sessionId}.${e}`}let Z_=0;function ew(t,e){const n=new Map,r=new Map,i=new WeakMap,s=new Set,o={},{clock:l,logger:a}=e,c={schedule:(h,v,_,y,S=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:_,delay:y,id:S,startedAt:Date.now()},p=Xf(h,S);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete o[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,_)},y);o[p]=m},cancel:(h,v)=>{const _=Xf(h,v),y=o[_];delete o[_],delete d._snapshot._scheduledEvents[_],y!==void 0&&l.clearTimeout(y)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===h&&c.cancel(h,_.id)}}},f=h=>{if(!s.size)return;const v={...h,rootId:t.sessionId};s.forEach(_=>{var y;return(y=_.next)==null?void 0:y.call(_,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${Z_++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const _=r.get(h);if(_&&_!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=zu(h);return s.add(v),{unsubscribe(){s.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:_}),v._send(_)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:_,target:y,event:S,delay:g,id:p}=h[v];c.schedule(_,y,S,g,p)}},_clock:l,_logger:a};return d}const fc=1;let xe=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const tw={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class dt{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Qf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=xe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...tw,...n},{clock:i,logger:s,parent:o,syncSnapshot:l,id:a,systemId:c,inspect:f}=r;this.system=o?o.system:ew(this,{clock:i,logger:s}),f&&!o&&this.system.inspect(zu(f)),this.sessionId=this.system._bookId(),this.id=a??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=o,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const _=new Set([...h?h.values():[],...v?v.values():[]]);for(const y of Array.from(_))y(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,s;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(o){this._deferred.length=0,this._snapshot={...e,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(i=o.next)==null||i.call(o,e)}catch(l){Et(l)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,e)}catch(l){Et(l)}this._stopProcedure(),this._complete(),this._doneEvent=K_(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var s;const i=zu(e,n,r);if(this._processingStatus!==xe.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(s=i.complete)==null||s.call(i)}catch(o){Et(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)Et(o);else try{i.error(o)}catch(l){Et(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===xe.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=xe.Running;const e=bg(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Nu&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===xe.Stopped?this:(this.mailbox.clear(),this._processingStatus===xe.NotStarted?(this._processingStatus=xe.Stopped,this):(this.mailbox.enqueue({type:Nu}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){Et(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Et(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(s){Et(s)}}this.observers.clear(),n&&Et(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Gg(this.id,e))}_stopProcedure(){return this._processingStatus!==xe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Qf(this._process.bind(this)),this._processingStatus=xe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==xe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:V_)(this)}toJSON(){return{xstate$$type:fc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[q_](){return this}getSnapshot(){return this._snapshot}}function ho(t,...[e]){return new dt(t,e)}function nw(t,e,n,r,{sendId:i}){const s=typeof i=="function"?i(n,r):i;return[e,s]}function rw(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function iw(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=nw,e.execute=rw,e}function sw(t,e,n,r,{id:i,systemId:s,src:o,input:l,syncSnapshot:a}){const c=typeof o=="string"?cc(e.machine,o):o,f=typeof i=="function"?i(n):i;let d;return c&&(d=ho(c,{id:f,src:o,parent:t.self,syncSnapshot:a,systemId:s,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[Nn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function ow(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==xe.Stopped&&n.start()})}function lw(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function s(o,l){}return s.type="snapshot.spawnChild",s.id=e,s.systemId=n,s.src=t,s.input=r,s.syncSnapshot=i,s.resolve=sw,s.execute=ow,s}function uw(t,e,n,r,{actorRef:i}){const s=typeof i=="function"?i(n,r):i,o=typeof s=="string"?e.children[s]:s;let l=e.children;return o&&(l={...l},delete l[o.id]),[Nn(e,{children:l}),o]}function aw(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==xe.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function Xg(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=uw,e.execute=aw,e}function dc(t,e,n,r){const{machine:i}=r,s=typeof t=="function",o=s?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!s&&!o)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof o!="function")return dc(o,e,n,r);const l={context:e,event:n},a=s||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in o?o.check(r,l,o):o(l,a)}const hc=t=>t.type==="atomic"||t.type==="final";function Cr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function Ji(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function po(t){const e=new Set(t),n=Zg(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))Jf(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of Cr(r))if(i.type!=="history"&&!e.has(i)){const s=Jf(i);for(const o of s)e.add(o)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function Jg(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(hc(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=Jg(i,e);return r}function Zg(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function em(t,e){const n=po(e);return Jg(t,Zg(n))}function pc(t,e){return e.type==="compound"?Cr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?Cr(e).every(n=>pc(t,n)):e.type==="final"}const jo=t=>t[0]===G_;function cw(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===b_)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),s=e.split(".");for(let o=0;o<i.length;o++){const l=i[o],a=s[o];if(l==="*")return o===i.length-1;if(l!==a)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function fw(t){const e=t.config.after;if(!e)return[];const n=(i,s)=>{const o=Y_(i,t.id),l=o.type;return t.entry.push(Fw(o,{id:l,delay:i})),t.exit.push(iw(l)),l};return Object.keys(e).flatMap((i,s)=>{const o=e[i],l=typeof o=="string"?{target:o}:o,a=Number.isNaN(+i)?i:+i,c=n(a);return Ht(l).map(f=>({...f,event:c,delay:a}))}).map(i=>{const{delay:s}=i;return{...pn(t,i.event,i),delay:s}})}function pn(t,e,n){const r=qg(n.target),i=n.reenter??!1,s=pw(t,r),o={...n,actions:Ht(n.actions),guard:n.guard,target:s,source:t,reenter:i,eventType:e,toJSON:()=>({...o,source:`#${t.id}`,target:s?s.map(l=>`#${l.id}`):void 0})};return o}function dw(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Vg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Vn(r).map(i=>pn(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Vn(t.config.onDone).map(r=>pn(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Vn(n.onDone).map(i=>pn(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Vn(n.onError).map(i=>pn(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Vn(n.onSnapshot).map(i=>pn(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function hw(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:Ht(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function pw(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(jo(n))return t.machine.getStateNodeById(n);const r=n[0]===$g;if(r&&!t.parent)return go(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return go(t.parent,i)}catch(s){throw new Error(`Invalid transition definition for state node '${t.id}':
${s.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function tm(t){const e=qg(t.config.target);return e?{target:e.map(n=>typeof n=="string"?go(t.parent,n):n)}:t.parent.initial}function _n(t){return t.type==="history"}function Jf(t){const e=nm(t);for(const n of e)for(const r of Ji(n,t))e.add(r);return e}function nm(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of Cr(r))n(i)}}return n(t),e}function Pr(t,e){if(jo(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function go(t,e){if(typeof e=="string"&&jo(e))try{return t.machine.getStateNodeById(e)}catch{}const n=ac(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Pr(r,i)}return r}function mo(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Pr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,s)=>{const o=Pr(t,s);if(!o)return i;const l=mo(o,e[s]);return i.concat(l)},[]))}function gw(t,e,n,r){const s=Pr(t,e).next(n,r);return!s||!s.length?t.next(n,r):s}function mw(t,e,n,r){const i=Object.keys(e),s=Pr(t,i[0]),o=gc(s,e[i[0]],n,r);return!o||!o.length?t.next(n,r):o}function vw(t,e,n,r){const i=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const l=Pr(t,s),a=gc(l,o,n,r);a&&i.push(...a)}return i.length?i:t.next(n,r)}function gc(t,e,n,r){return typeof e=="string"?gw(t,e,n,r):Object.keys(e).length===1?mw(t,e,n,r):vw(t,e,n,r)}function yw(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function rn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function _w(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function rm(t,e,n){const r=new Set;for(const i of t){let s=!1;const o=new Set;for(const l of r)if(_w(Du([i],e,n),Du([l],e,n)))if(rn(i.source,l.source))o.add(l);else{s=!0;break}if(!s){for(const l of o)r.delete(l);r.add(i)}}return Array.from(r)}function ww(t){const[e,...n]=t;for(const r of Ji(e,void 0))if(n.every(i=>rn(i,r)))return r}function mc(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(_n(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of mc(tm(r),e))n.add(i);else n.add(r);return[...n]}function im(t,e){const n=mc(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||rn(i,t.source)))return t.source;const r=ww(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Du(t,e,n){var i;const r=new Set;for(const s of t)if((i=s.target)!=null&&i.length){const o=im(s,n);s.reenter&&s.source===o&&r.add(o);for(const l of e)rn(l,o)&&r.add(l)}return[...r]}function Ew(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Fu(t,e,n,r,i,s){if(!t.length)return e;const o=new Set(e._nodes);let l=e.historyValue;const a=rm(t,o,l);let c=e;i||([c,l]=Iw(c,r,n,a,o,l,s)),c=Lr(c,r,n,a.flatMap(d=>d.actions),s),c=xw(c,r,n,a,o,s,l,i);const f=[...o];c.status==="done"&&(c=Lr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),s));try{return l===e.historyValue&&Ew(e._nodes,o)?c:Nn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function Sw(t,e,n,r,i){if(r.output===void 0)return;const s=Ru(i.id,i.output!==void 0&&i.parent?Mu(i.output,t.context,e,n.self):void 0);return Mu(r.output,t.context,s,n.self)}function xw(t,e,n,r,i,s,o,l){let a=t;const c=new Set,f=new Set;Tw(r,o,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,_)=>v.order-_.order)){i.add(h);const v=[];v.push(...h.entry);for(const _ of h.invoke)v.push(lw(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;v.push(..._)}if(a=Lr(a,e,n,v,s,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let y=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,S=y||h;for((_==null?void 0:_.type)==="compound"&&s.push(Ru(_.id,h.output!==void 0?Mu(h.output,a.context,e,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!d.has(y)&&pc(i,y);)d.add(y),s.push(Ru(y.id)),S=y,y=y.parent;if(y)continue;a=Nn(a,{status:"done",output:Sw(a,e,n,a.machine.root,S)})}}return a}function Tw(t,e,n,r){for(const i of t){const s=im(i,e);for(const l of i.target||[])!_n(l)&&(i.source!==l||i.source!==s||i.reenter)&&(r.add(l),n.add(l)),ir(l,e,n,r);const o=mc(i,e);for(const l of o){const a=Ji(l,s);(s==null?void 0:s.type)==="parallel"&&a.push(s),sm(r,e,n,a,!i.source.parent&&i.reenter?void 0:s)}}}function ir(t,e,n,r){var i;if(_n(t))if(e[t.id]){const s=e[t.id];for(const o of s)r.add(o),ir(o,e,n,r);for(const o of s)Sl(o,t.parent,r,e,n)}else{const s=tm(t);for(const o of s.target)r.add(o),s===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),ir(o,e,n,r);for(const o of s.target)Sl(o,t.parent,r,e,n)}else if(t.type==="compound"){const[s]=t.initial.target;_n(s)||(r.add(s),n.add(s)),ir(s,e,n,r),Sl(s,t,r,e,n)}else if(t.type==="parallel")for(const s of Cr(t).filter(o=>!_n(o)))[...r].some(o=>rn(o,s))||(_n(s)||(r.add(s),n.add(s)),ir(s,e,n,r))}function sm(t,e,n,r,i){for(const s of r)if((!i||rn(s,i))&&t.add(s),s.type==="parallel")for(const o of Cr(s).filter(l=>!_n(l)))[...t].some(l=>rn(l,o))||(t.add(o),ir(o,e,n,t))}function Sl(t,e,n,r,i){sm(n,r,i,Ji(t,e))}function Iw(t,e,n,r,i,s,o){let l=t;const a=Du(r,i,s);a.sort((f,d)=>d.order-f.order);let c;for(const f of a)for(const d of yw(f)){let h;d.history==="deep"?h=v=>hc(v)&&rn(v,f):h=v=>v.parent===f,c??(c={...s}),c[d.id]=Array.from(i).filter(h)}for(const f of a)l=Lr(l,e,n,[...f.exit,...f.invoke.map(d=>Xg(d.id))],o),i.delete(f);return[l,c||s]}let Zf=!1;function om(t,e,n,r,i,s){const{machine:o}=t;let l=t;for(const c of r){let _=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{Zf=d,d(h,v)}finally{Zf=!1}};var a=_;const f=typeof c=="function",d=f?c:o.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===xe.Running?_():n.defer(()=>{_()});continue}const y=d,[S,g,p]=y.resolve(n,l,h,v,d,i);l=S,"retryResolve"in y&&(s==null||s.push([y,g])),"execute"in y&&(n.self._processingStatus===xe.Running?y.execute(n,g):n.defer(y.execute.bind(null,n,g))),p&&(l=om(l,e,n,p,i,s))}return l}function Lr(t,e,n,r,i,s){const o=s?[]:void 0,l=om(t,e,n,r,{internalQueue:i,deferredActorIds:s},o);return o==null||o.forEach(([a,c])=>{a.retryResolve(n,l,c)}),l}function xl(t,e,n,r=[]){let i=t;const s=[];function o(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),s.push(c)}if(e.type===Nu)return i=Nn(ed(i,e,n),{status:"stopped"}),o(i,e,[]),{snapshot:i,microstates:s};let l=e;if(l.type!==Hg){const c=l,f=J_(c),d=td(c,i);if(f&&!d.length)return i=Nn(t,{status:"error",error:c.error}),o(i,c,[]),{snapshot:i,microstates:s};i=Fu(d,t,n,l,!1,r),o(i,c,d)}let a=!0;for(;i.status==="active";){let c=a?Cw(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=td(l,i)}i=Fu(c,i,n,l,!1,r),a=i!==f,o(i,l,c)}return i.status!=="active"&&ed(i,l,n),{snapshot:i,microstates:s}}function ed(t,e,n){return Lr(t,e,n,Object.values(t.children).map(r=>Xg(r)),[])}function td(t,e){return e.machine.getTransitionData(e,t)}function Cw(t,e){const n=new Set,r=t._nodes.filter(hc);for(const i of r)e:for(const s of[i].concat(Ji(i,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||dc(o.guard,t.context,e,t)){n.add(o);break e}}return rm(Array.from(n),new Set(t._nodes),t.historyValue)}function Pw(t,e){const n=po(mo(t,e));return em(t,[...n])}function Lw(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const Aw=function(e){return Qg(e,this.value)},kw=function(e){return this.tags.has(e)},Ow=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},Nw=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:s,can:o,hasTag:l,matches:a,...c}=this;return{...c,tags:Array.from(n)}},Rw=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Fs(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:em(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:Aw,hasTag:kw,can:Ow,getMeta:Rw,toJSON:Nw}}function Nn(t,e={}){return Fs({...t,...e},t.machine)}function Mw(t,e){const{_nodes:n,tags:r,machine:i,children:s,context:o,can:l,hasTag:a,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const y in s){const S=s[y];v[y]={snapshot:S.getPersistedSnapshot(e),src:S.src,systemId:S._systemId,syncSnapshot:S._syncSnapshot}}return{...h,context:lm(o),children:v}}function lm(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:fc,id:r.id};else{const i=lm(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function zw(t,e,n,r,{event:i,id:s,delay:o},{internalQueue:l}){const a=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof o=="string"){const d=a&&a[o];f=typeof d=="function"?d(n,r):d}else f=typeof o=="function"?o(n,r):o;return typeof f!="number"&&l.push(c),[e,{event:c,id:s,delay:f}]}function Dw(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const s=t.self;t.system.scheduler.schedule(s,s,n,r,i)});return}}function Fw(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=zw,n.execute=Dw,n}function Uw(t,{machine:e,context:n},r,i){const s=(o,l={})=>{const{systemId:a,input:c}=l;if(typeof o=="string"){const f=cc(e,o);if(!f)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const d=ho(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:o,systemId:a});return i[d.id]=d,d}else return ho(o,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:o,systemId:a})};return(o,l)=>{const a=s(o,l);return i[a.id]=a,t.defer(()=>{a._processingStatus!==xe.Stopped&&a.start()}),a}}function Bw(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:n.event,spawn:Uw(t,e,n.event,s),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(o,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(o,r):f}const a=Object.assign({},e.context,l);return[Nn(e,{context:a,children:Object.keys(s).length?{...e.children,...s}:e.children})]}function Q(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=Bw,e}let nd=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function Ww(t,e,n,r,{to:i,event:s,id:o,delay:l},a){var _;const c=e.machine.implementations.delays;if(typeof s=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${s}" }) instead`);const f=typeof s=="function"?s(n,r):s;let d;if(typeof l=="string"){const y=c&&c[l];d=typeof y=="function"?y(n,r):y}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===nd.Parent?v=t.self._parent:h===nd.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(_=a.deferredActorIds)!=null&&_.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:o,delay:d}]}function jw(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function $w(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:s}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,s);return}t.system._relay(t.self,n,r.type===Q_?Gg(t.self.id,r.data):r)})}function Tl(t,e,n){function r(i,s){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=Ww,r.retryResolve=jw,r.execute=$w,r}const rd=new WeakMap;function jn(t,e,n){let r=rd.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},rd.set(t,r)),r[e]}const Vw={},Jr=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class vc{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join($g),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Kf(this.config.states,(r,i)=>new vc(r,{_parent:this,_key:i,_machine:this.machine})):Vw,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Ht(this.config.entry).slice(),this.exit=Ht(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Ht(e.tags).slice()}_initialize(){this.transitions=dw(this),this.config.always&&(this.always=Vn(this.config.always).map(e=>pn(this,Vg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Jr),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Jr),eventType:null})}:void 0,history:this.history,states:Kf(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Jr)})),entry:this.entry.map(Jr),exit:this.exit.map(Jr),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return jn(this,"invoke",()=>Ht(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,s=e.id??qf(this.id,n),o=typeof r=="string"?r:`xstate.invoke.${qf(this.id,n)}`;return{...e,src:o,id:s,systemId:i,toJSON(){const{onDone:l,onError:a,...c}=e;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return jn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return jn(this,"delayedTransitions",()=>fw(this))}get initial(){return jn(this,"initial",()=>hw(this,this.config.initial))}next(e,n){const r=n.type,i=[];let s;const o=jn(this,`candidates-${r}`,()=>cw(this,r));for(const l of o){const{guard:a}=l,c=e.context;let f=!1;try{f=!a||dc(a,c,n,e)}catch(d){const h=typeof a=="string"?a:typeof a=="object"?a.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),s=l;break}}return s?[s]:void 0}get events(){return jn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const s of i.events)n.add(`${s}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const Hw="#";class yc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new vc(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:s}=this.implementations;return new yc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const n=Pw(this.root,e.value),r=po(mo(this.root,n));return Fs({_nodes:[...r],context:e.context||{},children:{},status:pc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return xl(e,n,r).snapshot}microstep(e,n,r){return xl(e,n,r).microstates}getTransitionData(e,n){return gc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,s=Fs({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Lr(s,n,e,[Q(({spawn:l,event:a,self:c})=>i({spawn:l,input:a.input,self:c}))],r):s}getInitialSnapshot(e,n){const r=bg(n),i=[],s=this.getPreInitialState(e,r,i),o=Fu([{target:[...nm(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,r,!0,i),{snapshot:l}=xl(o,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=ac(e),r=n.slice(1),i=jo(n[0])?n[0].slice(Hw.length):n[0],s=this.idMap.get(i);if(!s)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return go(s,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return Mw(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(a=>{const c=i[a],f=c.snapshot,d=c.src,h=typeof d=="string"?cc(this,d):d;if(!h)return;const v=ho(h,{id:a,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[a]=v});const s=Fs({...e,children:r,_nodes:Array.from(po(mo(this.root,e.value)))},this);let o=new Set;function l(a,c){if(!o.has(a)){o.add(a);for(let f in a){const d=a[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===fc){a[f]=c[d.id];continue}l(d,c)}}}}return l(s.context,r),s}}function Bn(t,e){return new yc(t,e)}const um=Bn({types:{},context:{startPoint:null,type:$.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:Q(()=>(nn(!0),ee(null),ue([]),{startPoint:null})),RECORD_START_POINT:Q({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new st(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=An(),n.lineWidth=kn(),ee(n)},DRAW_FINAL_LINE:Q(({context:t,event:e})=>{console.log("drawFinalLine",{context:t,event:e});const n=e.worldClickPoint,r=new st(t.startPoint,n);return r.lineColor=An(),r.lineWidth=kn(),_t(r),ee(new st(n,n)),{startPoint:n}})}}),am=Bn({types:{},context:{startPoint:null,type:$.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{nn(!0),ee(null),ue([])},RECORD_START_POINT:Q(({event:t})=>({startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new Mt(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=An(),n.lineWidth=kn(),ee(n)},DRAW_FINAL_RECTANGLE:Q(({context:t,event:e})=>{const n=e.worldClickPoint,r=new Mt(t.startPoint,n);return r.lineColor=An(),r.lineWidth=kn(),_t(r),ee(null),{startPoint:null}})}}),cm=Bn({types:{},context:{centerPoint:null,type:$.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:Q(()=>(console.log("activate circle tool"),nn(!0),ee(null),ue([]),{centerPoint:null})),RECORD_START_POINT:Q({centerPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new Ir(t.centerPoint,e.drawInfo.worldMouseLocation);n.lineColor=An(),n.lineWidth=kn(),ee(n)},DRAW_FINAL_CIRCLE:Q(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new Ir(t.centerPoint,n);return r.lineColor=An(),r.lineWidth=kn(),_t(r),ee(null),{centerPoint:null}})}});function Ar(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const s=i.distanceTo(t);s&&s[0]<r[0]&&(r=s,n=i)}),{distance:r[0],segment:r[1],entity:n}}function Gw(t,e){const n=Ar(e.worldClickPoint,Ce());if(n&&n.distance<oc){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?ue([r.id]):e.holdingCtrl?Tr(r)?ue(yn().filter(i=>i!==r.id)):ue([...yn(),r.id]):ue([...yn(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function bw(t,e,n){const r=new Mt(t,e);console.log("Finish selection: ",r);const i=fm(r,t),s=lt(Ce().map(o=>{if(i){if(o.intersectsWithBox(r.getBoundingBox())||o.isContainedInBox(r.getBoundingBox()))return n&&Tr(o)?null:o.id}else if(o.isContainedInBox(r.getBoundingBox()))return n&&Tr(o)?null:o.id;return null}));ue(s)}function Qw(t,e){const n=new Mt(t,e),r=fm(n,t);n.lineColor=r?k_:O_,n.lineWidth=N_,n.lineStyle=R_,ee(n)}function fm(t,e){return!t.getShape()||!e?!1:Math.abs(e.x-t.getShape().xmin)>Ou}const Di=Bn({types:{},context:{startPoint:null,type:$.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),nn(!1),ee(null),ue([])},HANDLE_FIRST_SELECT_POINT:Q(({context:t,event:e})=>(console.log("handle first select point"),Gw(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");Qw(t.startPoint,e.drawInfo.worldMouseLocation)},SELECT_ENTITIES_INSIDE_RECTANGLE:Q(({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");return bw(t.startPoint,e.worldClickPoint,e.holdingCtrl),ee(null),{startPoint:null}}),DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),Wo(f_()),ue([]),ee(null)},RESET_SELECTION:Q(()=>(ee(null),ue([]),{startPoint:null}))}});function Yw(t,e,n,r){const i=Bo(Yi([e,...r,t,n],wt),[o=>Ur(e,o)]),s=i.findIndex(o=>wt(t,o));if(s===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[s-1]||e,i[s+1]||n]}function Kw(t,e){const n=t.map(r=>({point:r,angle:new Fo(e,r).slope}));return Bo(n,[r=>r.angle]).map(r=>r.point)}function qw(t,e,n){const r=Kw(Yi([...n,t],wt),e.getShape().center),i=r.findIndex(s=>wt(t,s));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function Xw(t,e,n){const r=Ug(Yi([...n,t],wt),e.getShape().center,e.getShape().start),i=r.findIndex(s=>wt(t,s));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function id(t,e){return lt(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function sd(t,e,n){const r=t.getShape(),[i,s]=Yw(e,r.start,r.end,n);m_([i,s].map(a=>new zi(a)));const l=t.cutAtPoints([i,s]).filter(a=>!a.containsPointOnShape(e));On(t),_t(...l)}function Jw(t,e,n){if(n.length===0){On(t);return}const[r,i]=qw(e,t,n),s=t.getShape(),o=s.center,l=[r,i,e].map(d=>Math.atan2(d.y-o.y,d.x-o.x)),[a,c]=Zw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new Ve(o,s.r,a,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),On(t),_t(f)}function Zw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function eE(t,e,n){const[r,i]=Xw(e,t,n);if(wt(r,i)){On(t);return}On(t),t.cutAtPoints([r,i]).filter(s=>!s.containsPointOnShape(e)).forEach(s=>{Object.assign(s,{lineColor:t.lineColor,lineWidth:t.lineWidth}),_t(s)})}const tE=Bn({types:{},context:{startPoint:null,type:$.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:Q(()=>(console.log("activate eraser tool"),nn(!0),ee(null),ue([]),{})),HANDLE_MOUSE_CLICK:Q(({context:t,event:e})=>(nE(e.worldClickPoint),t))}});function nE(t){const e=Ar(t,Ce());if(!e)return;const n=e.segment.start,r=id(e.entity,Ce());switch(e.entity.getType()){case Z.Line:{const i=e.entity;sd(i,n,r);break}case Z.Circle:{const i=e.entity;Jw(i,n,r);break}case Z.Arc:{const i=e.entity;eE(i,n,r);break}case Z.Rectangle:{const i=e.entity,l=i.getShape().toSegments().map(f=>new st(f)),a=Ar(t,l);On(i),_t(...l);const c=id(a.entity,Ce());sd(a.entity,n,c);break}}}function od(t,e,n){t.forEach(r=>r.move(e,n))}const dm=Bn({types:{},context:{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null,type:$.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",yn().length>0),yn().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",yn().length===0),yn().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:Di,onDone:{actions:Q(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=Oe())==null?void 0:t.getSnapshot()),{startPoint:null}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:Tl("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:Tl("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:Tl("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_LINE"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:()=>{console.log("activate move tool"),nn(!1),ee(null),ue([])},ENABLE_HELPERS:()=>{nn(!0)},RECORD_START_POINT:Q(({event:t})=>({startPoint:t.worldClickPoint})),COPY_SELECTION_BEFORE_MOVE:Q(({context:t})=>{const e=c_();return El(e),On(...e),ue([]),{startPoint:t.startPoint,originalSelectedEntities:lt(e.map(n=>n.clone()))}}),DRAW_TEMP_MOVE_LINE:Q(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawInfo.worldMouseLocation,r=new st(t.startPoint,n);r.lineColor=zg,r.lineWidth=Dg,r.lineStyle=Fg,ee(r);const i=t.lastDrawLocation||t.startPoint;return od(Ds(),n.x-i.x,n.y-i.y),{...t,lastDrawLocation:e.drawInfo.worldMouseLocation}}),MOVE_SELECTION:Q(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=t.lastDrawLocation||t.startPoint,r=e.worldClickPoint;return od(Ds(),r.x-n.x,r.y-n.y),_t(...Ds()),El([]),ue([]),{...t,startPoint:null,lastDrawLocation:null,originalSelectedEntities:[]}}),DESELECT_ENTITIES:Q(()=>(ee(null),ue([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:Q(({context:t})=>{const e=Ce();return console.log({entities:e}),_t(...t.originalSelectedEntities),El([]),ee(null),ue([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Di.implementations.actions}});var nt=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t))(nt||{});class Fi{constructor(e,n){D(this,"id",crypto.randomUUID());D(this,"lineColor","#fff");D(this,"lineWidth",1);D(this,"lineStyle");D(this,"imageElement",null);D(this,"rectangle",null);this.imageElement=e,this.rectangle=n}draw(e){if(!this.rectangle||!this.imageElement)return;const n=yt(this.rectangle.low),r=yt(this.rectangle.high),i=Math.abs(n.x-r.x),s=Math.abs(n.y-r.y);i===0||s===0||(e.context.beginPath(),e.context.strokeRect(n.x,n.y,r.x-n.x,r.y-n.y),e.context.drawImage(this.imageElement,n.x,n.y,i,s))}move(e,n){!this.rectangle||!this.imageElement||(this.rectangle=this.rectangle.translate(e,n))}clone(){if(!this.rectangle||!this.imageElement)return null;const e=document.createElement("img");return e.src=this.imageElement.src,new Fi(e,this.rectangle.clone())}intersectsWithBox(e){return this.rectangle?$a.relate(this.rectangle,e).B2B.length>0:!1}isContainedInBox(e){return this.rectangle?e.contains(this.rectangle):!1}distanceTo(e){if(!this.rectangle)return null;const n=this.rectangle.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.rectangle?this.rectangle:null}getShape(){return this.rectangle}getSnapPoints(){if(!this.rectangle)return[];const e=this.rectangle.toPoints(),n=this.rectangle.toSegments();return[{point:e[0],type:M.LineEndPoint},{point:e[1],type:M.LineEndPoint},{point:e[2],type:M.LineEndPoint},{point:e[3],type:M.LineEndPoint},{point:n[0].middle(),type:M.LineMidPoint},{point:n[1].middle(),type:M.LineMidPoint},{point:n[2].middle(),type:M.LineMidPoint},{point:n[3].middle(),type:M.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.rectangle||!n?[]:this.rectangle.toSegments().flatMap(r=>r.intersect(n))}getFirstPoint(){var e;return((e=this.rectangle)==null?void 0:e.low)||null}getSvgString(){return this.rectangle?this.rectangle.svg({strokeWidth:this.lineWidth,stroke:Un(this.lineColor)}):null}getType(){return Z.Image}containsPointOnShape(e){return this.rectangle?this.rectangle.toSegments().some(n=>n.contains(e)):!1}async toJson(){return!this.rectangle||!this.imageElement?null:{id:this.id,type:Z.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{xmin:this.rectangle.xmin,ymin:this.rectangle.ymin,xmax:this.rectangle.xmax,ymax:this.rectangle.ymax,imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new Ye(e.shapeData.xmin,e.shapeData.ymin,e.shapeData.xmax,e.shapeData.ymax),r=new Image;r.src=e.shapeData.imageData;const i=new Fi(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function ld(t,e,n,r){const i=Math.abs(n.x-r.x),s=Math.abs(n.y-r.y);if(i===0||s===0)return null;const o=t/e,l=i/s;if(o<l){const a=Math.abs(s*o),c=n.x<r.x?n.x:n.x-a,f=n.y<r.y?n.y:n.y-s;return new Ye(c,f,c+a,f+s)}else{const a=Math.abs(i/o),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-a;return new Ye(c,f,c+i,f+a)}}const hm=Bn({types:{},context:{type:$.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[nt.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{target:"INIT"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","SWITCH_TO_SELECT_TOOL"],target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:Q(()=>(nn(!0),ee(null),ue([]),{startPoint:null})),STORE_IMAGE_DATA:Q(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:Q({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=ld(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.drawInfo.worldMouseLocation);if(!n)return;const r=new Fi(t.imageElement,n),i=new Mt(new Ye(t.startPoint.x,t.startPoint.y,e.drawInfo.worldMouseLocation.x,e.drawInfo.worldMouseLocation.y));ee(r),nc([i])},DRAW_FINAL_IMAGE_IMPORT:Q(({context:t,event:e})=>{if(console.log("drawFinalImageImport",{context:t,event:e}),!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=ld(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldClickPoint);if(!n)return{startPoint:null,imageElement:null};const r=new Fi(t.imageElement,n);return _t(r),{startPoint:null,imageArrayBuffer:null}}),SWITCH_TO_SELECT_TOOL:()=>{It(new dt(Di))}}}),pm={[$.LINE]:um,[$.RECTANGLE]:am,[$.CIRCLE]:cm,[$.SELECT]:Di,[$.ERASER]:tE,[$.MOVE]:dm,[$.IMAGE_IMPORT]:hm};function rE(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const iE=()=>{const[t,e]=k.useState($.LINE),[n,r]=k.useState(45),[i,s]=k.useState("#FFF"),[o,l]=k.useState(1),[a,c]=k.useState(1),f=k.useCallback(()=>{var y,S;e((S=(y=Oe())==null?void 0:y.getSnapshot())==null?void 0:S.context.type),r(Pg()),s(An()),l(kn()),c(Rt())},[]),d=y=>{y.ctrlKey&&y.preventDefault()};k.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(fo.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(fo.UPDATE_STATE,f)}),[f]);const h=k.useCallback(y=>{var g;(g=Oe())==null||g.stop();const S=new dt(pm[y]);It(S),e(y)},[]),v=k.useCallback(y=>{r(y),v_(y,!1)},[]),_=k.useCallback(()=>{Ag(1),rc(new F(0,0))},[]);return N.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[N.jsx(X,{title:"Select (s)",icon:Ae.Direction,onClick:()=>{h($.SELECT)},active:t===$.SELECT}),N.jsx(X,{title:"Line (l)",icon:Ae.Line,onClick:()=>{h($.LINE)},active:t===$.LINE}),N.jsx(X,{title:"Rectangle (r)",icon:Ae.Square,onClick:()=>{h($.RECTANGLE)},active:t===$.RECTANGLE}),N.jsx(X,{title:"Circle (c)",icon:Ae.Circle,onClick:()=>{h($.CIRCLE)},active:t===$.CIRCLE}),N.jsx(X,{className:"mt-2",title:"Move",icon:Ae.Expand,onClick:()=>h($.MOVE),active:t===$.MOVE}),N.jsx(X,{className:"mt-2",title:"Undo (ctrl + z)",icon:Ae.AntiClockwise,onClick:()=>Rg()}),N.jsx(X,{title:"Redo (ctrl + shift + z)",icon:Ae.Clockwise,onClick:()=>Mg()}),N.jsx(X,{className:"mt-2",title:"Delete segments",icon:Ae.Crop,onClick:()=>h($.ERASER),active:t===$.ERASER}),N.jsx(vl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:z_.map(y=>N.jsx(X,{title:"Change line color",style:{backgroundColor:y},active:y===i,onClick:()=>w_(y)},"line-color--"+y))}),N.jsx(vl,{title:"Line width",label:String(o)+"px",children:jg(9).map(y=>{const S=y+1;return N.jsx(X,{title:"Change line width",label:String(S)+"px",active:S===o,onClick:()=>E_(S)},"line-width--"+S)})}),N.jsxs(vl,{title:"Snap angles",label:n+"°",children:[N.jsx(X,{title:"Add guide every 5 degrees",label:"5°",onClick:()=>v(5),active:n===5}),N.jsx(X,{title:"Add guide every 15 degrees",label:"15°",onClick:()=>v(15),active:n===15}),N.jsx(X,{title:"Add guide every 30 degrees",label:"30°",onClick:()=>v(30),active:n===30}),N.jsx(X,{title:"Add guide every 45 degrees",label:"45°",onClick:()=>v(45),active:n===45}),N.jsx(X,{title:"Add guide every 90 degrees",label:"90°",onClick:()=>v(90),active:n===90})]}),N.jsx(X,{title:"Zoom level",label:(a*100).toFixed(0)+"%",onClick:_}),N.jsx(X,{className:"relative mt-2",title:"Import image into the current drawing",icon:Ae.Image,onClick:jf,children:N.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async y=>{var p;const S=await rE((p=y.target.files)==null?void 0:p[0]),g=new dt(hm);g.start(),g.send({type:nt.FILE_SELECTED,image:S}),It(g),y.target.files=null}})}),N.jsx(X,{className:"relative",title:"Load from JSON file",icon:Ae.Folder,onClick:jf,children:N.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async y=>{var S;await D_((S=y.target.files)==null?void 0:S[0]),y.target.files=null}})}),N.jsx(X,{title:"Save to JSON file",icon:Ae.Save,onClick:()=>F_()}),N.jsx(X,{title:"Export to SVG file",label:"SVG",onClick:()=>U_()}),N.jsx(X,{title:"Export to PNG file",label:"PNG",onClick:()=>W_()}),N.jsx(X,{className:"mt-2",title:"Github",icon:Ae.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function sE(){return N.jsx("div",{children:N.jsx(iE,{})})}function ud(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const s=t[i];e.push(...r.getIntersections(s))}}return e}function Uu(t,e){let n=null,r=1/0;return t.forEach(i=>{const s=Ur(i.point,e);s<r&&(r=s,n=i)}),{distance:r,snapPoint:n}}function Bu(t,e,n){const{distance:r,snapPoint:i}=Uu(t.filter(l=>l.type!==M.AngleGuide),e);if(r<n)return i;const{distance:s,snapPoint:o}=Uu(t.filter(l=>l.type===M.AngleGuide),e);return s<n?o:null}function oE(t,e){return jg(180/e,n=>{const i=n*e*(Math.PI/180),s=t.x+Math.cos(i),o=t.y+Math.sin(i);return new st(new F(t.x-1e4*(s-t.x),t.y-1e4*(o-t.y)),new F(t.x+1e4*(s-t.x),t.y+1e4*(o-t.y)))})}function lE(t,e,n,r,i){let s=null,o=null;const l=[],a=[];e.forEach(v=>{const _=oE(v,r),y=Ar(n,_);y.distance<L_&&(a.push(y.entity),l.push({point:y.segment.start,type:M.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...ud(lt(t)).map(v=>({point:v,type:M.Intersection}))],f=Bu(c,n,i);f&&(s=f);const d=[...l,...ud([...lt(t),...a]).map(v=>({point:v,type:M.Intersection}))],h=Bu(d,n,i);return h&&(o=h),{angleGuides:a,entitySnapPoint:s,angleSnapPoint:o}}function Br(t,e,n,r,i,s=[]){t.strokeStyle=r,t.lineWidth=i,t.setLineDash(s),e&&(t.lineWidth=i+1),n&&t.setLineDash([5,5])}function ad(t,e){e.forEach(n=>{Br(t.context,ec(n),Tr(n),n.lineColor,n.lineWidth),n.draw(t)})}function uE(t,e){e.forEach(n=>{Br(t.context,ec(n),Tr(n),"#FF5500",1),n.draw(t)})}function aE(t,e,n){if(!e)return;const r=yt(e.point);Br(t.context,!1,!1,P_,1);const i=t.context;switch(n&&(i.beginPath(),i.moveTo(r.x-B/2,r.y),i.lineTo(r.x+B/2,r.y),i.moveTo(r.x,r.y-B/2),i.lineTo(r.x,r.y+B/2),i.stroke()),e.type){case M.LineEndPoint:i.strokeRect(r.x-B/2,r.y-B/2,B,B);break;case M.LineMidPoint:i.beginPath(),i.moveTo(r.x,r.y-B/2),i.lineTo(r.x-B/2,r.y+B/2),i.lineTo(r.x+B/2,r.y+B/2),i.closePath(),i.stroke();break;case M.AngleGuide:i.beginPath(),i.moveTo(r.x-B/2,r.y-B/2),i.lineTo(r.x+B/2,r.y-B/2),i.lineTo(r.x-B/2,r.y+B/2),i.lineTo(r.x+B/2,r.y+B/2),i.closePath(),i.stroke();break;case M.Intersection:i.beginPath(),i.moveTo(r.x-B/2,r.y-B/2),i.lineTo(r.x+B/2,r.y+B/2),i.moveTo(r.x+B/2,r.y-B/2),i.lineTo(r.x-B/2,r.y+B/2),i.stroke();break;case M.CircleCenter:i.beginPath(),i.arc(r.x,r.y,B/2,0,2*Math.PI),i.stroke();break;case M.CircleCardinal:i.beginPath(),i.moveTo(r.x,r.y-B/2),i.lineTo(r.x-B/2,r.y),i.lineTo(r.x,r.y+B/2),i.lineTo(r.x+B/2,r.y),i.closePath(),i.stroke();break}}function cE(t,e){e.forEach(n=>{Br(t.context,ec(n),Tr(n),zg,Dg,Fg),n.draw(t)})}function fE(t,e){e&&(Br(t.context,!1,!1,e.lineColor,e.lineWidth,e.lineStyle),e==null||e.draw(t))}function dE(t,e){e&&(Br(t.context,!1,!1,"#FFF",1),t.context.beginPath(),t.context.moveTo(t.screenMouseLocation.x,t.screenMouseLocation.y-Es),t.context.lineTo(t.screenMouseLocation.x,t.screenMouseLocation.y+Es),t.context.moveTo(t.screenMouseLocation.x-Es,t.screenMouseLocation.y),t.context.lineTo(t.screenMouseLocation.x+Es,t.screenMouseLocation.y),t.context.stroke())}function hE(t){var e,n;t.canvasSize!==null&&t.context&&(t.context.fillStyle=C_,t.context.fillRect(0,0,(e=t.canvasSize)==null?void 0:e.x,(n=t.canvasSize)==null?void 0:n.y))}function pE(t){hE(t),cE(t,s_()),ad(t,Ds()),ad(t,Ce()),uE(t,l_()),fE(t,Cg());const{snapPoint:e}=Uu(lt([Ja(),Lg()]),Fr()),n=!!e&&Za().some(r=>r.milliSecondsHovered>lc&&wt(r.snapPoint.point,e.point));aE(t,e,n),dE(t,i_())}function gE(t,e,n,r,i){if(!t)return;const s=e.at(-1);let o;s?Ur(t.point,s.snapPoint.point)<r?o=[...e.slice(0,e.length-1),{...s,milliSecondsHovered:s.milliSecondsHovered+i}]:s.milliSecondsHovered>=lc?o=[...e,{snapPoint:t,milliSecondsHovered:i}]:o=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:o=[{snapPoint:t,milliSecondsHovered:i}];const l=o.slice(0,A_);n(l)}Il.createRoot(document.getElementById("root")).render(N.jsx(zm.StrictMode,{children:N.jsx(sE,{})}));function mE(){tc(!0)}function vE(t){var i,s;tc(!0),p_(new F(t.clientX,t.clientY));const e=u_(),n=qi(),r=Rt();if(e){const o=new F(n.x-(t.clientX-e.x)/r,n.y-(t.clientY-e.y)/r);ic(new F(t.clientX,t.clientY)),rc(o)}if(xE(),((s=(i=Oe())==null?void 0:i.getSnapshot())==null?void 0:s.context.type)===$.SELECT){const o=Ar(Fr(),Ce());o.distance<oc?ku([o.entity.id]):ku([])}}function yE(){tc(!1)}function _E(t){const e=qi(),n=Rt(),r=Fr(),i=n*(1-M_*(t.deltaY/Math.abs(t.deltaY)));Ag(i);const s=Uo(Ig());rc(new F(e.x+(r.x-s.x),e.y+(r.y-s.y)))}function wE(t){t.button===co.Middle&&ic(new F(t.clientX,t.clientY))}function EE(t){if(t.button===co.Middle&&ic(null),t.button===co.Left){const e=Bu(lt([Ja(),Lg()]),Fr(),sc/Rt()),n=Uo(new F(t.clientX,t.clientY)),r=e?e.point:n,i=Oe();i==null||i.send({type:nt.MOUSE_CLICK,worldClickPoint:r,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function SE(t){var e,n,r,i,s;t.key==="Escape"?(t.preventDefault(),(e=Oe())==null||e.send({type:nt.ESC})):t.key==="Enter"?(t.preventDefault(),(n=Oe())==null||n.send({type:nt.ENTER})):t.key==="Delete"?(t.preventDefault(),(r=Oe())==null||r.send({type:nt.DELETE})):t.key==="z"&&t.ctrlKey&&!t.shiftKey?(t.preventDefault(),Rg(),ee(null),ue([]),(i=Oe())==null||i.send({type:nt.ESC})):t.key==="z"&&t.ctrlKey&&t.shiftKey?(t.preventDefault(),Mg(),ee(null),ue([]),(s=Oe())==null||s.send({type:nt.ESC})):t.key==="l"?(t.preventDefault(),It(new dt(um))):t.key==="c"?(t.preventDefault(),It(new dt(cm))):t.key==="r"?(t.preventDefault(),It(new dt(am))):t.key==="s"?(t.preventDefault(),It(new dt(Di))):t.key==="m"&&(t.preventDefault(),It(new dt(dm)))}function xE(){const t=Pg(),e=Cg(),n=Ce(),r=Rt(),i=Fr(),l=Za().filter(a=>a.milliSecondsHovered>lc).map(a=>a.snapPoint.point);if(o_()){let a=null;e&&e.getShape()&&e.getFirstPoint()&&(a=e.getFirstPoint());const{angleGuides:c,entitySnapPoint:f,angleSnapPoint:d}=lE(n,lt([a,...l]),i,t,sc/r);nc(c),kg(f),Og(d)}}function gm(t,e){var f,d,h,v,_;const n=Xa(),r=Ig(),i=Fr(),s=Rt(),o=qi(),l=a_(),a=e-l;__(e);const c={context:t,canvasSize:n,worldMouseLocation:i,screenMouseLocation:r,screenOffset:o,screenZoom:s};if((f=Oe())!=null&&f.getSnapshot().can({type:nt.DRAW})&&((d=Oe())==null||d.send({type:nt.DRAW,drawInfo:c})),((_=(v=(h=Oe())==null?void 0:h.getSnapshot())==null?void 0:v.context)==null?void 0:_.type)===$.SELECT){const{distance:y,entity:S}=Ar(Uo(r),Ce());y<oc&&ku([S.id])}gE(Ja(),Za(),y_,sc/Rt(),a),pE(c),requestAnimationFrame(y=>{gm(t,y)})}function cd(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),d_(new F(window.innerWidth,window.innerHeight));const t=n_();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function TE(){const t=document.getElementsByTagName("canvas")[0];if(t){h_(t),t.addEventListener("mousedown",wE),t.addEventListener("mousemove",vE),t.addEventListener("mouseup",EE),t.addEventListener("wheel",_E),t.addEventListener("mouseout",yE),t.addEventListener("mouseenter",mE),document.addEventListener("keyup",SE),window.addEventListener("resize",cd),cd();const e=t.getContext("2d");if(!e)return;gm(e,0);const n=new dt(pm[$.LINE]);n.start(),It(n)}}document.addEventListener("DOMContentLoaded",()=>{TE()});
