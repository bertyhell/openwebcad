var Tm=Object.defineProperty;var Im=(t,e,n)=>e in t?Tm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>Im(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _d={exports:{}},Cs={},Ed={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),Cm=Symbol.for("react.portal"),Pm=Symbol.for("react.fragment"),Lm=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),Om=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),km=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Mm=Symbol.for("react.memo"),zm=Symbol.for("react.lazy"),Pc=Symbol.iterator;function Dm(t){return t===null||typeof t!="object"?null:(t=Pc&&t[Pc]||t["@@iterator"],typeof t=="function"?t:null)}var wd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sd=Object.assign,Td={};function Br(t,e,n){this.props=t,this.context=e,this.refs=Td,this.updater=n||wd}Br.prototype.isReactComponent={};Br.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Br.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Id(){}Id.prototype=Br.prototype;function Hu(t,e,n){this.props=t,this.context=e,this.refs=Td,this.updater=n||wd}var bu=Hu.prototype=new Id;bu.constructor=Hu;Sd(bu,Br.prototype);bu.isPureReactComponent=!0;var Lc=Array.isArray,xd=Object.prototype.hasOwnProperty,Qu={current:null},Cd={key:!0,ref:!0,__self:!0,__source:!0};function Pd(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)xd.call(e,r)&&!Cd.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Hi,type:t,key:o,ref:s,props:i,_owner:Qu.current}}function Fm(t,e){return{$$typeof:Hi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ku(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hi}function Um(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ac=/\/+/g;function Zs(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Um(""+t.key):e.toString(36)}function Oo(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hi:case Cm:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Zs(s,0):r,Lc(i)?(n="",t!=null&&(n=t.replace(Ac,"$&/")+"/"),Oo(i,e,n,"",function(c){return c})):i!=null&&(Ku(i)&&(i=Fm(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ac,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Lc(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Zs(o,l);s+=Oo(o,e,n,a,i)}else if(a=Dm(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Zs(o,l++),s+=Oo(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function uo(t,e,n){if(t==null)return t;var r=[],i=0;return Oo(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Bm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ne={current:null},No={transition:null},Wm={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:No,ReactCurrentOwner:Qu};function Ld(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:uo,forEach:function(t,e,n){uo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uo(t,function(){e++}),e},toArray:function(t){return uo(t,function(e){return e})||[]},only:function(t){if(!Ku(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=Br;B.Fragment=Pm;B.Profiler=Am;B.PureComponent=Hu;B.StrictMode=Lm;B.Suspense=Rm;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wm;B.act=Ld;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sd({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Qu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)xd.call(e,a)&&!Cd.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Hi,type:t.type,key:i,ref:o,props:r,_owner:s}};B.createContext=function(t){return t={$$typeof:Nm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Om,_context:t},t.Consumer=t};B.createElement=Pd;B.createFactory=function(t){var e=Pd.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:km,render:t}};B.isValidElement=Ku;B.lazy=function(t){return{$$typeof:zm,_payload:{_status:-1,_result:t},_init:Bm}};B.memo=function(t,e){return{$$typeof:Mm,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=No.transition;No.transition={};try{t()}finally{No.transition=e}};B.unstable_act=Ld;B.useCallback=function(t,e){return Ne.current.useCallback(t,e)};B.useContext=function(t){return Ne.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return Ne.current.useDeferredValue(t)};B.useEffect=function(t,e){return Ne.current.useEffect(t,e)};B.useId=function(){return Ne.current.useId()};B.useImperativeHandle=function(t,e,n){return Ne.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return Ne.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return Ne.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return Ne.current.useMemo(t,e)};B.useReducer=function(t,e,n){return Ne.current.useReducer(t,e,n)};B.useRef=function(t){return Ne.current.useRef(t)};B.useState=function(t){return Ne.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return Ne.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return Ne.current.useTransition()};B.version="18.3.1";Ed.exports=B;var O=Ed.exports;const Vm=xm(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=O,$m=Symbol.for("react.element"),Gm=Symbol.for("react.fragment"),Hm=Object.prototype.hasOwnProperty,bm=jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qm={key:!0,ref:!0,__self:!0,__source:!0};function Ad(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Hm.call(e,r)&&!Qm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$m,type:t,key:o,ref:s,props:i,_owner:bm.current}}Cs.Fragment=Gm;Cs.jsx=Ad;Cs.jsxs=Ad;_d.exports=Cs;var k=_d.exports,Nl={},Od={exports:{}},Ge={},Nd={exports:{}},kd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,M){var U=L.length;L.push(M);e:for(;0<U;){var oe=U-1>>>1,fe=L[oe];if(0<i(fe,M))L[oe]=M,L[U]=fe,U=oe;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var M=L[0],U=L.pop();if(U!==M){L[0]=U;e:for(var oe=0,fe=L.length,so=fe>>>1;oe<so;){var yn=2*(oe+1)-1,Xs=L[yn],_n=yn+1,lo=L[_n];if(0>i(Xs,U))_n<fe&&0>i(lo,Xs)?(L[oe]=lo,L[_n]=U,oe=_n):(L[oe]=Xs,L[yn]=U,oe=yn);else if(_n<fe&&0>i(lo,U))L[oe]=lo,L[_n]=U,oe=_n;else break e}}return M}function i(L,M){var U=L.sortIndex-M.sortIndex;return U!==0?U:L.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],c=[],f=1,d=null,h=3,v=!1,_=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(L){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=L)r(c),M.sortIndex=M.expirationTime,e(a,M);else break;M=n(c)}}function E(L){if(y=!1,m(L),!_)if(n(a)!==null)_=!0,qs(T);else{var M=n(c);M!==null&&Js(E,M.startTime-L)}}function T(L,M){_=!1,y&&(y=!1,g(A),A=-1),v=!0;var U=h;try{for(m(M),d=n(a);d!==null&&(!(d.expirationTime>M)||L&&!Be());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var fe=oe(d.expirationTime<=M);M=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(a)&&r(a),m(M)}else r(a);d=n(a)}if(d!==null)var so=!0;else{var yn=n(c);yn!==null&&Js(E,yn.startTime-M),so=!1}return so}finally{d=null,h=U,v=!1}}var x=!1,P=null,A=-1,$=5,N=-1;function Be(){return!(t.unstable_now()-N<$)}function Kr(){if(P!==null){var L=t.unstable_now();N=L;var M=!0;try{M=P(!0,L)}finally{M?Yr():(x=!1,P=null)}}else x=!1}var Yr;if(typeof p=="function")Yr=function(){p(Kr)};else if(typeof MessageChannel<"u"){var Cc=new MessageChannel,Sm=Cc.port2;Cc.port1.onmessage=Kr,Yr=function(){Sm.postMessage(null)}}else Yr=function(){S(Kr,0)};function qs(L){P=L,x||(x=!0,Yr())}function Js(L,M){A=S(function(){L(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,qs(T))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var U=h;h=M;try{return L()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,M){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var U=h;h=L;try{return M()}finally{h=U}},t.unstable_scheduleCallback=function(L,M,U){var oe=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?oe+U:oe):U=oe,L){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=U+fe,L={id:f++,callback:M,priorityLevel:L,startTime:U,expirationTime:fe,sortIndex:-1},U>oe?(L.sortIndex=U,e(c,L),n(a)===null&&L===n(c)&&(y?(g(A),A=-1):y=!0,Js(E,U-oe))):(L.sortIndex=fe,e(a,L),_||v||(_=!0,qs(T))),L},t.unstable_shouldYield=Be,t.unstable_wrapCallback=function(L){var M=h;return function(){var U=h;h=M;try{return L.apply(this,arguments)}finally{h=U}}}})(kd);Nd.exports=kd;var Km=Nd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=O,$e=Km;function w(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rd=new Set,Ii={};function jn(t,e){Er(t,e),Er(t+"Capture",e)}function Er(t,e){for(Ii[t]=e,t=0;t<e.length;t++)Rd.add(e[t])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=Object.prototype.hasOwnProperty,qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oc={},Nc={};function Jm(t){return kl.call(Nc,t)?!0:kl.call(Oc,t)?!1:qm.test(t)?Nc[t]=!0:(Oc[t]=!0,!1)}function Xm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Zm(t,e,n,r){if(e===null||typeof e>"u"||Xm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ke(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ee[t]=new ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ee[e]=new ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ee[t]=new ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ee[t]=new ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ee[t]=new ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ee[t]=new ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ee[t]=new ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ee[t]=new ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ee[t]=new ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yu=/[\-:]([a-z])/g;function qu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yu,qu);Ee[e]=new ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yu,qu);Ee[e]=new ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yu,qu);Ee[e]=new ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ee[t]=new ke(t,1,!1,t.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ee[t]=new ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ju(t,e,n,r){var i=Ee.hasOwnProperty(e)?Ee[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Zm(e,n,i,r)&&(n=null),r||i===null?Jm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vt=Ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ao=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),Xu=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),Md=Symbol.for("react.provider"),zd=Symbol.for("react.context"),Zu=Symbol.for("react.forward_ref"),Ml=Symbol.for("react.suspense"),zl=Symbol.for("react.suspense_list"),ea=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),Dd=Symbol.for("react.offscreen"),kc=Symbol.iterator;function Jr(t){return t===null||typeof t!="object"?null:(t=kc&&t[kc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,el;function li(t){if(el===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);el=e&&e[1]||""}return`
`+el+t}var tl=!1;function nl(t,e){if(!t||tl)return"";tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{tl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?li(t):""}function e0(t){switch(t.tag){case 5:return li(t.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 2:case 15:return t=nl(t.type,!1),t;case 11:return t=nl(t.type.render,!1),t;case 1:return t=nl(t.type,!0),t;default:return""}}function Dl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Xn:return"Portal";case Rl:return"Profiler";case Xu:return"StrictMode";case Ml:return"Suspense";case zl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zd:return(t.displayName||"Context")+".Consumer";case Md:return(t._context.displayName||"Context")+".Provider";case Zu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ea:return e=t.displayName||null,e!==null?e:Dl(t.type)||"Memo";case Gt:e=t._payload,t=t._init;try{return Dl(t(e))}catch{}}return null}function t0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dl(e);case 8:return e===Xu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function un(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function n0(t){var e=Fd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function co(t){t._valueTracker||(t._valueTracker=n0(t))}function Ud(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fl(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=un(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bd(t,e){e=e.checked,e!=null&&Ju(t,"checked",e,!1)}function Ul(t,e){Bd(t,e);var n=un(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bl(t,e.type,un(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bl(t,e,n){(e!=="number"||Ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ui=Array.isArray;function hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+un(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(w(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(w(92));if(ui(n)){if(1<n.length)throw Error(w(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:un(n)}}function Wd(t,e){var n=un(e.value),r=un(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fo,jd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r0=["Webkit","ms","Moz","O"];Object.keys(di).forEach(function(t){r0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),di[e]=di[t]})});function $d(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||di.hasOwnProperty(t)&&di[t]?(""+e).trim():e+"px"}function Gd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$d(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var i0=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jl(t,e){if(e){if(i0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(w(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(w(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(w(61))}if(e.style!=null&&typeof e.style!="object")throw Error(w(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function ta(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hl=null,pr=null,gr=null;function Fc(t){if(t=Ki(t)){if(typeof Hl!="function")throw Error(w(280));var e=t.stateNode;e&&(e=Ns(e),Hl(t.stateNode,t.type,e))}}function Hd(t){pr?gr?gr.push(t):gr=[t]:pr=t}function bd(){if(pr){var t=pr,e=gr;if(gr=pr=null,Fc(t),e)for(t=0;t<e.length;t++)Fc(e[t])}}function Qd(t,e){return t(e)}function Kd(){}var rl=!1;function Yd(t,e,n){if(rl)return t(e,n);rl=!0;try{return Qd(t,e,n)}finally{rl=!1,(pr!==null||gr!==null)&&(Kd(),bd())}}function Ci(t,e){var n=t.stateNode;if(n===null)return null;var r=Ns(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(w(231,e,typeof n));return n}var bl=!1;if(Rt)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){bl=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{bl=!1}function o0(t,e,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var hi=!1,Yo=null,qo=!1,Ql=null,s0={onError:function(t){hi=!0,Yo=t}};function l0(t,e,n,r,i,o,s,l,a){hi=!1,Yo=null,o0.apply(s0,arguments)}function u0(t,e,n,r,i,o,s,l,a){if(l0.apply(this,arguments),hi){if(hi){var c=Yo;hi=!1,Yo=null}else throw Error(w(198));qo||(qo=!0,Ql=c)}}function $n(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uc(t){if($n(t)!==t)throw Error(w(188))}function a0(t){var e=t.alternate;if(!e){if(e=$n(t),e===null)throw Error(w(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Uc(i),t;if(o===r)return Uc(i),e;o=o.sibling}throw Error(w(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(w(189))}}if(n.alternate!==r)throw Error(w(190))}if(n.tag!==3)throw Error(w(188));return n.stateNode.current===n?t:e}function Jd(t){return t=a0(t),t!==null?Xd(t):null}function Xd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xd(t);if(e!==null)return e;t=t.sibling}return null}var Zd=$e.unstable_scheduleCallback,Bc=$e.unstable_cancelCallback,c0=$e.unstable_shouldYield,f0=$e.unstable_requestPaint,se=$e.unstable_now,d0=$e.unstable_getCurrentPriorityLevel,na=$e.unstable_ImmediatePriority,eh=$e.unstable_UserBlockingPriority,Jo=$e.unstable_NormalPriority,h0=$e.unstable_LowPriority,th=$e.unstable_IdlePriority,Ps=null,_t=null;function p0(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ps,t,void 0,(t.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:v0,g0=Math.log,m0=Math.LN2;function v0(t){return t>>>=0,t===0?32:31-(g0(t)/m0|0)|0}var ho=64,po=4194304;function ai(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=ai(l):(o&=s,o!==0&&(r=ai(o)))}else s=n&~i,s!==0?r=ai(s):o!==0&&(r=ai(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ut(e),i=1<<n,r|=t[n],e&=~i;return r}function y0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ut(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=y0(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function Kl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nh(){var t=ho;return ho<<=1,!(ho&4194240)&&(ho=64),t}function il(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ut(e),t[e]=n}function E0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ut(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ra(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Q=0;function rh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ih,ia,oh,sh,lh,Yl=!1,go=[],Xt=null,Zt=null,en=null,Pi=new Map,Li=new Map,Qt=[],w0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wc(t,e){switch(t){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":Pi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(e.pointerId)}}function Zr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ki(e),e!==null&&ia(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function S0(t,e,n,r,i){switch(e){case"focusin":return Xt=Zr(Xt,t,e,n,r,i),!0;case"dragenter":return Zt=Zr(Zt,t,e,n,r,i),!0;case"mouseover":return en=Zr(en,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pi.set(o,Zr(Pi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Li.set(o,Zr(Li.get(o)||null,t,e,n,r,i)),!0}return!1}function uh(t){var e=In(t.target);if(e!==null){var n=$n(e);if(n!==null){if(e=n.tag,e===13){if(e=qd(n),e!==null){t.blockedOn=e,lh(t.priority,function(){oh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ko(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ql(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gl=r,n.target.dispatchEvent(r),Gl=null}else return e=Ki(n),e!==null&&ia(e),t.blockedOn=n,!1;e.shift()}return!0}function Vc(t,e,n){ko(t)&&n.delete(e)}function T0(){Yl=!1,Xt!==null&&ko(Xt)&&(Xt=null),Zt!==null&&ko(Zt)&&(Zt=null),en!==null&&ko(en)&&(en=null),Pi.forEach(Vc),Li.forEach(Vc)}function ei(t,e){t.blockedOn===e&&(t.blockedOn=null,Yl||(Yl=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,T0)))}function Ai(t){function e(i){return ei(i,t)}if(0<go.length){ei(go[0],t);for(var n=1;n<go.length;n++){var r=go[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xt!==null&&ei(Xt,t),Zt!==null&&ei(Zt,t),en!==null&&ei(en,t),Pi.forEach(e),Li.forEach(e),n=0;n<Qt.length;n++)r=Qt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qt.length&&(n=Qt[0],n.blockedOn===null);)uh(n),n.blockedOn===null&&Qt.shift()}var mr=Vt.ReactCurrentBatchConfig,Zo=!0;function I0(t,e,n,r){var i=Q,o=mr.transition;mr.transition=null;try{Q=1,oa(t,e,n,r)}finally{Q=i,mr.transition=o}}function x0(t,e,n,r){var i=Q,o=mr.transition;mr.transition=null;try{Q=4,oa(t,e,n,r)}finally{Q=i,mr.transition=o}}function oa(t,e,n,r){if(Zo){var i=ql(t,e,n,r);if(i===null)pl(t,e,r,es,n),Wc(t,r);else if(S0(i,t,e,n,r))r.stopPropagation();else if(Wc(t,r),e&4&&-1<w0.indexOf(t)){for(;i!==null;){var o=Ki(i);if(o!==null&&ih(o),o=ql(t,e,n,r),o===null&&pl(t,e,r,es,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else pl(t,e,r,null,n)}}var es=null;function ql(t,e,n,r){if(es=null,t=ta(r),t=In(t),t!==null)if(e=$n(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return es=t,null}function ah(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d0()){case na:return 1;case eh:return 4;case Jo:case h0:return 16;case th:return 536870912;default:return 16}default:return 16}}var Yt=null,sa=null,Ro=null;function ch(){if(Ro)return Ro;var t,e=sa,n=e.length,r,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Ro=i.slice(t,1<r?1-r:void 0)}function Mo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mo(){return!0}function jc(){return!1}function He(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mo:jc,this.isPropagationStopped=jc,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),e}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=He(Wr),Qi=re({},Wr,{view:0,detail:0}),C0=He(Qi),ol,sl,ti,Ls=re({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(ol=t.screenX-ti.screenX,sl=t.screenY-ti.screenY):sl=ol=0,ti=t),ol)},movementY:function(t){return"movementY"in t?t.movementY:sl}}),$c=He(Ls),P0=re({},Ls,{dataTransfer:0}),L0=He(P0),A0=re({},Qi,{relatedTarget:0}),ll=He(A0),O0=re({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),N0=He(O0),k0=re({},Wr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),R0=He(k0),M0=re({},Wr,{data:0}),Gc=He(M0),z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=F0[t])?!!e[t]:!1}function ua(){return U0}var B0=re({},Qi,{key:function(t){if(t.key){var e=z0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?D0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(t){return t.type==="keypress"?Mo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),W0=He(B0),V0=re({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hc=He(V0),j0=re({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),$0=He(j0),G0=re({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),H0=He(G0),b0=re({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q0=He(b0),K0=[9,13,27,32],aa=Rt&&"CompositionEvent"in window,pi=null;Rt&&"documentMode"in document&&(pi=document.documentMode);var Y0=Rt&&"TextEvent"in window&&!pi,fh=Rt&&(!aa||pi&&8<pi&&11>=pi),bc=" ",Qc=!1;function dh(t,e){switch(t){case"keyup":return K0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function q0(t,e){switch(t){case"compositionend":return hh(e);case"keypress":return e.which!==32?null:(Qc=!0,bc);case"textInput":return t=e.data,t===bc&&Qc?null:t;default:return null}}function J0(t,e){if(er)return t==="compositionend"||!aa&&dh(t,e)?(t=ch(),Ro=sa=Yt=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fh&&e.locale!=="ko"?null:e.data;default:return null}}var X0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X0[t.type]:e==="textarea"}function ph(t,e,n,r){Hd(r),e=ts(e,"onChange"),0<e.length&&(n=new la("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gi=null,Oi=null;function Z0(t){xh(t,0)}function As(t){var e=rr(t);if(Ud(e))return t}function ev(t,e){if(t==="change")return e}var gh=!1;if(Rt){var ul;if(Rt){var al="oninput"in document;if(!al){var Yc=document.createElement("div");Yc.setAttribute("oninput","return;"),al=typeof Yc.oninput=="function"}ul=al}else ul=!1;gh=ul&&(!document.documentMode||9<document.documentMode)}function qc(){gi&&(gi.detachEvent("onpropertychange",mh),Oi=gi=null)}function mh(t){if(t.propertyName==="value"&&As(Oi)){var e=[];ph(e,Oi,t,ta(t)),Yd(Z0,e)}}function tv(t,e,n){t==="focusin"?(qc(),gi=e,Oi=n,gi.attachEvent("onpropertychange",mh)):t==="focusout"&&qc()}function nv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return As(Oi)}function rv(t,e){if(t==="click")return As(e)}function iv(t,e){if(t==="input"||t==="change")return As(e)}function ov(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ft=typeof Object.is=="function"?Object.is:ov;function Ni(t,e){if(ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kl.call(e,i)||!ft(t[i],e[i]))return!1}return!0}function Jc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xc(t,e){var n=Jc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jc(n)}}function vh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yh(){for(var t=window,e=Ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ko(t.document)}return e}function ca(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sv(t){var e=yh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vh(n.ownerDocument.documentElement,n)){if(r!==null&&ca(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Xc(n,o);var s=Xc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lv=Rt&&"documentMode"in document&&11>=document.documentMode,tr=null,Jl=null,mi=null,Xl=!1;function Zc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xl||tr==null||tr!==Ko(r)||(r=tr,"selectionStart"in r&&ca(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mi&&Ni(mi,r)||(mi=r,r=ts(Jl,"onSelect"),0<r.length&&(e=new la("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tr)))}function vo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nr={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},cl={},_h={};Rt&&(_h=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function Os(t){if(cl[t])return cl[t];if(!nr[t])return t;var e=nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _h)return cl[t]=e[n];return t}var Eh=Os("animationend"),wh=Os("animationiteration"),Sh=Os("animationstart"),Th=Os("transitionend"),Ih=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(t,e){Ih.set(t,e),jn(e,[t])}for(var fl=0;fl<ef.length;fl++){var dl=ef[fl],uv=dl.toLowerCase(),av=dl[0].toUpperCase()+dl.slice(1);pn(uv,"on"+av)}pn(Eh,"onAnimationEnd");pn(wh,"onAnimationIteration");pn(Sh,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(Th,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ci));function tf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,u0(r,e,void 0,t),t.currentTarget=null}function xh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;tf(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;tf(i,l,c),o=a}}}if(qo)throw t=Ql,qo=!1,Ql=null,t}function Y(t,e){var n=e[ru];n===void 0&&(n=e[ru]=new Set);var r=t+"__bubble";n.has(r)||(Ch(e,t,2,!1),n.add(r))}function hl(t,e,n){var r=0;e&&(r|=4),Ch(n,t,r,e)}var yo="_reactListening"+Math.random().toString(36).slice(2);function ki(t){if(!t[yo]){t[yo]=!0,Rd.forEach(function(n){n!=="selectionchange"&&(cv.has(n)||hl(n,!1,t),hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yo]||(e[yo]=!0,hl("selectionchange",!1,e))}}function Ch(t,e,n,r){switch(ah(e)){case 1:var i=I0;break;case 4:i=x0;break;default:i=oa}n=i.bind(null,e,n,t),i=void 0,!bl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pl(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=In(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Yd(function(){var c=o,f=ta(n),d=[];e:{var h=Ih.get(t);if(h!==void 0){var v=la,_=t;switch(t){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":v=W0;break;case"focusin":_="focus",v=ll;break;case"focusout":_="blur",v=ll;break;case"beforeblur":case"afterblur":v=ll;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=L0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=$0;break;case Eh:case wh:case Sh:v=N0;break;case Th:v=H0;break;case"scroll":v=C0;break;case"wheel":v=Q0;break;case"copy":case"cut":case"paste":v=R0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Hc}var y=(e&4)!==0,S=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=c,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,g!==null&&(E=Ci(p,g),E!=null&&y.push(Ri(p,E,m)))),S)break;p=p.return}0<y.length&&(h=new v(h,_,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==Gl&&(_=n.relatedTarget||n.fromElement)&&(In(_)||_[Mt]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?In(_):null,_!==null&&(S=$n(_),_!==S||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(y=$c,E="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Hc,E="onPointerLeave",g="onPointerEnter",p="pointer"),S=v==null?h:rr(v),m=_==null?h:rr(_),h=new y(E,p+"leave",v,n,f),h.target=S,h.relatedTarget=m,E=null,In(f)===c&&(y=new y(g,p+"enter",_,n,f),y.target=m,y.relatedTarget=S,E=y),S=E,v&&_)t:{for(y=v,g=_,p=0,m=y;m;m=Kn(m))p++;for(m=0,E=g;E;E=Kn(E))m++;for(;0<p-m;)y=Kn(y),p--;for(;0<m-p;)g=Kn(g),m--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Kn(y),g=Kn(g)}y=null}else y=null;v!==null&&nf(d,h,v,y,!1),_!==null&&S!==null&&nf(d,S,_,y,!0)}}e:{if(h=c?rr(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var T=ev;else if(Kc(h))if(gh)T=iv;else{T=nv;var x=tv}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=rv);if(T&&(T=T(t,c))){ph(d,T,n,f);break e}x&&x(t,h,c),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&Bl(h,"number",h.value)}switch(x=c?rr(c):window,t){case"focusin":(Kc(x)||x.contentEditable==="true")&&(tr=x,Jl=c,mi=null);break;case"focusout":mi=Jl=tr=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,Zc(d,n,f);break;case"selectionchange":if(lv)break;case"keydown":case"keyup":Zc(d,n,f)}var P;if(aa)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else er?dh(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(fh&&n.locale!=="ko"&&(er||A!=="onCompositionStart"?A==="onCompositionEnd"&&er&&(P=ch()):(Yt=f,sa="value"in Yt?Yt.value:Yt.textContent,er=!0)),x=ts(c,A),0<x.length&&(A=new Gc(A,t,null,n,f),d.push({event:A,listeners:x}),P?A.data=P:(P=hh(n),P!==null&&(A.data=P)))),(P=Y0?q0(t,n):J0(t,n))&&(c=ts(c,"onBeforeInput"),0<c.length&&(f=new Gc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=P))}xh(d,e)})}function Ri(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ts(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ci(t,n),o!=null&&r.unshift(Ri(t,o,i)),o=Ci(t,e),o!=null&&r.push(Ri(t,o,i))),t=t.return}return r}function Kn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nf(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Ci(n,o),a!=null&&s.unshift(Ri(n,a,l))):i||(a=Ci(n,o),a!=null&&s.push(Ri(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var fv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function rf(t){return(typeof t=="string"?t:""+t).replace(fv,`
`).replace(dv,"")}function _o(t,e,n){if(e=rf(e),rf(t)!==e&&n)throw Error(w(425))}function ns(){}var Zl=null,eu=null;function tu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,hv=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,pv=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(t){return of.resolve(null).then(t).catch(gv)}:nu;function gv(t){setTimeout(function(){throw t})}function gl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ai(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ai(e)}function tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),gt="__reactFiber$"+Vr,Mi="__reactProps$"+Vr,Mt="__reactContainer$"+Vr,ru="__reactEvents$"+Vr,mv="__reactListeners$"+Vr,vv="__reactHandles$"+Vr;function In(t){var e=t[gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mt]||n[gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sf(t);t!==null;){if(n=t[gt])return n;t=sf(t)}return e}t=n,n=t.parentNode}return null}function Ki(t){return t=t[gt]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(w(33))}function Ns(t){return t[Mi]||null}var iu=[],ir=-1;function gn(t){return{current:t}}function X(t){0>ir||(t.current=iu[ir],iu[ir]=null,ir--)}function K(t,e){ir++,iu[ir]=t.current,t.current=e}var an={},Ce=gn(an),ze=gn(!1),On=an;function wr(t,e){var n=t.type.contextTypes;if(!n)return an;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function De(t){return t=t.childContextTypes,t!=null}function rs(){X(ze),X(Ce)}function lf(t,e,n){if(Ce.current!==an)throw Error(w(168));K(Ce,e),K(ze,n)}function Ph(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(w(108,t0(t)||"Unknown",i));return re({},n,r)}function is(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,On=Ce.current,K(Ce,t),K(ze,ze.current),!0}function uf(t,e,n){var r=t.stateNode;if(!r)throw Error(w(169));n?(t=Ph(t,e,On),r.__reactInternalMemoizedMergedChildContext=t,X(ze),X(Ce),K(Ce,t)):X(ze),K(ze,n)}var Pt=null,ks=!1,ml=!1;function Lh(t){Pt===null?Pt=[t]:Pt.push(t)}function yv(t){ks=!0,Lh(t)}function mn(){if(!ml&&Pt!==null){ml=!0;var t=0,e=Q;try{var n=Pt;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pt=null,ks=!1}catch(i){throw Pt!==null&&(Pt=Pt.slice(t+1)),Zd(na,mn),i}finally{Q=e,ml=!1}}return null}var or=[],sr=0,os=null,ss=0,be=[],Qe=0,Nn=null,At=1,Ot="";function wn(t,e){or[sr++]=ss,or[sr++]=os,os=t,ss=e}function Ah(t,e,n){be[Qe++]=At,be[Qe++]=Ot,be[Qe++]=Nn,Nn=t;var r=At;t=Ot;var i=32-ut(r)-1;r&=~(1<<i),n+=1;var o=32-ut(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,At=1<<32-ut(e)+i|n<<i|r,Ot=o+t}else At=1<<o|n<<i|r,Ot=t}function fa(t){t.return!==null&&(wn(t,1),Ah(t,1,0))}function da(t){for(;t===os;)os=or[--sr],or[sr]=null,ss=or[--sr],or[sr]=null;for(;t===Nn;)Nn=be[--Qe],be[Qe]=null,Ot=be[--Qe],be[Qe]=null,At=be[--Qe],be[Qe]=null}var je=null,Ve=null,Z=!1,rt=null;function Oh(t,e){var n=Ke(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function af(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,je=t,Ve=tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,je=t,Ve=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Nn!==null?{id:At,overflow:Ot}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ke(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,je=t,Ve=null,!0):!1;default:return!1}}function ou(t){return(t.mode&1)!==0&&(t.flags&128)===0}function su(t){if(Z){var e=Ve;if(e){var n=e;if(!af(t,e)){if(ou(t))throw Error(w(418));e=tn(n.nextSibling);var r=je;e&&af(t,e)?Oh(r,n):(t.flags=t.flags&-4097|2,Z=!1,je=t)}}else{if(ou(t))throw Error(w(418));t.flags=t.flags&-4097|2,Z=!1,je=t}}}function cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;je=t}function Eo(t){if(t!==je)return!1;if(!Z)return cf(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tu(t.type,t.memoizedProps)),e&&(e=Ve)){if(ou(t))throw Nh(),Error(w(418));for(;e;)Oh(t,e),e=tn(e.nextSibling)}if(cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ve=tn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ve=null}}else Ve=je?tn(t.stateNode.nextSibling):null;return!0}function Nh(){for(var t=Ve;t;)t=tn(t.nextSibling)}function Sr(){Ve=je=null,Z=!1}function ha(t){rt===null?rt=[t]:rt.push(t)}var _v=Vt.ReactCurrentBatchConfig;function ni(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(w(309));var r=n.stateNode}if(!r)throw Error(w(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(w(284));if(!n._owner)throw Error(w(290,t))}return t}function wo(t,e){throw t=Object.prototype.toString.call(e),Error(w(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ff(t){var e=t._init;return e(t._payload)}function kh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=sn(g,p),g.index=0,g.sibling=null,g}function o(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,E){return p===null||p.tag!==6?(p=Tl(m,g.mode,E),p.return=g,p):(p=i(p,m),p.return=g,p)}function a(g,p,m,E){var T=m.type;return T===Zn?f(g,p,m.props.children,E,m.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Gt&&ff(T)===p.type)?(E=i(p,m.props),E.ref=ni(g,p,m),E.return=g,E):(E=Vo(m.type,m.key,m.props,null,g.mode,E),E.ref=ni(g,p,m),E.return=g,E)}function c(g,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Il(m,g.mode,E),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,E,T){return p===null||p.tag!==7?(p=An(m,g.mode,E,T),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Tl(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ao:return m=Vo(p.type,p.key,p.props,null,g.mode,m),m.ref=ni(g,null,p),m.return=g,m;case Xn:return p=Il(p,g.mode,m),p.return=g,p;case Gt:var E=p._init;return d(g,E(p._payload),m)}if(ui(p)||Jr(p))return p=An(p,g.mode,m,null),p.return=g,p;wo(g,p)}return null}function h(g,p,m,E){var T=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return T!==null?null:l(g,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ao:return m.key===T?a(g,p,m,E):null;case Xn:return m.key===T?c(g,p,m,E):null;case Gt:return T=m._init,h(g,p,T(m._payload),E)}if(ui(m)||Jr(m))return T!==null?null:f(g,p,m,E,null);wo(g,m)}return null}function v(g,p,m,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(m)||null,l(p,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ao:return g=g.get(E.key===null?m:E.key)||null,a(p,g,E,T);case Xn:return g=g.get(E.key===null?m:E.key)||null,c(p,g,E,T);case Gt:var x=E._init;return v(g,p,m,x(E._payload),T)}if(ui(E)||Jr(E))return g=g.get(m)||null,f(p,g,E,T,null);wo(p,E)}return null}function _(g,p,m,E){for(var T=null,x=null,P=p,A=p=0,$=null;P!==null&&A<m.length;A++){P.index>A?($=P,P=null):$=P.sibling;var N=h(g,P,m[A],E);if(N===null){P===null&&(P=$);break}t&&P&&N.alternate===null&&e(g,P),p=o(N,p,A),x===null?T=N:x.sibling=N,x=N,P=$}if(A===m.length)return n(g,P),Z&&wn(g,A),T;if(P===null){for(;A<m.length;A++)P=d(g,m[A],E),P!==null&&(p=o(P,p,A),x===null?T=P:x.sibling=P,x=P);return Z&&wn(g,A),T}for(P=r(g,P);A<m.length;A++)$=v(P,g,A,m[A],E),$!==null&&(t&&$.alternate!==null&&P.delete($.key===null?A:$.key),p=o($,p,A),x===null?T=$:x.sibling=$,x=$);return t&&P.forEach(function(Be){return e(g,Be)}),Z&&wn(g,A),T}function y(g,p,m,E){var T=Jr(m);if(typeof T!="function")throw Error(w(150));if(m=T.call(m),m==null)throw Error(w(151));for(var x=T=null,P=p,A=p=0,$=null,N=m.next();P!==null&&!N.done;A++,N=m.next()){P.index>A?($=P,P=null):$=P.sibling;var Be=h(g,P,N.value,E);if(Be===null){P===null&&(P=$);break}t&&P&&Be.alternate===null&&e(g,P),p=o(Be,p,A),x===null?T=Be:x.sibling=Be,x=Be,P=$}if(N.done)return n(g,P),Z&&wn(g,A),T;if(P===null){for(;!N.done;A++,N=m.next())N=d(g,N.value,E),N!==null&&(p=o(N,p,A),x===null?T=N:x.sibling=N,x=N);return Z&&wn(g,A),T}for(P=r(g,P);!N.done;A++,N=m.next())N=v(P,g,A,N.value,E),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?A:N.key),p=o(N,p,A),x===null?T=N:x.sibling=N,x=N);return t&&P.forEach(function(Kr){return e(g,Kr)}),Z&&wn(g,A),T}function S(g,p,m,E){if(typeof m=="object"&&m!==null&&m.type===Zn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ao:e:{for(var T=m.key,x=p;x!==null;){if(x.key===T){if(T=m.type,T===Zn){if(x.tag===7){n(g,x.sibling),p=i(x,m.props.children),p.return=g,g=p;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Gt&&ff(T)===x.type){n(g,x.sibling),p=i(x,m.props),p.ref=ni(g,x,m),p.return=g,g=p;break e}n(g,x);break}else e(g,x);x=x.sibling}m.type===Zn?(p=An(m.props.children,g.mode,E,m.key),p.return=g,g=p):(E=Vo(m.type,m.key,m.props,null,g.mode,E),E.ref=ni(g,p,m),E.return=g,g=E)}return s(g);case Xn:e:{for(x=m.key;p!==null;){if(p.key===x)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Il(m,g.mode,E),p.return=g,g=p}return s(g);case Gt:return x=m._init,S(g,p,x(m._payload),E)}if(ui(m))return _(g,p,m,E);if(Jr(m))return y(g,p,m,E);wo(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=Tl(m,g.mode,E),p.return=g,g=p),s(g)):n(g,p)}return S}var Tr=kh(!0),Rh=kh(!1),ls=gn(null),us=null,lr=null,pa=null;function ga(){pa=lr=us=null}function ma(t){var e=ls.current;X(ls),t._currentValue=e}function lu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vr(t,e){us=t,pa=lr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Me=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(pa!==t)if(t={context:t,memoizedValue:e,next:null},lr===null){if(us===null)throw Error(w(308));lr=t,us.dependencies={lanes:0,firstContext:t}}else lr=lr.next=t;return e}var xn=null;function va(t){xn===null?xn=[t]:xn.push(t)}function Mh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,va(e)):(n.next=i.next,i.next=n),e.interleaved=n,zt(t,r)}function zt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ht=!1;function ya(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,j&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zt(t,n)}return i=r.interleaved,i===null?(e.next=e,va(r)):(e.next=i.next,i.next=e),r.interleaved=e,zt(t,n)}function zo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ra(t,n)}}function df(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function as(t,e,n,r){var i=t.updateQueue;Ht=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,f=c=a=null,l=o;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,v=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(v,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(v,d,h):_,h==null)break e;d=re({},d,h);break e;case 2:Ht=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,a=d):f=f.next=v,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Rn|=s,t.lanes=s,t.memoizedState=d}}function hf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(w(191,i));i.call(r)}}}var Yi={},Et=gn(Yi),zi=gn(Yi),Di=gn(Yi);function Cn(t){if(t===Yi)throw Error(w(174));return t}function _a(t,e){switch(K(Di,e),K(zi,t),K(Et,Yi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vl(e,t)}X(Et),K(Et,e)}function Ir(){X(Et),X(zi),X(Di)}function Dh(t){Cn(Di.current);var e=Cn(Et.current),n=Vl(e,t.type);e!==n&&(K(zi,t),K(Et,n))}function Ea(t){zi.current===t&&(X(Et),X(zi))}var ee=gn(0);function cs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vl=[];function wa(){for(var t=0;t<vl.length;t++)vl[t]._workInProgressVersionPrimary=null;vl.length=0}var Do=Vt.ReactCurrentDispatcher,yl=Vt.ReactCurrentBatchConfig,kn=0,ne=null,ae=null,he=null,fs=!1,vi=!1,Fi=0,Ev=0;function we(){throw Error(w(321))}function Sa(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ft(t[n],e[n]))return!1;return!0}function Ta(t,e,n,r,i,o){if(kn=o,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Do.current=t===null||t.memoizedState===null?Iv:xv,t=n(r,i),vi){o=0;do{if(vi=!1,Fi=0,25<=o)throw Error(w(301));o+=1,he=ae=null,e.updateQueue=null,Do.current=Cv,t=n(r,i)}while(vi)}if(Do.current=ds,e=ae!==null&&ae.next!==null,kn=0,he=ae=ne=null,fs=!1,e)throw Error(w(300));return t}function Ia(){var t=Fi!==0;return Fi=0,t}function ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?ne.memoizedState=he=t:he=he.next=t,he}function Je(){if(ae===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=he===null?ne.memoizedState:he.next;if(e!==null)he=e,ae=t;else{if(t===null)throw Error(w(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},he===null?ne.memoizedState=he=t:he=he.next=t}return he}function Ui(t,e){return typeof e=="function"?e(t):e}function _l(t){var e=Je(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var r=ae,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var f=c.lane;if((kn&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,ne.lanes|=f,Rn|=f}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,ft(r,e.memoizedState)||(Me=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ne.lanes|=o,Rn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function El(t){var e=Je(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);ft(o,e.memoizedState)||(Me=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Fh(){}function Uh(t,e){var n=ne,r=Je(),i=e(),o=!ft(r.memoizedState,i);if(o&&(r.memoizedState=i,Me=!0),r=r.queue,xa(Vh.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Bi(9,Wh.bind(null,n,r,i,e),void 0,null),pe===null)throw Error(w(349));kn&30||Bh(n,e,i)}return i}function Bh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wh(t,e,n,r){e.value=n,e.getSnapshot=r,jh(e)&&$h(t)}function Vh(t,e,n){return n(function(){jh(e)&&$h(t)})}function jh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ft(t,n)}catch{return!0}}function $h(t){var e=zt(t,1);e!==null&&at(e,t,1,-1)}function pf(t){var e=ht();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},e.queue=t,t=t.dispatch=Tv.bind(null,ne,t),[e.memoizedState,t]}function Bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gh(){return Je().memoizedState}function Fo(t,e,n,r){var i=ht();ne.flags|=t,i.memoizedState=Bi(1|e,n,void 0,r===void 0?null:r)}function Rs(t,e,n,r){var i=Je();r=r===void 0?null:r;var o=void 0;if(ae!==null){var s=ae.memoizedState;if(o=s.destroy,r!==null&&Sa(r,s.deps)){i.memoizedState=Bi(e,n,o,r);return}}ne.flags|=t,i.memoizedState=Bi(1|e,n,o,r)}function gf(t,e){return Fo(8390656,8,t,e)}function xa(t,e){return Rs(2048,8,t,e)}function Hh(t,e){return Rs(4,2,t,e)}function bh(t,e){return Rs(4,4,t,e)}function Qh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kh(t,e,n){return n=n!=null?n.concat([t]):null,Rs(4,4,Qh.bind(null,e,t),n)}function Ca(){}function Yh(t,e){var n=Je();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qh(t,e){var n=Je();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jh(t,e,n){return kn&21?(ft(n,e)||(n=nh(),ne.lanes|=n,Rn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Me=!0),t.memoizedState=n)}function wv(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=yl.transition;yl.transition={};try{t(!1),e()}finally{Q=n,yl.transition=r}}function Xh(){return Je().memoizedState}function Sv(t,e,n){var r=on(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zh(t))ep(e,n);else if(n=Mh(t,e,n,r),n!==null){var i=Oe();at(n,t,r,i),tp(n,e,r)}}function Tv(t,e,n){var r=on(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zh(t))ep(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,ft(l,s)){var a=e.interleaved;a===null?(i.next=i,va(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Mh(t,e,i,r),n!==null&&(i=Oe(),at(n,t,r,i),tp(n,e,r))}}function Zh(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function ep(t,e){vi=fs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ra(t,n)}}var ds={readContext:qe,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},Iv={readContext:qe,useCallback:function(t,e){return ht().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:gf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fo(4194308,4,Qh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fo(4,2,t,e)},useMemo:function(t,e){var n=ht();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ht();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sv.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=ht();return t={current:t},e.memoizedState=t},useState:pf,useDebugValue:Ca,useDeferredValue:function(t){return ht().memoizedState=t},useTransition:function(){var t=pf(!1),e=t[0];return t=wv.bind(null,t[1]),ht().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=ht();if(Z){if(n===void 0)throw Error(w(407));n=n()}else{if(n=e(),pe===null)throw Error(w(349));kn&30||Bh(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,gf(Vh.bind(null,r,o,t),[t]),r.flags|=2048,Bi(9,Wh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ht(),e=pe.identifierPrefix;if(Z){var n=Ot,r=At;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ev++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xv={readContext:qe,useCallback:Yh,useContext:qe,useEffect:xa,useImperativeHandle:Kh,useInsertionEffect:Hh,useLayoutEffect:bh,useMemo:qh,useReducer:_l,useRef:Gh,useState:function(){return _l(Ui)},useDebugValue:Ca,useDeferredValue:function(t){var e=Je();return Jh(e,ae.memoizedState,t)},useTransition:function(){var t=_l(Ui)[0],e=Je().memoizedState;return[t,e]},useMutableSource:Fh,useSyncExternalStore:Uh,useId:Xh,unstable_isNewReconciler:!1},Cv={readContext:qe,useCallback:Yh,useContext:qe,useEffect:xa,useImperativeHandle:Kh,useInsertionEffect:Hh,useLayoutEffect:bh,useMemo:qh,useReducer:El,useRef:Gh,useState:function(){return El(Ui)},useDebugValue:Ca,useDeferredValue:function(t){var e=Je();return ae===null?e.memoizedState=t:Jh(e,ae.memoizedState,t)},useTransition:function(){var t=El(Ui)[0],e=Je().memoizedState;return[t,e]},useMutableSource:Fh,useSyncExternalStore:Uh,useId:Xh,unstable_isNewReconciler:!1};function et(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ms={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Oe(),i=on(t),o=Nt(r,i);o.payload=e,n!=null&&(o.callback=n),e=nn(t,o,i),e!==null&&(at(e,t,i,r),zo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Oe(),i=on(t),o=Nt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=nn(t,o,i),e!==null&&(at(e,t,i,r),zo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Oe(),r=on(t),i=Nt(n,r);i.tag=2,e!=null&&(i.callback=e),e=nn(t,i,r),e!==null&&(at(e,t,r,n),zo(e,t,r))}};function mf(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ni(n,r)||!Ni(i,o):!0}function np(t,e,n){var r=!1,i=an,o=e.contextType;return typeof o=="object"&&o!==null?o=qe(o):(i=De(e)?On:Ce.current,r=e.contextTypes,o=(r=r!=null)?wr(t,i):an),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ms,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function vf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ms.enqueueReplaceState(e,e.state,null)}function au(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ya(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=qe(o):(o=De(e)?On:Ce.current,i.context=wr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(uu(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ms.enqueueReplaceState(i,i.state,null),as(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xr(t,e){try{var n="",r=e;do n+=e0(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function wl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Pv=typeof WeakMap=="function"?WeakMap:Map;function rp(t,e,n){n=Nt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ps||(ps=!0,Eu=r),cu(t,e)},n}function ip(t,e,n){n=Nt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cu(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){cu(t,e),typeof r!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function yf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Pv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Vv.bind(null,t,e,n),e.then(t,t))}function _f(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ef(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nt(-1,1),e.tag=2,nn(n,e,1))),n.lanes|=1),t)}var Lv=Vt.ReactCurrentOwner,Me=!1;function Le(t,e,n,r){e.child=t===null?Rh(e,null,n,r):Tr(e,t.child,n,r)}function wf(t,e,n,r,i){n=n.render;var o=e.ref;return vr(e,i),r=Ta(t,e,n,r,o,i),n=Ia(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dt(t,e,i)):(Z&&n&&fa(e),e.flags|=1,Le(t,e,r,i),e.child)}function Sf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Ma(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,op(t,e,o,r,i)):(t=Vo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(s,r)&&t.ref===e.ref)return Dt(t,e,i)}return e.flags|=1,t=sn(o,r),t.ref=e.ref,t.return=e,e.child=t}function op(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ni(o,r)&&t.ref===e.ref)if(Me=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,Dt(t,e,i)}return fu(t,e,n,r,i)}function sp(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(ar,We),We|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,K(ar,We),We|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,K(ar,We),We|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,K(ar,We),We|=r;return Le(t,e,i,n),e.child}function lp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fu(t,e,n,r,i){var o=De(n)?On:Ce.current;return o=wr(e,o),vr(e,i),n=Ta(t,e,n,r,o,i),r=Ia(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dt(t,e,i)):(Z&&r&&fa(e),e.flags|=1,Le(t,e,n,i),e.child)}function Tf(t,e,n,r,i){if(De(n)){var o=!0;is(e)}else o=!1;if(vr(e,i),e.stateNode===null)Uo(t,e),np(e,n,r),au(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=qe(c):(c=De(n)?On:Ce.current,c=wr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&vf(e,s,r,c),Ht=!1;var h=e.memoizedState;s.state=h,as(e,r,s,i),a=e.memoizedState,l!==r||h!==a||ze.current||Ht?(typeof f=="function"&&(uu(e,n,f,r),a=e.memoizedState),(l=Ht||mf(e,n,l,r,h,a,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,zh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:et(e.type,l),s.props=c,d=e.pendingProps,h=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=qe(a):(a=De(n)?On:Ce.current,a=wr(e,a));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==a)&&vf(e,s,r,a),Ht=!1,h=e.memoizedState,s.state=h,as(e,r,s,i);var _=e.memoizedState;l!==d||h!==_||ze.current||Ht?(typeof v=="function"&&(uu(e,n,v,r),_=e.memoizedState),(c=Ht||mf(e,n,c,r,h,_,a)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return du(t,e,n,r,o,i)}function du(t,e,n,r,i,o){lp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&uf(e,n,!1),Dt(t,e,o);r=e.stateNode,Lv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Tr(e,t.child,null,o),e.child=Tr(e,null,l,o)):Le(t,e,l,o),e.memoizedState=r.state,i&&uf(e,n,!0),e.child}function up(t){var e=t.stateNode;e.pendingContext?lf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lf(t,e.context,!1),_a(t,e.containerInfo)}function If(t,e,n,r,i){return Sr(),ha(i),e.flags|=256,Le(t,e,n,r),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function ap(t,e,n){var r=e.pendingProps,i=ee.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),K(ee,i&1),t===null)return su(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Fs(s,r,0,null),t=An(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=pu(n),e.memoizedState=hu,t):Pa(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Av(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=sn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=sn(l,o):(o=An(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?pu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=hu,r}return o=t.child,t=o.sibling,r=sn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pa(t,e){return e=Fs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function So(t,e,n,r){return r!==null&&ha(r),Tr(e,t.child,null,n),t=Pa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Av(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=wl(Error(w(422))),So(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Fs({mode:"visible",children:r.children},i,0,null),o=An(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Tr(e,t.child,null,s),e.child.memoizedState=pu(s),e.memoizedState=hu,o);if(!(e.mode&1))return So(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(w(419)),r=wl(o,r,void 0),So(t,e,s,r)}if(l=(s&t.childLanes)!==0,Me||l){if(r=pe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,zt(t,i),at(r,t,i,-1))}return Ra(),r=wl(Error(w(421))),So(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jv.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ve=tn(i.nextSibling),je=e,Z=!0,rt=null,t!==null&&(be[Qe++]=At,be[Qe++]=Ot,be[Qe++]=Nn,At=t.id,Ot=t.overflow,Nn=e),e=Pa(e,r.children),e.flags|=4096,e)}function xf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lu(t.return,e,n)}function Sl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function cp(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Le(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xf(t,n,e);else if(t.tag===19)xf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(K(ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&cs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&cs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sl(e,!0,n,null,o);break;case"together":Sl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(w(153));if(e.child!==null){for(t=e.child,n=sn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ov(t,e,n){switch(e.tag){case 3:up(e),Sr();break;case 5:Dh(e);break;case 1:De(e.type)&&is(e);break;case 4:_a(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;K(ls,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(K(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?ap(t,e,n):(K(ee,ee.current&1),t=Dt(t,e,n),t!==null?t.sibling:null);K(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,sp(t,e,n)}return Dt(t,e,n)}var fp,gu,dp,hp;fp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gu=function(){};dp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Cn(Et.current);var o=null;switch(n){case"input":i=Fl(t,i),r=Fl(t,r),o=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),o=[];break;case"textarea":i=Wl(t,i),r=Wl(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ns)}jl(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ii.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ii.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Y("scroll",t),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};hp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ri(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Se(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Nv(t,e,n){var r=e.pendingProps;switch(da(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(e),null;case 1:return De(e.type)&&rs(),Se(e),null;case 3:return r=e.stateNode,Ir(),X(ze),X(Ce),wa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rt!==null&&(Tu(rt),rt=null))),gu(t,e),Se(e),null;case 5:Ea(e);var i=Cn(Di.current);if(n=e.type,t!==null&&e.stateNode!=null)dp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(w(166));return Se(e),null}if(t=Cn(Et.current),Eo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[gt]=e,r[Mi]=o,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<ci.length;i++)Y(ci[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Rc(r,o),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Y("invalid",r);break;case"textarea":zc(r,o),Y("invalid",r)}jl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&_o(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&_o(r.textContent,l,t),i=["children",""+l]):Ii.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Y("scroll",r)}switch(n){case"input":co(r),Mc(r,o,!0);break;case"textarea":co(r),Dc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ns)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[gt]=e,t[Mi]=r,fp(t,e,!1,!1),e.stateNode=t;e:{switch(s=$l(n,r),n){case"dialog":Y("cancel",t),Y("close",t),i=r;break;case"iframe":case"object":case"embed":Y("load",t),i=r;break;case"video":case"audio":for(i=0;i<ci.length;i++)Y(ci[i],t);i=r;break;case"source":Y("error",t),i=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),i=r;break;case"details":Y("toggle",t),i=r;break;case"input":Rc(t,r),i=Fl(t,r),Y("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),Y("invalid",t);break;case"textarea":zc(t,r),i=Wl(t,r),Y("invalid",t);break;default:i=r}jl(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Gd(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&jd(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&xi(t,a):typeof a=="number"&&xi(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ii.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Y("scroll",t):a!=null&&Ju(t,o,a,s))}switch(n){case"input":co(t),Mc(t,r,!1);break;case"textarea":co(t),Dc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+un(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?hr(t,!!r.multiple,o,!1):r.defaultValue!=null&&hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ns)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Se(e),null;case 6:if(t&&e.stateNode!=null)hp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(w(166));if(n=Cn(Di.current),Cn(Et.current),Eo(e)){if(r=e.stateNode,n=e.memoizedProps,r[gt]=e,(o=r.nodeValue!==n)&&(t=je,t!==null))switch(t.tag){case 3:_o(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_o(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gt]=e,e.stateNode=r}return Se(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Ve!==null&&e.mode&1&&!(e.flags&128))Nh(),Sr(),e.flags|=98560,o=!1;else if(o=Eo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(w(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(w(317));o[gt]=e}else Sr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Se(e),o=!1}else rt!==null&&(Tu(rt),rt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?ce===0&&(ce=3):Ra())),e.updateQueue!==null&&(e.flags|=4),Se(e),null);case 4:return Ir(),gu(t,e),t===null&&ki(e.stateNode.containerInfo),Se(e),null;case 10:return ma(e.type._context),Se(e),null;case 17:return De(e.type)&&rs(),Se(e),null;case 19:if(X(ee),o=e.memoizedState,o===null)return Se(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ri(o,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=cs(t),s!==null){for(e.flags|=128,ri(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return K(ee,ee.current&1|2),e.child}t=t.sibling}o.tail!==null&&se()>Cr&&(e.flags|=128,r=!0,ri(o,!1),e.lanes=4194304)}else{if(!r)if(t=cs(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ri(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Z)return Se(e),null}else 2*se()-o.renderingStartTime>Cr&&n!==1073741824&&(e.flags|=128,r=!0,ri(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=se(),e.sibling=null,n=ee.current,K(ee,r?n&1|2:n&1),e):(Se(e),null);case 22:case 23:return ka(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?We&1073741824&&(Se(e),e.subtreeFlags&6&&(e.flags|=8192)):Se(e),null;case 24:return null;case 25:return null}throw Error(w(156,e.tag))}function kv(t,e){switch(da(e),e.tag){case 1:return De(e.type)&&rs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ir(),X(ze),X(Ce),wa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ea(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(w(340));Sr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return Ir(),null;case 10:return ma(e.type._context),null;case 22:case 23:return ka(),null;case 24:return null;default:return null}}var To=!1,Ie=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,C=null;function ur(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(t,e,r)}else n.current=null}function mu(t,e,n){try{n()}catch(r){ie(t,e,r)}}var Cf=!1;function Mv(t,e){if(Zl=Zo,t=yh(),ca(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(a=s),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(eu={focusedElem:t,selectionRange:n},Zo=!1,C=e;C!==null;)if(e=C,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,C=t;else for(;C!==null;){e=C;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,S=_.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:et(e.type,y),S);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(w(163))}}catch(E){ie(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,C=t;break}C=e.return}return _=Cf,Cf=!1,_}function yi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&mu(e,n,o)}i=i.next}while(i!==r)}}function zs(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pp(t){var e=t.alternate;e!==null&&(t.alternate=null,pp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gt],delete e[Mi],delete e[ru],delete e[mv],delete e[vv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gp(t){return t.tag===5||t.tag===3||t.tag===4}function Pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ns));else if(r!==4&&(t=t.child,t!==null))for(yu(t,e,n),t=t.sibling;t!==null;)yu(t,e,n),t=t.sibling}function _u(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_u(t,e,n),t=t.sibling;t!==null;)_u(t,e,n),t=t.sibling}var me=null,tt=!1;function $t(t,e,n){for(n=n.child;n!==null;)mp(t,e,n),n=n.sibling}function mp(t,e,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ps,n)}catch{}switch(n.tag){case 5:Ie||ur(n,e);case 6:var r=me,i=tt;me=null,$t(t,e,n),me=r,tt=i,me!==null&&(tt?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(tt?(t=me,n=n.stateNode,t.nodeType===8?gl(t.parentNode,n):t.nodeType===1&&gl(t,n),Ai(t)):gl(me,n.stateNode));break;case 4:r=me,i=tt,me=n.stateNode.containerInfo,tt=!0,$t(t,e,n),me=r,tt=i;break;case 0:case 11:case 14:case 15:if(!Ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&mu(n,e,s),i=i.next}while(i!==r)}$t(t,e,n);break;case 1:if(!Ie&&(ur(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ie(n,e,l)}$t(t,e,n);break;case 21:$t(t,e,n);break;case 22:n.mode&1?(Ie=(r=Ie)||n.memoizedState!==null,$t(t,e,n),Ie=r):$t(t,e,n);break;default:$t(t,e,n)}}function Lf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Rv),e.forEach(function(r){var i=$v.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ze(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,tt=!1;break e;case 3:me=l.stateNode.containerInfo,tt=!0;break e;case 4:me=l.stateNode.containerInfo,tt=!0;break e}l=l.return}if(me===null)throw Error(w(160));mp(o,s,i),me=null,tt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){ie(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vp(e,t),e=e.sibling}function vp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ze(e,t),dt(t),r&4){try{yi(3,t,t.return),zs(3,t)}catch(y){ie(t,t.return,y)}try{yi(5,t,t.return)}catch(y){ie(t,t.return,y)}}break;case 1:Ze(e,t),dt(t),r&512&&n!==null&&ur(n,n.return);break;case 5:if(Ze(e,t),dt(t),r&512&&n!==null&&ur(n,n.return),t.flags&32){var i=t.stateNode;try{xi(i,"")}catch(y){ie(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Bd(i,o),$l(l,s);var c=$l(l,o);for(s=0;s<a.length;s+=2){var f=a[s],d=a[s+1];f==="style"?Gd(i,d):f==="dangerouslySetInnerHTML"?jd(i,d):f==="children"?xi(i,d):Ju(i,f,d,c)}switch(l){case"input":Ul(i,o);break;case"textarea":Wd(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?hr(i,!!o.multiple,v,!1):h!==!!o.multiple&&(o.defaultValue!=null?hr(i,!!o.multiple,o.defaultValue,!0):hr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Mi]=o}catch(y){ie(t,t.return,y)}}break;case 6:if(Ze(e,t),dt(t),r&4){if(t.stateNode===null)throw Error(w(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){ie(t,t.return,y)}}break;case 3:if(Ze(e,t),dt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ai(e.containerInfo)}catch(y){ie(t,t.return,y)}break;case 4:Ze(e,t),dt(t);break;case 13:Ze(e,t),dt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Oa=se())),r&4&&Lf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ie=(c=Ie)||f,Ze(e,t),Ie=c):Ze(e,t),dt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(C=t,f=t.child;f!==null;){for(d=C=f;C!==null;){switch(h=C,v=h.child,h.tag){case 0:case 11:case 14:case 15:yi(4,h,h.return);break;case 1:ur(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){ie(r,n,y)}}break;case 5:ur(h,h.return);break;case 22:if(h.memoizedState!==null){Of(d);continue}}v!==null?(v.return=h,C=v):Of(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=$d("display",s))}catch(y){ie(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){ie(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ze(e,t),dt(t),r&4&&Lf(t);break;case 21:break;default:Ze(e,t),dt(t)}}function dt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gp(n)){var r=n;break e}n=n.return}throw Error(w(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xi(i,""),r.flags&=-33);var o=Pf(t);_u(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Pf(t);yu(t,l,s);break;default:throw Error(w(161))}}catch(a){ie(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zv(t,e,n){C=t,yp(t)}function yp(t,e,n){for(var r=(t.mode&1)!==0;C!==null;){var i=C,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||To;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ie;l=To;var c=Ie;if(To=s,(Ie=a)&&!c)for(C=i;C!==null;)s=C,a=s.child,s.tag===22&&s.memoizedState!==null?Nf(i):a!==null?(a.return=s,C=a):Nf(i);for(;o!==null;)C=o,yp(o),o=o.sibling;C=i,To=l,Ie=c}Af(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,C=o):Af(t)}}function Af(t){for(;C!==null;){var e=C;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||zs(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ie)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:et(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&hf(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hf(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ai(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(w(163))}Ie||e.flags&512&&vu(e)}catch(h){ie(e,e.return,h)}}if(e===t){C=null;break}if(n=e.sibling,n!==null){n.return=e.return,C=n;break}C=e.return}}function Of(t){for(;C!==null;){var e=C;if(e===t){C=null;break}var n=e.sibling;if(n!==null){n.return=e.return,C=n;break}C=e.return}}function Nf(t){for(;C!==null;){var e=C;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zs(4,e)}catch(a){ie(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ie(e,i,a)}}var o=e.return;try{vu(e)}catch(a){ie(e,o,a)}break;case 5:var s=e.return;try{vu(e)}catch(a){ie(e,s,a)}}}catch(a){ie(e,e.return,a)}if(e===t){C=null;break}var l=e.sibling;if(l!==null){l.return=e.return,C=l;break}C=e.return}}var Dv=Math.ceil,hs=Vt.ReactCurrentDispatcher,La=Vt.ReactCurrentOwner,Ye=Vt.ReactCurrentBatchConfig,j=0,pe=null,le=null,ve=0,We=0,ar=gn(0),ce=0,Wi=null,Rn=0,Ds=0,Aa=0,_i=null,Re=null,Oa=0,Cr=1/0,xt=null,ps=!1,Eu=null,rn=null,Io=!1,qt=null,gs=0,Ei=0,wu=null,Bo=-1,Wo=0;function Oe(){return j&6?se():Bo!==-1?Bo:Bo=se()}function on(t){return t.mode&1?j&2&&ve!==0?ve&-ve:_v.transition!==null?(Wo===0&&(Wo=nh()),Wo):(t=Q,t!==0||(t=window.event,t=t===void 0?16:ah(t.type)),t):1}function at(t,e,n,r){if(50<Ei)throw Ei=0,wu=null,Error(w(185));bi(t,n,r),(!(j&2)||t!==pe)&&(t===pe&&(!(j&2)&&(Ds|=n),ce===4&&Kt(t,ve)),Fe(t,r),n===1&&j===0&&!(e.mode&1)&&(Cr=se()+500,ks&&mn()))}function Fe(t,e){var n=t.callbackNode;_0(t,e);var r=Xo(t,t===pe?ve:0);if(r===0)n!==null&&Bc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bc(n),e===1)t.tag===0?yv(kf.bind(null,t)):Lh(kf.bind(null,t)),pv(function(){!(j&6)&&mn()}),n=null;else{switch(rh(r)){case 1:n=na;break;case 4:n=eh;break;case 16:n=Jo;break;case 536870912:n=th;break;default:n=Jo}n=Cp(n,_p.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _p(t,e){if(Bo=-1,Wo=0,j&6)throw Error(w(327));var n=t.callbackNode;if(yr()&&t.callbackNode!==n)return null;var r=Xo(t,t===pe?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ms(t,r);else{e=r;var i=j;j|=2;var o=wp();(pe!==t||ve!==e)&&(xt=null,Cr=se()+500,Ln(t,e));do try{Bv();break}catch(l){Ep(t,l)}while(!0);ga(),hs.current=o,j=i,le!==null?e=0:(pe=null,ve=0,e=ce)}if(e!==0){if(e===2&&(i=Kl(t),i!==0&&(r=i,e=Su(t,i))),e===1)throw n=Wi,Ln(t,0),Kt(t,r),Fe(t,se()),n;if(e===6)Kt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Fv(i)&&(e=ms(t,r),e===2&&(o=Kl(t),o!==0&&(r=o,e=Su(t,o))),e===1))throw n=Wi,Ln(t,0),Kt(t,r),Fe(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(w(345));case 2:Sn(t,Re,xt);break;case 3:if(Kt(t,r),(r&130023424)===r&&(e=Oa+500-se(),10<e)){if(Xo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Oe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nu(Sn.bind(null,t,Re,xt),e);break}Sn(t,Re,xt);break;case 4:if(Kt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ut(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dv(r/1960))-r,10<r){t.timeoutHandle=nu(Sn.bind(null,t,Re,xt),r);break}Sn(t,Re,xt);break;case 5:Sn(t,Re,xt);break;default:throw Error(w(329))}}}return Fe(t,se()),t.callbackNode===n?_p.bind(null,t):null}function Su(t,e){var n=_i;return t.current.memoizedState.isDehydrated&&(Ln(t,e).flags|=256),t=ms(t,e),t!==2&&(e=Re,Re=n,e!==null&&Tu(e)),t}function Tu(t){Re===null?Re=t:Re.push.apply(Re,t)}function Fv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ft(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kt(t,e){for(e&=~Aa,e&=~Ds,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ut(e),r=1<<n;t[n]=-1,e&=~r}}function kf(t){if(j&6)throw Error(w(327));yr();var e=Xo(t,0);if(!(e&1))return Fe(t,se()),null;var n=ms(t,e);if(t.tag!==0&&n===2){var r=Kl(t);r!==0&&(e=r,n=Su(t,r))}if(n===1)throw n=Wi,Ln(t,0),Kt(t,e),Fe(t,se()),n;if(n===6)throw Error(w(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sn(t,Re,xt),Fe(t,se()),null}function Na(t,e){var n=j;j|=1;try{return t(e)}finally{j=n,j===0&&(Cr=se()+500,ks&&mn())}}function Mn(t){qt!==null&&qt.tag===0&&!(j&6)&&yr();var e=j;j|=1;var n=Ye.transition,r=Q;try{if(Ye.transition=null,Q=1,t)return t()}finally{Q=r,Ye.transition=n,j=e,!(j&6)&&mn()}}function ka(){We=ar.current,X(ar)}function Ln(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hv(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(da(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rs();break;case 3:Ir(),X(ze),X(Ce),wa();break;case 5:Ea(r);break;case 4:Ir();break;case 13:X(ee);break;case 19:X(ee);break;case 10:ma(r.type._context);break;case 22:case 23:ka()}n=n.return}if(pe=t,le=t=sn(t.current,null),ve=We=e,ce=0,Wi=null,Aa=Ds=Rn=0,Re=_i=null,xn!==null){for(e=0;e<xn.length;e++)if(n=xn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}xn=null}return t}function Ep(t,e){do{var n=le;try{if(ga(),Do.current=ds,fs){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fs=!1}if(kn=0,he=ae=ne=null,vi=!1,Fi=0,La.current=null,n===null||n.return===null){ce=1,Wi=e,le=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=_f(s);if(v!==null){v.flags&=-257,Ef(v,s,l,o,e),v.mode&1&&yf(o,c,e),e=v,a=c;var _=e.updateQueue;if(_===null){var y=new Set;y.add(a),e.updateQueue=y}else _.add(a);break e}else{if(!(e&1)){yf(o,c,e),Ra();break e}a=Error(w(426))}}else if(Z&&l.mode&1){var S=_f(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ef(S,s,l,o,e),ha(xr(a,l));break e}}o=a=xr(a,l),ce!==4&&(ce=2),_i===null?_i=[o]:_i.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=rp(o,a,e);df(o,g);break e;case 1:l=a;var p=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(rn===null||!rn.has(m)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=ip(o,l,e);df(o,E);break e}}o=o.return}while(o!==null)}Tp(n)}catch(T){e=T,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function wp(){var t=hs.current;return hs.current=ds,t===null?ds:t}function Ra(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(Rn&268435455)&&!(Ds&268435455)||Kt(pe,ve)}function ms(t,e){var n=j;j|=2;var r=wp();(pe!==t||ve!==e)&&(xt=null,Ln(t,e));do try{Uv();break}catch(i){Ep(t,i)}while(!0);if(ga(),j=n,hs.current=r,le!==null)throw Error(w(261));return pe=null,ve=0,ce}function Uv(){for(;le!==null;)Sp(le)}function Bv(){for(;le!==null&&!c0();)Sp(le)}function Sp(t){var e=xp(t.alternate,t,We);t.memoizedProps=t.pendingProps,e===null?Tp(t):le=e,La.current=null}function Tp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kv(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,le=null;return}}else if(n=Nv(n,e,We),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);ce===0&&(ce=5)}function Sn(t,e,n){var r=Q,i=Ye.transition;try{Ye.transition=null,Q=1,Wv(t,e,n,r)}finally{Ye.transition=i,Q=r}return null}function Wv(t,e,n,r){do yr();while(qt!==null);if(j&6)throw Error(w(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(w(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(E0(t,o),t===pe&&(le=pe=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Io||(Io=!0,Cp(Jo,function(){return yr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ye.transition,Ye.transition=null;var s=Q;Q=1;var l=j;j|=4,La.current=null,Mv(t,n),vp(n,t),sv(eu),Zo=!!Zl,eu=Zl=null,t.current=n,zv(n),f0(),j=l,Q=s,Ye.transition=o}else t.current=n;if(Io&&(Io=!1,qt=t,gs=i),o=t.pendingLanes,o===0&&(rn=null),p0(n.stateNode),Fe(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ps)throw ps=!1,t=Eu,Eu=null,t;return gs&1&&t.tag!==0&&yr(),o=t.pendingLanes,o&1?t===wu?Ei++:(Ei=0,wu=t):Ei=0,mn(),null}function yr(){if(qt!==null){var t=rh(gs),e=Ye.transition,n=Q;try{if(Ye.transition=null,Q=16>t?16:t,qt===null)var r=!1;else{if(t=qt,qt=null,gs=0,j&6)throw Error(w(331));var i=j;for(j|=4,C=t.current;C!==null;){var o=C,s=o.child;if(C.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(C=c;C!==null;){var f=C;switch(f.tag){case 0:case 11:case 15:yi(8,f,o)}var d=f.child;if(d!==null)d.return=f,C=d;else for(;C!==null;){f=C;var h=f.sibling,v=f.return;if(pp(f),f===c){C=null;break}if(h!==null){h.return=v,C=h;break}C=v}}}var _=o.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}C=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,C=s;else e:for(;C!==null;){if(o=C,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yi(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,C=g;break e}C=o.return}}var p=t.current;for(C=p;C!==null;){s=C;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,C=m;else e:for(s=p;C!==null;){if(l=C,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zs(9,l)}}catch(T){ie(l,l.return,T)}if(l===s){C=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,C=E;break e}C=l.return}}if(j=i,mn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ps,t)}catch{}r=!0}return r}finally{Q=n,Ye.transition=e}}return!1}function Rf(t,e,n){e=xr(n,e),e=rp(t,e,1),t=nn(t,e,1),e=Oe(),t!==null&&(bi(t,1,e),Fe(t,e))}function ie(t,e,n){if(t.tag===3)Rf(t,t,n);else for(;e!==null;){if(e.tag===3){Rf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rn===null||!rn.has(r))){t=xr(n,t),t=ip(e,t,1),e=nn(e,t,1),t=Oe(),e!==null&&(bi(e,1,t),Fe(e,t));break}}e=e.return}}function Vv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Oe(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(ve&n)===n&&(ce===4||ce===3&&(ve&130023424)===ve&&500>se()-Oa?Ln(t,0):Aa|=n),Fe(t,e)}function Ip(t,e){e===0&&(t.mode&1?(e=po,po<<=1,!(po&130023424)&&(po=4194304)):e=1);var n=Oe();t=zt(t,e),t!==null&&(bi(t,e,n),Fe(t,n))}function jv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ip(t,n)}function $v(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(w(314))}r!==null&&r.delete(e),Ip(t,n)}var xp;xp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)Me=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Me=!1,Ov(t,e,n);Me=!!(t.flags&131072)}else Me=!1,Z&&e.flags&1048576&&Ah(e,ss,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uo(t,e),t=e.pendingProps;var i=wr(e,Ce.current);vr(e,n),i=Ta(null,e,r,t,i,n);var o=Ia();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,De(r)?(o=!0,is(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ya(e),i.updater=Ms,e.stateNode=i,i._reactInternals=e,au(e,r,t,n),e=du(null,e,r,!0,o,n)):(e.tag=0,Z&&o&&fa(e),Le(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Hv(r),t=et(r,t),i){case 0:e=fu(null,e,r,t,n);break e;case 1:e=Tf(null,e,r,t,n);break e;case 11:e=wf(null,e,r,t,n);break e;case 14:e=Sf(null,e,r,et(r.type,t),n);break e}throw Error(w(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),fu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),Tf(t,e,r,i,n);case 3:e:{if(up(e),t===null)throw Error(w(387));r=e.pendingProps,o=e.memoizedState,i=o.element,zh(t,e),as(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=xr(Error(w(423)),e),e=If(t,e,r,n,i);break e}else if(r!==i){i=xr(Error(w(424)),e),e=If(t,e,r,n,i);break e}else for(Ve=tn(e.stateNode.containerInfo.firstChild),je=e,Z=!0,rt=null,n=Rh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sr(),r===i){e=Dt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return Dh(e),t===null&&su(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,tu(r,i)?s=null:o!==null&&tu(r,o)&&(e.flags|=32),lp(t,e),Le(t,e,s,n),e.child;case 6:return t===null&&su(e),null;case 13:return ap(t,e,n);case 4:return _a(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tr(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),wf(t,e,r,i,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,K(ls,r._currentValue),r._currentValue=s,o!==null)if(ft(o.value,s)){if(o.children===i.children&&!ze.current){e=Dt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Nt(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lu(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(w(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lu(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Le(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vr(e,n),i=qe(i),r=r(i),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,i=et(r,e.pendingProps),i=et(r.type,i),Sf(t,e,r,i,n);case 15:return op(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:et(r,i),Uo(t,e),e.tag=1,De(r)?(t=!0,is(e)):t=!1,vr(e,n),np(e,r,i),au(e,r,i,n),du(null,e,r,!0,t,n);case 19:return cp(t,e,n);case 22:return sp(t,e,n)}throw Error(w(156,e.tag))};function Cp(t,e){return Zd(t,e)}function Gv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(t,e,n,r){return new Gv(t,e,n,r)}function Ma(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hv(t){if(typeof t=="function")return Ma(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zu)return 11;if(t===ea)return 14}return 2}function sn(t,e){var n=t.alternate;return n===null?(n=Ke(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vo(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Ma(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Zn:return An(n.children,i,o,e);case Xu:s=8,i|=8;break;case Rl:return t=Ke(12,n,e,i|2),t.elementType=Rl,t.lanes=o,t;case Ml:return t=Ke(13,n,e,i),t.elementType=Ml,t.lanes=o,t;case zl:return t=Ke(19,n,e,i),t.elementType=zl,t.lanes=o,t;case Dd:return Fs(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Md:s=10;break e;case zd:s=9;break e;case Zu:s=11;break e;case ea:s=14;break e;case Gt:s=16,r=null;break e}throw Error(w(130,t==null?t:typeof t,""))}return e=Ke(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function An(t,e,n,r){return t=Ke(7,t,r,e),t.lanes=n,t}function Fs(t,e,n,r){return t=Ke(22,t,r,e),t.elementType=Dd,t.lanes=n,t.stateNode={isHidden:!1},t}function Tl(t,e,n){return t=Ke(6,t,null,e),t.lanes=n,t}function Il(t,e,n){return e=Ke(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function za(t,e,n,r,i,o,s,l,a){return t=new bv(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ke(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ya(o),t}function Qv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pp(t){if(!t)return an;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(w(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(De(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(w(171))}if(t.tag===1){var n=t.type;if(De(n))return Ph(t,n,e)}return e}function Lp(t,e,n,r,i,o,s,l,a){return t=za(n,r,!0,t,i,o,s,l,a),t.context=Pp(null),n=t.current,r=Oe(),i=on(n),o=Nt(r,i),o.callback=e??null,nn(n,o,i),t.current.lanes=i,bi(t,i,r),Fe(t,r),t}function Us(t,e,n,r){var i=e.current,o=Oe(),s=on(i);return n=Pp(n),e.context===null?e.context=n:e.pendingContext=n,e=Nt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nn(i,e,s),t!==null&&(at(t,i,s,o),zo(t,i,s)),s}function vs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Da(t,e){Mf(t,e),(t=t.alternate)&&Mf(t,e)}function Kv(){return null}var Ap=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fa(t){this._internalRoot=t}Bs.prototype.render=Fa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(w(409));Us(t,e,null,null)};Bs.prototype.unmount=Fa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mn(function(){Us(null,t,null,null)}),e[Mt]=null}};function Bs(t){this._internalRoot=t}Bs.prototype.unstable_scheduleHydration=function(t){if(t){var e=sh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qt.length&&e!==0&&e<Qt[n].priority;n++);Qt.splice(n,0,t),n===0&&uh(t)}};function Ua(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ws(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zf(){}function Yv(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=vs(s);o.call(c)}}var s=Lp(e,r,t,0,null,!1,!1,"",zf);return t._reactRootContainer=s,t[Mt]=s.current,ki(t.nodeType===8?t.parentNode:t),Mn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=vs(a);l.call(c)}}var a=za(t,0,!1,null,null,!1,!1,"",zf);return t._reactRootContainer=a,t[Mt]=a.current,ki(t.nodeType===8?t.parentNode:t),Mn(function(){Us(e,a,n,r)}),a}function Vs(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=vs(s);l.call(a)}}Us(e,s,t,i)}else s=Yv(n,e,t,i,r);return vs(s)}ih=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ai(e.pendingLanes);n!==0&&(ra(e,n|1),Fe(e,se()),!(j&6)&&(Cr=se()+500,mn()))}break;case 13:Mn(function(){var r=zt(t,1);if(r!==null){var i=Oe();at(r,t,1,i)}}),Da(t,1)}};ia=function(t){if(t.tag===13){var e=zt(t,134217728);if(e!==null){var n=Oe();at(e,t,134217728,n)}Da(t,134217728)}};oh=function(t){if(t.tag===13){var e=on(t),n=zt(t,e);if(n!==null){var r=Oe();at(n,t,e,r)}Da(t,e)}};sh=function(){return Q};lh=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};Hl=function(t,e,n){switch(e){case"input":if(Ul(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ns(r);if(!i)throw Error(w(90));Ud(r),Ul(r,i)}}}break;case"textarea":Wd(t,n);break;case"select":e=n.value,e!=null&&hr(t,!!n.multiple,e,!1)}};Qd=Na;Kd=Mn;var qv={usingClientEntryPoint:!1,Events:[Ki,rr,Ns,Hd,bd,Na]},ii={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jv={bundleType:ii.bundleType,version:ii.version,rendererPackageName:ii.rendererPackageName,rendererConfig:ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jd(t),t===null?null:t.stateNode},findFiberByHostInstance:ii.findFiberByHostInstance||Kv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xo.isDisabled&&xo.supportsFiber)try{Ps=xo.inject(Jv),_t=xo}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qv;Ge.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ua(e))throw Error(w(200));return Qv(t,e,null,n)};Ge.createRoot=function(t,e){if(!Ua(t))throw Error(w(299));var n=!1,r="",i=Ap;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=za(t,1,!1,null,null,n,!1,r,i),t[Mt]=e.current,ki(t.nodeType===8?t.parentNode:t),new Fa(e)};Ge.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(w(188)):(t=Object.keys(t).join(","),Error(w(268,t)));return t=Jd(e),t=t===null?null:t.stateNode,t};Ge.flushSync=function(t){return Mn(t)};Ge.hydrate=function(t,e,n){if(!Ws(e))throw Error(w(200));return Vs(null,t,e,!0,n)};Ge.hydrateRoot=function(t,e,n){if(!Ua(t))throw Error(w(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Ap;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Lp(e,null,t,1,n??null,i,!1,o,s),t[Mt]=e.current,ki(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bs(e)};Ge.render=function(t,e,n){if(!Ws(e))throw Error(w(200));return Vs(null,t,e,!1,n)};Ge.unmountComponentAtNode=function(t){if(!Ws(t))throw Error(w(40));return t._reactRootContainer?(Mn(function(){Vs(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1};Ge.unstable_batchedUpdates=Na;Ge.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ws(n))throw Error(w(200));if(t==null||t._reactInternals===void 0)throw Error(w(38));return Vs(t,e,n,!1,r)};Ge.version="18.3.1-next-f1338f8080-20240426";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(t){console.error(t)}}Op(),Od.exports=Ge;var Xv=Od.exports,Df=Xv;Nl.createRoot=Df.createRoot,Nl.hydrateRoot=Df.hydrateRoot;const Zv=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),ey=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),ty=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),ny=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),ry=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),iy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),oy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),sy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),ly=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),uy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),ay=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),cy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),fy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),dy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),hy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),py=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),gy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),my=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"})),vy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M4.5 3.5l.354-.354a.5.5 0 00-.708 0L4.5 3.5zM1.5 1h12V0h-12v1zm12.5.5v12h1v-12h-1zM13.5 14h-12v1h12v-1zM1 13.5v-12H0v12h1zm.5.5a.5.5 0 01-.5-.5H0A1.5 1.5 0 001.5 15v-1zm12.5-.5a.5.5 0 01-.5.5v1a1.5 1.5 0 001.5-1.5h-1zM13.5 1a.5.5 0 01.5.5h1A1.5 1.5 0 0013.5 0v1zm-12-1A1.5 1.5 0 000 1.5h1a.5.5 0 01.5-.5V0zm-1 11h14v-1H.5v1zm.354-3.146l4-4-.708-.708-4 4 .708.708zm3.292-4l7 7 .708-.708-7-7-.708.708zM10.5 5a.5.5 0 01-.5-.5H9A1.5 1.5 0 0010.5 6V5zm.5-.5a.5.5 0 01-.5.5v1A1.5 1.5 0 0012 4.5h-1zm-.5-.5a.5.5 0 01.5.5h1A1.5 1.5 0 0010.5 3v1zm0-1A1.5 1.5 0 009 4.5h1a.5.5 0 01.5-.5V3z",fill:"currentColor"})),yy=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M6.854 5.854l.353-.354-.707-.707-.354.353.708.708zM4.5 7.5l-.354-.354-.353.354.353.354L4.5 7.5zm1.646 2.354l.354.353.707-.707-.353-.354-.708.708zM7.5.5V0v.5zm7 7h.5-.5zm-14 0H1 .5zm7 7V14v.5zM6.146 5.146l-2 2 .708.708 2-2-.708-.708zm-2 2.708l2 2 .708-.708-2-2-.708.708zM4.5 8H11V7H4.5v1zm3-7A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zM1 7.5A6.5 6.5 0 017.5 1V0A7.5 7.5 0 000 7.5h1zM7.5 14A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zm0 1A7.5 7.5 0 0015 7.5h-1A6.5 6.5 0 017.5 14v1z",fill:"currentColor"})),_y=t=>O.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},O.createElement("path",{d:"M8.146 9.146l-.353.354.707.707.354-.353-.708-.708zM10.5 7.5l.354.354.353-.354-.353-.354-.354.354zM8.854 5.146L8.5 4.793l-.707.707.353.354.708-.708zm0 4.708l2-2-.708-.708-2 2 .708.708zm2-2.708l-2-2-.708.708 2 2 .708-.708zM10.5 7H4v1h6.5V7zm-3 7A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zM14 7.5A6.5 6.5 0 017.5 14v1A7.5 7.5 0 0015 7.5h-1zM7.5 1A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zm0-1A7.5 7.5 0 000 7.5h1A6.5 6.5 0 017.5 1V0z",fill:"currentColor"}));var Te=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.Image="Image",t.ArrowLeftCircle="ArrowLeftCircle",t.ArrowRightCircle="ArrowRightCircle",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t))(Te||{});const Ey={Line:Zv,Square:ey,Circle:ty,Direction:ny,VectorDocument:ry,LayersDifference:iy,AntiClockwise:cy,Clockwise:fy,Github:dy,Crop:hy,Folder:py,Save:my,Svg:oy,Expand:gy,Image:vy,ArrowLeftCircle:yy,ArrowRightCircle:_y,SolidDown:sy,SolidUp:ly,SolidUpSmall:uy,SolidDownSmall:ay},Np=({name:t,className:e})=>{const n=Ey[t];return k.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:k.jsx(n,{})})};var F=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.SCALE="SCALE",t.ERASER="ERASER",t.IMAGE_IMPORT="IMAGE_IMPORT",t.ROTATE="ROTATE",t))(F||{});const q=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:o,className:s,iconClassname:l,style:a})=>k.jsx(k.Fragment,{children:k.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(s?" "+s:""),style:a,"data-active":i,onClick:r,title:e,children:[n&&k.jsx(Np,{name:n,className:l}),t&&k.jsx("span",{children:t}),o]})}),xl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:o,children:s})=>{const[l,a]=O.useState(!1);return k.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[k.jsx(q,{icon:n,label:t,title:e,"data-active":l,onClick:()=>a(!l),style:o}),k.jsx(Np,{name:Te.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&k.jsx("div",{className:"flex flex-row gap-1",onClick:()=>a(!1),children:s})]})},kp=!0,wy=!1,jo={CCW:-1,CW:1,NOT_ORIENTABLE:0},Sy=2*Math.PI,ys=1,Rp=0,pt=2,Ty=3,Iy=4,xy=1,Cy=2,Ba=0,wi=1,_r=2;var _s=Object.freeze({__proto__:null,BOUNDARY:pt,CCW:kp,CONTAINS:Ty,CW:wy,END_VERTEX:_r,INSIDE:ys,INTERLACE:Iy,NOT_VERTEX:Ba,ORIENTATION:jo,OUTSIDE:Rp,OVERLAP_OPPOSITE:Cy,OVERLAP_SAME:xy,PIx2:Sy,START_VERTEX:wi});let wt=1e-6;function Mp(t){wt=t}function zp(){return wt}const Py=3;function Iu(t){return t<wt&&t>-wt}function zn(t,e){return t-e<wt&&t-e>-wt}function Dp(t,e){return t-e>wt}function Ly(t,e){return t-e>-wt}function Fp(t,e){return t-e<-wt}function Ay(t,e){return t-e<wt}var Oy=Object.freeze({__proto__:null,DECIMALS:Py,EQ:zn,EQ_0:Iu,GE:Ly,GT:Dp,LE:Ay,LT:Fp,getTolerance:zp,setTolerance:Mp});let u={Utils:Oy,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in _s)u[t]=_s[t];Object.defineProperty(u,"DP_TOL",{get:function(){return zp()},set:function(t){Mp(t)}});class J{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}u.Errors=J;class Wa{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,o=n||this.last,s=i;if(s===void 0)return r;do r.push(s),s=s.next;while(s!==o.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw J.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const Ff={stroke:"black"};class Ny{constructor(e=Ff){for(const n in e)this[n]=e[n];this.stroke=e.stroke??Ff.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function Gn(t){return new Ny(t).toAttributesString()}function jr(t,e){let n=[],[r,i,o]=t.standard,[s,l,a]=e.standard,c=r*l-i*s,f=o*l-i*a,d=r*a-o*s;if(!u.Utils.EQ_0(c)){let h,v;i===0?(h=o/r,v=d/c):l===0?(h=a/s,v=d/c):r===0?(h=f/c,v=o/i):s===0?(h=f/c,v=a/l):(h=f/c,v=d/c),n.push(new u.Point(h,v))}return n}function Hn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(u.Utils.EQ(i,e.r))n.push(r);else if(u.Utils.LT(i,e.r)){let o=Math.sqrt(e.r*e.r-i*i),s,l;s=t.norm.rotate90CCW().multiply(o),l=r.translate(s),n.push(l),s=t.norm.rotate90CW().multiply(o),l=r.translate(s),n.push(l)}return n}function Pr(t,e){let n=[];for(let r of e.toSegments()){let i=qi(r,t);for(let o of i)bp(o,n)||n.push(o)}return n}function js(t,e){let n=[];if(Pr(t,e.box).length===0)return n;let r=new u.Circle(e.pc,e.r),i=Hn(t,r);for(let o of i)o.on(e)&&n.push(o);return n}function qi(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new u.Line(t.ps,t.pe);return jr(r,e)}function $s(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let o=jr(r,i);o.length>0&&Uf(o[0],t)&&Uf(o[0],e)&&n.push(o[0])}return n}function Uf(t,e){const n=e.box;return u.Utils.LE(t.x,n.xmax)&&u.Utils.GE(t.x,n.xmin)&&u.Utils.LE(t.y,n.ymax)&&u.Utils.GE(t.y,n.ymin)}function Gs(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[o,s]=t.ps.distanceTo(e.pc);return u.Utils.EQ(o,e.r)&&n.push(t.ps),n}let r=new u.Line(t.ps,t.pe),i=Hn(r,e);for(let o of i)o.on(t)&&n.push(o);return n}function $r(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Circle(e.pc,e.r),o=Hn(r,i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function ky(t,e){let n=[];for(let r of e.toSegments()){let i=$s(r,t);for(let o of i)n.push(o)}return n}function Up(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new u.Vector(t.pc,e.pc),i=t.r,o=e.r;if(u.Utils.EQ_0(i)||u.Utils.EQ_0(o))return n;if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y)&&u.Utils.EQ(i,o))return n.push(t.pc.translate(-i,0)),n;let s=t.pc.distanceTo(e.pc)[0];if(u.Utils.GT(s,i+o)||u.Utils.LT(s,Math.abs(i-o)))return n;r.x/=s,r.y/=s;let l;if(u.Utils.EQ(s,i+o)||u.Utils.EQ(s,Math.abs(i-o)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let a=i*i/(2*s)-o*o/(2*s)+s/2,c=t.pc.translate(a*r.x,a*r.y),f=Math.sqrt(i*i-a*a);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function Ry(t,e){let n=[];for(let r of e.toSegments()){let i=Gs(r,t);for(let o of i)n.push(o)}return n}function Bp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&u.Utils.EQ(t.r,e.r)){let s;return s=t.start,s.on(e)&&n.push(s),s=t.end,s.on(e)&&n.push(s),s=e.start,s.on(t)&&n.push(s),s=e.end,s.on(t)&&n.push(s),n}let r=new u.Circle(t.pc,t.r),i=new u.Circle(e.pc,e.r),o=r.intersect(i);for(let s of o)s.on(t)&&s.on(e)&&n.push(s);return n}function Va(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&u.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new u.Circle(t.pc,t.r),o=Up(r,i);for(let s of o)s.on(t)&&n.push(s);return n}function My(t,e){let n=[];for(let r of e.toSegments()){let i=$r(r,t);for(let o of i)n.push(o)}return n}function Wp(t,e){return t.isSegment?$s(t.shape,e):$r(e,t.shape)}function Vp(t,e){return t.isSegment?$r(t.shape,e):Bp(t.shape,e)}function jp(t,e){return t.isSegment?qi(t.shape,e):js(e,t.shape)}function zy(t,e){return t.isSegment?Ga(e,t.shape):Ha(e,t.shape)}function Dy(t,e){return t.isSegment?Gs(t.shape,e):Va(t.shape,e)}function ja(t,e){let n=[];for(let r of e.edges)for(let i of Wp(r,t))n.push(i);return n}function $a(t,e){let n=[];for(let r of e.edges)for(let i of Vp(r,t))n.push(i);return n}function Ji(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of jp(r,t))bp(i,n)||n.push(i);return t.sortPoints(n)}function $p(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Dy(r,t))n.push(i);return n}function Gp(t,e){return t.isSegment?Wp(e,t.shape):t.isArc?Vp(e,t.shape):t.isLine?jp(e,t.shape):t.isRay?zy(e,t.shape):[]}function Hp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Gp(t,i)];return n}function Fy(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...Hp(r,e)];return n}function Uy(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...Hp(r,e)];return n}function By(t,e){return t instanceof u.Line?Ji(t,e):t instanceof u.Segment?ja(t,e):t instanceof u.Arc?$a(t,e):[]}function bp(t,e){return e.some(n=>n.equalTo(t))}function cn(t){return new u.Line(t.start,t.norm)}function Ga(t,e){return qi(e,cn(t)).filter(n=>t.contains(n))}function Ha(t,e){return js(cn(t),e).filter(n=>t.contains(n))}function Qp(t,e){return Hn(cn(t),e).filter(n=>t.contains(n))}function Wy(t,e){return Pr(cn(t),e).filter(n=>t.contains(n))}function Kp(t,e){return jr(cn(t),e).filter(n=>t.contains(n))}function Vy(t,e){return jr(cn(t),cn(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function Yp(t,e){return Ji(cn(t),e).filter(n=>t.contains(n))}function qp(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw J.UNSUPPORTED_SHAPE_TYPE}function Xi(t,e){let n=[];for(let r of e)n=[...n,...qp(r,r.shape)];return n}function jy(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...qp(r,i)];return n}let bn=class fi extends Wa{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,o=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray||a instanceof u.Line,s=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray,l=a=>a instanceof u.Segment||a instanceof u.Arc;if(n=i===1&&o(r[0])||i>1&&s(r[0])&&s(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(a=>a instanceof u.Ray||a instanceof u.Line);for(let a of r){let c=new u.Edge(a);this.append(c)}this.setArcLength()}else throw u.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new fi(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),o=n.prev;return this.insert(i,o),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Line){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Circle){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Segment){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Multiline)return u.Distance.multiline2multiline(this,e);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof u.Multiline?jy(this,e):Xi(e,this)}contains(e){if(e instanceof u.Point)return this.edges.some(n=>n.shape.contains(e));throw u.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new fi(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new u.Point){return new fi(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new u.Matrix){return new fi(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${Gn({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};u.Multiline=bn;const $y=(...t)=>new u.Multiline(...t);u.multiline=$y;function Lr(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let o=0;i[0]===null?o=0:i[1]===null?o=t.shape.length:o=i[0].length;let s=Ba;zn(o,0)&&(s|=wi),zn(o,t.shape.length)&&(s|=_r);let l;o===1/0?l=i[0].coord(e):l=s&_r&&t.next&&t.next.arc_length===0?0:t.arc_length+o,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:s})}function Vi(t){t.int_points1_sorted=bt(t.int_points1),t.int_points2_sorted=bt(t.int_points2)}function bt(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(Gy)}function Gy(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function ba(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,o;for(let s=0;s<t.int_points1_sorted.length;s++)if(t.int_points1_sorted[s].id!==-1){n=t.int_points1_sorted[s],r=t.int_points2[n.id];for(let l=s+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!zn(i.arc_length,n.arc_length));l++)i.id!==-1&&(o=t.int_points2[i.id],o.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&o.edge_before===r.edge_before&&o.edge_after===r.edge_after&&(i.id=-1,o.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let s=1;s<t.int_points2_sorted.length;s++){let l=t.int_points2_sorted[s];if(l.id===-1)continue;if(r.id===-1||!zn(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let a=t.int_points1[l.id];a.edge_before===n.edge_before&&a.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(a.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(s=>s.id>=0),t.int_points2=t.int_points2.filter(s=>s.id>=0),t.int_points1.forEach((s,l)=>s.id=l),t.int_points2.forEach((s,l)=>s.id=l))}function xu(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=pt),e.edge_after&&(e.edge_after.bvStart=pt)}function Cu(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function Hy(t){let e,n,r,i=t.int_points1.length;for(let o=0;o<i;o++){let s=t.int_points1_sorted[o];s.face!==e&&(n=o,e=s.face);let l=o,a=Ar(t.int_points1_sorted,o,e),c;l+a<i&&t.int_points1_sorted[l+a].face===e?c=l+a:c=n;let f=Ar(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[s.id].face){r=p;break}}if(r===null)continue;let d=s.edge_after,h=r.edge_before;if(!(d.bv===pt&&h.bv===pt)||d!==h)continue;let v=t.int_points2[s.id],_=t.int_points2[r.id],y=v.edge_after,S=_.edge_before;y.bv===pt&&S.bv===pt&&y===S||(v=t.int_points2[r.id],_=t.int_points2[s.id],y=v.edge_after,S=_.edge_before),y.bv===pt&&S.bv===pt&&y===S&&d.setOverlap(y)}}function Ar(t,e,n){let r,i,o=1;if(t.length===1)return 1;r=t[e];for(let s=e+1;s<t.length&&!(r.face!==n||(i=t[s],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));s++)o++;return o}function Or(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=Ba,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=wi),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=_r),n.is_vertex&wi){n.edge_before=r.prev,r.prev&&(n.is_vertex=_r);continue}if(n.is_vertex&_r)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof bn&&n.is_vertex&wi&&(n.edge_after=t.first)}}function Bf(t,e,n){const r=t.edge_before,i=e.edge_after,o=n.length;r.next=n[0],n[0].prev=r,n[o-1].next=i,i.prev=n[o-1]}const{INSIDE:vt,OUTSIDE:yt,BOUNDARY:de,OVERLAP_SAME:by,OVERLAP_OPPOSITE:Qy}=_s,{NOT_VERTEX:zw,START_VERTEX:Wf,END_VERTEX:Vf}=_s,Hs=1,Zi=2,Dn=3;function Ky(t,e){let[n,r]=eo(t,e,Hs,!0);return n}function Pu(t,e){let r=e.clone().reverse(),[i,o]=eo(t,r,Dn,!0);return i}function Jp(t,e){let[n,r]=eo(t,e,Zi,!0);return n}function Xp(t,e){let[n,r]=eo(t,e,Zi,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(l=>l.shape)];let o=[];for(let s of r.faces)o=[...o,...[...s.edges].map(l=>l.shape)];return[i,o]}function Lu(t,e){let[n,r]=eo(t,e,Dn,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(s=>s.shape)];return i}function Zp(t,e){let n=t.clone(),r=e.clone(),i=eg(n,r);Vi(i),Or(n,i.int_points1_sorted),Or(r,i.int_points2_sorted),ba(i),Vi(i);let o=i.int_points1_sorted.map(l=>l.pt),s=i.int_points2_sorted.map(l=>l.pt);return[o,s]}function Yy(t,e,n,r){let i=jf(t,n.int_points1),o=jf(e,n.int_points2);for($f(i,e),$f(o,t),xu(n.int_points1),xu(n.int_points2),Cu(n.int_points1,e),Cu(n.int_points2,t);Jy(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););Hy(n),Au(t,r,n.int_points1_sorted,!0),Au(e,r,n.int_points2_sorted,!1),Gf(t,i,r,!0),Gf(e,o,r,!1)}function qy(t,e,n,r){Xy(t,e,r,n.int_points2),Zy(t,e,n),Ou(t,n.int_points1),Ou(e,n.int_points2),Nu(t,n.int_points1,n.int_points2),Nu(t,n.int_points2,n.int_points1)}function eo(t,e,n,r){let i=t.clone(),o=e.clone(),s=eg(i,o);return Vi(s),Or(i,s.int_points1_sorted),Or(o,s.int_points2_sorted),ba(s),Vi(s),Yy(i,o,s,n),r&&qy(i,o,s,n),[i,o]}function eg(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let o of i){let s=r.shape.intersect(o.shape);for(let l of s)Lr(r,l,n.int_points1),Lr(o,l,n.int_points2)}}return n}function jf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function $f(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Jy(t,e,n,r,i,o){let s,l,a,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==s&&(l=d,s=h.face);let v=d,_=Ar(r,d,s),y;v+_<c&&r[v+_].face===s?y=v+_:y=l;let S=Ar(r,y,s);a=null;for(let m=y;m<y+S;m++){let E=r[m];if(E.face===s&&i[E.id].face===i[h.id].face){a=E;break}}if(a===null)continue;let g=h.edge_after,p=a.edge_before;if(g.bv===de&&p.bv!=de){g.bv=p.bv;continue}if(g.bv!=de&&p.bv===de){p.bv=g.bv;continue}if(g.bv===de&&p.bv===de&&g!=p||g.bv===vt&&p.bv===yt||g.bv===yt&&p.bv===vt){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===de&&p.bv===de&&g!=p){let m=g.next,E;for(;m!=p;){if(m.bv!=de){if(E===void 0)E=m.bv;else if(m.bv!=E)throw J.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}E!=null&&(g.bv=E,p.bv=E);continue}if(g.bv===vt&&p.bv===yt||g.bv===yt&&p.bv===vt){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[E,T]=m.shape.distanceTo(e);if(E<10*u.DP_TOL){Lr(m,T.ps,n);let x=n[n.length-1];if(x.is_vertex&Wf)x.edge_after=m,x.edge_before=m.prev,m.bvStart=de,m.bv=void 0,m.setInclusion(e);else if(x.is_vertex&Vf)x.edge_after=m.next,m.bvEnd=de,m.bv=void 0,m.setInclusion(e);else{let $=e.addVertex(x.pt,m);x.edge_before=$,x.edge_after=$.next,$.setInclusion(e),$.next.bvStart=de,$.next.bvEnd=void 0,$.next.bv=void 0,$.next.setInclusion(e)}let P=e.findEdgeByPoint(T.pe);Lr(P,T.pe,i);let A=i[i.length-1];if(A.is_vertex&Wf)A.edge_after=P,A.edge_before=P.prev;else if(A.is_vertex&Vf)A.edge_after=P.next;else{let $=i.find(Be=>Be.edge_after===P),N=e.addVertex(A.pt,P);A.edge_before=N,A.edge_after=N.next,$&&($.edge_after=N),N.bvStart=void 0,N.bvEnd=de,N.bv=void 0,N.setInclusion(t),N.next.bvStart=de,N.next.bvEnd=void 0,N.next.bv=void 0,N.next.setInclusion(t)}Vi(o),f=!0;break}}m=m.next}if(f)break;throw J.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function Au(t,e,n,r){if(!n)return;let i,o,s,l;for(let a=0;a<n.length;a++){if(s=n[a],s.face!==i&&(o=a,i=s.face),i.isEmpty())continue;let c=a,f=Ar(n,a,i),d;c+f<n.length&&n[c+f].face===s.face?d=c+f:d=o,l=n[d];let h=d,v=Ar(n,h,i),_=s.edge_after,y=l.edge_before;if(_.bv===vt&&y.bv===vt&&e===Hs||_.bv===yt&&y.bv===yt&&e===Zi||(_.bv===yt||y.bv===yt)&&e===Dn&&!r||(_.bv===vt||y.bv===vt)&&e===Dn&&r||_.bv===de&&y.bv===de&&_.overlap&by&&r||_.bv===de&&y.bv===de&&_.overlap&Qy){t.removeChain(i,_,y);for(let S=c;S<c+f;S++)n[S].edge_after=void 0;for(let S=h;S<h+v;S++)n[S].edge_before=void 0}a+=f-1}}function Xy(t,e,n,r){for(let i of e.faces){for(let o of i)t.edges.add(o);r.find(o=>o.face===i)===void 0&&t.addFace(i.first,i.last)}}function Zy(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],o=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&o.edge_before===void 0&&o.edge_after!==void 0&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before),o.edge_before!==void 0&&o.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(o.edge_before.next=i.edge_after,i.edge_after.prev=o.edge_before,o.edge_after=i.edge_after,i.edge_before=o.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let s of n.int_points1_sorted)s!==i&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(i.pt)&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before);if(o.edge_before!==void 0&&o.edge_after===void 0)for(let s of n.int_points2_sorted)s!==o&&s.edge_before===void 0&&s.edge_after!==void 0&&s.pt.equalTo(o.pt)&&(o.edge_before.next=s.edge_after,s.edge_after.prev=o.edge_before,o.edge_after=s.edge_after,s.edge_before=o.edge_before)}}function Ou(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Nu(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,o=r.edge_before;try{Wa.testInfiniteLoop(i)}catch{throw J.CANNOT_COMPLETE_BOOLEAN_OPERATION}let s=t.addFace(i,o);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===s&&l.edge_after.face===s&&(l.face=s)}}function Gf(t,e,n,r){for(let i of e){let o=i.first.bv;(n===Hs&&o===vt||n===Dn&&o===vt&&r||n===Dn&&o===yt&&!r||n===Zi&&o===yt)&&t.deleteFace(i)}}var e1=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:Zi,BOOLEAN_SUBTRACT:Dn,BOOLEAN_UNION:Hs,calculateIntersections:Zp,innerClip:Xp,intersect:Jp,outerClip:Lu,removeNotRelevantChains:Au,removeOldFaces:Ou,restoreFaces:Nu,subtract:Pu,unify:Ky});const t1=RegExp("T.F..FFF.|T.F...F.."),n1=RegExp("T........|.T.......|...T.....|....T...."),r1=RegExp("FT.......|F..T.....|F...T...."),i1=RegExp("T.F..F..."),o1=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Gr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return t1.test(this.toString())}intersect(){return n1.test(this.toString())}touch(){return r1.test(this.toString())}inside(){return i1.test(this.toString())}covered(){return o1.test(this.toString())}}function Si(t,e){let n,r=new u.Ray(e),i=new u.Line(r.pt,r.norm);const o=new u.Box(r.box.xmin-u.DP_TOL,r.box.ymin-u.DP_TOL,r.box.xmax,r.box.ymax+u.DP_TOL);if(t.box.not_intersect(o))return u.OUTSIDE;let s=t.edges.search(o);if(s.length===0)return u.OUTSIDE;for(let f of s)if(f.shape.contains(e))return u.BOUNDARY;let l=[...t.faces],a=[];for(let f of s)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return u.BOUNDARY;a.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}a.sort((f,d)=>Fp(f.pt.x,d.pt.x)?-1:Dp(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<a.length;f++){let d=a[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.prev===a[f-1].edge)continue;let h=d.edge.prev;for(;Iu(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),_=d.pt.translate(v),y=d.edge.shape.tangentInStart(),S=d.pt.translate(y),g=_.leftTo(i),p=S.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.next===a[f-1].edge)continue;let h=d.edge.next;for(;Iu(h.length);)h=h.next;let v=h.shape.tangentInStart(),_=d.pt.translate(v),y=d.edge.shape.tangentInEnd(),S=d.pt.translate(y),g=_.leftTo(i),p=S.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof u.Segment)c++;else{let h=d.edge.shape.box;zn(d.pt.y,h.ymin)||zn(d.pt.y,h.ymax)||c++}}return n=c%2===1?ys:Rp,n}function s1(t,e){return Hr(t,e).equal()}function tg(t,e){return Hr(t,e).intersect()}function l1(t,e){return Hr(t,e).touch()}function u1(t,e){return!tg(t,e)}function ng(t,e){return Hr(t,e).inside()}function rg(t,e){return Hr(t,e).covered()}function a1(t,e){return ng(e,t)}function ig(t,e){return rg(e,t)}function Hr(t,e){if(t instanceof u.Line&&e instanceof u.Line)return c1(t,e);if(t instanceof u.Line&&e instanceof u.Circle)return f1(t,e);if(t instanceof u.Line&&e instanceof u.Box)return d1(t,e);if(t instanceof u.Line&&e instanceof u.Polygon)return h1(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&e instanceof u.Polygon)return Hf(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&(e instanceof u.Circle||e instanceof u.Box))return Hf(t,new u.Polygon(e));if(t instanceof u.Polygon&&e instanceof u.Polygon)return Co(t,e);if((t instanceof u.Circle||t instanceof u.Box)&&(e instanceof u.Circle||e instanceof u.Box))return Co(new u.Polygon(t),new u.Polygon(e));if((t instanceof u.Circle||t instanceof u.Box)&&e instanceof u.Polygon)return Co(new u.Polygon(t),e);if(t instanceof u.Polygon&&(e instanceof u.Circle||e instanceof u.Box))return Co(t,new u.Polygon(e))}function c1(t,e){let n=new Gr,r=jr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function f1(t,e){let n=new Gr,r=Hn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new bn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new u.Polygon([e.toArc()]).cutWithLine(t)}return n}function d1(t,e){let n=new Gr,r=Pr(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new bn([t]),o=t.sortPoints(r);i.split(o);let s=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[s[1]],n.I2E=[s[0],s[2]],n.E2I=[e]):(n.I2I=[s[1]],n.I2B=o,n.I2E=[s[0],s[2]],n.E2I=new u.Polygon(e.toSegments()).cutWithLine(t))}return n}function h1(t,e){let n=new Gr,r=Ji(t,e),i=new bn([t]),o=r.length>0?r.slice():t.sortPoints(r);return i.split(o),[...i].forEach(s=>s.setInclusion(e)),n.I2I=[...i].filter(s=>s.bv===u.INSIDE).map(s=>s.shape),n.I2B=[...i].slice(1).map(s=>s.bv===u.BOUNDARY?s.shape:s.shape.start),n.I2E=[...i].filter(s=>s.bv===u.OUTSIDE).map(s=>s.shape),n.E2I=e.cutWithLine(t),n}function Hf(t,e){let n=new Gr,r=By(t,e),i=r.length>0?r.slice():t.sortPoints(r),o=new bn([t]);o.split(i),[...o].forEach(s=>s.setInclusion(e)),n.I2I=[...o].filter(s=>s.bv===u.INSIDE).map(s=>s.shape),n.I2B=[...o].slice(1).map(s=>s.bv===u.BOUNDARY?s.shape:s.shape.start),n.I2E=[...o].filter(s=>s.bv===u.OUTSIDE).map(s=>s.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let s of[t.start,t.end])switch(Si(e,s)){case u.INSIDE:n.B2I.push(s);break;case u.BOUNDARY:n.B2B.push(s);break;case u.OUTSIDE:n.B2E.push(s);break}return n}function Co(t,e){let n=new Gr,[r,i]=Zp(t,e),o=Jp(t,e),s=Pu(t,e),l=Pu(e,t),[a,c]=Xp(t,e),f=Lu(t,e),d=Lu(e,t);return n.I2I=o.isEmpty()?[]:[o],n.I2B=c,n.I2E=s.isEmpty()?[]:[s],n.B2I=a,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var Qa=Object.freeze({__proto__:null,contain:a1,cover:ig,covered:rg,disjoint:u1,equal:s1,inside:ng,intersect:tg,relate:Hr,touch:l1});class it{constructor(e=1,n=0,r=0,i=1,o=0,s=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s}clone(){return new it(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new it(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw J.ILLEGAL_PARAMETERS;return this.multiply(new it(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),o=Math.sin(e);return this.translate(n,r).multiply(new it(i,o,-o,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new it(e,0,0,n,0,0))}equalTo(e){return!(!u.Utils.EQ(this.tx,e.tx)||!u.Utils.EQ(this.ty,e.ty)||!u.Utils.EQ(this.a,e.a)||!u.Utils.EQ(this.b,e.b)||!u.Utils.EQ(this.c,e.c)||!u.Utils.EQ(this.d,e.d))}}u.Matrix=it;const p1=(...t)=>new u.Matrix(...t);u.matrix=p1;const g1=class ku{constructor(e,n){this.low=e,this.high=n}clone(){return new ku(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new ku(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},ge=0,H=1;class En{constructor(e=void 0,n=void 0,r=null,i=null,o=null,s=H){if(this.left=r,this.right=i,this.parent=o,this.color=s,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,a]=e;l>a&&([l,a]=[a,l]),this.item.key=new g1(l,a)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===H}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class ji{constructor(){this.root=null,this.nil_node=new En}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new En(e,n,this.nil_node,this.nil_node,null,ge);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new En(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new En(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new En(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(o=>n(o.item.value,o.item.key))}intersect_any(e){let n=new En(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new ji;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new En(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===ge;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===ge?(n.parent.color=H,r.color=H,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=H,n.parent.parent.color=ge,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===ge?(n.parent.color=H,r.color=H,n.parent.parent.color=ge,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=H,n.parent.parent.color=ge,this.rotate_left(n.parent.parent)));this.root.color=H}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===H&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===H;)n===n.parent.left?(r=n.parent.right,r.color===ge&&(r.color=H,n.parent.color=ge,this.rotate_left(n.parent),r=n.parent.right),r.left.color===H&&r.right.color===H?(r.color=ge,n=n.parent):(r.right.color===H&&(r.color=ge,r.left.color=H,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=H,r.right.color=H,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===ge&&(r.color=H,n.parent.color=ge,this.rotate_right(n.parent),r=n.parent.left),r.left.color===H&&r.right.color===H?(r.color=ge,n=n.parent):(r.left.color===H&&(r.color=ge,r.right.color=H,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=H,r.left.color=H,this.rotate_right(n.parent),n=this.root));n.color=H}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===ge&&(n.left.color===H&&n.right.color===H||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===H&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class m1 extends Set{constructor(e){super(e),this.index=new ji,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,o=r||e.box,s=i||e;return super.add(s),this.size>n&&this.index.insert(o,s),this}delete(e){const{key:n,value:r}=e,i=n||e.box,o=r||e;let s=super.delete(o);return s&&this.index.remove(i,o),s}clear(){super.clear(),this.index=new ji}search(e){return this.index.search(e)}hit(e){let n=new u.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}u.PlanarSet=m1;class vn{get name(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new it().translate(...e))}rotate(e,n=new u.Point){return this.transform(new it().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new it().scale(e,n))}transform(...e){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw J.CANNOT_INVOKE_ABSTRACT_METHOD}}let R=class og extends vn{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw J.ILLEGAL_PARAMETERS}}get box(){return new u.Box(this.x,this.y,this.x,this.y)}clone(){return new u.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}lessThan(e){return!!(u.Utils.LT(this.y,e.y)||u.Utils.EQ(this.y,e.y)&&u.Utils.LT(this.x,e.x))}transform(e){return new u.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new u.Vector(this,e.pt);if(u.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new u.Vector(e.pt,this);return u.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof og){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new u.Segment(this,e)]}if(e instanceof u.Line)return u.Distance.point2line(this,e);if(e instanceof u.Circle)return u.Distance.point2circle(this,e);if(e instanceof u.Segment)return u.Distance.point2segment(this,e);if(e instanceof u.Arc)return u.Distance.point2arc(this,e);if(e instanceof u.Polygon)return u.Distance.point2polygon(this,e);if(e instanceof u.PlanarSet)return u.Distance.shape2planarSet(this,e);if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}on(e){if(e instanceof u.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${Gn({fill:"red",...e})} />`}};u.Point=R;const v1=(...t)=>new u.Point(...t);u.point=v1;let Fn=class extends vn{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof u.Point&&r instanceof u.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new u.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}multiply(e){return new u.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!u.Utils.EQ_0(this.length))return new u.Vector(this.x/this.length,this.y/this.length);throw J.ZERO_DIVISION}rotate(e,n=new u.Point){if(n.x===0&&n.y===0)return this.transform(new it().rotate(e));throw J.OPERATION_IS_NOT_SUPPORTED}transform(e){return new u.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new u.Vector(-this.y,this.x)}rotate90CW(){return new u.Vector(this.y,-this.x)}invert(){return new u.Vector(-this.x,-this.y)}add(e){return new u.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new u.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};u.Vector=Fn;const sg=(...t)=>new u.Vector(...t);u.vector=sg;let $o=class Ru extends vn{constructor(...e){if(super(),this.ps=new u.Point,this.pe=new u.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new u.Point(n[0],n[1]),this.pe=new u.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new u.Point(n.x,n.y),this.pe=new u.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof u.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof u.Point&&e[1]instanceof u.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new u.Point(e[0],e[1]),this.pe=new u.Point(e[2],e[3]);return}throw J.ILLEGAL_PARAMETERS}}clone(){return new u.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new u.Vector(this.start,this.end).slope}get box(){return new u.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return u.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return qi(this,e);if(e instanceof u.Ray)return Ga(e,this);if(e instanceof u.Segment)return $s(this,e);if(e instanceof u.Circle)return Gs(this,e);if(e instanceof u.Box)return ky(this,e);if(e instanceof u.Arc)return $r(this,e);if(e instanceof u.Polygon)return ja(this,e);if(e instanceof u.Multiline)return Xi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.segment2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.segment2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2segment(this,e);return[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.segment2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}tangentInStart(){return new u.Vector(this.start,this.end).normalize()}tangentInEnd(){return new u.Vector(this.end,this.start).normalize()}reverse(){return new Ru(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new u.Segment(this.start,e),new u.Segment(e,this.end)]}middle(){return new u.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new u.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=u.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new u.Matrix){return new Ru(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new u.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${Gn(e)} />`}};u.Segment=$o;const y1=(...t)=>new u.Segment(...t);u.segment=y1;let{vector:oi}=u,Nr=class lg extends vn{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new u.Point(n),this.norm=new u.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof u.Point&&r instanceof u.Point){this.pt=n,this.norm=lg.points2norm(n,r),this.norm.dot(oi(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Point&&r instanceof u.Vector){if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y))throw J.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(oi(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Vector&&r instanceof u.Point){if(u.Utils.EQ_0(n.x)&&u.Utils.EQ_0(n.y))throw J.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(oi(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw J.ILLEGAL_PARAMETERS}}clone(){return new u.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new u.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(oi(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return u.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))}coord(e){return oi(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return jr(this,e);if(e instanceof u.Ray)return Kp(e,this);if(e instanceof u.Circle)return Hn(this,e);if(e instanceof u.Box)return Pr(this,e);if(e instanceof u.Segment)return qi(e,this);if(e instanceof u.Arc)return js(this,e);if(e instanceof u.Polygon)return Ji(this,e);if(e instanceof u.Multiline)return Xi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof u.Point)return[new u.Ray(e,this.norm),new u.Ray(e,this.norm)];{let n=new u.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new u.Point){return new u.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=Pr(this,e);if(r.length===0)return"";let i=r[0],o=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return o===void 0&&(o=i),new u.Segment(i,o).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw J.ILLEGAL_PARAMETERS;return new u.Vector(e,n).normalize().rotate90CCW()}};u.Line=Nr;const _1=(...t)=>new u.Line(...t);u.line=_1;let Go=class extends vn{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new u.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new u.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new u.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof u.Point)return u.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof u.Segment)return u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Arc)return this.intersect(e).length===0&&u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Circle)return this.intersect(e).length===0&&u.Utils.LE(e.r,this.r)&&u.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new u.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw J.OPERATION_IS_NOT_SUPPORTED;return new u.Circle(this.pc,this.r*e)}transform(e=new u.Matrix){return new u.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Hn(e,this);if(e instanceof u.Ray)return Qp(e,this);if(e instanceof u.Segment)return Gs(e,this);if(e instanceof u.Circle)return Up(e,this);if(e instanceof u.Box)return Ry(this,e);if(e instanceof u.Arc)return Va(e,this);if(e instanceof u.Polygon)return $p(this,e);if(e instanceof u.Multiline)return Xi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.circle2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline){let[n,r]=u.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${Gn({fill:"none",...e})} />`}};u.Circle=Go;const E1=(...t)=>new u.Circle(...t);u.circle=E1;class Mu extends vn{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=u.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:o,counterClockwise:s}=e[0];this.pc=new u.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=o,this.counterClockwise=s}else{let[n,r,i,o,s]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),o!==void 0&&(this.endAngle=o),s!==void 0&&(this.counterClockwise=s)}}clone(){return new u.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(u.Utils.EQ(this.startAngle,this.endAngle))return 0;if(u.Utils.EQ(Math.abs(this.startAngle-this.endAngle),u.PIx2))return u.PIx2;let e;return this.counterClockwise?e=u.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+u.PIx2:e=u.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+u.PIx2,u.Utils.GT(e,u.PIx2)&&(e-=u.PIx2),u.Utils.LT(e,0)&&(e+=u.PIx2),e}get start(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new u.Box);return n=n.merge(this.end.box),n}contains(e){if(!u.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new u.Vector(this.pc,e).slope,r=new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return u.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new u.Vector(this.pc,e).slope;return[new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new u.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new u.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new u.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return js(e,this);if(e instanceof u.Ray)return Ha(e,this);if(e instanceof u.Circle)return Va(this,e);if(e instanceof u.Segment)return $r(e,this);if(e instanceof u.Box)return My(this,e);if(e instanceof u.Arc)return Bp(this,e);if(e instanceof u.Polygon)return $a(this,e);if(e instanceof u.Multiline)return Xi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.arc2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.arc2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let o=0;o<4;o++)r[o].on(this)&&i.push(new u.Arc(this.pc,this.r,this.startAngle,n[o],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,a)=>l.length-a.length);for(let l=0;l<i.length;l++){let a=e.length>0?e[e.length-1]:void 0,c;a?c=new u.Arc(this.pc,this.r,a.endAngle,i[l].endAngle,this.counterClockwise):c=new u.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),u.Utils.EQ_0(c.length)||e.push(c.clone())}let o=e.length>0?e[e.length-1]:void 0,s;o?s=new u.Arc(this.pc,this.r,o.endAngle,this.endAngle,this.counterClockwise):s=new u.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!u.Utils.EQ_0(s.length)&&!u.Utils.EQ(s.sweep,2*Math.PI)&&e.push(s.clone())}return e}tangentInStart(){let e=new u.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new u.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new u.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new u.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),o=this.counterClockwise;return e.a*e.d<0&&(o=!o),u.Arc.arcSE(i,n,r,o)}static arcSE(e,n,r,i){let{vector:o}=u,s=o(e,n).slope,l=o(e,r).slope;u.Utils.EQ(s,l)&&(l+=2*Math.PI,i=!0);let a=o(e,n).length;return new u.Arc(e,a,s,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,o)=>i+o.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new u.Line(this.start,this.end),r=this.pc.leftTo(n),o=new u.Segment(this.start,this.end).definiteIntegral(e),s=this.circularSegmentArea();return r?o-s:o+s}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=u;return e.slice().sort((r,i)=>{let o=n(this.pc,r).slope,s=n(this.pc,i).slope;return o<s?-1:o>s?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return u.Utils.EQ(this.sweep,2*Math.PI)?new u.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${Gn({fill:"none",...e})} />`}}u.Arc=Mu;const w1=(...t)=>new u.Arc(...t);u.arc=w1;class ln extends vn{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new ln(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new u.Point(this.xmin,this.ymin)}get high(){return new u.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new u.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new ln(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new u.Point(this.xmin,this.ymin),new u.Point(this.xmax,this.ymin),new u.Point(this.xmax,this.ymax),new u.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new u.Segment(e[0],e[1]),new u.Segment(e[1],e[2]),new u.Segment(e[2],e[3]),new u.Segment(e[3],e[0])]}rotate(e,n=new u.Point){throw J.OPERATION_IS_NOT_SUPPORTED}transform(e=new u.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new ln)}contains(e){if(e instanceof u.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof u.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof u.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof u.Circle)return this.contains(e.box);if(e instanceof u.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>$r(n,e).length===0);if(e instanceof u.Line||e instanceof u.Ray)return!1;if(e instanceof u.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof u.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${Gn({fill:"none",...e})} />`}}u.Box=ln;const S1=(...t)=>new u.Box(...t);u.box=S1;class T1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof u.Segment}get isArc(){return this.shape instanceof u.Arc}get isLine(){return this.shape instanceof u.Line}get isRay(){return this.shape instanceof u.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof u.Line||this.shape instanceof u.Ray)return this.bv=u.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=Si(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=Si(e,this.end)),this.bvStart===u.OUTSIDE||this.bvEnd==u.OUTSIDE)this.bv=u.OUTSIDE;else if(this.bvStart===u.INSIDE||this.bvEnd==u.INSIDE)this.bv=u.INSIDE;else{let n=Si(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof u.Segment&&i instanceof u.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=u.OVERLAP_OPPOSITE):(r instanceof u.Arc&&i instanceof u.Arc||r instanceof u.Segment&&i instanceof u.Arc||r instanceof u.Arc&&i instanceof u.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=u.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof u.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof u.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(u.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,o=new u.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),s=new u.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}
                    A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}u.Edge=T1;class I1 extends Wa{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class cr extends I1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof u.Point)){let i=cr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(s=>new u.Point(s[0],s[1])),o=cr.points2segments(i);this.shapes2face(e.edges,o)}else if(r.every(i=>i instanceof u.Segment||i instanceof u.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let o of r){let s;o.name==="segment"?s=new u.Segment(o):s=new u.Arc(o),i.push(s)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof cr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof u.Circle)this.shapes2face(e.edges,[n[0].toArc(kp)]);else if(n[0]instanceof u.Box){let r=n[0];this.shapes2face(e.edges,[new u.Segment(new u.Point(r.xmin,r.ymin),new u.Point(r.xmax,r.ymin)),new u.Segment(new u.Point(r.xmax,r.ymin),new u.Point(r.xmax,r.ymax)),new u.Segment(new u.Point(r.xmax,r.ymax),new u.Point(r.xmin,r.ymax)),new u.Segment(new u.Point(r.xmin,r.ymax),new u.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof u.Edge&&n[1]instanceof u.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new u.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new u.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new u.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();u.Utils.EQ_0(e)?this._orientation=jo.NOT_ORIENTABLE:u.Utils.LT(e,0)?this._orientation=jo.CCW:this._orientation=jo.CW}return this._orientation}isSimple(e){return cr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let o of e){let s=n.search(o.box);for(let l of s){if(o===l||l.face!==e||o.shape instanceof u.Segment&&l.shape instanceof u.Segment&&(o.next===l||o.prev===l))continue;let a=o.shape.intersect(l.shape);for(let c of a)if(!(c.equalTo(o.start)&&c.equalTo(l.end)&&l===o.prev)&&!(c.equalTo(o.end)&&c.equalTo(l.start)&&l===o.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new u.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}u.Face=cr;class Ka extends vn{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof u.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof u.Vector){this.norm=e[1].clone();return}throw J.ILLEGAL_PARAMETERS}}clone(){return new Ka(this.pt,this.norm)}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new u.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))&&u.Utils.GE(n.cross(this.norm),0)}coord(e){return sg(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new u.Segment(this.pt,e),new u.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Segment)return Ga(this,e);if(e instanceof u.Arc)return Ha(this,e);if(e instanceof u.Line)return Kp(this,e);if(e instanceof u.Ray)return Vy(this,e);if(e instanceof u.Circle)return Qp(this,e);if(e instanceof u.Box)return Wy(this,e);if(e instanceof u.Polygon)return Yp(this,e)}rotate(e,n=new u.Point){return new u.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new u.Line(this.pt,this.norm),i=Pr(r,e);return i=i.filter(s=>this.contains(s)),i.length===0||i.length===2?"":new u.Segment(this.pt,i[0]).svg(n)}}u.Ray=Ka;const x1=(...t)=>new u.Ray(...t);u.ray=x1;let fn=class qn{constructor(){this.faces=new u.PlanarSet,this.edges=new u.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof u.Circle||e[0]instanceof u.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new u.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new u.Face(this,i));else this.faces.add(new u.Face(this,r));else this.faces.add(new u.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new qn;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new u.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),o=n.prev;return n.face.insert(i,o),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let s of e.edges)for(let l of n.edges){let a=Gp(s,l);for(let c of a)Lr(s,c,r.int_points1),Lr(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=bt(r.int_points1),r.int_points2_sorted=bt(r.int_points2),Or(e,r.int_points1_sorted),Or(n,r.int_points2_sorted),ba(r),r.int_points1_sorted=bt(r.int_points1),r.int_points2_sorted=bt(r.int_points2),xu(r.int_points1),Cu(r.int_points1,n);for(let s of r.int_points1_sorted)s.edge_before&&s.edge_after&&s.edge_before.bv===s.edge_after.bv&&(r.int_points2[s.id]=-1,s.id=-1);if(r.int_points1=r.int_points1.filter(s=>s.id>=0),r.int_points2=r.int_points2.filter(s=>s.id>=0),r.int_points1.forEach((s,l)=>{s.id=l}),r.int_points2.forEach((s,l)=>{s.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=bt(r.int_points1),r.int_points2_sorted=bt(r.int_points2);let i,o;for(let s=1;s<r.int_points1_sorted.length;s++)if(o=r.int_points1_sorted[s],i=r.int_points1_sorted[s-1],o.edge_before&&o.edge_before.bv===ys){let l=i.edge_after,a=o.edge_before,c=e.getChain(l,a);Bf(r.int_points2[i.id],r.int_points2[o.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new u.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Bf(r.int_points2[o.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new bn([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,o)=>o.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let o=[...i.faces][0];if(o.orientation()!==n){for(let s of r)if(o.shapes.every(l=>s.contains(l))){s.addFace(o.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof u.Point){let n=Si(this,e);return n===ys||n===pt}else return ig(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle||e instanceof u.Line||e instanceof u.Segment||e instanceof u.Arc){let[n,r]=u.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let n=[Number.POSITIVE_INFINITY,new u.Segment],r,i;for(let o of this.edges){let s=n[0];[r,i]=u.Distance.shape2planarSet(o.shape,e.edges,s),u.Utils.LT(r,s)&&(n=[r,i])}return n}}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Ji(e,this);if(e instanceof u.Ray)return Yp(e,this);if(e instanceof u.Circle)return $p(e,this);if(e instanceof u.Segment)return ja(e,this);if(e instanceof u.Arc)return $a(e,this);if(e instanceof u.Polygon)return Uy(e,this);if(e instanceof u.Multiline)return Fy(e,this)}translate(e){let n=new qn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new u.Point){let r=new qn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.rotate(e,n)));return r}scale(e,n){let r=new qn;for(let i of this.faces)r.addFace(i.shapes.map(o=>o.scale(e,n)));return r}transform(e=new u.Matrix){let n=new qn;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${Gn({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};u.Polygon=fn;const C1=(...t)=>new u.Polygon(...t);u.polygon=C1;const{Circle:Cl,Line:bf,Point:Qf,Vector:Po,Utils:Pl}=u;class Ti{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new Po(e.pc,n),i=e.r*e.r,o=r.dot(r);return Pl.EQ_0(o)?new Qf(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/o))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(Pl.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),o=new Po(e.pc,n.pc);o=o.normalize();let s=e.pc.translate(o.multiply(i));return new bf(s,o)}else{let i=new Po(e.pc,n.pc),o=e.r*e.r/(i.dot(i)-n.r*n.r),s=e.pc.translate(i.multiply(o)),l=Math.abs(o)*n.r;return new Cl(s,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(Pl.EQ_0(r))return n.clone();{let o=e.r*e.r/(2*r),s=new Po(e.pc,i.end);return s=s.multiply(o/r),new Cl(e.pc.translate(s),o)}}inverse(e){if(e instanceof Qf)return Ti.inversePoint(this.circle,e);if(e instanceof Cl)return Ti.inverseCircle(this.circle,e);if(e instanceof bf)return Ti.inverseLine(this.circle,e)}}u.Inversion=Ti;const P1=t=>new u.Inversion(t);u.inversion=P1;class I{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new u.Vector(e,r).length,new u.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(u.Utils.EQ_0(r))return[n.r,new u.Segment(e,n.toArc().start)];{let o=Math.abs(r-n.r),s=new u.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(s);return[o,new u.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return I.point2point(e,n.start);let r=new u.Vector(n.start,n.end),i=new u.Vector(n.start,e),o=new u.Vector(n.end,e),s=r.dot(i),l=-r.dot(o),a,c;if(u.Utils.GE(s,0)&&u.Utils.GE(l,0)){let f=n.tangentInStart();return a=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[a,new u.Segment(e,c)]}else return s<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new u.Circle(n.pc,n.r),i=[],o,s;return[o,s]=I.point2circle(e,r),s.end.on(n)&&i.push(I.point2circle(e,r)),i.push(I.point2point(e,n.start)),i.push(I.point2point(e,n.end)),I.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof u.Segment?I.point2segment(e,n.shape):I.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[];return i.push(I.point2line(e.start,n)),i.push(I.point2line(e.end,n)),I.sort(i),i[0]}static segment2segment(e,n){let r=$s(e,n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[],o,s;return[o,s]=I.point2segment(n.start,e),i.push([o,s.reverse()]),[o,s]=I.point2segment(n.end,e),i.push([o,s.reverse()]),i.push(I.point2segment(e.start,n)),i.push(I.point2segment(e.end,n)),I.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),[o,s]=I.point2line(n.center,i);if(u.Utils.GE(o,n.r)&&s.end.on(e))return I.point2circle(s.end,n);{let[l,a]=I.point2circle(e.start,n),[c,f]=I.point2circle(e.end,n);return u.Utils.LT(l,c)?[l,a]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),o=new u.Circle(n.pc,n.r),[s,l]=I.point2line(o.center,i);if(u.Utils.GE(s,o.r)&&l.end.on(e)){let[d,h]=I.point2circle(l.end,o);if(h.end.on(n))return[d,h]}let a=[];a.push(I.point2arc(e.start,n)),a.push(I.point2arc(e.end,n));let c,f;return[c,f]=I.point2segment(n.start,e),a.push([c,f.reverse()]),[c,f]=I.point2segment(n.end,e),a.push([c,f.reverse()]),I.sort(a),a[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),o=n.toArc();return I.point2point(i.start,o.start)}else{let i=new u.Line(e.center,n.center),o=i.intersect(e),s=i.intersect(n),l=[];return l.push(I.point2point(o[0],s[0])),l.push(I.point2point(o[0],s[1])),l.push(I.point2point(o[1],s[0])),l.push(I.point2point(o[1],s[1])),I.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let[i,o]=I.point2line(e.center,n),[s,l]=I.point2circle(o.end,e);return l=l.reverse(),[s,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[o,s]=I.point2line(i.center,n);if(u.Utils.GE(o,i.r)){let[l,a]=I.point2circle(s.end,i);if(a.end.on(e))return[l,a]}else{let l=[];return l.push(I.point2line(e.start,n)),l.push(I.point2line(e.end,n)),I.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[o,s]=I.circle2circle(i,n);if(s.start.on(e))return[o,s];{let l=[];return l.push(I.point2circle(e.start,n)),l.push(I.point2circle(e.end,n)),I.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),o=new u.Circle(n.center,n.r),[s,l]=I.circle2circle(i,o);if(l.start.on(e)&&l.end.on(n))return[s,l];{let a=[],c,f;return[c,f]=I.point2arc(e.start,n),f.end.on(n)&&a.push([c,f]),[c,f]=I.point2arc(e.end,n),f.end.on(n)&&a.push([c,f]),[c,f]=I.point2arc(n.start,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=I.point2arc(n.end,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=I.point2point(e.start,n.start),a.push([c,f]),[c,f]=I.point2point(e.start,n.end),a.push([c,f]),[c,f]=I.point2point(e.end,n.start),a.push([c,f]),[c,f]=I.point2point(e.end,n.end),a.push([c,f]),I.sort(a),a[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[o,s]=I.point2edge(e,i);u.Utils.LT(o,r[0])&&(r=[o,s])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[o,s]=e.distanceTo(i.shape);u.Utils.LT(o,r[0])&&(r=[o,s])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e.edges)for(let o of n.edges){let[s,l]=i.shape.distanceTo(o.shape);u.Utils.LT(s,r[0])&&(r=[s,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),o=r*r+i*i,s=e.merge(n),l=s.xmax-s.xmin,a=s.ymax-s.ymin,c=l*l+a*a;return[o,c]}static minmax_tree_process_level(e,n,r,i){let o,s;for(let f of n)[o,s]=I.box2box_minmax(e.box,f.item.key),f.item.value instanceof u.Edge?i.insert([o,s],f.item.value.shape):i.insert([o,s],f.item.value),u.Utils.LT(s,r)&&(r=s);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),a=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...a].filter(f=>{let[d,h]=I.box2box_minmax(e.box,f.max);return u.Utils.LE(d,r)});return r=I.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new ji,o=[n.index.root],s=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return s=I.minmax_tree_process_level(e,o,s,i),i}static minmax_tree_calc_distance(e,n,r){let i,o;if(n!=null&&!n.isNil()){if([i,o]=I.minmax_tree_calc_distance(e,n.left,r),o)return[i,o];if(u.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[s,l]=I.distance(e,n.item.value);return u.Utils.LT(s,i[0])&&(i=[s,l]),[i,o]=I.minmax_tree_calc_distance(e,n.right,i),[i,o]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new u.Segment],o=!1;if(n instanceof u.PlanarSet){let s=I.minmax_tree(e,n,r);[i,o]=I.minmax_tree_calc_distance(e,s.root,i)}return i}static sort(e){e.sort((n,r)=>u.Utils.LT(n[0],r[0])?-1:u.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n){let[o,s]=I.distance(e,i.shape);u.Utils.LT(o,r[0])&&(r=[o,s])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e)for(let o of n){let[s,l]=I.distance(i.shape,o.shape);u.Utils.LT(s,r[0])&&(r=[s,l])}return r}}u.Distance=I;const{Multiline:L1,Point:ug,Segment:A1,Polygon:ag}=u;function Ya(t){return new ug(t.split(" ").map(Number))}function cg(t){return t.split(", ").map(Ya)}function qa(t){const e=cg(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new A1(e[r],e[r+1]));return new L1(n)}function O1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(qa)}function fg(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new ag;let r;return e.forEach((i,o)=>{let s=i.split(", ").map(a=>new ug(a.split(" ").map(Number)));const l=n.addFace(s);o===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function N1(t){const n=t.split(/\)\), \(\(/).map(o=>"(("+o+"))").map(fg),r=new ag;return n.reduce((o,s)=>[...o,...s==null?void 0:s.faces],[]).forEach(o=>r.addFace([...o==null?void 0:o.shapes])),r}function k1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return fg(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return N1(e)}}function R1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Ya)}function M1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(qa).reduce((n,r)=>[...n,...r],[])}function dg(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return Ya(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return cg(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return qa(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return O1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return k1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(dg).map(i=>i instanceof Array?i:[i]).reduce((i,o)=>[...i,...o],[])}else{if(hg(t))return R1(t);if(pg(t))return M1(t)}}return[]}function hg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function pg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function z1(t){return t.startsWith("POINT")||hg(t)||t.startsWith("LINESTRING")||pg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}u.isWktString=z1;u.parseWKT=dg;u.BooleanOperations=e1;u.Relations=Qa;function St(t){const e=ro(),n=Ft();return new R((t.x-e.x)*n,(t.y-e.y)*n)}function bs(t){const e=ro(),n=Ft();return new R(t.x/n+e.x,t.y/n+e.y)}var D=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(D||{}),Es=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(Es||{}),ws=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(ws||{}),ue=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenZoom="screenZoom",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(ue||{});function D1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function ye(t){const e=[];for(const n of t)n&&e.push(n);return e}function F1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Qs(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const o=e[i],s=typeof o=="function",l=s?o(n):n[o],a=s?o(r):r[o],c=F1(l,a,"asc");if(c!==0)return c}return 0})}function to(t,e){const n=[];for(const r of t)n.every(o=>!e(o,r))&&n.push(r);return n}function Kf(){}function Yf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const U1="[object RegExp]",B1="[object String]",W1="[object Number]",V1="[object Boolean]",qf="[object Arguments]",j1="[object Symbol]",$1="[object Date]",G1="[object Map]",H1="[object Set]",b1="[object Array]",Q1="[object Function]",K1="[object ArrayBuffer]",Ll="[object Object]",Y1="[object Error]",q1="[object DataView]",J1="[object Uint8Array]",X1="[object Uint8ClampedArray]",Z1="[object Uint16Array]",e_="[object Uint32Array]",t_="[object BigUint64Array]",n_="[object Int8Array]",r_="[object Int16Array]",i_="[object Int32Array]",o_="[object BigInt64Array]",s_="[object Float32Array]",l_="[object Float64Array]";function Jf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Xf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function u_(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ct(t,e)}return Ct(t,e)}function Ct(t,e,n){if(Object.is(t,e))return!0;let r=Xf(t),i=Xf(e);if(r===qf&&(r=Ll),i===qf&&(i=Ll),r!==i)return!1;switch(r){case B1:return t.toString()===e.toString();case W1:{const l=t.valueOf(),a=e.valueOf();return l===a||Number.isNaN(l)&&Number.isNaN(a)}case V1:case $1:case j1:return Object.is(t.valueOf(),e.valueOf());case U1:return t.source===e.source&&t.flags===e.flags;case Q1:return t===e}n=n??new Map;const o=n.get(t),s=n.get(e);if(o!=null&&s!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(r){case G1:{if(t.size!==e.size)return!1;for(const[l,a]of t.entries())if(!e.has(l)||!Ct(a,e.get(l),n))return!1;return!0}case H1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),a=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=a.findIndex(h=>Ct(f,h,n));if(d===-1)return!1;a.splice(d,1)}return!0}case b1:case J1:case X1:case Z1:case e_:case t_:case n_:case r_:case i_:case o_:case s_:case l_:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Ct(t[l],e[l],n))return!1;return!0}case K1:return t.byteLength!==e.byteLength?!1:Ct(new Uint8Array(t),new Uint8Array(e),n);case q1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ct(t.buffer,e.buffer,n);case Y1:return t.name===e.name&&t.message===e.message;case Ll:{if(!(Ct(t.constructor,e.constructor,n)||Yf(t)&&Yf(e)))return!1;const a=[...Object.keys(t),...Jf(t)],c=[...Object.keys(e),...Jf(e)];if(a.length!==c.length)return!1;for(let f=0;f<a.length;f++){const d=a[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!Ct(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}let gg=new R(0,0),mg=null,Ja=new R(0,0),Ho=null,vg=null,kr=[],yg=[],no=[],Xa=null,_g=!1,Eg=[],wg=[],Sg=!1,Tg=[],Za=45,ec=new R(0,0),tc=1,Ig=null,xg=null,Cg=null,Pg=[],Lg=0,Ag="#fff",Og=1;const nc=()=>gg,a_=()=>mg,Ng=()=>Ja,xe=()=>Ho,c_=()=>vg,_e=()=>kr,Ae=()=>no,kg=()=>Xa,f_=()=>_g,d_=()=>Eg,bo=()=>wg,h_=()=>Sg,p_=()=>Tg,Rg=()=>Za,ro=()=>ec,Ft=()=>tc,g_=()=>Ig,rc=()=>xg,Mg=()=>Cg,ic=()=>Pg,m_=()=>Lg,Un=()=>Ag,Bn=()=>Og,br=()=>bs(Ja),oc=()=>kr.filter(t=>no.includes(t.id)),v_=()=>kr.filter(t=>!no.includes(t.id)),Rr=t=>no.includes(t.id),sc=t=>yg.includes(t.id),y_=t=>gg=t,__=t=>mg=t,E_=t=>Ja=t,Lt=(t,e=!0)=>{var n;(n=xe())==null||n.stop(),Ho=t,Ho.subscribe(r=>{var o;const i=(o=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:o.instructions;c_()!==i&&(w_(i||null),i&&(document.getElementById("toolInstructions").innerText=i,console.log("STATE: "+i)))}),Ho.start(),e&&io(ue.activeTool)},w_=t=>vg=t,Ks=t=>{N_(ue.entities,kr),kr=t},b=t=>{Xa=t},zu=t=>yg=t,G=t=>no=t,lc=t=>_g=t,uc=t=>Eg=t,lt=t=>wg=t,Xe=t=>(console.log("setShouldDrawHelpers",t),Dg(null),Fg(null),uc([]),Sg=t),S_=t=>Tg=t,T_=(t,e=!0)=>{Za=t,e&&io(ue.activeTool)},ac=t=>{ec=t},zg=t=>{tc=t,io(ue.screenZoom)},cc=t=>Ig=t,Dg=t=>xg=t,Fg=t=>Cg=t,I_=t=>Pg=t,x_=t=>Lg=t,C_=(t,e=!0)=>{Ag=t,e&&io(ue.activeLineColor)},P_=(t,e=!0)=>{Og=t,e&&io(ue.activeLineWidth)},Ut=(...t)=>{const e=t.map(r=>r.id),n=_e().filter(r=>!e.includes(r.id));return Ks(n),n},Ue=(...t)=>{const e=[..._e(),...t];return Ks(e),e},L_=[ue.activeTool,ue.angleStep,ue.activeLineColor,ue.activeLineWidth,ue.screenZoom],A_=[ue.entities],O_=[],fr=D1();function N_(t,e){if(!A_.includes(t))return;const n=fr.peek();if(!u_(e,n==null?void 0:n.value)){if(t!==ue.activeEntity&&fr.clear(ue.activeEntity),O_.includes(t)&&(n==null?void 0:n.variable)===t){fr.replace({variable:t,value:e});return}fr.push({variable:t,value:e})}}function Ug(t){const e=t.variable,n=t.value;switch(e){case ue.entities:kr=n;break;case ue.activeEntity:Xa=n;break;case ue.angleStep:Za=n;break;case ue.screenOffset:ec=n;break;case ue.screenZoom:tc=n;break}}function Bg(){const t=fr.undo();t&&Ug(t)}function Wg(){const t=fr.redo();t&&Ug(t)}function io(t){L_.includes(t)&&window.dispatchEvent(new CustomEvent(ws.UPDATE_STATE))}var te=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t.Image="Image",t))(te||{});const Du=1e-6,Lo=10,Ao=30,k_="#111",R_="#FFFF00",fc=15,M_=15,dc=15,W=15,hc=1e3,z_=3,D_="#b6ff9a",F_="#6899f3",U_=1,B_=[5,5],Vg="#999",jg=1,$g=[5,5],W_=.1,V_=["#ffffff","#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"];function Tt(t,e){return Math.abs(t.x-e.x)<Du&&Math.abs(t.y-e.y)<Du}function Gg(t,e,n){const r=nt.getAngle(e,n),i=t.map(o=>({point:o,angle:(new Nr(e,o).slope-r+2*Math.PI)%(2*Math.PI)}));return Qs(i,[o=>o.angle]).map(o=>o.point)}function Qn(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}function Wn(t,e,n){const i=new Fn(e,t).scale(n-1,n-1);return new R(t.x+i.x,t.y+i.y)}class nt{constructor(e,n,r,i,o=!0){V(this,"id",crypto.randomUUID());V(this,"lineColor","#fff");V(this,"lineWidth",1);V(this,"lineStyle");V(this,"arc");this.arc=new Mu(e,n,r,i,o)}static getAngle(e,n){return new Nr(e,n).slope}draw(e){var i,o;const n=St(this.arc.center),r=this.arc.r.valueOf()*e.screenZoom;e.context.beginPath(),e.context.arc(n.x,n.y,r,((i=this.arc)==null?void 0:i.startAngle)||0,((o=this.arc)==null?void 0:o.endAngle)||2*Math.PI),e.context.stroke()}move(e,n){this.arc=this.arc.translate(e,n)}scale(e,n){const r=Wn(this.arc.center,e,n);this.arc=new Mu(r,this.arc.r.valueOf()*n,this.arc.startAngle,this.arc.endAngle,this.arc.counterClockwise)}rotate(e,n){this.arc=this.arc.rotate(n,e)}clone(){if(this.arc){const{center:e,r:n,startAngle:r,endAngle:i,counterClockwise:o}=this.arc;return new nt(e,n.valueOf(),r,i,o)}return this}intersectsWithBox(e){return this.arc.intersect(e).length>0}isContainedInBox(e){return e.contains(this.arc)}getBoundingBox(){return this.arc.box}getShape(){return this.arc}getSnapPoints(){return[{point:this.arc.center,type:D.CircleCenter},{point:this.arc.start,type:D.LineEndPoint},{point:this.arc.end,type:D.LineEndPoint}]}getIntersections(e){const n=e.getShape();return n?this.arc.intersect(n):[]}getFirstPoint(){return this.arc.center}distanceTo(e){return this.arc.distanceTo(e)}getSvgString(){return this.arc.svg({strokeWidth:this.lineWidth,stroke:Qn(this.lineColor)})||null}getType(){return te.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){const n=to([this.arc.start,this.arc.end,...e],Tt),r=Gg(n,this.arc.center,this.arc.start),i=[];for(let o=0;o<r.length-1;o++){const s=r[o],l=r[o+1],a=nt.getAngle(this.arc.center,s),c=nt.getAngle(this.arc.center,l),f=new nt(this.arc.center,Number(this.arc.r),a,c,this.arc.counterClockwise);f.lineColor=this.lineColor,f.lineWidth=this.lineWidth,i.push(f)}return i}async toJson(){return this.arc?{id:this.id,type:te.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}static async fromJson(e){if(e.type!==te.Arc)throw new Error("Invalid Entity type in JSON");const n=new R(e.shapeData.center.x,e.shapeData.center.y),r=new R(e.shapeData.start.x,e.shapeData.start.y),i=new R(e.shapeData.end.x,e.shapeData.end.y),o=Number(n.distanceTo(r)[0]),s=Number(nt.getAngle(n,r)),l=Number(nt.getAngle(n,i)),a=e.shapeData.counterClockwise,c=new nt(n,o,s,l,a);return c.id=e.id,c.lineColor=e.lineColor,c.lineWidth=e.lineWidth,c}}class Mr{constructor(e,n){V(this,"id",crypto.randomUUID());V(this,"lineColor","#fff");V(this,"lineWidth",1);V(this,"lineStyle");V(this,"circle");e instanceof Go?this.circle=e:this.circle=new Go(e,n)}draw(e){const n=St(this.circle.center),r=this.circle.r*e.screenZoom;e.context.beginPath(),e.context.arc(n.x,n.y,r,0,2*Math.PI),e.context.stroke()}move(e,n){var r;this.circle&&(this.circle=(r=this.circle)==null?void 0:r.translate(e,n))}scale(e,n){const r=Wn(this.circle.center,e,n);this.circle=new Go(r,this.circle.r.valueOf()*n)}rotate(e,n){this.circle=this.circle.rotate(n,e)}clone(){return this.circle?new Mr(this.circle.clone()):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){return this.circle.center===null||this.circle===null?[]:[{point:this.circle.center,type:D.CircleCenter},{point:new R(this.circle.center.x+this.circle.r,this.circle.center.y),type:D.CircleCardinal},{point:new R(this.circle.center.x-this.circle.r,this.circle.center.y),type:D.CircleCardinal},{point:new R(this.circle.center.x,this.circle.center.y+this.circle.r),type:D.CircleCardinal},{point:new R(this.circle.center.x,this.circle.center.y-this.circle.r),type:D.CircleCardinal}]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.circle.center}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle.svg({strokeWidth:this.lineWidth,stroke:Qn(this.lineColor)})||null}getType(){return te.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}async toJson(){var e;return this.circle?{id:this.id,type:te.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}static async fromJson(e){const n=new R(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new Mr(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}getRadius(){var e;return((e=this.circle)==null?void 0:e.r)??0}}function dn(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}class ct{constructor(e,n){V(this,"id",crypto.randomUUID());V(this,"lineColor","#fff");V(this,"lineWidth",1);V(this,"lineStyle");V(this,"segment");e instanceof $o?this.segment=e:this.segment=new $o(e,n)}draw(e){const n=St(this.segment.start),r=St(this.segment.end);e.context.beginPath(),e.context.moveTo(n.x,n.y),e.context.lineTo(r.x,r.y),e.context.stroke()}move(e,n){this.segment=this.segment.translate(e,n)}scale(e,n){const r=Wn(this.segment.start,e,n),i=Wn(this.segment.end,e,n);this.segment=new $o(r,i)}rotate(e,n){this.segment=this.segment.rotate(n,e)}clone(){return new ct(this.segment.clone())}intersectsWithBox(e){return this.segment.intersect(e).length>0}isContainedInBox(e){return e.contains(this.segment)}getBoundingBox(){return this.segment.box}getShape(){return this.segment}getSnapPoints(){return[{point:this.segment.start,type:D.LineEndPoint},{point:this.segment.end,type:D.LineEndPoint},{point:this.segment.middle(),type:D.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?this.segment.intersect(n):[]}getFirstPoint(){return this.segment.start}distanceTo(e){return this.segment.distanceTo(e)}getSvgString(){return this.segment.svg({strokeWidth:this.lineWidth,stroke:Qn(this.lineColor)})||null}getType(){return te.Line}containsPointOnShape(e){return this.segment.contains(e)}cutAtPoints(e){const n=to([this.segment.start,this.segment.end,...e],Tt),r=Qs(n,[o=>dn(this.segment.start,o)]),i=[];for(let o=0;o<r.length-1;o++)i.push(new ct(r[o],r[o+1]));return i}async toJson(){return{id:this.id,type:te.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}}static async fromJson(e){const n=new R(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new R(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new ct(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class $i{constructor(e,n){V(this,"id",crypto.randomUUID());V(this,"lineColor","#fff");V(this,"lineWidth",1);V(this,"lineStyle");V(this,"point");e instanceof R?this.point=new R(e.x,e.y):this.point=new R(e,n)}draw(e){const n=St(this.point);e.context.beginPath(),e.context.arc(n.x,n.y,5,0,Math.PI*2),e.context.stroke()}move(e,n){this.point=this.point.translate(e,n)}scale(e,n){this.point=Wn(this.point,e,n)}rotate(e,n){this.point=this.point.rotate(n,e)}clone(){return new $i(this.point.clone())}intersectsWithBox(){return!1}isContainedInBox(e){return e.contains(this.point)}getBoundingBox(){return this.point?new ln(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return[{point:this.point,type:D.Point}]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point.distanceTo(e)}getSvgString(){return this.point.svg({strokeWidth:this.lineWidth,stroke:Qn(this.lineColor)})||null}getType(){return te.Point}containsPointOnShape(e){return this.point.equalTo(e)}async toJson(){return{id:this.id,type:te.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}}static async fromJson(e){const n=new R(e.shapeData.point.x,e.shapeData.point.y),r=new $i(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function j_(t){return new fn([new R(Math.min(t.low.x,t.high.x),Math.min(t.low.y,t.high.y)),new R(Math.min(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new R(Math.max(t.low.x,t.high.x),Math.max(t.low.y,t.high.y)),new R(Math.max(t.low.x,t.high.x),Math.min(t.low.y,t.high.y))])}function pc(t,e){return new fn([new R(Math.min(t.x,e.x),Math.min(t.y,e.y)),new R(Math.min(t.x,e.x),Math.max(t.y,e.y)),new R(Math.max(t.x,e.x),Math.max(t.y,e.y)),new R(Math.max(t.x,e.x),Math.min(t.y,e.y))])}function ot(t){const e=[];return t.edges.forEach(n=>{e.push(n.shape)}),e}class Bt{constructor(e,n){V(this,"id",crypto.randomUUID());V(this,"lineColor","#fff");V(this,"lineWidth",1);V(this,"lineStyle");V(this,"polygon");e instanceof fn?this.polygon=e:this.polygon=pc(e,n)}draw(e){ot(this.polygon).forEach(n=>{const r=St(n.start),i=St(n.end);e.context.beginPath(),e.context.moveTo(r.x,r.y),e.context.lineTo(i.x,i.y),e.context.stroke()})}move(e,n){this.polygon=this.polygon.translate(new Fn(e,n))}scale(e,n){const r=this.polygon.box.center,i=Wn(r,e,n);this.polygon=this.polygon.translate(new Fn(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e)}clone(){return new Bt(this.polygon.clone())}intersectsWithBox(e){return Qa.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=ot(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=ot(this.polygon);return[{point:e[0],type:D.LineEndPoint},{point:e[1],type:D.LineEndPoint},{point:e[2],type:D.LineEndPoint},{point:e[3],type:D.LineEndPoint},{point:n[0].middle(),type:D.LineMidPoint},{point:n[1].middle(),type:D.LineMidPoint},{point:n[2].middle(),type:D.LineMidPoint},{point:n[3].middle(),type:D.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?ot(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:Qn(this.lineColor)})}getType(){return te.Image}containsPointOnShape(e){return ot(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:te.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y}))}}}static async fromJson(e){const n=new fn(e.shapeData.points.map(i=>new R(i.x,i.y))),r=new Bt(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}function $_(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,o=JSON.parse(i);o.entities||n(new Error("Invalid JSON file"));const s=ye(o.entities.map(l=>{switch(l.type){case te.Arc:return nt.fromJson(l);case te.Circle:return Mr.fromJson(l);case te.Line:return ct.fromJson(l);case te.Point:return $i.fromJson(l);case te.Rectangle:return Bt.fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));Ks(ye(await Promise.all(s))),e()}),r.readAsText(t,"utf-8")})}var Hg={exports:{}};(function(t,e){(function(n,r){r()})(qr,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){a(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof qr=="object"&&qr.global===qr?qr:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=s.URL||s.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?o(v):i(v.href)?r(c,f,d):o(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){o(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",_=/constructor/i.test(s.HTMLElement)||s.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&_||l)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var m=S.result;m=y?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},S.readAsDataURL(c)}else{var g=s.URL||s.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});s.saveAs=a.saveAs=a,t.exports=a})})(Hg);var gc=Hg.exports;async function G_(){const e=_e().map(o=>o.toJson()),n={entities:ye(await Promise.all(e))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});gc.saveAs(i,"open-web-cad--drawing.json")}function bg(t,e){let n=e.x,r=e.y,i=0,o=0;const s=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),o=Math.max(o,d.ymax))}),console.log("exporting svg",s);const l=i-n+Lo*2,a=o-r+Lo*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new Fn(new R(n,r),new R(Lo,Lo))).svg({stroke:Qn(f.lineColor),strokeWidth:f.lineWidth});v&&s.push(v)}),{svgString:`
      <svg width="${l}" height="${a}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${a}" fill="white" />
        ${s.join("")}
      </svg>
    `,width:l,height:a}}function H_(){const t=_e(),e=nc(),n=bg(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});gc.saveAs(r,"open-web-cad--drawing.svg")}function b_(t,e,n,r){return new Promise((i,o)=>{const s=document.createElement("canvas"),l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const a=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);a.onload=()=>{s.width=e+r*2,s.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,s.width,s.height),l.drawImage(a,r,r),URL.revokeObjectURL(f),s.toBlob(d=>{d?i(d):o(new Error("Could not convert canvas to blob"))},"image/png")},a.src=f})}async function Q_(){const t=_e(),e=nc(),n=bg(t,e),r=await b_(n.svgString,n.width,n.height,20);gc.saveAs(r,"open-web-cad--drawing.png")}function Qg(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function K_(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Y_(){const t=K_();if(t.__xstate__)return t.__xstate__}const q_=t=>{if(typeof window>"u")return;const e=Y_();e&&e.register(t)};class Zf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Kg=".",J_="",Yg="",X_="#",Z_="*",qg="xstate.init",eE="xstate.error",Fu="xstate.stop";function tE(t,e){return{type:`xstate.after.${t}.${e}`}}function Uu(t,e){return{type:`xstate.done.state.${t}`,output:e}}function nE(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Jg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Xg(t){return{type:qg,input:t}}function It(t){setTimeout(()=>{throw t})}const rE=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zg(t,e){const n=ed(t),r=ed(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?Zg(n[i],r[i]):!1)}function mc(t){if(tm(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function ed(t){if(zE(t))return t.value;if(typeof t!="string")return t;const e=mc(t);return iE(e)}function iE(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function td(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function em(t){return tm(t)?t:[t]}function Jt(t){return t===void 0?[]:em(t)}function Bu(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function tm(t){return Array.isArray(t)}function oE(t){return t.type.startsWith("xstate.error.actor")}function Jn(t){return em(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function nm(t){if(!(t===void 0||t===J_))return Jt(t)}function Wu(t,e,n){var o,s,l;const r=typeof t=="object",i=r?t:void 0;return{next:(o=r?t.next:t)==null?void 0:o.bind(i),error:(s=r?t.error:e)==null?void 0:s.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function nd(t,e){return`${e}.${t}`}function vc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,s=t.getStateNodeById(i).config.invoke;return(Array.isArray(s)?s[r]:s).src}function rd(t,e){return`${t.sessionId}.${e}`}let sE=0;function lE(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,s={},{clock:l,logger:a}=e,c={schedule:(h,v,_,y,S=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:_,delay:y,id:S,startedAt:Date.now()},p=rd(h,S);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete s[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,_)},y);s[p]=m},cancel:(h,v)=>{const _=rd(h,v),y=s[_];delete s[_],delete d._snapshot._scheduledEvents[_],y!==void 0&&l.clearTimeout(y)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[v];_.source===h&&c.cancel(h,_.id)}}},f=h=>{if(!o.size)return;const v={...h,rootId:t.sessionId};o.forEach(_=>{var y;return(y=_.next)==null?void 0:y.call(_,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${sE++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const _=r.get(h);if(_&&_!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=Wu(h);return o.add(v),{unsubscribe(){o.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:_}),v._send(_)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:_,target:y,event:S,delay:g,id:p}=h[v];c.schedule(_,y,S,g,p)}},_clock:l,_logger:a};return d}const yc=1;let Pe=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const uE={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class mt{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Zf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Pe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...uE,...n},{clock:i,logger:o,parent:s,syncSnapshot:l,id:a,systemId:c,inspect:f}=r;this.system=s?s.system:lE(this,{clock:i,logger:o}),f&&!s&&this.system.inspect(Wu(f)),this.sessionId=this.system._bookId(),this.id=a??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=s,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const _=new Set([...h?h.values():[],...v?v.values():[]]);for(const y of Array.from(_))y(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,o;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(s){this._deferred.length=0,this._snapshot={...e,status:"error",error:s}}switch(this._snapshot.status){case"active":for(const s of this.observers)try{(i=s.next)==null||i.call(s,e)}catch(l){It(l)}break;case"done":for(const s of this.observers)try{(o=s.next)==null||o.call(s,e)}catch(l){It(l)}this._stopProcedure(),this._complete(),this._doneEvent=nE(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var o;const i=Wu(e,n,r);if(this._processingStatus!==Pe.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(o=i.complete)==null||o.call(i)}catch(s){It(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)It(s);else try{i.error(s)}catch(l){It(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Pe.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Pe.Running;const e=Xg(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Fu&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Pe.Stopped?this:(this.mailbox.clear(),this._processingStatus===Pe.NotStarted?(this._processingStatus=Pe.Stopped,this):(this.mailbox.enqueue({type:Fu}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){It(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||It(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(o){It(o)}}this.observers.clear(),n&&It(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Jg(this.id,e))}_stopProcedure(){return this._processingStatus!==Pe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Zf(this._process.bind(this)),this._processingStatus=Pe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Pe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:q_)(this)}toJSON(){return{xstate$$type:yc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[rE](){return this}getSnapshot(){return this._snapshot}}function Ss(t,...[e]){return new mt(t,e)}function aE(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,o]}function cE(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function fE(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=aE,e.execute=cE,e}function dE(t,e,n,r,{id:i,systemId:o,src:s,input:l,syncSnapshot:a}){const c=typeof s=="string"?vc(e.machine,s):s,f=typeof i=="function"?i(n):i;let d;return c&&(d=Ss(c,{id:f,src:s,parent:t.self,syncSnapshot:a,systemId:o,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[Vn(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function hE(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==Pe.Stopped&&n.start()})}function pE(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(s,l){}return o.type="snapshot.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=dE,o.execute=hE,o}function gE(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,s=typeof o=="string"?e.children[o]:o;let l=e.children;return s&&(l={...l},delete l[s.id]),[Vn(e,{children:l}),s]}function mE(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Pe.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function rm(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=gE,e.execute=mE,e}function _c(t,e,n,r){const{machine:i}=r,o=typeof t=="function",s=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!s)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof s!="function")return _c(s,e,n,r);const l={context:e,event:n},a=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(r,l,s):s(l,a)}const Ec=t=>t.type==="atomic"||t.type==="final";function zr(t){return Object.values(t.states).filter(e=>e.type!=="history")}function oo(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function Ts(t){const e=new Set(t),n=om(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))id(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of zr(r))if(i.type!=="history"&&!e.has(i)){const o=id(i);for(const s of o)e.add(s)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function im(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(Ec(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=im(i,e);return r}function om(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function sm(t,e){const n=Ts(e);return im(t,om(n))}function wc(t,e){return e.type==="compound"?zr(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?zr(e).every(n=>wc(t,n)):e.type==="final"}const Ys=t=>t[0]===X_;function vE(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===Z_)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let s=0;s<i.length;s++){const l=i[s],a=o[s];if(l==="*")return s===i.length-1;if(l!==a)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function yE(t){const e=t.config.after;if(!e)return[];const n=(i,o)=>{const s=tE(i,t.id),l=s.type;return t.entry.push(GE(s,{id:l,delay:i})),t.exit.push(fE(l)),l};return Object.keys(e).flatMap((i,o)=>{const s=e[i],l=typeof s=="string"?{target:s}:s,a=Number.isNaN(+i)?i:+i,c=n(a);return Jt(l).map(f=>({...f,event:c,delay:a}))}).map(i=>{const{delay:o}=i;return{...Tn(t,i.event,i),delay:o}})}function Tn(t,e,n){const r=nm(n.target),i=n.reenter??!1,o=wE(t,r),s={...n,actions:Jt(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...s,source:`#${t.id}`,target:o?o.map(l=>`#${l.id}`):void 0})};return s}function _E(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Yg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Jn(r).map(i=>Tn(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Jn(t.config.onDone).map(r=>Tn(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Jn(n.onDone).map(i=>Tn(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Jn(n.onError).map(i=>Tn(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Jn(n.onSnapshot).map(i=>Tn(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function EE(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:Jt(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function wE(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(Ys(n))return t.machine.getStateNodeById(n);const r=n[0]===Kg;if(r&&!t.parent)return Is(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return Is(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function lm(t){const e=nm(t.config.target);return e?{target:e.map(n=>typeof n=="string"?Is(t.parent,n):n)}:t.parent.initial}function Pn(t){return t.type==="history"}function id(t){const e=um(t);for(const n of e)for(const r of oo(n,t))e.add(r);return e}function um(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of zr(r))n(i)}}return n(t),e}function Dr(t,e){if(Ys(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function Is(t,e){if(typeof e=="string"&&Ys(e))try{return t.machine.getStateNodeById(e)}catch{}const n=mc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Dr(r,i)}return r}function xs(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Dr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const s=Dr(t,o);if(!s)return i;const l=xs(s,e[o]);return i.concat(l)},[]))}function SE(t,e,n,r){const o=Dr(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function TE(t,e,n,r){const i=Object.keys(e),o=Dr(t,i[0]),s=Sc(o,e[i[0]],n,r);return!s||!s.length?t.next(n,r):s}function IE(t,e,n,r){const i=[];for(const o of Object.keys(e)){const s=e[o];if(!s)continue;const l=Dr(t,o),a=Sc(l,s,n,r);a&&i.push(...a)}return i.length?i:t.next(n,r)}function Sc(t,e,n,r){return typeof e=="string"?SE(t,e,n,r):Object.keys(e).length===1?TE(t,e,n,r):IE(t,e,n,r)}function xE(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function hn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function CE(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function am(t,e,n){const r=new Set;for(const i of t){let o=!1;const s=new Set;for(const l of r)if(CE(Vu([i],e,n),Vu([l],e,n)))if(hn(i.source,l.source))s.add(l);else{o=!0;break}if(!o){for(const l of s)r.delete(l);r.add(i)}}return Array.from(r)}function PE(t){const[e,...n]=t;for(const r of oo(e,void 0))if(n.every(i=>hn(i,r)))return r}function Tc(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(Pn(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of Tc(lm(r),e))n.add(i);else n.add(r);return[...n]}function cm(t,e){const n=Tc(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||hn(i,t.source)))return t.source;const r=PE(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Vu(t,e,n){var i;const r=new Set;for(const o of t)if((i=o.target)!=null&&i.length){const s=cm(o,n);o.reenter&&o.source===s&&r.add(s);for(const l of e)hn(l,s)&&r.add(l)}return[...r]}function LE(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function ju(t,e,n,r,i,o){if(!t.length)return e;const s=new Set(e._nodes);let l=e.historyValue;const a=am(t,s,l);let c=e;i||([c,l]=kE(c,r,n,a,s,l,o)),c=Fr(c,r,n,a.flatMap(d=>d.actions),o),c=OE(c,r,n,a,s,o,l,i);const f=[...s];c.status==="done"&&(c=Fr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),o));try{return l===e.historyValue&&LE(e._nodes,s)?c:Vn(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function AE(t,e,n,r,i){if(r.output===void 0)return;const o=Uu(i.id,i.output!==void 0&&i.parent?Bu(i.output,t.context,e,n.self):void 0);return Bu(r.output,t.context,o,n.self)}function OE(t,e,n,r,i,o,s,l){let a=t;const c=new Set,f=new Set;NE(r,s,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,_)=>v.order-_.order)){i.add(h);const v=[];v.push(...h.entry);for(const _ of h.invoke)v.push(pE(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;v.push(..._)}if(a=Fr(a,e,n,v,o,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let y=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,S=y||h;for((_==null?void 0:_.type)==="compound"&&o.push(Uu(_.id,h.output!==void 0?Bu(h.output,a.context,e,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!d.has(y)&&wc(i,y);)d.add(y),o.push(Uu(y.id)),S=y,y=y.parent;if(y)continue;a=Vn(a,{status:"done",output:AE(a,e,n,a.machine.root,S)})}}return a}function NE(t,e,n,r){for(const i of t){const o=cm(i,e);for(const l of i.target||[])!Pn(l)&&(i.source!==l||i.source!==o||i.reenter)&&(r.add(l),n.add(l)),dr(l,e,n,r);const s=Tc(i,e);for(const l of s){const a=oo(l,o);(o==null?void 0:o.type)==="parallel"&&a.push(o),fm(r,e,n,a,!i.source.parent&&i.reenter?void 0:o)}}}function dr(t,e,n,r){var i;if(Pn(t))if(e[t.id]){const o=e[t.id];for(const s of o)r.add(s),dr(s,e,n,r);for(const s of o)Al(s,t.parent,r,e,n)}else{const o=lm(t);for(const s of o.target)r.add(s),o===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),dr(s,e,n,r);for(const s of o.target)Al(s,t.parent,r,e,n)}else if(t.type==="compound"){const[o]=t.initial.target;Pn(o)||(r.add(o),n.add(o)),dr(o,e,n,r),Al(o,t,r,e,n)}else if(t.type==="parallel")for(const o of zr(t).filter(s=>!Pn(s)))[...r].some(s=>hn(s,o))||(Pn(o)||(r.add(o),n.add(o)),dr(o,e,n,r))}function fm(t,e,n,r,i){for(const o of r)if((!i||hn(o,i))&&t.add(o),o.type==="parallel")for(const s of zr(o).filter(l=>!Pn(l)))[...t].some(l=>hn(l,s))||(t.add(s),dr(s,e,n,t))}function Al(t,e,n,r,i){fm(n,r,i,oo(t,e))}function kE(t,e,n,r,i,o,s){let l=t;const a=Vu(r,i,o);a.sort((f,d)=>d.order-f.order);let c;for(const f of a)for(const d of xE(f)){let h;d.history==="deep"?h=v=>Ec(v)&&hn(v,f):h=v=>v.parent===f,c??(c={...o}),c[d.id]=Array.from(i).filter(h)}for(const f of a)l=Fr(l,e,n,[...f.exit,...f.invoke.map(d=>rm(d.id))],s),i.delete(f);return[l,c||o]}let od=!1;function dm(t,e,n,r,i,o){const{machine:s}=t;let l=t;for(const c of r){let _=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{od=d,d(h,v)}finally{od=!1}};var a=_;const f=typeof c=="function",d=f?c:s.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===Pe.Running?_():n.defer(()=>{_()});continue}const y=d,[S,g,p]=y.resolve(n,l,h,v,d,i);l=S,"retryResolve"in y&&(o==null||o.push([y,g])),"execute"in y&&(n.self._processingStatus===Pe.Running?y.execute(n,g):n.defer(y.execute.bind(null,n,g))),p&&(l=dm(l,e,n,p,i,o))}return l}function Fr(t,e,n,r,i,o){const s=o?[]:void 0,l=dm(t,e,n,r,{internalQueue:i,deferredActorIds:o},s);return s==null||s.forEach(([a,c])=>{a.retryResolve(n,l,c)}),l}function Ol(t,e,n,r=[]){let i=t;const o=[];function s(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),o.push(c)}if(e.type===Fu)return i=Vn(sd(i,e,n),{status:"stopped"}),s(i,e,[]),{snapshot:i,microstates:o};let l=e;if(l.type!==qg){const c=l,f=oE(c),d=ld(c,i);if(f&&!d.length)return i=Vn(t,{status:"error",error:c.error}),s(i,c,[]),{snapshot:i,microstates:o};i=ju(d,t,n,l,!1,r),s(i,c,d)}let a=!0;for(;i.status==="active";){let c=a?RE(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=ld(l,i)}i=ju(c,i,n,l,!1,r),a=i!==f,s(i,l,c)}return i.status!=="active"&&sd(i,l,n),{snapshot:i,microstates:o}}function sd(t,e,n){return Fr(t,e,n,Object.values(t.children).map(r=>rm(r)),[])}function ld(t,e){return e.machine.getTransitionData(e,t)}function RE(t,e){const n=new Set,r=t._nodes.filter(Ec);for(const i of r)e:for(const o of[i].concat(oo(i,void 0)))if(o.always){for(const s of o.always)if(s.guard===void 0||_c(s.guard,t.context,e,t)){n.add(s);break e}}return am(Array.from(n),new Set(t._nodes),t.historyValue)}function ME(t,e){const n=Ts(xs(t,e));return sm(t,[...n])}function zE(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const DE=function(e){return Zg(e,this.value)},FE=function(e){return this.tags.has(e)},UE=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},BE=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:s,hasTag:l,matches:a,...c}=this;return{...c,tags:Array.from(n)}},WE=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Qo(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:sm(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:DE,hasTag:FE,can:UE,getMeta:WE,toJSON:BE}}function Vn(t,e={}){return Qo({...t,...e},t.machine)}function VE(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:s,can:l,hasTag:a,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const y in o){const S=o[y];v[y]={snapshot:S.getPersistedSnapshot(e),src:S.src,systemId:S._systemId,syncSnapshot:S._syncSnapshot}}return{...h,context:hm(s),children:v}}function hm(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:yc,id:r.id};else{const i=hm(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function jE(t,e,n,r,{event:i,id:o,delay:s},{internalQueue:l}){const a=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof s=="string"){const d=a&&a[s];f=typeof d=="function"?d(n,r):d}else f=typeof s=="function"?s(n,r):s;return typeof f!="number"&&l.push(c),[e,{event:c,id:o,delay:f}]}function $E(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function GE(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=jE,n.execute=$E,n}function HE(t,{machine:e,context:n},r,i){const o=(s,l={})=>{const{systemId:a,input:c}=l;if(typeof s=="string"){const f=vc(e,s);if(!f)throw new Error(`Actor logic '${s}' not implemented in machine '${e.id}'`);const d=Ss(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:s,systemId:a});return i[d.id]=d,d}else return Ss(s,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:s,systemId:a})};return(s,l)=>{const a=o(s,l);return i[a.id]=a,t.defer(()=>{a._processingStatus!==Pe.Stopped&&a.start()}),a}}function bE(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},s={context:e.context,event:n.event,spawn:HE(t,e,n.event,o),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(s,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(s,r):f}const a=Object.assign({},e.context,l);return[Vn(e,{context:a,children:Object.keys(o).length?{...e.children,...o}:e.children})]}function z(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=bE,e}let ud=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function QE(t,e,n,r,{to:i,event:o,id:s,delay:l},a){var _;const c=e.machine.implementations.delays;if(typeof o=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);const f=typeof o=="function"?o(n,r):o;let d;if(typeof l=="string"){const y=c&&c[l];d=typeof y=="function"?y(n,r):y}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===ud.Parent?v=t.self._parent:h===ud.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(_=a.deferredActorIds)!=null&&_.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:s,delay:d}]}function KE(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function YE(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:o}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,o);return}t.system._relay(t.self,n,r.type===eE?Jg(t.self.id,r.data):r)})}function kt(t,e,n){function r(i,o){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=QE,r.retryResolve=KE,r.execute=YE,r}const ad=new WeakMap;function Yn(t,e,n){let r=ad.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},ad.set(t,r)),r[e]}const qE={},si=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class Ic{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Kg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?td(this.config.states,(r,i)=>new Ic(r,{_parent:this,_key:i,_machine:this.machine})):qE,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Jt(this.config.entry).slice(),this.exit=Jt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Jt(e.tags).slice()}_initialize(){this.transitions=_E(this),this.config.always&&(this.always=Jn(this.config.always).map(e=>Tn(this,Yg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(si),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(si),eventType:null})}:void 0,history:this.history,states:td(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(si)})),entry:this.entry.map(si),exit:this.exit.map(si),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Yn(this,"invoke",()=>Jt(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??nd(this.id,n),s=typeof r=="string"?r:`xstate.invoke.${nd(this.id,n)}`;return{...e,src:s,id:o,systemId:i,toJSON(){const{onDone:l,onError:a,...c}=e;return{...c,type:"xstate.invoke",src:s,id:o}}}}))}get on(){return Yn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return Yn(this,"delayedTransitions",()=>yE(this))}get initial(){return Yn(this,"initial",()=>EE(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const s=Yn(this,`candidates-${r}`,()=>vE(this,r));for(const l of s){const{guard:a}=l,c=e.context;let f=!1;try{f=!a||_c(a,c,n,e)}catch(d){const h=typeof a=="string"?a:typeof a=="object"?a.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),o=l;break}}return o?[o]:void 0}get events(){return Yn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const JE="#";class xc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Ic(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new xc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=ME(this.root,e.value),r=Ts(xs(this.root,n));return Qo({_nodes:[...r],context:e.context||{},children:{},status:wc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return Ol(e,n,r).snapshot}microstep(e,n,r){return Ol(e,n,r).microstates}getTransitionData(e,n){return Sc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=Qo({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Fr(o,n,e,[z(({spawn:l,event:a,self:c})=>i({spawn:l,input:a.input,self:c}))],r):o}getInitialSnapshot(e,n){const r=Xg(n),i=[],o=this.getPreInitialState(e,r,i),s=ju([{target:[...um(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:l}=Ol(s,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=mc(e),r=n.slice(1),i=Ys(n[0])?n[0].slice(JE.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Is(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return VE(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(a=>{const c=i[a],f=c.snapshot,d=c.src,h=typeof d=="string"?vc(this,d):d;if(!h)return;const v=Ss(h,{id:a,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[a]=v});const o=Qo({...e,children:r,_nodes:Array.from(Ts(xs(this.root,e.value)))},this);let s=new Set;function l(a,c){if(!s.has(a)){s.add(a);for(let f in a){const d=a[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===yc){a[f]=c[d.id];continue}l(d,c)}}}}return l(o.context,r),o}}function jt(t,e){return new xc(t,e)}const pm=jt({types:{},context:{startPoint:null,type:F.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:z(()=>(Xe(!0),b(null),G([]),{startPoint:null})),RECORD_START_POINT:z({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new ct(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=Un(),n.lineWidth=Bn(),b(n)},DRAW_FINAL_LINE:z(({context:t,event:e})=>{console.log("drawFinalLine",{context:t,event:e});const n=e.worldClickPoint,r=new ct(t.startPoint,n);return r.lineColor=Un(),r.lineWidth=Bn(),Ue(r),b(new ct(n,n)),{startPoint:n}})}}),gm=jt({types:{},context:{startPoint:null,type:F.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{Xe(!0),b(null),G([])},RECORD_START_POINT:z(({event:t})=>({startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new Bt(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=Un(),n.lineWidth=Bn(),b(n)},DRAW_FINAL_RECTANGLE:z(({context:t,event:e})=>{const n=e.worldClickPoint,r=new Bt(t.startPoint,n);return r.lineColor=Un(),r.lineWidth=Bn(),Ue(r),b(null),{startPoint:null}})}}),mm=jt({types:{},context:{centerPoint:null,type:F.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:z(()=>(console.log("activate circle tool"),Xe(!0),b(null),G([]),{centerPoint:null})),RECORD_START_POINT:z({centerPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new Mr(t.centerPoint,dn(e.drawInfo.worldMouseLocation,t.centerPoint));n.lineColor=Un(),n.lineWidth=Bn(),b(n)},DRAW_FINAL_CIRCLE:z(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new Mr(t.centerPoint,dn(n,t.centerPoint));return r.lineColor=Un(),r.lineWidth=Bn(),Ue(r),b(null),{centerPoint:null}})}});function Ur(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const o=i.distanceTo(t);o&&o[0]<r[0]&&(r=o,n=i)}),{distance:r[0],segment:r[1],entity:n}}function XE(t,e){const n=Ur(e.worldClickPoint,_e());if(n&&n.distance<dc){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?G([r.id]):e.holdingCtrl?Rr(r)?G(Ae().filter(i=>i!==r.id)):G([...Ae(),r.id]):G([...Ae(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function ZE(t,e,n){const r=new Bt(t,e);console.log("Finish selection: ",r);const i=vm(r,t),o=ye(_e().map(s=>{if(i){if(s.intersectsWithBox(r.getBoundingBox())||s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id}else if(s.isContainedInBox(r.getBoundingBox()))return n&&Rr(s)?null:s.id;return null}));G(o)}function ew(t,e){const n=new Bt(t,e),r=vm(n,t);n.lineColor=r?D_:F_,n.lineWidth=U_,n.lineStyle=B_,b(n)}function vm(t,e){if(!t.getShape()||!e)return!1;const n=Math.min(...t.getShape().vertices.map(r=>r.x));return Math.abs(e.x-n)>Du}const Wt=jt({types:{},context:{startPoint:null,type:F.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),Xe(!1),b(null),G([])},HANDLE_FIRST_SELECT_POINT:z(({context:t,event:e})=>(console.log("handle first select point"),XE(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");ew(t.startPoint,e.drawInfo.worldMouseLocation)},SELECT_ENTITIES_INSIDE_RECTANGLE:z(({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");return ZE(t.startPoint,e.worldClickPoint,e.holdingCtrl),b(null),{startPoint:null}}),DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),Ks(v_()),G([]),b(null)},RESET_SELECTION:z(()=>(b(null),G([]),{startPoint:null}))}});function tw(t,e,n,r){const i=Qs(to([e,...r,t,n],Tt),[s=>dn(e,s)]),o=i.findIndex(s=>Tt(t,s));if(o===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[o-1]||e,i[o+1]||n]}function nw(t,e){const n=t.map(r=>({point:r,angle:new Nr(e,r).slope}));return Qs(n,[r=>r.angle]).map(r=>r.point)}function rw(t,e,n){const r=nw(to([...n,t],Tt),e.getShape().center),i=r.findIndex(o=>Tt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function iw(t,e,n){const r=Gg(to([...n,t],Tt),e.getShape().center,e.getShape().start),i=r.findIndex(o=>Tt(t,o));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function cd(t,e){return ye(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function fd(t,e,n){const r=t.getShape(),[i,o]=tw(e,r.start,r.end,n);S_([i,o].map(a=>new $i(a)));const l=t.cutAtPoints([i,o]).filter(a=>!a.containsPointOnShape(e));Ut(t),Ue(...l)}function ow(t,e,n){if(n.length===0){Ut(t);return}const[r,i]=rw(e,t,n),o=t.getShape(),s=o.center,l=[r,i,e].map(d=>Math.atan2(d.y-s.y,d.x-s.x)),[a,c]=sw(l[2],l[0],l[1])?[l[1],l[0]]:[l[0],l[1]],f=new nt(s,o.r,a,c,!0);Object.assign(f,{lineColor:t.lineColor,lineWidth:t.lineWidth}),Ut(t),Ue(f)}function sw(t,e,n){const r=2*Math.PI;return(t-e+r)%r<=(n-e+r)%r}function lw(t,e,n){const[r,i]=iw(e,t,n);if(Tt(r,i)){Ut(t);return}Ut(t),t.cutAtPoints([r,i]).filter(o=>!o.containsPointOnShape(e)).forEach(o=>{Object.assign(o,{lineColor:t.lineColor,lineWidth:t.lineWidth}),Ue(o)})}const uw=jt({types:{},context:{startPoint:null,type:F.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:z(()=>(console.log("activate eraser tool"),Xe(!0),b(null),G([]),{})),HANDLE_MOUSE_CLICK:z(({context:t,event:e})=>(aw(e.worldClickPoint),t))}});function aw(t){const e=Ur(t,_e());if(!e)return;const n=e.segment.start,r=cd(e.entity,_e());switch(e.entity.getType()){case te.Line:{const i=e.entity;fd(i,n,r);break}case te.Circle:{const i=e.entity;ow(i,n,r);break}case te.Arc:{const i=e.entity;lw(i,n,r);break}case te.Rectangle:{const i=e.entity,s=ot(i.getShape()).map(c=>new ct(c)),l=Ur(t,s);Ut(i),Ue(...s);const a=cd(l.entity,_e());fd(l.entity,n,a);break}}}function dd(t,e,n){t.forEach(r=>r.move(e,n))}const ym=jt({types:{},context:{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null,type:F.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ae().length>0),Ae().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ae().length===0),Ae().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move, then ENTER"},invoke:{id:"selectToolInsideTheMoveTool",src:Wt,onDone:{actions:z(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=xe())==null?void 0:t.getSnapshot()),{startPoint:null}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:kt("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:kt("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:kt("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_START_POINT","COPY_SELECTION_BEFORE_MOVE"],target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_ENTITIES"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:()=>{console.log("activate move tool"),Xe(!1),b(null),G([])},ENABLE_HELPERS:()=>{Xe(!0)},RECORD_START_POINT:z(({event:t})=>({startPoint:t.worldClickPoint})),COPY_SELECTION_BEFORE_MOVE:z(({context:t})=>{const e=oc();return lt(e),Ut(...e),G([]),{startPoint:t.startPoint,originalSelectedEntities:ye(e.map(n=>n.clone()))}}),DRAW_TEMP_MOVE_ENTITIES:z(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=e.drawInfo.worldMouseLocation,r=new ct(t.startPoint,n);r.lineColor=Vg,r.lineWidth=jg,r.lineStyle=$g,b(r);const i=t.lastDrawLocation||t.startPoint;return dd(bo(),n.x-i.x,n.y-i.y),{...t,lastDrawLocation:e.drawInfo.worldMouseLocation}}),MOVE_SELECTION:z(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");const n=t.lastDrawLocation||t.startPoint,r=e.worldClickPoint;return dd(bo(),r.x-n.x,r.y-n.y),Ue(...bo()),lt([]),G([]),{...t,startPoint:null,lastDrawLocation:null,originalSelectedEntities:[]}}),DESELECT_ENTITIES:z(()=>(b(null),G([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:z(({context:t})=>{const e=_e();return console.log({entities:e}),Ue(...t.originalSelectedEntities),lt([]),b(null),G([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Wt.implementations.actions}});var st=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t.FILE_SELECTED="FILE_SELECTED",t))(st||{});class Gi{constructor(e,n,r,i=0){V(this,"id",crypto.randomUUID());V(this,"lineColor","#fff");V(this,"lineWidth",1);V(this,"lineStyle");V(this,"imageElement");V(this,"polygon");V(this,"angle");this.imageElement=e,n instanceof fn?this.polygon=n:this.polygon=pc(n,r),r instanceof R?this.angle=i:this.angle=r}draw(e){ot(this.polygon).forEach(l=>{const a=St(l.start),c=St(l.end);e.context.beginPath(),e.context.moveTo(a.x,a.y),e.context.lineTo(c.x,c.y),e.context.stroke()});const n=this.polygon.box.center,r=n.x,i=n.y,o=this.polygon.box.width,s=this.polygon.box.height;e.context.translate(r,i),e.context.rotate(this.angle),e.context.drawImage(this.imageElement,-o/2,-s/2,o,s),e.context.rotate(-this.angle),e.context.translate(-r,-i)}move(e,n){this.polygon=this.polygon.translate(new Fn(e,n))}scale(e,n){const r=this.polygon.box.center,i=Wn(r,e,n);this.polygon=this.polygon.translate(new Fn(i.x-r.x,i.y-r.y))}rotate(e,n){this.polygon=this.polygon.rotate(n,e),this.angle+=n}clone(){const e=document.createElement("img");return e.src=this.imageElement.src,new Gi(e,this.polygon.clone())}intersectsWithBox(e){return Qa.relate(this.polygon,e).B2B.length>0}isContainedInBox(e){return e.contains(this.polygon)}distanceTo(e){const n=ot(this.polygon).map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.polygon.box}getShape(){return this.polygon}getSnapPoints(){const e=this.polygon.vertices,n=ot(this.polygon);return[{point:e[0],type:D.LineEndPoint},{point:e[1],type:D.LineEndPoint},{point:e[2],type:D.LineEndPoint},{point:e[3],type:D.LineEndPoint},{point:n[0].middle(),type:D.LineMidPoint},{point:n[1].middle(),type:D.LineMidPoint},{point:n[2].middle(),type:D.LineMidPoint},{point:n[3].middle(),type:D.LineMidPoint}]}getIntersections(e){const n=e.getShape();return n?ot(this.polygon).flatMap(r=>r.intersect(n)):[]}getFirstPoint(){var e;return((e=this.polygon)==null?void 0:e.vertices[0])||null}getSvgString(){return this.polygon.svg({strokeWidth:this.lineWidth,stroke:Qn(this.lineColor)})}getType(){return te.Image}containsPointOnShape(e){return ot(this.polygon).some(n=>n.contains(e))}async toJson(){return{id:this.id,type:te.Image,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{points:this.polygon.vertices.map(e=>({x:e.x,y:e.y})),imageData:this.imageElement.currentSrc}}}static async fromJson(e){const n=new fn(e.shapeData.points.map(o=>new R(o.x,o.y))),r=new Image;r.src=e.shapeData.imageData;const i=new Gi(r,n);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function hd(t,e,n,r){const i=Math.abs(n.x-r.x),o=Math.abs(n.y-r.y);if(i===0||o===0)return null;const s=t/e,l=i/o;if(s<l){const a=Math.abs(o*s),c=n.x<r.x?n.x:n.x-a,f=n.y<r.y?n.y:n.y-o;return new ln(c,f,c+a,f+o)}else{const a=Math.abs(i/s),c=n.x<r.x?n.x:n.x-i,f=n.y<r.y?n.y:n.y-a;return new ln(c,f,c+i,f+a)}}const _m=jt({types:{},context:{type:F.IMAGE_IMPORT,startPoint:null,imageElement:null},initial:"INIT",states:{INIT:{description:"Initializing the imageImport tool",always:{actions:"INIT_IMAGE_IMPORT_TOOL",target:"WAIT_FOR_IMAGE_DATA"}},WAIT_FOR_IMAGE_DATA:{description:"Select an image file to import",meta:{instructions:"Select an image file to import"},on:{[st.FILE_SELECTED]:{actions:"STORE_IMAGE_DATA",target:"WAITING_FOR_START_POINT"},ESC:{target:"INIT"}}},WAITING_FOR_START_POINT:{description:"Select the start point of the imageImport",meta:{instructions:"Select the start point of the imageImport"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the imageImport",meta:{instructions:"Select the end point of the imageImport"},on:{DRAW:{actions:"DRAW_TEMP_IMAGE_IMPORT"},MOUSE_CLICK:{actions:["DRAW_FINAL_IMAGE_IMPORT","SWITCH_TO_SELECT_TOOL"],target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_IMAGE_IMPORT_TOOL:z(()=>(Xe(!0),b(null),G([]),{startPoint:null})),STORE_IMAGE_DATA:z(({event:t})=>({imageElement:t.image})),RECORD_START_POINT:z({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_IMAGE_IMPORT:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageElement is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!hd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.drawInfo.worldMouseLocation))return;const r=new Gi(t.imageElement,new fn),i=new Bt(pc(t.startPoint,e.drawInfo.worldMouseLocation));b(r),uc([i])},DRAW_FINAL_IMAGE_IMPORT:z(({context:t,event:e})=>{if(console.log("drawFinalImageImport",{context:t,event:e}),!t.startPoint)throw new Error("[IMAGE_IMPORT] startPoint is not set when calling DRAW_TEMP_IMAGE_IMPORT");if(!t.imageElement)throw new Error("[IMAGE_IMPORT] imageArrayBuffer is not set when calling DRAW_TEMP_IMAGE_IMPORT");const n=hd(t.imageElement.naturalWidth,t.imageElement.naturalHeight,t.startPoint,e.worldClickPoint);if(!n)return{startPoint:null,imageElement:null};const r=new Gi(t.imageElement,j_(n));return Ue(r),{startPoint:null,imageArrayBuffer:null}}),SWITCH_TO_SELECT_TOOL:()=>{Lt(new mt(Wt))}}});function pd(t,e,n,r){const i=dn(e,r)/dn(e,n);t.forEach(o=>o.scale(e,i))}const cw=jt({types:{},context:{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[],type:F.SCALE},initial:"INIT",states:{INIT:{description:"Initializing the scale tool",always:{actions:"INIT_SCALE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ae().length>0),Ae().length>0),target:"WAITING_FOR_BASE_VECTOR_START_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ae().length===0),Ae().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to scale",meta:{instructions:"Select what you want to scale, then ENTER"},invoke:{id:"selectToolInsideTheScaleTool",src:Wt,onDone:{actions:z(()=>{var t;return console.log("select tool finished selection"),console.log("actor: ",(t=xe())==null?void 0:t.getSnapshot()),{baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:kt("selectToolInsideTheScaleTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_SCALE_TOOL"]},ENTER:{actions:kt("selectToolInsideTheScaleTool",({event:t})=>t)},DRAW:{actions:kt("selectToolInsideTheScaleTool",({event:t})=>t)}}},WAITING_FOR_BASE_VECTOR_START_POINT:{description:"Select the origin of the scale operation",meta:{instructions:"Select the origin of the scale operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_START_POINT"],target:"WAITING_FOR_BASE_VECTOR_END_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_BASE_VECTOR_END_POINT:{description:"Select the end of the base scale line",meta:{instructions:"Select the end of the base scale line"},on:{MOUSE_CLICK:{actions:["RECORD_BASE_VECTOR_END_POINT","COPY_SELECTION_BEFORE_SCALE"],target:"WAITING_FOR_SCALE_VECTOR_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_SCALE_VECTOR_END_POINT:{description:"Select the end of the scale line",meta:{instructions:"Select the end of the scale line"},on:{DRAW:{actions:["DRAW_TEMP_SCALE_ENTITIES"]},MOUSE_CLICK:{actions:["SCALE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_SCALE_TOOL:()=>{console.log("activate scale tool"),Xe(!1),b(null),G([])},ENABLE_HELPERS:()=>{Xe(!0)},RECORD_BASE_VECTOR_START_POINT:z(({context:t,event:e})=>({...t,baseVectorStartPoint:e.worldClickPoint})),RECORD_BASE_VECTOR_END_POINT:z(({context:t,event:e})=>({...t,baseVectorEndPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_SCALE:z(({context:t})=>{const e=oc();return lt(e),Ut(...e),G([]),{...t,originalSelectedEntities:ye(e.map(n=>n.clone()))}}),DRAW_TEMP_SCALE_ENTITIES:z(({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling draw temp scale entities without a base start point or base end point");const n=e.drawInfo.worldMouseLocation,r=ye(t.originalSelectedEntities.map(i=>i.clone()));return pd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),lt(r),{...t}}),SCALE_SELECTION:z(({context:t,event:e})=>{if(!t.baseVectorStartPoint||!t.baseVectorEndPoint)throw new Error("[SCALE] Calling scale selection without some scale vector endpoints");const n=e.worldClickPoint,r=ye(t.originalSelectedEntities.map(i=>i.clone()));return pd(r,t.baseVectorStartPoint,t.baseVectorEndPoint,n),Ue(...r),lt([]),G([]),{...t,baseVectorStartPoint:null,baseVectorEndPoint:null,scaleVectorEndPoint:null,originalSelectedEntities:[]}}),DESELECT_ENTITIES:z(()=>(b(null),G([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null})),RESTORE_ORIGINAL_ENTITIES:z(({context:t})=>{const e=_e();return console.log({entities:e}),Ue(...t.originalSelectedEntities),lt([]),b(null),G([]),{startPoint:null,originalSelectedEntities:[],lastDrawLocation:null}}),...Wt.implementations.actions}});function gd(t,e,n,r){const i=new Nr(e,r).slope-new Nr(e,n).slope;t.forEach(o=>o.rotate(e,i))}const fw=jt({types:{},context:{rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[],type:F.ROTATE},initial:"INIT",states:{INIT:{description:"Initializing the rotate tool",always:{actions:"INIT_ROTATE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ae().length>0),Ae().length>0),target:"WAITING_FOR_ROTATION_ORIGIN"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ae().length===0),Ae().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to rotate",meta:{instructions:"Select what you want to rotate, then ENTER"},invoke:{id:"selectToolInsideTheRotateTool",src:Wt,onDone:{actions:z(({context:t})=>{var e;return console.log("select tool finished selection"),console.log("actor: ",(e=xe())==null?void 0:e.getSnapshot()),{...t}}),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:kt("selectToolInsideTheRotateTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_ROTATE_TOOL"]},ENTER:{actions:kt("selectToolInsideTheRotateTool",({event:t})=>t)},DRAW:{actions:kt("selectToolInsideTheRotateTool",({event:t})=>t)}}},WAITING_FOR_ROTATION_ORIGIN:{description:"Select the origin of the rotate operation",meta:{instructions:"Select the origin of the rotate operation"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ORIGIN"],target:"WAITING_FOR_ANGLE_START_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_START_POINT:{description:"Select the end of the base rotate line",meta:{instructions:"Select the end of the base rotate line"},on:{MOUSE_CLICK:{actions:["RECORD_ROTATION_ANGLE_START_POINT","COPY_SELECTION_BEFORE_ROTATE"],target:"WAITING_FOR_ANGLE_END_POINT"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}},WAITING_FOR_ANGLE_END_POINT:{description:"Select the end of the rotate line",meta:{instructions:"Select the end of the rotate line"},on:{DRAW:{actions:["DRAW_TEMP_ROTATE_ENTITIES"]},MOUSE_CLICK:{actions:["ROTATE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"RESTORE_ORIGINAL_ENTITIES",target:"INIT"}}}}},{actions:{INIT_ROTATE_TOOL:()=>{console.log("activate rotate tool"),Xe(!1),b(null),G([])},ENABLE_HELPERS:()=>{Xe(!0)},RECORD_ROTATION_ORIGIN:z(({context:t,event:e})=>({...t,rotationOrigin:e.worldClickPoint})),RECORD_ROTATION_ANGLE_START_POINT:z(({context:t,event:e})=>({...t,angleStartPoint:e.worldClickPoint})),COPY_SELECTION_BEFORE_ROTATE:z(({context:t})=>{const e=oc();return lt(e),Ut(...e),G([]),{...t,originalSelectedEntities:ye(e.map(n=>n.clone()))}}),DRAW_TEMP_ROTATE_ENTITIES:z(({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling draw temp rotate entities without a base start point or base end point");const n=e.drawInfo.worldMouseLocation,r=ye(t.originalSelectedEntities.map(i=>i.clone()));return gd(r,t.rotationOrigin,t.angleStartPoint,n),lt(r),{...t}}),ROTATE_SELECTION:z(({context:t,event:e})=>{if(!t.rotationOrigin||!t.angleStartPoint)throw new Error("[ROTATE] Calling rotate selection without some rotate vector endpoints");const n=e.worldClickPoint,r=ye(t.originalSelectedEntities.map(i=>i.clone()));return gd(r,t.rotationOrigin,t.angleStartPoint,n),Ue(...r),lt([]),G([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]}}),DESELECT_ENTITIES:z(({context:t})=>(b(null),G([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]})),RESTORE_ORIGINAL_ENTITIES:z(({context:t})=>{const e=_e();return console.log({entities:e}),Ue(...t.originalSelectedEntities),lt([]),b(null),G([]),{...t,rotationOrigin:null,angleStartPoint:null,originalSelectedEntities:[]}}),...Wt.implementations.actions}}),Em={[F.LINE]:pm,[F.RECTANGLE]:gm,[F.CIRCLE]:mm,[F.SELECT]:Wt,[F.ERASER]:uw,[F.MOVE]:ym,[F.SCALE]:cw,[F.ROTATE]:fw,[F.IMAGE_IMPORT]:_m};function dw(t){return new Promise(e=>{if(!t)return;const n=new Image;n.onload=function(){e(n)},n.src=URL.createObjectURL(t)})}const hw=()=>{const[t,e]=O.useState(F.LINE),[n,r]=O.useState(45),[i,o]=O.useState("#FFF"),[s,l]=O.useState(1),[a,c]=O.useState(1),f=O.useCallback(()=>{var y,S;e((S=(y=xe())==null?void 0:y.getSnapshot())==null?void 0:S.context.type),r(Rg()),o(Un()),l(Bn()),c(Ft())},[]),d=y=>{y.ctrlKey&&y.preventDefault()};O.useEffect(()=>(window.addEventListener("wheel",d,{passive:!1}),window.addEventListener(ws.UPDATE_STATE,f),()=>{window.removeEventListener("wheel",d),window.removeEventListener(ws.UPDATE_STATE,f)}),[f]);const h=O.useCallback(y=>{var g;(g=xe())==null||g.stop();const S=new mt(Em[y]);Lt(S),e(y)},[]),v=O.useCallback(y=>{r(y),T_(y,!1)},[]),_=O.useCallback(()=>{zg(1),ac(new R(0,0))},[]);return k.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[k.jsx(q,{title:"Select (s)",icon:Te.Direction,onClick:()=>{h(F.SELECT)},active:t===F.SELECT}),k.jsx(q,{title:"Line (l)",icon:Te.Line,onClick:()=>{h(F.LINE)},active:t===F.LINE}),k.jsx(q,{title:"Rectangle (r)",icon:Te.Square,onClick:()=>{h(F.RECTANGLE)},active:t===F.RECTANGLE}),k.jsx(q,{title:"Circle (c)",icon:Te.Circle,onClick:()=>{h(F.CIRCLE)},active:t===F.CIRCLE}),k.jsx(q,{className:"mt-2",title:"Move",icon:Te.Expand,iconClassname:"transform rotate-45",onClick:()=>h(F.MOVE),active:t===F.MOVE}),k.jsx(q,{title:"Scale",icon:Te.Expand,onClick:()=>h(F.SCALE),active:t===F.SCALE}),k.jsx(q,{title:"Rotate",icon:Te.Clockwise,onClick:()=>h(F.ROTATE),active:t===F.ROTATE}),k.jsx(q,{className:"mt-2",title:"Undo (ctrl + z)",icon:Te.ArrowLeftCircle,onClick:()=>Bg()}),k.jsx(q,{title:"Redo (ctrl + shift + z)",icon:Te.ArrowRightCircle,onClick:()=>Wg()}),k.jsx(q,{className:"mt-2",title:"Delete segments",icon:Te.Crop,onClick:()=>h(F.ERASER),active:t===F.ERASER}),k.jsx(xl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:V_.map(y=>k.jsx(q,{title:"Change line color",style:{backgroundColor:y},active:y===i,onClick:()=>C_(y)},"line-color--"+y))}),k.jsx(xl,{title:"Line width",label:String(s)+"px",children:Qg(9).map(y=>{const S=y+1;return k.jsx(q,{title:"Change line width",label:String(S)+"px",active:S===s,onClick:()=>P_(S)},"line-width--"+S)})}),k.jsxs(xl,{title:"Snap angles",label:n+"",children:[k.jsx(q,{title:"Add guide every 5 degrees",label:"5",onClick:()=>v(5),active:n===5}),k.jsx(q,{title:"Add guide every 15 degrees",label:"15",onClick:()=>v(15),active:n===15}),k.jsx(q,{title:"Add guide every 30 degrees",label:"30",onClick:()=>v(30),active:n===30}),k.jsx(q,{title:"Add guide every 45 degrees",label:"45",onClick:()=>v(45),active:n===45}),k.jsx(q,{title:"Add guide every 90 degrees",label:"90",onClick:()=>v(90),active:n===90})]}),k.jsx(q,{title:"Zoom level",label:(a*100).toFixed(0)+"%",onClick:_}),k.jsx(q,{className:"relative mt-2",title:"Import image into the current drawing",icon:Te.Image,onClick:Kf,children:k.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.jpg,*.jpeg,*.png",onChange:async y=>{var p;const S=await dw((p=y.target.files)==null?void 0:p[0]),g=new mt(_m);g.start(),g.send({type:st.FILE_SELECTED,image:S}),Lt(g),y.target.files=null}})}),k.jsx(q,{className:"relative",title:"Load from JSON file",icon:Te.Folder,onClick:Kf,children:k.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async y=>{var S;await $_((S=y.target.files)==null?void 0:S[0]),y.target.files=null}})}),k.jsx(q,{title:"Save to JSON file",icon:Te.Save,onClick:()=>G_()}),k.jsx(q,{title:"Export to SVG file",label:"SVG",onClick:()=>H_()}),k.jsx(q,{title:"Export to PNG file",label:"PNG",onClick:()=>Q_()}),k.jsx(q,{className:"mt-2",title:"Github",icon:Te.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function pw(){return k.jsx("div",{children:k.jsx(hw,{})})}function md(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const o=t[i];e.push(...r.getIntersections(o))}}return e}function $u(t,e){let n=null,r=1/0;return t.forEach(i=>{const o=dn(i.point,e);o<r&&(r=o,n=i)}),{distance:r,snapPoint:n}}function Gu(t,e,n){const{distance:r,snapPoint:i}=$u(t.filter(l=>l.type!==D.AngleGuide),e);if(r<n)return i;const{distance:o,snapPoint:s}=$u(t.filter(l=>l.type===D.AngleGuide),e);return o<n?s:null}function gw(t,e){return Qg(180/e,n=>{const i=n*e*(Math.PI/180),o=t.x+Math.cos(i),s=t.y+Math.sin(i);return new ct(new R(t.x-1e4*(o-t.x),t.y-1e4*(s-t.y)),new R(t.x+1e4*(o-t.x),t.y+1e4*(s-t.y)))})}function mw(t,e,n,r,i){let o=null,s=null;const l=[],a=[];e.forEach(v=>{const _=gw(v,r),y=Ur(n,_);y.distance<M_&&(a.push(y.entity),l.push({point:y.segment.start,type:D.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...md(ye(t)).map(v=>({point:v,type:D.Intersection}))],f=Gu(c,n,i);f&&(o=f);const d=[...l,...md([...ye(t),...a]).map(v=>({point:v,type:D.Intersection}))],h=Gu(d,n,i);return h&&(s=h),{angleGuides:a,entitySnapPoint:o,angleSnapPoint:s}}function Qr(t,e,n,r,i,o=[]){t.strokeStyle=r,t.lineWidth=i,t.setLineDash(o),e&&(t.lineWidth=i+1),n&&t.setLineDash([5,5])}function vd(t,e){e.forEach(n=>{Qr(t.context,sc(n),Rr(n),n.lineColor,n.lineWidth),n.draw(t)})}function vw(t,e){e.forEach(n=>{Qr(t.context,sc(n),Rr(n),"#FF5500",1),n.draw(t)})}function yw(t,e,n){if(!e)return;const r=St(e.point);Qr(t.context,!1,!1,R_,1);const i=t.context;switch(n&&(i.beginPath(),i.moveTo(r.x-W/2,r.y),i.lineTo(r.x+W/2,r.y),i.moveTo(r.x,r.y-W/2),i.lineTo(r.x,r.y+W/2),i.stroke()),e.type){case D.LineEndPoint:i.strokeRect(r.x-W/2,r.y-W/2,W,W);break;case D.LineMidPoint:i.beginPath(),i.moveTo(r.x,r.y-W/2),i.lineTo(r.x-W/2,r.y+W/2),i.lineTo(r.x+W/2,r.y+W/2),i.closePath(),i.stroke();break;case D.AngleGuide:i.beginPath(),i.moveTo(r.x-W/2,r.y-W/2),i.lineTo(r.x+W/2,r.y-W/2),i.lineTo(r.x-W/2,r.y+W/2),i.lineTo(r.x+W/2,r.y+W/2),i.closePath(),i.stroke();break;case D.Intersection:i.beginPath(),i.moveTo(r.x-W/2,r.y-W/2),i.lineTo(r.x+W/2,r.y+W/2),i.moveTo(r.x+W/2,r.y-W/2),i.lineTo(r.x-W/2,r.y+W/2),i.stroke();break;case D.CircleCenter:i.beginPath(),i.arc(r.x,r.y,W/2,0,2*Math.PI),i.stroke();break;case D.CircleCardinal:i.beginPath(),i.moveTo(r.x,r.y-W/2),i.lineTo(r.x-W/2,r.y),i.lineTo(r.x,r.y+W/2),i.lineTo(r.x+W/2,r.y),i.closePath(),i.stroke();break}}function _w(t,e){e.forEach(n=>{Qr(t.context,sc(n),Rr(n),Vg,jg,$g),n.draw(t)})}function Ew(t,e){e&&(Qr(t.context,!1,!1,e.lineColor,e.lineWidth,e.lineStyle),e==null||e.draw(t))}function ww(t,e){e&&(Qr(t.context,!1,!1,"#FFF",1),t.context.beginPath(),t.context.moveTo(t.screenMouseLocation.x,t.screenMouseLocation.y-Ao),t.context.lineTo(t.screenMouseLocation.x,t.screenMouseLocation.y+Ao),t.context.moveTo(t.screenMouseLocation.x-Ao,t.screenMouseLocation.y),t.context.lineTo(t.screenMouseLocation.x+Ao,t.screenMouseLocation.y),t.context.stroke())}function Sw(t){var e,n;t.canvasSize!==null&&t.context&&(t.context.fillStyle=k_,t.context.fillRect(0,0,(e=t.canvasSize)==null?void 0:e.x,(n=t.canvasSize)==null?void 0:n.y))}function Tw(t){Sw(t),_w(t,d_()),vd(t,bo()),vd(t,_e()),vw(t,p_()),Ew(t,kg());const{snapPoint:e}=$u(ye([rc(),Mg()]),br()),n=!!e&&ic().some(r=>r.milliSecondsHovered>hc&&Tt(r.snapPoint.point,e.point));yw(t,e,n),ww(t,f_())}function Iw(t,e,n,r,i){if(!t)return;const o=e.at(-1);let s;o?dn(t.point,o.snapPoint.point)<r?s=[...e.slice(0,e.length-1),{...o,milliSecondsHovered:o.milliSecondsHovered+i}]:o.milliSecondsHovered>=hc?s=[...e,{snapPoint:t,milliSecondsHovered:i}]:s=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:s=[{snapPoint:t,milliSecondsHovered:i}];const l=s.slice(0,z_);n(l)}Nl.createRoot(document.getElementById("root")).render(k.jsx(Vm.StrictMode,{children:k.jsx(pw,{})}));function xw(){lc(!0)}function Cw(t){var i,o;lc(!0),E_(new R(t.clientX,t.clientY));const e=g_(),n=ro(),r=Ft();if(e){const s=new R(n.x-(t.clientX-e.x)/r,n.y-(t.clientY-e.y)/r);cc(new R(t.clientX,t.clientY)),ac(s)}if(kw(),((o=(i=xe())==null?void 0:i.getSnapshot())==null?void 0:o.context.type)===F.SELECT){const s=Ur(br(),_e());s.distance<dc?zu([s.entity.id]):zu([])}}function Pw(){lc(!1)}function Lw(t){const e=ro(),n=Ft(),r=br(),i=n*(1-W_*(t.deltaY/Math.abs(t.deltaY)));zg(i);const o=bs(Ng());ac(new R(e.x+(r.x-o.x),e.y+(r.y-o.y)))}function Aw(t){t.button===Es.Middle&&cc(new R(t.clientX,t.clientY))}function Ow(t){if(t.button===Es.Middle&&cc(null),t.button===Es.Left){const e=Gu(ye([rc(),Mg()]),br(),fc/Ft()),n=bs(new R(t.clientX,t.clientY)),r=e?e.point:n,i=xe();i==null||i.send({type:st.MOUSE_CLICK,worldClickPoint:r,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function Nw(t){var e,n,r,i,o;t.key==="Escape"?(t.preventDefault(),(e=xe())==null||e.send({type:st.ESC})):t.key==="Enter"?(t.preventDefault(),(n=xe())==null||n.send({type:st.ENTER})):t.key==="Delete"?(t.preventDefault(),(r=xe())==null||r.send({type:st.DELETE})):t.key==="z"&&t.ctrlKey&&!t.shiftKey?(t.preventDefault(),Bg(),b(null),G([]),(i=xe())==null||i.send({type:st.ESC})):t.key==="z"&&t.ctrlKey&&t.shiftKey?(t.preventDefault(),Wg(),b(null),G([]),(o=xe())==null||o.send({type:st.ESC})):t.key==="l"?(t.preventDefault(),Lt(new mt(pm))):t.key==="c"?(t.preventDefault(),Lt(new mt(mm))):t.key==="r"?(t.preventDefault(),Lt(new mt(gm))):t.key==="s"?(t.preventDefault(),Lt(new mt(Wt))):t.key==="m"&&(t.preventDefault(),Lt(new mt(ym)))}function kw(){const t=Rg(),e=kg(),n=_e(),r=Ft(),i=br(),l=ic().filter(a=>a.milliSecondsHovered>hc).map(a=>a.snapPoint.point);if(h_()){let a=null;e&&e.getShape()&&e.getFirstPoint()&&(a=e.getFirstPoint());const{angleGuides:c,entitySnapPoint:f,angleSnapPoint:d}=mw(n,ye([a,...l]),i,t,fc/r);uc(c),Dg(f),Fg(d)}}function wm(t,e){var f,d,h,v,_;const n=nc(),r=Ng(),i=br(),o=Ft(),s=ro(),l=m_(),a=e-l;x_(e);const c={context:t,canvasSize:n,worldMouseLocation:i,screenMouseLocation:r,screenOffset:s,screenZoom:o};if((f=xe())!=null&&f.getSnapshot().can({type:st.DRAW})&&((d=xe())==null||d.send({type:st.DRAW,drawInfo:c})),((_=(v=(h=xe())==null?void 0:h.getSnapshot())==null?void 0:v.context)==null?void 0:_.type)===F.SELECT){const{distance:y,entity:S}=Ur(bs(r),_e());y<dc&&zu([S.id])}Iw(rc(),ic(),I_,fc/Ft(),a),Tw(c),requestAnimationFrame(y=>{wm(t,y)})}function yd(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),y_(new R(window.innerWidth,window.innerHeight));const t=a_();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function Rw(){const t=document.getElementsByTagName("canvas")[0];if(t){__(t),t.addEventListener("mousedown",Aw),t.addEventListener("mousemove",Cw),t.addEventListener("mouseup",Ow),t.addEventListener("wheel",Lw),t.addEventListener("mouseout",Pw),t.addEventListener("mouseenter",xw),document.addEventListener("keyup",Nw),window.addEventListener("resize",yd),yd();const e=t.getContext("2d");if(!e)return;wm(e,0);const n=new mt(Em[F.LINE]);n.start(),Lt(n)}}document.addEventListener("DOMContentLoaded",()=>{Rw()});
